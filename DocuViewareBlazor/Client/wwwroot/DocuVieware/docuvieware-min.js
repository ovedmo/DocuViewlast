/*
 jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license  jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var z=0;return function(){return z<c.length?{done:!1,value:c[z++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,z,E){if(c==Array.prototype||c==Object.prototype)return c;c[z]=E.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var z=0;z<c.length;++z){var E=c[z];if(E&&E.Math==Math)return E}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,z){var E=$jscomp.propertyToPolyfillSymbol[z];if(null==E)return c[z];E=c[E];return void 0!==E?E:c[z]};
$jscomp.polyfill=function(c,z,E,M){z&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,z,E,M):$jscomp.polyfillUnisolated(c,z,E,M))};$jscomp.polyfillUnisolated=function(c,z,E,M){E=$jscomp.global;c=c.split(".");for(M=0;M<c.length-1;M++){var u=c[M];if(!(u in E))return;E=E[u]}c=c[c.length-1];M=E[c];z=z(M);z!=M&&null!=z&&$jscomp.defineProperty(E,c,{configurable:!0,writable:!0,value:z})};
$jscomp.polyfillIsolated=function(c,z,E,M){var u=c.split(".");c=1===u.length;M=u[0];M=!c&&M in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var t=0;t<u.length-1;t++){var g=u[t];if(!(g in M))return;M=M[g]}u=u[u.length-1];E=$jscomp.IS_SYMBOL_NATIVE&&"es6"===E?M[u]:null;z=z(E);null!=z&&(c?$jscomp.defineProperty($jscomp.polyfills,u,{configurable:!0,writable:!0,value:z}):z!==E&&(void 0===$jscomp.propertyToPolyfillSymbol[u]&&(E=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[u]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(u):$jscomp.POLYFILL_PREFIX+E+"$"+u),$jscomp.defineProperty(M,$jscomp.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:z})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var z=function(t,g){this.$jscomp$symbol$id_=t;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};z.prototype.toString=function(){return this.$jscomp$symbol$id_};var E="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",M=0,u=function(t){if(this instanceof u)throw new TypeError("Symbol is not a constructor");return new z(E+(t||"")+"_"+M++,t)};return u},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var z="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),E=0;E<z.length;E++){var M=$jscomp.global[z[E]];"function"===typeof M&&"function"!=typeof M.prototype[c]&&$jscomp.defineProperty(M.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.findInternal=function(c,z,E){c instanceof String&&(c=String(c));for(var M=c.length,u=0;u<M;u++){var t=c[u];if(z.call(E,t,u,c))return{i:u,v:t}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(z,E){return $jscomp.findInternal(this,z,E).v}},"es6","es3");
$jscomp.polyfill("Number.isFinite",function(c){return c?c:function(z){return"number"!==typeof z?!1:!isNaN(z)&&Infinity!==z&&-Infinity!==z}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(c){return c?c:function(z){return Number.isFinite(z)?z===Math.floor(z):!1}},"es6","es3");
$jscomp.checkStringArgs=function(c,z,E){if(null==c)throw new TypeError("The 'this' value for String.prototype."+E+" must not be null or undefined");if(z instanceof RegExp)throw new TypeError("First argument to String.prototype."+E+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(z,E){var M=$jscomp.checkStringArgs(this,z,"endsWith");z+="";void 0===E&&(E=M.length);E=Math.max(0,Math.min(E|0,M.length));for(var u=z.length;0<u&&0<E;)if(M[--E]!=z[--u])return!1;return 0>=u}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(z,E,M){var u=this.length||0;0>E&&(E=Math.max(0,u+E));if(null==M||M>u)M=u;M=Number(M);0>M&&(M=Math.max(0,u+M));for(E=Number(E||0);E<M;E++)this[E]=z;return this}},"es6","es3");$jscomp.typedArrayFill=function(c){return c?c:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Math.trunc",function(c){return c?c:function(z){z=Number(z);if(isNaN(z)||Infinity===z||-Infinity===z||0===z)return z;var E=Math.floor(Math.abs(z));return 0>z?-E:E}},"es6","es3");
$jscomp.iteratorFromArray=function(c,z){c instanceof String&&(c+="");var E=0,M=!1,u={next:function(){if(!M&&E<c.length){var t=E++;return{value:z(t,c[t]),done:!1}}M=!0;return{done:!0,value:void 0}}};u[Symbol.iterator]=function(){return u};return u};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(z){return z})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(z){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var E,M,u;for(E=u=0;E<arguments.length;E++)u=Math.max(u,Math.abs(arguments[E]));if(1E100<u||1E-100>u){if(!u)return u;for(E=M=0;E<arguments.length;E++){var t=Number(arguments[E])/u;M+=t*t}return Math.sqrt(M)*u}for(E=M=0;E<arguments.length;E++)t=Number(arguments[E]),M+=t*t;return Math.sqrt(M)}},"es6","es3");
!function(c,z){"object"==typeof module&&"object"==typeof module.exports?module.exports=c.document?z(c,!0):function(E){if(!E.document)throw Error("jQuery requires a window with a document");return z(E)}:z(c)}("undefined"!=typeof window?window:this,function(c,z){function E(f,m,r){var w,B,G=(r=r||ra).createElement("script");if(G.text=f,m)for(w in Gb)(B=m[w]||m.getAttribute&&m.getAttribute(w))&&G.setAttribute(w,B);r.head.appendChild(G).parentNode.removeChild(G)}function M(f){return null==f?f+"":"object"==
typeof f||"function"==typeof f?gb[La.call(f)]||"object":typeof f}function u(f){var m=!!f&&"length"in f&&f.length,r=M(f);return!na(f)&&!nb(f)&&("array"===r||0===m||"number"==typeof m&&0<m&&m-1 in f)}function t(f,m){return f.nodeName&&f.nodeName.toLowerCase()===m.toLowerCase()}function g(f,m,r){return na(m)?v.grep(f,function(w,B){return!!m.call(w,B,w)!==r}):m.nodeType?v.grep(f,function(w){return w===m!==r}):"string"!=typeof m?v.grep(f,function(w){return-1<Xa.call(m,w)!==r}):v.filter(m,f,r)}function l(f,
m){for(;(f=f[m])&&1!==f.nodeType;);return f}function p(f){return f}function A(f){throw f;}function D(f,m,r,w){var B;try{f&&na(B=f.promise)?B.call(f).done(m).fail(r):f&&na(B=f.then)?B.call(f,m,r):m.apply(void 0,[f].slice(w))}catch(G){r.apply(void 0,[G])}}function L(){ra.removeEventListener("DOMContentLoaded",L);c.removeEventListener("load",L);v.ready()}function P(f,m){return m.toUpperCase()}function Q(f){return f.replace(Zc,"ms-").replace($c,P)}function R(){this.expando=v.expando+R.uid++}function X(f,
m,r){var w,B;if(void 0===r&&1===f.nodeType)if(w="data-"+m.replace(ad,"-$&").toLowerCase(),"string"==typeof(r=f.getAttribute(w))){try{r="true"===(B=r)||"false"!==B&&("null"===B?null:B===+B+""?+B:bd.test(B)?JSON.parse(B):B)}catch(G){}qb.set(f,m,r)}else r=void 0;return r}function da(f,m,r,w){var B,G,I=20,N=w?function(){return w.cur()}:function(){return v.css(f,m,"")},S=N(),Z=r&&r[3]||(v.cssNumber[m]?"":"px"),ia=f.nodeType&&(v.cssNumber[m]||"px"!==Z&&+S)&&Ub.exec(v.css(f,m));if(ia&&ia[3]!==Z){S/=2;Z=
Z||ia[3];for(ia=+S||1;I--;)v.style(f,m,ia+Z),0>=(1-G)*(1-(G=N()/S||.5))&&(I=0),ia/=G;ia*=2;v.style(f,m,ia+Z);r=r||[]}return r&&(ia=+ia||+S||0,B=r[1]?ia+(r[1]+1)*r[2]:+r[2],w&&(w.unit=Z,w.start=ia,w.end=B)),B}function ea(f,m){for(var r,w,B,G,I,N,S,Z=[],ia=0,W=f.length;ia<W;ia++)(w=f[ia]).style&&(r=w.style.display,m?("none"===r&&(Z[ia]=Ha.get(w,"display")||null,Z[ia]||(w.style.display="")),""===w.style.display&&cc(w)&&(Z[ia]=(S=I=G=void 0,I=(B=w).ownerDocument,N=B.nodeName,(S=vc[N])||(G=I.body.appendChild(I.createElement(N)),
S=v.css(G,"display"),G.parentNode.removeChild(G),"none"===S&&(S="block"),vc[N]=S)))):"none"!==r&&(Z[ia]="none",Ha.set(w,"display",r)));for(ia=0;ia<W;ia++)null!=Z[ia]&&(f[ia].style.display=Z[ia]);return f}function ua(f,m){var r;return r="undefined"!=typeof f.getElementsByTagName?f.getElementsByTagName(m||"*"):"undefined"!=typeof f.querySelectorAll?f.querySelectorAll(m||"*"):[],void 0===m||m&&t(f,m)?v.merge([f],r):r}function V(f,m){for(var r=0,w=f.length;r<w;r++)Ha.set(f[r],"globalEval",!m||Ha.get(m[r],
"globalEval"))}function ja(f,m,r,w,B){for(var G,I,N,S,Z=m.createDocumentFragment(),ia=[],W=0,va=f.length;W<va;W++)if((G=f[W])||0===G)if("object"===M(G))v.merge(ia,G.nodeType?[G]:G);else if(cd.test(G)){I=I||Z.appendChild(m.createElement("div"));N=(wc.exec(G)||["",""])[1].toLowerCase();N=xb[N]||xb._default;I.innerHTML=N[1]+v.htmlPrefilter(G)+N[2];for(N=N[0];N--;)I=I.lastChild;v.merge(ia,I.childNodes);(I=Z.firstChild).textContent=""}else ia.push(m.createTextNode(G));Z.textContent="";for(W=0;G=ia[W++];)if(w&&
-1<v.inArray(G,w))B&&B.push(G);else if(S=Sb(G),I=ua(Z.appendChild(G),"script"),S&&V(I),r)for(N=0;G=I[N++];)xc.test(G.type||"")&&r.push(G);return Z}function ka(){return!0}function ma(){return!1}function sa(f,m){a:{try{var r=ra.activeElement;break a}catch(w){}r=void 0}return f===r==("focus"===m)}function Aa(f,m,r,w,B,G){var I,N;if("object"==typeof m){for(N in"string"!=typeof r&&(w=w||r,r=void 0),m)Aa(f,N,r,w,m[N],G);return f}if(null==w&&null==B?(B=r,w=r=void 0):null==B&&("string"==typeof r?(B=w,w=void 0):
(B=w,w=r,r=void 0)),!1===B)B=ma;else if(!B)return f;return 1===G&&(I=B,(B=function(S){return v().off(S),I.apply(this,arguments)}).guid=I.guid||(I.guid=v.guid++)),f.each(function(){v.event.add(this,m,B,w,r)})}function a(f,m,r){r?(Ha.set(f,m,!1),v.event.add(f,m,{namespace:!1,handler:function(w){var B,G,I=Ha.get(this,m);if(1&w.isTrigger&&this[m])if(I.length)(v.event.special[m]||{}).delegateType&&w.stopPropagation();else{if(I=jb.call(arguments),Ha.set(this,m,I),B=r(this,m),this[m](),I!==(G=Ha.get(this,
m))||B?Ha.set(this,m,!1):G={},I!==G)return w.stopImmediatePropagation(),w.preventDefault(),G.value}else I.length&&(Ha.set(this,m,{value:v.event.trigger(v.extend(I[0],v.Event.prototype),I.slice(1),this)}),w.stopImmediatePropagation())}})):void 0===Ha.get(f,m)&&v.event.add(f,m,ka)}function C(f,m){return t(f,"table")&&t(11!==m.nodeType?m:m.firstChild,"tr")&&v(f).children("tbody")[0]||f}function J(f){return f.type=(null!==f.getAttribute("type"))+"/"+f.type,f}function b(f){return"true/"===(f.type||"").slice(0,
5)?f.type=f.type.slice(5):f.removeAttribute("type"),f}function d(f,m){var r,w,B,G,I,N;if(1===m.nodeType){if(Ha.hasData(f)&&(r=Ha.access(f),w=Ha.set(m,r),N=r.events))for(B in delete w.handle,w.events={},N)for(r=0,w=N[B].length;r<w;r++)v.event.add(m,B,N[B][r]);qb.hasData(f)&&(G=qb.access(f),I=v.extend({},G),qb.set(m,I))}}function e(f,m,r,w){m=ob.apply([],m);var B,G,I,N=0,S=f.length,Z=S-1,ia=m[0],W=na(ia);if(W||1<S&&"string"==typeof ia&&!Ia.checkClone&&dd.test(ia))return f.each(function(Ba){var za=f.eq(Ba);
W&&(m[0]=ia.call(this,Ba,za.html()));e(za,m,r,w)});if(S&&(G=(B=ja(m,f[0].ownerDocument,!1,f,w)).firstChild,1===B.childNodes.length&&(B=G),G||w)){for(I=(G=v.map(ua(B,"script"),J)).length;N<S;N++){var va=B;N!==Z&&(va=v.clone(va,!0,!0),I&&v.merge(G,ua(va,"script")));r.call(f[N],va,N)}if(I)for(B=G[G.length-1].ownerDocument,v.map(G,b),N=0;N<I;N++)va=G[N],xc.test(va.type||"")&&!Ha.access(va,"globalEval")&&v.contains(B,va)&&(va.src&&"module"!==(va.type||"").toLowerCase()?v._evalUrl&&!va.noModule&&v._evalUrl(va.src,
{nonce:va.nonce||va.getAttribute("nonce")}):E(va.textContent.replace(ed,""),va,B))}return f}function h(f,m,r){for(var w=m?v.filter(m,f):f,B=0;null!=(m=w[B]);B++)r||1!==m.nodeType||v.cleanData(ua(m)),m.parentNode&&(r&&Sb(m)&&V(ua(m,"script")),m.parentNode.removeChild(m));return f}function k(f,m,r){var w,B,G,I,N=f.style;return(r=r||dc(f))&&(""!==(I=r.getPropertyValue(m)||r[m])||Sb(f)||(I=v.style(f,m)),!Ia.pixelBoxStyles()&&mc.test(I)&&fd.test(m)&&(w=N.width,B=N.minWidth,G=N.maxWidth,N.minWidth=N.maxWidth=
N.width=I,I=r.width,N.width=w,N.minWidth=B,N.maxWidth=G)),void 0!==I?I+"":I}function q(f,m){return{get:function(){if(!f())return(this.get=m).apply(this,arguments);delete this.get}}}function n(f){var m;if(!(m=v.cssProps[f]||yc[f])){if(!(f in zc)){a:{m=f;for(var r=m[0].toUpperCase()+m.slice(1),w=Ac.length;w--;)if((m=Ac[w]+r)in zc)break a;m=void 0}f=yc[f]=m||f}m=f}return m}function y(f,m,r){return(f=Ub.exec(m))?Math.max(0,f[2]-(r||0))+(f[3]||"px"):m}function x(f,m,r,w,B,G){var I="width"===m?1:0,N=0,
S=0;if(r===(w?"border":"content"))return 0;for(;4>I;I+=2)"margin"===r&&(S+=v.css(f,r+Hb[I],!0,B)),w?("content"===r&&(S-=v.css(f,"padding"+Hb[I],!0,B)),"margin"!==r&&(S-=v.css(f,"border"+Hb[I]+"Width",!0,B))):(S+=v.css(f,"padding"+Hb[I],!0,B),"padding"!==r?S+=v.css(f,"border"+Hb[I]+"Width",!0,B):N+=v.css(f,"border"+Hb[I]+"Width",!0,B));return!w&&0<=G&&(S+=Math.max(0,Math.ceil(f["offset"+m[0].toUpperCase()+m.slice(1)]-G-S-N-.5))||0),S}function K(f,m,r){var w=dc(f),B=(!Ia.boxSizingReliable()||r)&&"border-box"===
v.css(f,"boxSizing",!1,w),G=B,I=k(f,m,w),N="offset"+m[0].toUpperCase()+m.slice(1);if(mc.test(I)){if(!r)return I;I="auto"}return(!Ia.boxSizingReliable()&&B||"auto"===I||!parseFloat(I)&&"inline"===v.css(f,"display",!1,w))&&f.getClientRects().length&&(B="border-box"===v.css(f,"boxSizing",!1,w),(G=N in f)&&(I=f[N])),(I=parseFloat(I)||0)+x(f,m,r||(B?"border":"content"),G,w,I)+"px"}function F(f,m,r,w,B){return new F.prototype.init(f,m,r,w,B)}function Y(){ec&&(!1===ra.hidden&&c.requestAnimationFrame?c.requestAnimationFrame(Y):
c.setTimeout(Y,v.fx.interval),v.fx.tick())}function aa(){return c.setTimeout(function(){Tb=void 0}),Tb=Date.now()}function fa(f,m){var r,w=0,B={height:f};for(m=m?1:0;4>w;w+=2-m)B["margin"+(r=Hb[w])]=B["padding"+r]=f;return m&&(B.opacity=B.width=f),B}function ca(f,m,r){for(var w,B=(la.tweeners[m]||[]).concat(la.tweeners["*"]),G=0,I=B.length;G<I;G++)if(w=B[G].call(r,m,f))return w}function la(f,m,r){var w,B=0,G=la.prefilters.length,I=v.Deferred().always(function(){delete N.elem}),N=function(){if(w)return!1;
var Z=Tb||aa();Z=Math.max(0,S.startTime+S.duration-Z);for(var ia=1-(Z/S.duration||0),W=0,va=S.tweens.length;W<va;W++)S.tweens[W].run(ia);return I.notifyWith(f,[S,ia,Z]),1>ia&&va?Z:(va||I.notifyWith(f,[S,1,0]),I.resolveWith(f,[S]),!1)},S=I.promise({elem:f,props:v.extend({},m),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},r),originalProperties:m,originalOptions:r,startTime:Tb||aa(),duration:r.duration,tweens:[],createTween:function(Z,ia){Z=v.Tween(f,S.opts,Z,ia,S.opts.specialEasing[Z]||
S.opts.easing);return S.tweens.push(Z),Z},stop:function(Z){var ia=0,W=Z?S.tweens.length:0;if(w)return this;for(w=!0;ia<W;ia++)S.tweens[ia].run(1);return Z?(I.notifyWith(f,[S,1,0]),I.resolveWith(f,[S,Z])):I.rejectWith(f,[S,Z]),this}});r=S.props;!function(Z,ia){var W,va,Ba,za,Pa;for(W in Z)if(Ba=ia[va=Q(W)],za=Z[W],Array.isArray(za)&&(Ba=za[1],za=Z[W]=za[0]),W!==va&&(Z[va]=za,delete Z[W]),(Pa=v.cssHooks[va])&&"expand"in Pa)for(W in za=Pa.expand(za),delete Z[va],za)W in Z||(Z[W]=za[W],ia[W]=Ba);else ia[va]=
Ba}(r,S.opts.specialEasing);for(;B<G;B++)if(m=la.prefilters[B].call(S,f,r,S.opts))return na(m.stop)&&(v._queueHooks(S.elem,S.opts.queue).stop=m.stop.bind(m)),m;return v.map(r,ca,S),na(S.opts.start)&&S.opts.start.call(f,S),S.progress(S.opts.progress).done(S.opts.done,S.opts.complete).fail(S.opts.fail).always(S.opts.always),v.fx.timer(v.extend(N,{elem:f,anim:S,queue:S.opts.queue})),S}function Ga(f){return(f.match(Cb)||[]).join(" ")}function ya(f){return f.getAttribute&&f.getAttribute("class")||""}function xa(f){return Array.isArray(f)?
f:"string"==typeof f&&f.match(Cb)||[]}function wa(f,m,r,w){var B;if(Array.isArray(m))v.each(m,function(G,I){r||gd.test(f)?w(f,I):wa(f+"["+("object"==typeof I&&null!=I?G:"")+"]",I,r,w)});else if(r||"object"!==M(m))w(f,m);else for(B in m)wa(f+"["+B+"]",m[B],r,w)}function Da(f){return function(m,r){"string"!=typeof m&&(r=m,m="*");var w=0,B=m.toLowerCase().match(Cb)||[];if(na(r))for(;m=B[w++];)"+"===m[0]?(m=m.slice(1)||"*",(f[m]=f[m]||[]).unshift(r)):(f[m]=f[m]||[]).push(r)}}function Ta(f,m,r,w){function B(N){var S;
return G[N]=!0,v.each(f[N]||[],function(Z,ia){Z=ia(m,r,w);return"string"!=typeof Z||I||G[Z]?I?!(S=Z):void 0:(m.dataTypes.unshift(Z),B(Z),!1)}),S}var G={},I=f===nc;return B(m.dataTypes[0])||!G["*"]&&B("*")}function Ja(f,m){var r,w,B=v.ajaxSettings.flatOptions||{};for(r in m)void 0!==m[r]&&((B[r]?f:w||(w={}))[r]=m[r]);return w&&v.extend(!0,f,w),f}var ta=[],ra=c.document,rb=Object.getPrototypeOf,jb=ta.slice,ob=ta.concat,Va=ta.push,Xa=ta.indexOf,gb={},La=gb.toString,hb=gb.hasOwnProperty,Db=hb.toString,
ha=Db.call(Object),Ia={},na=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType},nb=function(f){return null!=f&&f===f.window},Gb={type:!0,src:!0,nonce:!0,noModule:!0},v=function(f,m){return new v.fn.init(f,m)},Ob=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;v.fn=v.prototype={jquery:"3.4.1",constructor:v,length:0,toArray:function(){return jb.call(this)},get:function(f){return null==f?jb.call(this):0>f?this[f+this.length]:this[f]},pushStack:function(f){f=v.merge(this.constructor(),f);return f.prevObject=
this,f},each:function(f){return v.each(this,f)},map:function(f){return this.pushStack(v.map(this,function(m,r){return f.call(m,r,m)}))},slice:function(){return this.pushStack(jb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(f){var m=this.length;f=+f+(0>f?m:0);return this.pushStack(0<=f&&f<m?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:Va,sort:ta.sort,splice:ta.splice};v.extend=v.fn.extend=function(){var f,
m,r,w,B,G=arguments[0]||{},I=1,N=arguments.length,S=!1;"boolean"==typeof G&&(S=G,G=arguments[I]||{},I++);"object"==typeof G||na(G)||(G={});for(I===N&&(G=this,I--);I<N;I++)if(null!=(f=arguments[I]))for(m in f){var Z=f[m];"__proto__"!==m&&G!==Z&&(S&&Z&&(v.isPlainObject(Z)||(w=Array.isArray(Z)))?(r=G[m],B=w&&!Array.isArray(r)?[]:w||v.isPlainObject(r)?r:{},w=!1,G[m]=v.extend(S,B,Z)):void 0!==Z&&(G[m]=Z))}return G};v.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw Error(f);
},noop:function(){},isPlainObject:function(f){var m,r;return!(!f||"[object Object]"!==La.call(f))&&(!(m=rb(f))||"function"==typeof(r=hb.call(m,"constructor")&&m.constructor)&&Db.call(r)===ha)},isEmptyObject:function(f){for(var m in f)return!1;return!0},globalEval:function(f,m){E(f,{nonce:m&&m.nonce})},each:function(f,m){var r,w=0;if(u(f))for(r=f.length;w<r&&!1!==m.call(f[w],w,f[w]);w++);else for(w in f)if(!1===m.call(f[w],w,f[w]))break;return f},trim:function(f){return null==f?"":(f+"").replace(Ob,
"")},makeArray:function(f,m){m=m||[];return null!=f&&(u(Object(f))?v.merge(m,"string"==typeof f?[f]:f):Va.call(m,f)),m},inArray:function(f,m,r){return null==m?-1:Xa.call(m,f,r)},merge:function(f,m){for(var r=+m.length,w=0,B=f.length;w<r;w++)f[B++]=m[w];return f.length=B,f},grep:function(f,m,r){var w=[],B=0,G=f.length;for(r=!r;B<G;B++)!m(f[B],B)!==r&&w.push(f[B]);return w},map:function(f,m,r){var w,B,G=0,I=[];if(u(f))for(w=f.length;G<w;G++)null!=(B=m(f[G],G,r))&&I.push(B);else for(G in f)null!=(B=
m(f[G],G,r))&&I.push(B);return ob.apply([],I)},guid:1,support:Ia});"function"==typeof Symbol&&(v.fn[Symbol.iterator]=ta[Symbol.iterator]);v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,m){gb["[object "+m+"]"]=m.toLowerCase()});var Bb=function(f){function m(H,O,T,U){var ba,qa,oa,Ea;var pa=O&&O.ownerDocument;var Fa=O?O.nodeType:9;if(T=T||[],"string"!=typeof H||!H||1!==Fa&&9!==Fa&&11!==Fa)return T;if(!U&&((O?O.ownerDocument||O:db)!==Oa&&tb(O),O=O||
Oa,ab)){if(11!==Fa&&(Ea=hd.exec(H)))if(ba=Ea[1])if(9===Fa){if(!(qa=O.getElementById(ba)))return T;if(qa.id===ba)return T.push(qa),T}else{if(pa&&(qa=pa.getElementById(ba))&&Wa(O,qa)&&qa.id===ba)return T.push(qa),T}else{if(Ea[2])return Lb.apply(T,O.getElementsByTagName(H)),T;if((ba=Ea[3])&&Ca.getElementsByClassName&&O.getElementsByClassName)return Lb.apply(T,O.getElementsByClassName(ba)),T}if(!(!Ca.qsa||fc[H+" "]||bb&&bb.test(H)||1===Fa&&"object"===O.nodeName.toLowerCase())){if(ba=H,pa=O,1===Fa&&id.test(H)){(oa=
O.getAttribute("id"))?oa=oa.replace(Bc,Cc):O.setAttribute("id",oa=Ma);for(pa=(Fa=Mb(H)).length;pa--;)Fa[pa]="#"+oa+" "+Ba(Fa[pa]);ba=Fa.join(",");pa=oc.test(H)&&W(O.parentNode)||O}try{return Lb.apply(T,pa.querySelectorAll(ba)),T}catch(Qa){fc(H,!0)}finally{oa===Ma&&O.removeAttribute("id")}}}return Eb(H.replace(gc,"$1"),O,T,U)}function r(){var H=[];return function ba(T,U){return H.push(T+" ")>Ka.cacheLength&&delete ba[H.shift()],ba[T+" "]=U}}function w(H){return H[Ma]=!0,H}function B(H){var O=Oa.createElement("fieldset");
try{return!!H(O)}catch(T){return!1}finally{O.parentNode&&O.parentNode.removeChild(O)}}function G(H,O){H=H.split("|");for(var T=H.length;T--;)Ka.attrHandle[H[T]]=O}function I(H,O){var T=O&&H,U=T&&1===H.nodeType&&1===O.nodeType&&H.sourceIndex-O.sourceIndex;if(U)return U;if(T)for(;T=T.nextSibling;)if(T===O)return-1;return H?1:-1}function N(H){return function(O){return"input"===O.nodeName.toLowerCase()&&O.type===H}}function S(H){return function(O){var T=O.nodeName.toLowerCase();return("input"===T||"button"===
T)&&O.type===H}}function Z(H){return function(O){return"form"in O?O.parentNode&&!1===O.disabled?"label"in O?"label"in O.parentNode?O.parentNode.disabled===H:O.disabled===H:O.isDisabled===H||O.isDisabled!==!H&&jd(O)===H:O.disabled===H:"label"in O&&O.disabled===H}}function ia(H){return w(function(O){return O=+O,w(function(T,U){for(var ba,qa=H([],T.length,O),oa=qa.length;oa--;)T[ba=qa[oa]]&&(T[ba]=!(U[ba]=T[ba]))})})}function W(H){return H&&"undefined"!=typeof H.getElementsByTagName&&H}function va(){}
function Ba(H){for(var O=0,T=H.length,U="";O<T;O++)U+=H[O].value;return U}function za(H,O,T){var U=O.dir,ba=O.next,qa=ba||U,oa=T&&"parentNode"===qa,Ea=Fb++;return O.first?function(pa,Fa,Qa){for(;pa=pa[U];)if(1===pa.nodeType||oa)return H(pa,Fa,Qa);return!1}:function(pa,Fa,Qa){var eb,cb,Na,Sa=[Ya,Ea];if(Qa)for(;pa=pa[U];){if((1===pa.nodeType||oa)&&H(pa,Fa,Qa))return!0}else for(;pa=pa[U];)if(1===pa.nodeType||oa)if(cb=(Na=pa[Ma]||(pa[Ma]={}))[pa.uniqueID]||(Na[pa.uniqueID]={}),ba&&ba===pa.nodeName.toLowerCase())pa=
pa[U]||pa;else{if((eb=cb[qa])&&eb[0]===Ya&&eb[1]===Ea)return Sa[2]=eb[2];if((cb[qa]=Sa)[2]=H(pa,Fa,Qa))return!0}return!1}}function Pa(H){return 1<H.length?function(O,T,U){for(var ba=H.length;ba--;)if(!H[ba](O,T,U))return!1;return!0}:H[0]}function Za(H,O,T,U,ba){for(var qa,oa=[],Ea=0,pa=H.length,Fa=null!=O;Ea<pa;Ea++)(qa=H[Ea])&&(T&&!T(qa,U,ba)||(oa.push(qa),Fa&&O.push(Ea)));return oa}function zb(H,O,T,U,ba,qa){return U&&!U[Ma]&&(U=zb(U)),ba&&!ba[Ma]&&(ba=zb(ba,qa)),w(function(oa,Ea,pa,Fa){var Qa,
eb=[],cb=[],Na=Ea.length,Sa;if(!(Sa=oa)){Sa=O||"*";for(var Ua=pa.nodeType?[pa]:pa,Ab=[],pb=0,kb=Ua.length;pb<kb;pb++)m(Sa,Ua[pb],Ab);Sa=Ab}Sa=!H||!oa&&O?Sa:Za(Sa,eb,H,pa,Fa);Ua=T?ba||(oa?H:Na||U)?[]:Ea:Sa;if(T&&T(Sa,Ua,pa,Fa),U){var fb=Za(Ua,cb);U(fb,[],pa,Fa);for(pa=fb.length;pa--;)(Qa=fb[pa])&&(Ua[cb[pa]]=!(Sa[cb[pa]]=Qa))}if(oa){if(ba||H){if(ba){fb=[];for(pa=Ua.length;pa--;)(Qa=Ua[pa])&&fb.push(Sa[pa]=Qa);ba(null,Ua=[],fb,Fa)}for(pa=Ua.length;pa--;)(Qa=Ua[pa])&&-1<(fb=ba?Pb(oa,Qa):eb[pa])&&(oa[fb]=
!(Ea[fb]=Qa))}}else Ua=Za(Ua===Ea?Ua.splice(Na,Ua.length):Ua),ba?ba(null,Ea,Ua,Fa):Lb.apply(Ea,Ua)})}function lb(H){var O,T,U=H.length,ba=Ka.relative[H[0].type];var qa=ba||Ka.relative[" "];for(var oa=ba?1:0,Ea=za(function(Qa){return Qa===O},qa,!0),pa=za(function(Qa){return-1<Pb(O,Qa)},qa,!0),Fa=[function(Qa,eb,cb){Qa=!ba&&(cb||eb!==Nb)||((O=eb).nodeType?Ea(Qa,eb,cb):pa(Qa,eb,cb));return O=null,Qa}];oa<U;oa++)if(qa=Ka.relative[H[oa].type])Fa=[za(Pa(Fa),qa)];else{if((qa=Ka.filter[H[oa].type].apply(null,
H[oa].matches))[Ma]){for(T=++oa;T<U&&!Ka.relative[H[T].type];T++);return zb(1<oa&&Pa(Fa),1<oa&&Ba(H.slice(0,oa-1).concat({value:" "===H[oa-2].type?"*":""})).replace(gc,"$1"),qa,oa<T&&lb(H.slice(oa,T)),T<U&&lb(H=H.slice(T)),T<U&&Ba(H))}Fa.push(qa)}return Pa(Fa)}var ub,Ca,Ka,Ra,ib,Mb,Vb,Eb,Nb,vb,wb,tb,Oa,$a,ab,bb,sb,mb,Wa,Ma="sizzle"+1*new Date,db=f.document,Ya=0,Fb=0,Qb=r(),hc=r(),Dc=r(),fc=r(),pc=function(H,O){return H===O&&(wb=!0),0},kd={}.hasOwnProperty,Rb=[],ld=Rb.pop,md=Rb.push,Lb=Rb.push,Ec=
Rb.slice,Pb=function(H,O){for(var T=0,U=H.length;T<U;T++)if(H[T]===O)return T;return-1},nd=/[\x20\t\r\n\f]+/g,gc=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,od=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,pd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,id=/[\x20\t\r\n\f]|>/,qd=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
rd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ic={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},sd=/HTML$/i,td=/^(?:input|select|textarea|button)$/i,ud=
/^h\d$/i,Wb=/^[^{]+\{\s*\[native \w/,hd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oc=/[+~]/,Ib=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Jb=function(H,O,T){H="0x"+O-65536;return H!=H||T?O:0>H?String.fromCharCode(H+65536):String.fromCharCode(H>>10|55296,1023&H|56320)},Bc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Cc=function(H,O){return O?"\x00"===H?"\ufffd":H.slice(0,-1)+"\\"+H.charCodeAt(H.length-1).toString(16)+" ":"\\"+H},Fc=function(){tb()},jd=za(function(H){return!0===H.disabled&&
"fieldset"===H.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Lb.apply(Rb=Ec.call(db.childNodes),db.childNodes),Rb[db.childNodes.length].nodeType}catch(H){Lb={apply:Rb.length?function(O,T){md.apply(O,Ec.call(T))}:function(O,T){for(var U=O.length,ba=0;O[U++]=T[ba++];);O.length=U-1}}}for(ub in Ca=m.support={},ib=m.isXML=function(H){var O=(H.ownerDocument||H).documentElement;return!sd.test(H.namespaceURI||O&&O.nodeName||"HTML")},tb=m.setDocument=function(H){var O,T;H=H?H.ownerDocument||
H:db;return H!==Oa&&9===H.nodeType&&H.documentElement&&($a=(Oa=H).documentElement,ab=!ib(Oa),db!==Oa&&(T=Oa.defaultView)&&T.top!==T&&(T.addEventListener?T.addEventListener("unload",Fc,!1):T.attachEvent&&T.attachEvent("onunload",Fc)),Ca.attributes=B(function(U){return U.className="i",!U.getAttribute("className")}),Ca.getElementsByTagName=B(function(U){return U.appendChild(Oa.createComment("")),!U.getElementsByTagName("*").length}),Ca.getElementsByClassName=Wb.test(Oa.getElementsByClassName),Ca.getById=
B(function(U){return $a.appendChild(U).id=Ma,!Oa.getElementsByName||!Oa.getElementsByName(Ma).length}),Ca.getById?(Ka.filter.ID=function(U){var ba=U.replace(Ib,Jb);return function(qa){return qa.getAttribute("id")===ba}},Ka.find.ID=function(U,ba){if("undefined"!=typeof ba.getElementById&&ab)return(U=ba.getElementById(U))?[U]:[]}):(Ka.filter.ID=function(U){var ba=U.replace(Ib,Jb);return function(qa){return(qa="undefined"!=typeof qa.getAttributeNode&&qa.getAttributeNode("id"))&&qa.value===ba}},Ka.find.ID=
function(U,ba){if("undefined"!=typeof ba.getElementById&&ab){var qa,oa=ba.getElementById(U);if(oa){if((qa=oa.getAttributeNode("id"))&&qa.value===U)return[oa];var Ea=ba.getElementsByName(U);for(ba=0;oa=Ea[ba++];)if((qa=oa.getAttributeNode("id"))&&qa.value===U)return[oa]}return[]}}),Ka.find.TAG=Ca.getElementsByTagName?function(U,ba){return"undefined"!=typeof ba.getElementsByTagName?ba.getElementsByTagName(U):Ca.qsa?ba.querySelectorAll(U):void 0}:function(U,ba){var qa=[],oa=0;ba=ba.getElementsByTagName(U);
if("*"===U){for(;U=ba[oa++];)1===U.nodeType&&qa.push(U);return qa}return ba},Ka.find.CLASS=Ca.getElementsByClassName&&function(U,ba){if("undefined"!=typeof ba.getElementsByClassName&&ab)return ba.getElementsByClassName(U)},sb=[],bb=[],(Ca.qsa=Wb.test(Oa.querySelectorAll))&&(B(function(U){$a.appendChild(U).innerHTML="<a id='"+Ma+"'></a><select id='"+Ma+"-\r\\' msallowcapture=''><option selected=''></option></select>";U.querySelectorAll("[msallowcapture^='']").length&&bb.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
U.querySelectorAll("[selected]").length||bb.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");U.querySelectorAll("[id~="+Ma+"-]").length||bb.push("~=");U.querySelectorAll(":checked").length||bb.push(":checked");U.querySelectorAll("a#"+Ma+"+*").length||bb.push(".#.+[+~]")}),B(function(U){U.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ba=
Oa.createElement("input");ba.setAttribute("type","hidden");U.appendChild(ba).setAttribute("name","D");U.querySelectorAll("[name=d]").length&&bb.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==U.querySelectorAll(":enabled").length&&bb.push(":enabled",":disabled");$a.appendChild(U).disabled=!0;2!==U.querySelectorAll(":disabled").length&&bb.push(":enabled",":disabled");U.querySelectorAll("*,:x");bb.push(",.*:")})),(Ca.matchesSelector=Wb.test(mb=$a.matches||$a.webkitMatchesSelector||$a.mozMatchesSelector||
$a.oMatchesSelector||$a.msMatchesSelector))&&B(function(U){Ca.disconnectedMatch=mb.call(U,"*");mb.call(U,"[s!='']:x");sb.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),bb=bb.length&&
new RegExp(bb.join("|")),sb=sb.length&&new RegExp(sb.join("|")),O=Wb.test($a.compareDocumentPosition),Wa=O||Wb.test($a.contains)?function(U,ba){var qa=9===U.nodeType?U.documentElement:U;ba=ba&&ba.parentNode;return U===ba||!(!ba||1!==ba.nodeType||!(qa.contains?qa.contains(ba):U.compareDocumentPosition&&16&U.compareDocumentPosition(ba)))}:function(U,ba){if(ba)for(;ba=ba.parentNode;)if(ba===U)return!0;return!1},pc=O?function(U,ba){if(U===ba)return wb=!0,0;var qa=!U.compareDocumentPosition-!ba.compareDocumentPosition;
return qa||(1&(qa=(U.ownerDocument||U)===(ba.ownerDocument||ba)?U.compareDocumentPosition(ba):1)||!Ca.sortDetached&&ba.compareDocumentPosition(U)===qa?U===Oa||U.ownerDocument===db&&Wa(db,U)?-1:ba===Oa||ba.ownerDocument===db&&Wa(db,ba)?1:vb?Pb(vb,U)-Pb(vb,ba):0:4&qa?-1:1)}:function(U,ba){if(U===ba)return wb=!0,0;var qa=0,oa=U.parentNode,Ea=ba.parentNode,pa=[U],Fa=[ba];if(!oa||!Ea)return U===Oa?-1:ba===Oa?1:oa?-1:Ea?1:vb?Pb(vb,U)-Pb(vb,ba):0;if(oa===Ea)return I(U,ba);for(;U=U.parentNode;)pa.unshift(U);
for(U=ba;U=U.parentNode;)Fa.unshift(U);for(;pa[qa]===Fa[qa];)qa++;return qa?I(pa[qa],Fa[qa]):pa[qa]===db?-1:Fa[qa]===db?1:0}),Oa},m.matches=function(H,O){return m(H,null,null,O)},m.matchesSelector=function(H,O){if((H.ownerDocument||H)!==Oa&&tb(H),!(!Ca.matchesSelector||!ab||fc[O+" "]||sb&&sb.test(O)||bb&&bb.test(O)))try{var T=mb.call(H,O);if(T||Ca.disconnectedMatch||H.document&&11!==H.document.nodeType)return T}catch(U){fc(O,!0)}return 0<m(O,Oa,null,[H]).length},m.contains=function(H,O){return(H.ownerDocument||
H)!==Oa&&tb(H),Wa(H,O)},m.attr=function(H,O){(H.ownerDocument||H)!==Oa&&tb(H);var T=Ka.attrHandle[O.toLowerCase()];T=T&&kd.call(Ka.attrHandle,O.toLowerCase())?T(H,O,!ab):void 0;return void 0!==T?T:Ca.attributes||!ab?H.getAttribute(O):(T=H.getAttributeNode(O))&&T.specified?T.value:null},m.escape=function(H){return(H+"").replace(Bc,Cc)},m.error=function(H){throw Error("Syntax error, unrecognized expression: "+H);},m.uniqueSort=function(H){var O,T=[],U=0,ba=0;if(wb=!Ca.detectDuplicates,vb=!Ca.sortStable&&
H.slice(0),H.sort(pc),wb){for(;O=H[ba++];)O===H[ba]&&(U=T.push(ba));for(;U--;)H.splice(T[U],1)}return vb=null,H},Ra=m.getText=function(H){var O,T="",U=0;if(O=H.nodeType)if(1===O||9===O||11===O){if("string"==typeof H.textContent)return H.textContent;for(H=H.firstChild;H;H=H.nextSibling)T+=Ra(H)}else{if(3===O||4===O)return H.nodeValue}else for(;O=H[U++];)T+=Ra(O);return T},(Ka=m.selectors={cacheLength:50,createPseudo:w,match:ic,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(H){return H[1]=H[1].replace(Ib,Jb),H[3]=(H[3]||H[4]||H[5]||"").replace(Ib,Jb),"~="===H[2]&&(H[3]=" "+H[3]+" "),H.slice(0,4)},CHILD:function(H){return H[1]=H[1].toLowerCase(),"nth"===H[1].slice(0,3)?(H[3]||m.error(H[0]),H[4]=+(H[4]?H[5]+(H[6]||1):2*("even"===H[3]||"odd"===H[3])),H[5]=+(H[7]+H[8]||"odd"===H[3])):H[3]&&m.error(H[0]),H},PSEUDO:function(H){var O,T=!H[6]&&H[2];return ic.CHILD.test(H[0])?null:(H[3]?
H[2]=H[4]||H[5]||"":T&&qd.test(T)&&(O=Mb(T,!0))&&(O=T.indexOf(")",T.length-O)-T.length)&&(H[0]=H[0].slice(0,O),H[2]=T.slice(0,O)),H.slice(0,3))}},filter:{TAG:function(H){var O=H.replace(Ib,Jb).toLowerCase();return"*"===H?function(){return!0}:function(T){return T.nodeName&&T.nodeName.toLowerCase()===O}},CLASS:function(H){var O=Qb[H+" "];return O||(O=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+H+"([\\x20\\t\\r\\n\\f]|$)"),Qb(H,function(T){return O.test("string"==typeof T.className&&T.className||"undefined"!=
typeof T.getAttribute&&T.getAttribute("class")||"")}))},ATTR:function(H,O,T){return function(U){U=m.attr(U,H);return null==U?"!="===O:!O||(U+="","="===O?U===T:"!="===O?U!==T:"^="===O?T&&0===U.indexOf(T):"*="===O?T&&-1<U.indexOf(T):"$="===O?T&&U.slice(-T.length)===T:"~="===O?-1<(" "+U.replace(nd," ")+" ").indexOf(T):"|="===O&&(U===T||U.slice(0,T.length+1)===T+"-"))}},CHILD:function(H,O,T,U,ba){var qa="nth"!==H.slice(0,3),oa="last"!==H.slice(-4),Ea="of-type"===O;return 1===U&&0===ba?function(pa){return!!pa.parentNode}:
function(pa,Fa,Qa){var eb,cb,Na,Sa;Fa=qa!==oa?"nextSibling":"previousSibling";var Ua=pa.parentNode,Ab=Ea&&pa.nodeName.toLowerCase(),pb=!Qa&&!Ea,kb=!1;if(Ua){if(qa){for(;Fa;){for(Na=pa;Na=Na[Fa];)if(Ea?Na.nodeName.toLowerCase()===Ab:1===Na.nodeType)return!1;var fb=Fa="only"===H&&!fb&&"nextSibling"}return!0}if(fb=[oa?Ua.firstChild:Ua.lastChild],oa&&pb)for(kb=(Sa=(eb=(Qa=(cb=(Na=Ua)[Ma]||(Na[Ma]={}))[Na.uniqueID]||(cb[Na.uniqueID]={}))[H]||[])[0]===Ya&&eb[1])&&eb[2],Na=Sa&&Ua.childNodes[Sa];Na=++Sa&&
Na&&Na[Fa]||(kb=Sa=0)||fb.pop();){if(1===Na.nodeType&&++kb&&Na===pa){Qa[H]=[Ya,Sa,kb];break}}else if(pb&&(kb=Sa=(eb=((cb=(Na=pa)[Ma]||(Na[Ma]={}))[Na.uniqueID]||(cb[Na.uniqueID]={}))[H]||[])[0]===Ya&&eb[1]),!1===kb)for(;(Na=++Sa&&Na&&Na[Fa]||(kb=Sa=0)||fb.pop())&&((Ea?Na.nodeName.toLowerCase()!==Ab:1!==Na.nodeType)||!++kb||(pb&&((Qa=(cb=Na[Ma]||(Na[Ma]={}))[Na.uniqueID]||(cb[Na.uniqueID]={}))[H]=[Ya,kb]),Na!==pa)););return(kb-=ba)===U||0==kb%U&&0<=kb/U}}},PSEUDO:function(H,O){var T,U=Ka.pseudos[H]||
Ka.setFilters[H.toLowerCase()]||m.error("unsupported pseudo: "+H);return U[Ma]?U(O):1<U.length?(T=[H,H,"",O],Ka.setFilters.hasOwnProperty(H.toLowerCase())?w(function(ba,qa){for(var oa,Ea=U(ba,O),pa=Ea.length;pa--;)ba[oa=Pb(ba,Ea[pa])]=!(qa[oa]=Ea[pa])}):function(ba){return U(ba,0,T)}):U}},pseudos:{not:w(function(H){var O=[],T=[],U=Vb(H.replace(gc,"$1"));return U[Ma]?w(function(ba,qa,oa,Ea){var pa;oa=U(ba,null,Ea,[]);for(Ea=ba.length;Ea--;)(pa=oa[Ea])&&(ba[Ea]=!(qa[Ea]=pa))}):function(ba,qa,oa){return O[0]=
ba,U(O,null,oa,T),O[0]=null,!T.pop()}}),has:w(function(H){return function(O){return 0<m(H,O).length}}),contains:w(function(H){return H=H.replace(Ib,Jb),function(O){return-1<(O.textContent||Ra(O)).indexOf(H)}}),lang:w(function(H){return rd.test(H||"")||m.error("unsupported lang: "+H),H=H.replace(Ib,Jb).toLowerCase(),function(O){var T;do if(T=ab?O.lang:O.getAttribute("xml:lang")||O.getAttribute("lang"))return(T=T.toLowerCase())===H||0===T.indexOf(H+"-");while((O=O.parentNode)&&1===O.nodeType);return!1}}),
target:function(H){var O=f.location&&f.location.hash;return O&&O.slice(1)===H.id},root:function(H){return H===$a},focus:function(H){return H===Oa.activeElement&&(!Oa.hasFocus||Oa.hasFocus())&&!!(H.type||H.href||~H.tabIndex)},enabled:Z(!1),disabled:Z(!0),checked:function(H){var O=H.nodeName.toLowerCase();return"input"===O&&!!H.checked||"option"===O&&!!H.selected},selected:function(H){return H.parentNode&&H.parentNode.selectedIndex,!0===H.selected},empty:function(H){for(H=H.firstChild;H;H=H.nextSibling)if(6>
H.nodeType)return!1;return!0},parent:function(H){return!Ka.pseudos.empty(H)},header:function(H){return ud.test(H.nodeName)},input:function(H){return td.test(H.nodeName)},button:function(H){var O=H.nodeName.toLowerCase();return"input"===O&&"button"===H.type||"button"===O},text:function(H){var O;return"input"===H.nodeName.toLowerCase()&&"text"===H.type&&(null==(O=H.getAttribute("type"))||"text"===O.toLowerCase())},first:ia(function(){return[0]}),last:ia(function(H,O){return[O-1]}),eq:ia(function(H,
O,T){return[0>T?T+O:T]}),even:ia(function(H,O){for(var T=0;T<O;T+=2)H.push(T);return H}),odd:ia(function(H,O){for(var T=1;T<O;T+=2)H.push(T);return H}),lt:ia(function(H,O,T){for(O=0>T?T+O:O<T?O:T;0<=--O;)H.push(O);return H}),gt:ia(function(H,O,T){for(T=0>T?T+O:T;++T<O;)H.push(T);return H})}}).pseudos.nth=Ka.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Ka.pseudos[ub]=N(ub);for(ub in{submit:!0,reset:!0})Ka.pseudos[ub]=S(ub);return va.prototype=Ka.filters=Ka.pseudos,Ka.setFilters=new va,
Mb=m.tokenize=function(H,O){var T,U,ba,qa,oa,Ea;if(oa=hc[H+" "])return O?0:oa.slice(0);oa=H;var pa=[];for(Ea=Ka.preFilter;oa;){for(qa in T&&!(U=od.exec(oa))||(U&&(oa=oa.slice(U[0].length)||oa),pa.push(ba=[])),T=!1,(U=pd.exec(oa))&&(T=U.shift(),ba.push({value:T,type:U[0].replace(gc," ")}),oa=oa.slice(T.length)),Ka.filter)!(U=ic[qa].exec(oa))||Ea[qa]&&!(U=Ea[qa](U))||(T=U.shift(),ba.push({value:T,type:qa,matches:U}),oa=oa.slice(T.length));if(!T)break}return O?oa.length:oa?m.error(H):hc(H,pa).slice(0)},
Vb=m.compile=function(H,O){var T,U,ba,qa,oa=[],Ea=[],pa=Dc[H+" "];if(!pa){O||(O=Mb(H));for(T=O.length;T--;)(pa=lb(O[T]))[Ma]?oa.push(pa):Ea.push(pa);(pa=Dc(H,(U=0<oa.length,ba=0<Ea.length,qa=function(Fa,Qa,eb,cb,Na){var Sa,Ua,Ab=0,pb="0",kb=Fa&&[],fb=[],Gc=Nb,Hc=Fa||ba&&Ka.find.TAG("*",Na),Ic=Ya+=null==Gc?1:Math.random()||.1,vd=Hc.length;for(Na&&(Nb=Qa===Oa||Qa||Na);pb!==vd&&null!=(Sa=Hc[pb]);pb++){if(ba&&Sa){var qc=0;for(Qa||Sa.ownerDocument===Oa||(tb(Sa),eb=!ab);Ua=Ea[qc++];)if(Ua(Sa,Qa||Oa,eb)){cb.push(Sa);
break}Na&&(Ya=Ic)}U&&((Sa=!Ua&&Sa)&&Ab--,Fa&&kb.push(Sa))}if(Ab+=pb,U&&pb!==Ab){for(qc=0;Ua=oa[qc++];)Ua(kb,fb,Qa,eb);if(Fa){if(0<Ab)for(;pb--;)kb[pb]||fb[pb]||(fb[pb]=ld.call(cb));fb=Za(fb)}Lb.apply(cb,fb);Na&&!Fa&&0<fb.length&&1<Ab+oa.length&&m.uniqueSort(cb)}return Na&&(Ya=Ic,Nb=Gc),kb},U?w(qa):qa))).selector=H}return pa},Eb=m.select=function(H,O,T,U){var ba,qa,oa,Ea,pa,Fa="function"==typeof H&&H,Qa=!U&&Mb(H=Fa.selector||H);if(T=T||[],1===Qa.length){if(2<(qa=Qa[0]=Qa[0].slice(0)).length&&"ID"===
(oa=qa[0]).type&&9===O.nodeType&&ab&&Ka.relative[qa[1].type]){if(!(O=(Ka.find.ID(oa.matches[0].replace(Ib,Jb),O)||[])[0]))return T;Fa&&(O=O.parentNode);H=H.slice(qa.shift().value.length)}for(ba=ic.needsContext.test(H)?0:qa.length;ba--&&(oa=qa[ba],!Ka.relative[Ea=oa.type]);)if((pa=Ka.find[Ea])&&(U=pa(oa.matches[0].replace(Ib,Jb),oc.test(qa[0].type)&&W(O.parentNode)||O))){if(qa.splice(ba,1),!(H=U.length&&Ba(qa)))return Lb.apply(T,U),T;break}}return(Fa||Vb(H,Qa))(U,O,!ab,T,!O||oc.test(H)&&W(O.parentNode)||
O),T},Ca.sortStable=Ma.split("").sort(pc).join("")===Ma,Ca.detectDuplicates=!!wb,tb(),Ca.sortDetached=B(function(H){return 1&H.compareDocumentPosition(Oa.createElement("fieldset"))}),B(function(H){return H.innerHTML="<a href='#'></a>","#"===H.firstChild.getAttribute("href")})||G("type|href|height|width",function(H,O,T){if(!T)return H.getAttribute(O,"type"===O.toLowerCase()?1:2)}),Ca.attributes&&B(function(H){return H.innerHTML="<input/>",H.firstChild.setAttribute("value",""),""===H.firstChild.getAttribute("value")})||
G("value",function(H,O,T){if(!T&&"input"===H.nodeName.toLowerCase())return H.defaultValue}),B(function(H){return null==H.getAttribute("disabled")})||G("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(H,O,T){var U;if(!T)return!0===H[O]?O.toLowerCase():(U=H.getAttributeNode(O))&&U.specified?U.value:null}),m}(c);v.find=Bb;v.expr=Bb.selectors;v.expr[":"]=v.expr.pseudos;v.uniqueSort=v.unique=Bb.uniqueSort;v.text=Bb.getText;
v.isXMLDoc=Bb.isXML;v.contains=Bb.contains;v.escapeSelector=Bb.escape;var yb=function(f,m,r){for(var w=[],B=void 0!==r;(f=f[m])&&9!==f.nodeType;)if(1===f.nodeType){if(B&&v(f).is(r))break;w.push(f)}return w},Jc=function(f,m){for(var r=[];f;f=f.nextSibling)1===f.nodeType&&f!==m&&r.push(f);return r},Kc=v.expr.match.needsContext,Lc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;v.filter=function(f,m,r){var w=m[0];return r&&(f=":not("+f+")"),1===m.length&&1===w.nodeType?v.find.matchesSelector(w,
f)?[w]:[]:v.find.matches(f,v.grep(m,function(B){return 1===B.nodeType}))};v.fn.extend({find:function(f){var m,r=this.length,w=this;if("string"!=typeof f)return this.pushStack(v(f).filter(function(){for(m=0;m<r;m++)if(v.contains(w[m],this))return!0}));var B=this.pushStack([]);for(m=0;m<r;m++)v.find(f,w[m],B);return 1<r?v.uniqueSort(B):B},filter:function(f){return this.pushStack(g(this,f||[],!1))},not:function(f){return this.pushStack(g(this,f||[],!0))},is:function(f){return!!g(this,"string"==typeof f&&
Kc.test(f)?v(f):f||[],!1).length}});var wd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(v.fn.init=function(f,m,r){var w,B;if(!f)return this;if(r=r||xd,"string"==typeof f){if(!(w="<"===f[0]&&">"===f[f.length-1]&&3<=f.length?[null,f,null]:wd.exec(f))||!w[1]&&m)return!m||m.jquery?(m||r).find(f):this.constructor(m).find(f);if(w[1]){if(m=m instanceof v?m[0]:m,v.merge(this,v.parseHTML(w[1],m&&m.nodeType?m.ownerDocument||m:ra,!0)),Lc.test(w[1])&&v.isPlainObject(m))for(w in m)na(this[w])?this[w](m[w]):this.attr(w,
m[w]);return this}return(B=ra.getElementById(w[2]))&&(this[0]=B,this.length=1),this}return f.nodeType?(this[0]=f,this.length=1,this):na(f)?void 0!==r.ready?r.ready(f):f(v):v.makeArray(f,this)}).prototype=v.fn;var xd=v(ra);var yd=/^(?:parents|prev(?:Until|All))/,zd={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(f){var m=v(f,this),r=m.length;return this.filter(function(){for(var w=0;w<r;w++)if(v.contains(this,m[w]))return!0})},closest:function(f,m){var r,w=0,B=this.length,G=[],
I="string"!=typeof f&&v(f);if(!Kc.test(f))for(;w<B;w++)for(r=this[w];r&&r!==m;r=r.parentNode)if(11>r.nodeType&&(I?-1<I.index(r):1===r.nodeType&&v.find.matchesSelector(r,f))){G.push(r);break}return this.pushStack(1<G.length?v.uniqueSort(G):G)},index:function(f){return f?"string"==typeof f?Xa.call(v(f),this[0]):Xa.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,m){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(f,m))))},addBack:function(f){return this.add(null==
f?this.prevObject:this.prevObject.filter(f))}});v.each({parent:function(f){return(f=f.parentNode)&&11!==f.nodeType?f:null},parents:function(f){return yb(f,"parentNode")},parentsUntil:function(f,m,r){return yb(f,"parentNode",r)},next:function(f){return l(f,"nextSibling")},prev:function(f){return l(f,"previousSibling")},nextAll:function(f){return yb(f,"nextSibling")},prevAll:function(f){return yb(f,"previousSibling")},nextUntil:function(f,m,r){return yb(f,"nextSibling",r)},prevUntil:function(f,m,r){return yb(f,
"previousSibling",r)},siblings:function(f){return Jc((f.parentNode||{}).firstChild,f)},children:function(f){return Jc(f.firstChild)},contents:function(f){return"undefined"!=typeof f.contentDocument?f.contentDocument:(t(f,"template")&&(f=f.content||f),v.merge([],f.childNodes))}},function(f,m){v.fn[f]=function(r,w){var B=v.map(this,m,r);return"Until"!==f.slice(-5)&&(w=r),w&&"string"==typeof w&&(B=v.filter(w,B)),1<this.length&&(zd[f]||v.uniqueSort(B),yd.test(f)&&B.reverse()),this.pushStack(B)}});var Cb=
/[^\x20\t\r\n\f]+/g;v.Callbacks=function(f){var m,r;f="string"==typeof f?(m=f,r={},v.each(m.match(Cb)||[],function(va,Ba){r[Ba]=!0}),r):v.extend({},f);var w,B,G,I,N=[],S=[],Z=-1,ia=function(){I=I||f.once;for(G=w=!0;S.length;Z=-1)for(B=S.shift();++Z<N.length;)!1===N[Z].apply(B[0],B[1])&&f.stopOnFalse&&(Z=N.length,B=!1);f.memory||(B=!1);w=!1;I&&(N=B?[]:"")},W={add:function(){return N&&(B&&!w&&(Z=N.length-1,S.push(B)),function za(Ba){v.each(Ba,function(Pa,Za){na(Za)?f.unique&&W.has(Za)||N.push(Za):Za&&
Za.length&&"string"!==M(Za)&&za(Za)})}(arguments),B&&!w&&ia()),this},remove:function(){return v.each(arguments,function(va,Ba){for(var za;-1<(za=v.inArray(Ba,N,za));)N.splice(za,1),za<=Z&&Z--}),this},has:function(va){return va?-1<v.inArray(va,N):0<N.length},empty:function(){return N&&(N=[]),this},disable:function(){return I=S=[],N=B="",this},disabled:function(){return!N},lock:function(){return I=S=[],B||w||(N=B=""),this},locked:function(){return!!I},fireWith:function(va,Ba){return I||(Ba=[va,(Ba=
Ba||[]).slice?Ba.slice():Ba],S.push(Ba),w||ia()),this},fire:function(){return W.fireWith(this,arguments),this},fired:function(){return!!G}};return W};v.extend({Deferred:function(f){var m=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],r="pending",w={state:function(){return r},always:function(){return B.done(arguments).fail(arguments),
this},"catch":function(G){return w.then(null,G)},pipe:function(){var G=arguments;return v.Deferred(function(I){v.each(m,function(N,S){var Z=na(G[S[4]])&&G[S[4]];B[S[1]](function(){var ia=Z&&Z.apply(this,arguments);ia&&na(ia.promise)?ia.promise().progress(I.notify).done(I.resolve).fail(I.reject):I[S[0]+"With"](this,Z?[ia]:arguments)})});G=null}).promise()},then:function(G,I,N){function S(ia,W,va,Ba){return function(){var za=this,Pa=arguments,Za=function(){var lb;if(!(ia<Z)){if((lb=va.apply(za,Pa))===
W.promise())throw new TypeError("Thenable self-resolution");var ub=lb&&("object"==typeof lb||"function"==typeof lb)&&lb.then;na(ub)?Ba?ub.call(lb,S(Z,W,p,Ba),S(Z,W,A,Ba)):(Z++,ub.call(lb,S(Z,W,p,Ba),S(Z,W,A,Ba),S(Z,W,p,W.notifyWith))):(va!==p&&(za=void 0,Pa=[lb]),(Ba||W.resolveWith)(za,Pa))}},zb=Ba?Za:function(){try{Za()}catch(lb){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(lb,zb.stackTrace),Z<=ia+1&&(va!==A&&(za=void 0,Pa=[lb]),W.rejectWith(za,Pa))}};ia?zb():(v.Deferred.getStackHook&&(zb.stackTrace=
v.Deferred.getStackHook()),c.setTimeout(zb))}}var Z=0;return v.Deferred(function(ia){m[0][3].add(S(0,ia,na(N)?N:p,ia.notifyWith));m[1][3].add(S(0,ia,na(G)?G:p));m[2][3].add(S(0,ia,na(I)?I:A))}).promise()},promise:function(G){return null!=G?v.extend(G,w):w}},B={};return v.each(m,function(G,I){var N=I[2],S=I[5];w[I[1]]=N.add;S&&N.add(function(){r=S},m[3-G][2].disable,m[3-G][3].disable,m[0][2].lock,m[0][3].lock);N.add(I[3].fire);B[I[0]]=function(){return B[I[0]+"With"](this===B?void 0:this,arguments),
this};B[I[0]+"With"]=N.fireWith}),w.promise(B),f&&f.call(B,B),B},when:function(f){var m=arguments.length,r=m,w=Array(r),B=jb.call(arguments),G=v.Deferred(),I=function(N){return function(S){w[N]=this;B[N]=1<arguments.length?jb.call(arguments):S;--m||G.resolveWith(w,B)}};if(1>=m&&(D(f,G.done(I(r)).resolve,G.reject,!m),"pending"===G.state()||na(B[r]&&B[r].then)))return G.then();for(;r--;)D(B[r],I(r),G.reject);return G.promise()}});var Ad=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=
function(f,m){c.console&&c.console.warn&&f&&Ad.test(f.name)&&c.console.warn("jQuery.Deferred exception: "+f.message,f.stack,m)};v.readyException=function(f){c.setTimeout(function(){throw f;})};var rc=v.Deferred();v.fn.ready=function(f){return rc.then(f)["catch"](function(m){v.readyException(m)}),this};v.extend({isReady:!1,readyWait:1,ready:function(f){(!0===f?--v.readyWait:v.isReady)||(v.isReady=!0)!==f&&0<--v.readyWait||rc.resolveWith(ra,[v])}});v.ready.then=rc.then;"complete"===ra.readyState||"loading"!==
ra.readyState&&!ra.documentElement.doScroll?c.setTimeout(v.ready):(ra.addEventListener("DOMContentLoaded",L),c.addEventListener("load",L));var Kb=function(f,m,r,w,B,G,I){var N=0,S=f.length,Z=null==r;if("object"===M(r))for(N in B=!0,r)Kb(f,m,N,r[N],!0,G,I);else if(void 0!==w&&(B=!0,na(w)||(I=!0),Z&&(I?(m.call(f,w),m=null):(Z=m,m=function(ia,W,va){return Z.call(v(ia),va)})),m))for(;N<S;N++)m(f[N],r,I?w:w.call(f[N],N,m(f[N],r)));return B?f:Z?m.call(f):S?m(f[0],r):G},Zc=/^-ms-/,$c=/-([a-z])/g,jc=function(f){return 1===
f.nodeType||9===f.nodeType||!+f.nodeType};R.uid=1;R.prototype={cache:function(f){var m=f[this.expando];return m||(m={},jc(f)&&(f.nodeType?f[this.expando]=m:Object.defineProperty(f,this.expando,{value:m,configurable:!0}))),m},set:function(f,m,r){var w;f=this.cache(f);if("string"==typeof m)f[Q(m)]=r;else for(w in m)f[Q(w)]=m[w];return f},get:function(f,m){return void 0===m?this.cache(f):f[this.expando]&&f[this.expando][Q(m)]},access:function(f,m,r){return void 0===m||m&&"string"==typeof m&&void 0===
r?this.get(f,m):(this.set(f,m,r),void 0!==r?r:m)},remove:function(f,m){var r=f[this.expando];if(void 0!==r){if(void 0!==m){var w=(m=Array.isArray(m)?m.map(Q):(m=Q(m))in r?[m]:m.match(Cb)||[]).length;for(;w--;)delete r[m[w]]}(void 0===m||v.isEmptyObject(r))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){f=f[this.expando];return void 0!==f&&!v.isEmptyObject(f)}};var Ha=new R,qb=new R,bd=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ad=/[A-Z]/g;v.extend({hasData:function(f){return qb.hasData(f)||
Ha.hasData(f)},data:function(f,m,r){return qb.access(f,m,r)},removeData:function(f,m){qb.remove(f,m)},_data:function(f,m,r){return Ha.access(f,m,r)},_removeData:function(f,m){Ha.remove(f,m)}});v.fn.extend({data:function(f,m){var r,w,B,G=this[0],I=G&&G.attributes;if(void 0===f){if(this.length&&(B=qb.get(G),1===G.nodeType&&!Ha.get(G,"hasDataAttrs"))){for(r=I.length;r--;)I[r]&&0===(w=I[r].name).indexOf("data-")&&(w=Q(w.slice(5)),X(G,w,B[w]));Ha.set(G,"hasDataAttrs",!0)}return B}return"object"==typeof f?
this.each(function(){qb.set(this,f)}):Kb(this,function(N){var S;if(G&&void 0===N)return void 0!==(S=qb.get(G,f))?S:void 0!==(S=X(G,f))?S:void 0;this.each(function(){qb.set(this,f,N)})},null,m,1<arguments.length,null,!0)},removeData:function(f){return this.each(function(){qb.remove(this,f)})}});v.extend({queue:function(f,m,r){var w;if(f)return m=(m||"fx")+"queue",w=Ha.get(f,m),r&&(!w||Array.isArray(r)?w=Ha.access(f,m,v.makeArray(r)):w.push(r)),w||[]},dequeue:function(f,m){m=m||"fx";var r=v.queue(f,
m),w=r.length,B=r.shift(),G=v._queueHooks(f,m);"inprogress"===B&&(B=r.shift(),w--);B&&("fx"===m&&r.unshift("inprogress"),delete G.stop,B.call(f,function(){v.dequeue(f,m)},G));!w&&G&&G.empty.fire()},_queueHooks:function(f,m){var r=m+"queueHooks";return Ha.get(f,r)||Ha.access(f,r,{empty:v.Callbacks("once memory").add(function(){Ha.remove(f,[m+"queue",r])})})}});v.fn.extend({queue:function(f,m){var r=2;return"string"!=typeof f&&(m=f,f="fx",r--),arguments.length<r?v.queue(this[0],f):void 0===m?this:this.each(function(){var w=
v.queue(this,f,m);v._queueHooks(this,f);"fx"===f&&"inprogress"!==w[0]&&v.dequeue(this,f)})},dequeue:function(f){return this.each(function(){v.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,m){var r,w=1,B=v.Deferred(),G=this,I=this.length,N=function(){--w||B.resolveWith(G,[G])};"string"!=typeof f&&(m=f,f=void 0);for(f=f||"fx";I--;)(r=Ha.get(G[I],f+"queueHooks"))&&r.empty&&(w++,r.empty.add(N));return N(),B.promise(m)}});var Mc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
Ub=new RegExp("^(?:([+-])=|)("+Mc+")([a-z%]*)$","i"),Hb=["Top","Right","Bottom","Left"],Xb=ra.documentElement,Sb=function(f){return v.contains(f.ownerDocument,f)},Bd={composed:!0};Xb.getRootNode&&(Sb=function(f){return v.contains(f.ownerDocument,f)||f.getRootNode(Bd)===f.ownerDocument});var cc=function(f,m){return"none"===(f=m||f).style.display||""===f.style.display&&Sb(f)&&"none"===v.css(f,"display")},Nc=function(f,m,r,w){var B,G={};for(B in m)G[B]=f.style[B],f.style[B]=m[B];for(B in r=r.apply(f,
w||[]),m)f.style[B]=G[B];return r},vc={};v.fn.extend({show:function(){return ea(this,!0)},hide:function(){return ea(this)},toggle:function(f){return"boolean"==typeof f?f?this.show():this.hide():this.each(function(){cc(this)?v(this).show():v(this).hide()})}});var Yb=/^(?:checkbox|radio)$/i,wc=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xc=/^$|^module$|\/(?:java|ecma)script/i,xb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};xb.optgroup=xb.option;xb.tbody=xb.tfoot=xb.colgroup=xb.caption=xb.thead;xb.th=xb.td;var kc,cd=/<|&#?\w+;/;var lc=ra.createDocumentFragment().appendChild(ra.createElement("div"));(kc=ra.createElement("input")).setAttribute("type","radio");kc.setAttribute("checked","checked");kc.setAttribute("name","t");lc.appendChild(kc);Ia.checkClone=lc.cloneNode(!0).cloneNode(!0).lastChild.checked;lc.innerHTML=
"<textarea>x</textarea>";Ia.noCloneChecked=!!lc.cloneNode(!0).lastChild.defaultValue;var Cd=/^key/,Dd=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oc=/^([^.]*)(?:\.(.+)|)/;v.event={global:{},add:function(f,m,r,w,B){var G,I,N,S,Z,ia,W,va,Ba;if(Z=Ha.get(f))for(r.handler&&(r=(G=r).handler,B=G.selector),B&&v.find.matchesSelector(Xb,B),r.guid||(r.guid=v.guid++),(S=Z.events)||(S=Z.events={}),(I=Z.handle)||(I=Z.handle=function(Pa){return"undefined"!=typeof v&&v.event.triggered!==Pa.type?v.event.dispatch.apply(f,
arguments):void 0}),Z=(m=(m||"").match(Cb)||[""]).length;Z--;){var za=Ba=(N=Oc.exec(m[Z])||[])[1];N=(N[2]||"").split(".").sort();za&&(W=v.event.special[za]||{},za=(B?W.delegateType:W.bindType)||za,W=v.event.special[za]||{},ia=v.extend({type:za,origType:Ba,data:w,handler:r,guid:r.guid,selector:B,needsContext:B&&v.expr.match.needsContext.test(B),namespace:N.join(".")},G),(va=S[za])||((va=S[za]=[]).delegateCount=0,W.setup&&!1!==W.setup.call(f,w,N,I)||f.addEventListener&&f.addEventListener(za,I)),W.add&&
(W.add.call(f,ia),ia.handler.guid||(ia.handler.guid=r.guid)),B?va.splice(va.delegateCount++,0,ia):va.push(ia),v.event.global[za]=!0)}},remove:function(f,m,r,w,B){var G,I,N,S,Z,ia,W,va,Ba=Ha.hasData(f)&&Ha.get(f);if(Ba&&(S=Ba.events)){for(Z=(m=(m||"").match(Cb)||[""]).length;Z--;)if(ia=va=(N=Oc.exec(m[Z])||[])[1],W=(N[2]||"").split(".").sort(),ia){var za=v.event.special[ia]||{};var Pa=S[ia=(w?za.delegateType:za.bindType)||ia]||[];N=N[2]&&new RegExp("(^|\\.)"+W.join("\\.(?:.*\\.|)")+"(\\.|$)");for(I=
G=Pa.length;G--;){var Za=Pa[G];!B&&va!==Za.origType||r&&r.guid!==Za.guid||N&&!N.test(Za.namespace)||w&&w!==Za.selector&&("**"!==w||!Za.selector)||(Pa.splice(G,1),Za.selector&&Pa.delegateCount--,za.remove&&za.remove.call(f,Za))}I&&!Pa.length&&(za.teardown&&!1!==za.teardown.call(f,W,Ba.handle)||v.removeEvent(f,ia,Ba.handle),delete S[ia])}else for(ia in S)v.event.remove(f,ia+m[Z],r,w,!0);v.isEmptyObject(S)&&Ha.remove(f,"handle events")}},dispatch:function(f){var m,r,w,B,G=v.event.fix(f),I=Array(arguments.length);
var N=(Ha.get(this,"events")||{})[G.type]||[];var S=v.event.special[G.type]||{};I[0]=G;for(m=1;m<arguments.length;m++)I[m]=arguments[m];if(G.delegateTarget=this,!S.preDispatch||!1!==S.preDispatch.call(this,G)){var Z=v.event.handlers.call(this,G,N);for(m=0;(w=Z[m++])&&!G.isPropagationStopped();)for(G.currentTarget=w.elem,N=0;(B=w.handlers[N++])&&!G.isImmediatePropagationStopped();)G.rnamespace&&!1!==B.namespace&&!G.rnamespace.test(B.namespace)||(G.handleObj=B,G.data=B.data,void 0!==(r=((v.event.special[B.origType]||
{}).handle||B.handler).apply(w.elem,I))&&!1===(G.result=r)&&(G.preventDefault(),G.stopPropagation()));return S.postDispatch&&S.postDispatch.call(this,G),G.result}},handlers:function(f,m){var r,w,B,G=[],I=m.delegateCount,N=f.target;if(I&&N.nodeType&&!("click"===f.type&&1<=f.button))for(;N!==this;N=N.parentNode||this)if(1===N.nodeType&&("click"!==f.type||!0!==N.disabled)){var S=[];var Z={};for(r=0;r<I;r++)void 0===Z[B=(w=m[r]).selector+" "]&&(Z[B]=w.needsContext?-1<v(B,this).index(N):v.find(B,this,
null,[N]).length),Z[B]&&S.push(w);S.length&&G.push({elem:N,handlers:S})}return N=this,I<m.length&&G.push({elem:N,handlers:m.slice(I)}),G},addProp:function(f,m){Object.defineProperty(v.Event.prototype,f,{enumerable:!0,configurable:!0,get:na(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(r){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(f){return f[v.expando]?
f:new v.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){f=this||f;return Yb.test(f.type)&&f.click&&t(f,"input")&&a(f,"click",ka),!1},trigger:function(f){f=this||f;return Yb.test(f.type)&&f.click&&t(f,"input")&&a(f,"click"),!0},_default:function(f){f=f.target;return Yb.test(f.type)&&f.click&&t(f,"input")&&Ha.get(f,"click")||t(f,"a")}},beforeunload:{postDispatch:function(f){void 0!==f.result&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};v.removeEvent=function(f,m,r){f.removeEventListener&&
f.removeEventListener(m,r)};v.Event=function(f,m){if(!(this instanceof v.Event))return new v.Event(f,m);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||void 0===f.defaultPrevented&&!1===f.returnValue?ka:ma,this.target=f.target&&3===f.target.nodeType?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f;m&&v.extend(this,m);this.timeStamp=f&&f.timeStamp||Date.now();this[v.expando]=!0};v.Event.prototype=
{constructor:v.Event,isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma,isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=ka;f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=ka;f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=ka;f&&!this.isSimulated&&f.stopImmediatePropagation();
this.stopPropagation()}};v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(f){var m=f.button;return null==f.which&&Cd.test(f.type)?null!=f.charCode?f.charCode:f.keyCode:!f.which&&void 0!==
m&&Dd.test(f.type)?1&m?1:2&m?3:4&m?2:0:f.which}},v.event.addProp);v.each({focus:"focusin",blur:"focusout"},function(f,m){v.event.special[f]={setup:function(){return a(this,f,sa),!1},trigger:function(){return a(this,f),!0},delegateType:m}});v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(f,m){v.event.special[f]={delegateType:m,bindType:m,handle:function(r){var w,B=r.relatedTarget,G=r.handleObj;return B&&(B===this||v.contains(this,
B))||(r.type=G.origType,w=G.handler.apply(this,arguments),r.type=m),w}}});v.fn.extend({on:function(f,m,r,w){return Aa(this,f,m,r,w)},one:function(f,m,r,w){return Aa(this,f,m,r,w,1)},off:function(f,m,r){var w,B;if(f&&f.preventDefault&&f.handleObj)return w=f.handleObj,v(f.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof f){for(B in f)this.off(B,m,f[B]);return this}return!1!==m&&"function"!=typeof m||(r=m,m=void 0),!1===r&&(r=ma),this.each(function(){v.event.remove(this,
f,r,m)})}});var Ed=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Fd=/<script|<style|<link/i,dd=/checked\s*(?:[^=]|=\s*.checked.)/i,ed=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;v.extend({htmlPrefilter:function(f){return f.replace(Ed,"<$1></$2>")},clone:function(f,m,r){var w,B,G,I=f.cloneNode(!0),N=Sb(f);if(!(Ia.noCloneChecked||1!==f.nodeType&&11!==f.nodeType||v.isXMLDoc(f))){var S=ua(I);var Z=0;for(w=(B=ua(f)).length;Z<w;Z++){var ia=B[Z];var W=S[Z];
void 0;"input"===(G=W.nodeName.toLowerCase())&&Yb.test(ia.type)?W.checked=ia.checked:"input"!==G&&"textarea"!==G||(W.defaultValue=ia.defaultValue)}}if(m)if(r)for(B=B||ua(f),S=S||ua(I),Z=0,w=B.length;Z<w;Z++)d(B[Z],S[Z]);else d(f,I);return 0<(S=ua(I,"script")).length&&V(S,!N&&ua(f,"script")),I},cleanData:function(f){for(var m,r,w,B=v.event.special,G=0;void 0!==(r=f[G]);G++)if(jc(r)){if(m=r[Ha.expando]){if(m.events)for(w in m.events)B[w]?v.event.remove(r,w):v.removeEvent(r,w,m.handle);r[Ha.expando]=
void 0}r[qb.expando]&&(r[qb.expando]=void 0)}}});v.fn.extend({detach:function(f){return h(this,f,!0)},remove:function(f){return h(this,f)},text:function(f){return Kb(this,function(m){return void 0===m?v.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,f,arguments.length)},append:function(){return e(this,arguments,function(f){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||C(this,f).appendChild(f)})},prepend:function(){return e(this,
arguments,function(f){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=C(this,f);m.insertBefore(f,m.firstChild)}})},before:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},after:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,m=0;null!=(f=this[m]);m++)1===f.nodeType&&(v.cleanData(ua(f,!1)),f.textContent="");return this},clone:function(f,
m){return f=null!=f&&f,m=null==m?f:m,this.map(function(){return v.clone(this,f,m)})},html:function(f){return Kb(this,function(m){var r=this[0]||{},w=0,B=this.length;if(void 0===m&&1===r.nodeType)return r.innerHTML;if("string"==typeof m&&!Fd.test(m)&&!xb[(wc.exec(m)||["",""])[1].toLowerCase()]){m=v.htmlPrefilter(m);try{for(;w<B;w++)1===(r=this[w]||{}).nodeType&&(v.cleanData(ua(r,!1)),r.innerHTML=m);r=0}catch(G){}}r&&this.empty().append(m)},null,f,arguments.length)},replaceWith:function(){var f=[];
return e(this,arguments,function(m){var r=this.parentNode;0>v.inArray(this,f)&&(v.cleanData(ua(this)),r&&r.replaceChild(m,this))},f)}});v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,m){v.fn[f]=function(r){for(var w=[],B=v(r),G=B.length-1,I=0;I<=G;I++)r=I===G?this:this.clone(!0),v(B[I])[m](r),Va.apply(w,r.get());return this.pushStack(w)}});var mc=new RegExp("^("+Mc+")(?!px)[a-z%]+$","i"),dc=function(f){var m=f.ownerDocument.defaultView;
return m&&m.opener||(m=c),m.getComputedStyle(f)},fd=new RegExp(Hb.join("|"),"i");!function(){function f(){if(N){I.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Xb.appendChild(I).appendChild(N);var S=c.getComputedStyle(N);m="1%"!==S.top;G=12===Math.round(parseFloat(S.marginLeft));N.style.right="60%";B=36===Math.round(parseFloat(S.right));
r=36===Math.round(parseFloat(S.width));N.style.position="absolute";w=12===Math.round(parseFloat(N.offsetWidth/3));Xb.removeChild(I);N=null}}var m,r,w,B,G,I=ra.createElement("div"),N=ra.createElement("div");N.style&&(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",Ia.clearCloneStyle="content-box"===N.style.backgroundClip,v.extend(Ia,{boxSizingReliable:function(){return f(),r},pixelBoxStyles:function(){return f(),B},pixelPosition:function(){return f(),m},reliableMarginLeft:function(){return f(),
G},scrollboxSize:function(){return f(),w}}))}();var Ac=["Webkit","Moz","ms"],zc=ra.createElement("div").style,yc={},Gd=/^(none|table(?!-c[ea]).+)/,Pc=/^--/,Hd={position:"absolute",visibility:"hidden",display:"block"},Qc={letterSpacing:"0",fontWeight:"400"};v.extend({cssHooks:{opacity:{get:function(f,m){if(m)return f=k(f,"opacity"),""===f?"1":f}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,
gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(f,m,r,w){if(f&&3!==f.nodeType&&8!==f.nodeType&&f.style){var B,G,I,N=Q(m),S=Pc.test(m),Z=f.style;if(S||(m=n(N)),I=v.cssHooks[m]||v.cssHooks[N],void 0===r)return I&&"get"in I&&void 0!==(B=I.get(f,!1,w))?B:Z[m];"string"===(G=typeof r)&&(B=Ub.exec(r))&&B[1]&&(r=da(f,m,B),G="number");null!=r&&r==r&&("number"!==G||S||(r+=B&&B[3]||(v.cssNumber[N]?"":"px")),Ia.clearCloneStyle||
""!==r||0!==m.indexOf("background")||(Z[m]="inherit"),I&&"set"in I&&void 0===(r=I.set(f,r,w))||(S?Z.setProperty(m,r):Z[m]=r))}},css:function(f,m,r,w){var B,G,I,N=Q(m);return Pc.test(m)||(m=n(N)),(I=v.cssHooks[m]||v.cssHooks[N])&&"get"in I&&(B=I.get(f,!0,r)),void 0===B&&(B=k(f,m,w)),"normal"===B&&m in Qc&&(B=Qc[m]),""===r||r?(G=parseFloat(B),!0===r||isFinite(G)?G||0:B):B}});v.each(["height","width"],function(f,m){v.cssHooks[m]={get:function(r,w,B){if(w)return!Gd.test(v.css(r,"display"))||r.getClientRects().length&&
r.getBoundingClientRect().width?K(r,m,B):Nc(r,Hd,function(){return K(r,m,B)})},set:function(r,w,B){var G,I=dc(r),N=!Ia.scrollboxSize()&&"absolute"===I.position,S=(N||B)&&"border-box"===v.css(r,"boxSizing",!1,I);B=B?x(r,m,B,S,I):0;return S&&N&&(B-=Math.ceil(r["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(I[m])-x(r,m,"border",!1,I)-.5)),B&&(G=Ub.exec(w))&&"px"!==(G[3]||"px")&&(r.style[m]=w,w=v.css(r,m)),y(0,w,B)}}});v.cssHooks.marginLeft=q(Ia.reliableMarginLeft,function(f,m){if(m)return(parseFloat(k(f,
"marginLeft"))||f.getBoundingClientRect().left-Nc(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"});v.each({margin:"",padding:"",border:"Width"},function(f,m){v.cssHooks[f+m]={expand:function(r){var w=0,B={};for(r="string"==typeof r?r.split(" "):[r];4>w;w++)B[f+Hb[w]+m]=r[w]||r[w-2]||r[0];return B}};"margin"!==f&&(v.cssHooks[f+m].set=y)});v.fn.extend({css:function(f,m){return Kb(this,function(r,w,B){var G,I={},N=0;if(Array.isArray(w)){B=dc(r);for(G=w.length;N<G;N++)I[w[N]]=
v.css(r,w[N],!1,B);return I}return void 0!==B?v.style(r,w,B):v.css(r,w)},f,m,1<arguments.length)}});((v.Tween=F).prototype={constructor:F,init:function(f,m,r,w,B,G){this.elem=f;this.prop=r;this.easing=B||v.easing._default;this.options=m;this.start=this.now=this.cur();this.end=w;this.unit=G||(v.cssNumber[r]?"":"px")},cur:function(){var f=F.propHooks[this.prop];return f&&f.get?f.get(this):F.propHooks._default.get(this)},run:function(f){var m,r=F.propHooks[this.prop];return this.options.duration?this.pos=
m=v.easing[this.easing](f,this.options.duration*f,0,1,this.options.duration):this.pos=m=f,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):F.propHooks._default.set(this),this}}).init.prototype=F.prototype;(F.propHooks={_default:{get:function(f){var m;return 1!==f.elem.nodeType||null!=f.elem[f.prop]&&null==f.elem.style[f.prop]?f.elem[f.prop]:(m=v.css(f.elem,f.prop,""))&&"auto"!==m?m:0},set:function(f){v.fx.step[f.prop]?
v.fx.step[f.prop](f):1!==f.elem.nodeType||!v.cssHooks[f.prop]&&null==f.elem.style[n(f.prop)]?f.elem[f.prop]=f.now:v.style(f.elem,f.prop,f.now+f.unit)}}}).scrollTop=F.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}};v.easing={linear:function(f){return f},swing:function(f){return.5-Math.cos(f*Math.PI)/2},_default:"swing"};v.fx=F.prototype.init;v.fx.step={};var Tb,ec,Id=/^(?:toggle|show|hide)$/,Jd=/queueHooks$/;v.Animation=v.extend(la,{tweeners:{"*":[function(f,
m){var r=this.createTween(f,m);return da(r.elem,f,Ub.exec(m),r),r}]},tweener:function(f,m){na(f)?(m=f,f=["*"]):f=f.match(Cb);for(var r,w=0,B=f.length;w<B;w++)r=f[w],la.tweeners[r]=la.tweeners[r]||[],la.tweeners[r].unshift(m)},prefilters:[function(f,m,r){var w,B,G,I,N,S,Z,ia="width"in m||"height"in m,W=this,va={},Ba=f.style,za=f.nodeType&&cc(f),Pa=Ha.get(f,"fxshow");for(w in r.queue||(null==(I=v._queueHooks(f,"fx")).unqueued&&(I.unqueued=0,N=I.empty.fire,I.empty.fire=function(){I.unqueued||N()}),I.unqueued++,
W.always(function(){W.always(function(){I.unqueued--;v.queue(f,"fx").length||I.empty.fire()})})),m)if(B=m[w],Id.test(B)){if(delete m[w],G=G||"toggle"===B,B===(za?"hide":"show")){if("show"!==B||!Pa||void 0===Pa[w])continue;za=!0}va[w]=Pa&&Pa[w]||v.style(f,w)}if((m=!v.isEmptyObject(m))||!v.isEmptyObject(va))for(w in ia&&1===f.nodeType&&(r.overflow=[Ba.overflow,Ba.overflowX,Ba.overflowY],null==(S=Pa&&Pa.display)&&(S=Ha.get(f,"display")),"none"===(Z=v.css(f,"display"))&&(S?Z=S:(ea([f],!0),S=f.style.display||
S,Z=v.css(f,"display"),ea([f]))),("inline"===Z||"inline-block"===Z&&null!=S)&&"none"===v.css(f,"float")&&(m||(W.done(function(){Ba.display=S}),null==S&&(Z=Ba.display,S="none"===Z?"":Z)),Ba.display="inline-block")),r.overflow&&(Ba.overflow="hidden",W.always(function(){Ba.overflow=r.overflow[0];Ba.overflowX=r.overflow[1];Ba.overflowY=r.overflow[2]})),m=!1,va)m||(Pa?"hidden"in Pa&&(za=Pa.hidden):Pa=Ha.access(f,"fxshow",{display:S}),G&&(Pa.hidden=!za),za&&ea([f],!0),W.done(function(){for(w in za||ea([f]),
Ha.remove(f,"fxshow"),va)v.style(f,w,va[w])})),m=ca(za?Pa[w]:0,w,W),w in Pa||(Pa[w]=m.start,za&&(m.end=m.start,m.start=0))}],prefilter:function(f,m){m?la.prefilters.unshift(f):la.prefilters.push(f)}});v.speed=function(f,m,r){var w=f&&"object"==typeof f?v.extend({},f):{complete:r||!r&&m||na(f)&&f,duration:f,easing:r&&m||m&&!na(m)&&m};return v.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration in v.fx.speeds?w.duration=v.fx.speeds[w.duration]:w.duration=v.fx.speeds._default),null!=w.queue&&
!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){na(w.old)&&w.old.call(this);w.queue&&v.dequeue(this,w.queue)},w};v.fn.extend({fadeTo:function(f,m,r,w){return this.filter(cc).css("opacity",0).show().end().animate({opacity:m},f,r,w)},animate:function(f,m,r,w){var B=v.isEmptyObject(f),G=v.speed(m,r,w);m=function(){var I=la(this,v.extend({},f),G);(B||Ha.get(this,"finish"))&&I.stop(!0)};return m.finish=m,B||!1===G.queue?this.each(m):this.queue(G.queue,m)},stop:function(f,m,r){var w=
function(B){var G=B.stop;delete B.stop;G(r)};return"string"!=typeof f&&(r=m,m=f,f=void 0),m&&!1!==f&&this.queue(f||"fx",[]),this.each(function(){var B=!0,G=null!=f&&f+"queueHooks",I=v.timers,N=Ha.get(this);if(G)N[G]&&N[G].stop&&w(N[G]);else for(G in N)N[G]&&N[G].stop&&Jd.test(G)&&w(N[G]);for(G=I.length;G--;)I[G].elem!==this||null!=f&&I[G].queue!==f||(I[G].anim.stop(r),B=!1,I.splice(G,1));!B&&r||v.dequeue(this,f)})},finish:function(f){return!1!==f&&(f=f||"fx"),this.each(function(){var m=Ha.get(this),
r=m[f+"queue"];var w=m[f+"queueHooks"];var B=v.timers,G=r?r.length:0;m.finish=!0;v.queue(this,f,[]);w&&w.stop&&w.stop.call(this,!0);for(w=B.length;w--;)B[w].elem===this&&B[w].queue===f&&(B[w].anim.stop(!0),B.splice(w,1));for(w=0;w<G;w++)r[w]&&r[w].finish&&r[w].finish.call(this);delete m.finish})}});v.each(["toggle","show","hide"],function(f,m){var r=v.fn[m];v.fn[m]=function(w,B,G){return null==w||"boolean"==typeof w?r.apply(this,arguments):this.animate(fa(m,!0),w,B,G)}});v.each({slideDown:fa("show"),
slideUp:fa("hide"),slideToggle:fa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(f,m){v.fn[f]=function(r,w,B){return this.animate(m,r,w,B)}});v.timers=[];v.fx.tick=function(){var f,m=0,r=v.timers;for(Tb=Date.now();m<r.length;m++)(f=r[m])()||r[m]!==f||r.splice(m--,1);r.length||v.fx.stop();Tb=void 0};v.fx.timer=function(f){v.timers.push(f);v.fx.start()};v.fx.interval=13;v.fx.start=function(){ec||(ec=!0,Y())};v.fx.stop=function(){ec=null};v.fx.speeds=
{slow:600,fast:200,_default:400};v.fn.delay=function(f,m){return f=v.fx&&v.fx.speeds[f]||f,m=m||"fx",this.queue(m,function(r,w){var B=c.setTimeout(r,f);w.stop=function(){c.clearTimeout(B)}})};var Zb=ra.createElement("input");var Kd=ra.createElement("select").appendChild(ra.createElement("option"));Zb.type="checkbox";Ia.checkOn=""!==Zb.value;Ia.optSelected=Kd.selected;(Zb=ra.createElement("input")).value="t";Zb.type="radio";Ia.radioValue="t"===Zb.value;var $b=v.expr.attrHandle;v.fn.extend({attr:function(f,
m){return Kb(this,v.attr,f,m,1<arguments.length)},removeAttr:function(f){return this.each(function(){v.removeAttr(this,f)})}});v.extend({attr:function(f,m,r){var w,B,G=f.nodeType;if(3!==G&&8!==G&&2!==G)return"undefined"==typeof f.getAttribute?v.prop(f,m,r):(1===G&&v.isXMLDoc(f)||(B=v.attrHooks[m.toLowerCase()]||(v.expr.match.bool.test(m)?Ld:void 0)),void 0!==r?null===r?void v.removeAttr(f,m):B&&"set"in B&&void 0!==(w=B.set(f,r,m))?w:(f.setAttribute(m,r+""),r):B&&"get"in B&&null!==(w=B.get(f,m))?w:
null==(w=v.find.attr(f,m))?void 0:w)},attrHooks:{type:{set:function(f,m){if(!Ia.radioValue&&"radio"===m&&t(f,"input")){var r=f.value;return f.setAttribute("type",m),r&&(f.value=r),m}}}},removeAttr:function(f,m){var r=0,w=m&&m.match(Cb);if(w&&1===f.nodeType)for(;m=w[r++];)f.removeAttribute(m)}});var Ld={set:function(f,m,r){return!1===m?v.removeAttr(f,r):f.setAttribute(r,r),r}};v.each(v.expr.match.bool.source.match(/\w+/g),function(f,m){var r=$b[m]||v.find.attr;$b[m]=function(w,B,G){var I,N,S=B.toLowerCase();
return G||(N=$b[S],$b[S]=I,I=null!=r(w,B,G)?S:null,$b[S]=N),I}});var Md=/^(?:input|select|textarea|button)$/i,Nd=/^(?:a|area)$/i;v.fn.extend({prop:function(f,m){return Kb(this,v.prop,f,m,1<arguments.length)},removeProp:function(f){return this.each(function(){delete this[v.propFix[f]||f]})}});v.extend({prop:function(f,m,r){var w,B,G=f.nodeType;if(3!==G&&8!==G&&2!==G)return 1===G&&v.isXMLDoc(f)||(m=v.propFix[m]||m,B=v.propHooks[m]),void 0!==r?B&&"set"in B&&void 0!==(w=B.set(f,r,m))?w:f[m]=r:B&&"get"in
B&&null!==(w=B.get(f,m))?w:f[m]},propHooks:{tabIndex:{get:function(f){var m=v.find.attr(f,"tabindex");return m?parseInt(m,10):Md.test(f.nodeName)||Nd.test(f.nodeName)&&f.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});Ia.optSelected||(v.propHooks.selected={get:function(f){f=f.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(f){f=f.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}});v.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){v.propFix[this.toLowerCase()]=this});v.fn.extend({addClass:function(f){var m,r,w,B,G,I,N,S=0;if(na(f))return this.each(function(Z){v(this).addClass(f.call(this,Z,ya(this)))});if((m=xa(f)).length)for(;r=this[S++];)if(B=ya(r),w=1===r.nodeType&&" "+Ga(B)+" "){for(I=0;G=m[I++];)0>w.indexOf(" "+G+" ")&&(w+=G+" ");B!==(N=Ga(w))&&r.setAttribute("class",N)}return this},removeClass:function(f){var m,r,w,B,G,I,N,S=0;if(na(f))return this.each(function(Z){v(this).removeClass(f.call(this,Z,ya(this)))});
if(!arguments.length)return this.attr("class","");if((m=xa(f)).length)for(;r=this[S++];)if(B=ya(r),w=1===r.nodeType&&" "+Ga(B)+" "){for(I=0;G=m[I++];)for(;-1<w.indexOf(" "+G+" ");)w=w.replace(" "+G+" "," ");B!==(N=Ga(w))&&r.setAttribute("class",N)}return this},toggleClass:function(f,m){var r=typeof f,w="string"===r||Array.isArray(f);return"boolean"==typeof m&&w?m?this.addClass(f):this.removeClass(f):na(f)?this.each(function(B){v(this).toggleClass(f.call(this,B,ya(this),m),m)}):this.each(function(){var B,
G;if(w){var I=0;var N=v(this);for(G=xa(f);B=G[I++];)N.hasClass(B)?N.removeClass(B):N.addClass(B)}else void 0!==f&&"boolean"!==r||((B=ya(this))&&Ha.set(this,"__className__",B),this.setAttribute&&this.setAttribute("class",B||!1===f?"":Ha.get(this,"__className__")||""))})},hasClass:function(f){var m,r=0;for(f=" "+f+" ";m=this[r++];)if(1===m.nodeType&&-1<(" "+Ga(ya(m))+" ").indexOf(f))return!0;return!1}});var Od=/\r/g;v.fn.extend({val:function(f){var m,r,w,B=this[0];return arguments.length?(w=na(f),this.each(function(G){var I;
1===this.nodeType&&(null==(I=w?f.call(this,G,v(this).val()):f)?I="":"number"==typeof I?I+="":Array.isArray(I)&&(I=v.map(I,function(N){return null==N?"":N+""})),(m=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,I,"value")||(this.value=I))})):B?(m=v.valHooks[B.type]||v.valHooks[B.nodeName.toLowerCase()])&&"get"in m&&void 0!==(r=m.get(B,"value"))?r:"string"==typeof(r=B.value)?r.replace(Od,""):null==r?"":r:void 0}});v.extend({valHooks:{option:{get:function(f){var m=
v.find.attr(f,"value");return null!=m?m:Ga(v.text(f))}},select:{get:function(f){var m,r,w=f.options,B=f.selectedIndex,G="select-one"===f.type,I=G?null:[],N=G?B+1:w.length;for(r=0>B?N:G?B:0;r<N;r++)if(!(!(m=w[r]).selected&&r!==B||m.disabled||m.parentNode.disabled&&t(m.parentNode,"optgroup"))){if(f=v(m).val(),G)return f;I.push(f)}return I},set:function(f,m){var r,w,B=f.options;m=v.makeArray(m);for(var G=B.length;G--;)((w=B[G]).selected=-1<v.inArray(v.valHooks.option.get(w),m))&&(r=!0);return r||(f.selectedIndex=
-1),m}}}});v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(f,m){if(Array.isArray(m))return f.checked=-1<v.inArray(v(f).val(),m)}};Ia.checkOn||(v.valHooks[this].get=function(f){return null===f.getAttribute("value")?"on":f.value})});Ia.focusin="onfocusin"in c;var Rc=/^(?:focusinfocus|focusoutblur)$/,Sc=function(f){f.stopPropagation()};v.extend(v.event,{trigger:function(f,m,r,w){var B,G,I,N,S,Z,ia=[r||ra],W=hb.call(f,"type")?f.type:f;var va=hb.call(f,"namespace")?f.namespace.split("."):
[];if(B=Z=G=r=r||ra,3!==r.nodeType&&8!==r.nodeType&&!Rc.test(W+v.event.triggered)&&(-1<W.indexOf(".")&&(W=(va=W.split(".")).shift(),va.sort()),I=0>W.indexOf(":")&&"on"+W,(f=f[v.expando]?f:new v.Event(W,"object"==typeof f&&f)).isTrigger=w?2:3,f.namespace=va.join("."),f.rnamespace=f.namespace?new RegExp("(^|\\.)"+va.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=r),m=null==m?[f]:v.makeArray(m,[f]),S=v.event.special[W]||{},w||!S.trigger||!1!==S.trigger.apply(r,m))){if(!w&&
!S.noBubble&&!nb(r)){var Ba=S.delegateType||W;for(Rc.test(Ba+W)||(B=B.parentNode);B;B=B.parentNode)ia.push(B),G=B;G===(r.ownerDocument||ra)&&ia.push(G.defaultView||G.parentWindow||c)}for(va=0;(B=ia[va++])&&!f.isPropagationStopped();)Z=B,f.type=1<va?Ba:S.bindType||W,(N=(Ha.get(B,"events")||{})[f.type]&&Ha.get(B,"handle"))&&N.apply(B,m),(N=I&&B[I])&&N.apply&&jc(B)&&(f.result=N.apply(B,m),!1===f.result&&f.preventDefault());return f.type=W,w||f.isDefaultPrevented()||S._default&&!1!==S._default.apply(ia.pop(),
m)||!jc(r)||I&&na(r[W])&&!nb(r)&&((G=r[I])&&(r[I]=null),v.event.triggered=W,f.isPropagationStopped()&&Z.addEventListener(W,Sc),r[W](),f.isPropagationStopped()&&Z.removeEventListener(W,Sc),v.event.triggered=void 0,G&&(r[I]=G)),f.result}},simulate:function(f,m,r){f=v.extend(new v.Event,r,{type:f,isSimulated:!0});v.event.trigger(f,null,m)}});v.fn.extend({trigger:function(f,m){return this.each(function(){v.event.trigger(f,m,this)})},triggerHandler:function(f,m){var r=this[0];if(r)return v.event.trigger(f,
m,r,!0)}});Ia.focusin||v.each({focus:"focusin",blur:"focusout"},function(f,m){var r=function(w){v.event.simulate(m,w.target,v.event.fix(w))};v.event.special[m]={setup:function(){var w=this.ownerDocument||this,B=Ha.access(w,m);B||w.addEventListener(f,r,!0);Ha.access(w,m,(B||0)+1)},teardown:function(){var w=this.ownerDocument||this,B=Ha.access(w,m)-1;B?Ha.access(w,m,B):(w.removeEventListener(f,r,!0),Ha.remove(w,m))}}});var ac=c.location,Tc=Date.now(),sc=/\?/;v.parseXML=function(f){if(!f||"string"!=
typeof f)return null;try{var m=(new c.DOMParser).parseFromString(f,"text/xml")}catch(r){m=void 0}return m&&!m.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+f),m};var gd=/\[\]$/,Uc=/\r?\n/g,Pd=/^(?:submit|button|image|reset|file)$/i,Qd=/^(?:input|select|textarea|keygen)/i;v.param=function(f,m){var r,w=[],B=function(G,I){I=na(I)?I():I;w[w.length]=encodeURIComponent(G)+"="+encodeURIComponent(null==I?"":I)};if(null==f)return"";if(Array.isArray(f)||f.jquery&&!v.isPlainObject(f))v.each(f,
function(){B(this.name,this.value)});else for(r in f)wa(r,f[r],m,B);return w.join("&")};v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var f=v.prop(this,"elements");return f?v.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!v(this).is(":disabled")&&Qd.test(this.nodeName)&&!Pd.test(f)&&(this.checked||!Yb.test(f))}).map(function(f,m){f=v(this).val();return null==f?null:Array.isArray(f)?v.map(f,function(r){return{name:m.name,
value:r.replace(Uc,"\r\n")}}):{name:m.name,value:f.replace(Uc,"\r\n")}}).get()}});var Rd=/%20/g,Sd=/#.*$/,Td=/([?&])_=[^&]*/,Ud=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vd=/^(?:GET|HEAD)$/,Wd=/^\/\//,Vc={},nc={},Wc="*/".concat("*"),tc=ra.createElement("a");tc.href=ac.href;v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ac.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ac.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Wc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,m){return m?Ja(Ja(f,v.ajaxSettings),m):Ja(v.ajaxSettings,f)},ajaxPrefilter:Da(Vc),ajaxTransport:Da(nc),
ajax:function(f,m){function r(Ra,ib,Mb,Vb){var Eb,Nb,vb,wb,tb,Oa=ib;Ka||(Ka=!0,N&&c.clearTimeout(N),w=void 0,G=Vb||"",Ca.readyState=0<Ra?4:0,Eb=200<=Ra&&300>Ra||304===Ra,Mb&&(wb=function($a,ab,bb){for(var sb,mb,Wa,Ma,db=$a.contents,Ya=$a.dataTypes;"*"===Ya[0];)Ya.shift(),void 0===sb&&(sb=$a.mimeType||ab.getResponseHeader("Content-Type"));if(sb)for(mb in db)if(db[mb]&&db[mb].test(sb)){Ya.unshift(mb);break}if(Ya[0]in bb)Wa=Ya[0];else{for(mb in bb){if(!Ya[0]||$a.converters[mb+" "+Ya[0]]){Wa=mb;break}Ma||
(Ma=mb)}Wa=Wa||Ma}if(Wa)return Wa!==Ya[0]&&Ya.unshift(Wa),bb[Wa]}(W,Ca,Mb)),wb=function($a,ab,bb,sb){var mb,Wa,Ma,db,Ya,Fb={},Qb=$a.dataTypes.slice();if(Qb[1])for(Ma in $a.converters)Fb[Ma.toLowerCase()]=$a.converters[Ma];for(Wa=Qb.shift();Wa;)if($a.responseFields[Wa]&&(bb[$a.responseFields[Wa]]=ab),!Ya&&sb&&$a.dataFilter&&(ab=$a.dataFilter(ab,$a.dataType)),Ya=Wa,Wa=Qb.shift())if("*"===Wa)Wa=Ya;else if("*"!==Ya&&Ya!==Wa){if(!(Ma=Fb[Ya+" "+Wa]||Fb["* "+Wa]))for(mb in Fb)if((db=mb.split(" "))[1]===
Wa&&(Ma=Fb[Ya+" "+db[0]]||Fb["* "+db[0]])){!0===Ma?Ma=Fb[mb]:!0!==Fb[mb]&&(Wa=db[0],Qb.unshift(db[1]));break}if(!0!==Ma)if(Ma&&$a["throws"])ab=Ma(ab);else try{ab=Ma(ab)}catch(hc){return{state:"parsererror",error:Ma?hc:"No conversion from "+Ya+" to "+Wa}}}return{state:"success",data:ab}}(W,wb,Ca,Eb),Eb?(W.ifModified&&((tb=Ca.getResponseHeader("Last-Modified"))&&(v.lastModified[B]=tb),(tb=Ca.getResponseHeader("etag"))&&(v.etag[B]=tb)),204===Ra||"HEAD"===W.type?Oa="nocontent":304===Ra?Oa="notmodified":
(Oa=wb.state,Nb=wb.data,Eb=!(vb=wb.error))):(vb=Oa,!Ra&&Oa||(Oa="error",0>Ra&&(Ra=0))),Ca.status=Ra,Ca.statusText=(ib||Oa)+"",Eb?za.resolveWith(va,[Nb,Oa,Ca]):za.rejectWith(va,[Ca,Oa,vb]),Ca.statusCode(Za),Za=void 0,S&&Ba.trigger(Eb?"ajaxSuccess":"ajaxError",[Ca,W,Eb?Nb:vb]),Pa.fireWith(va,[Ca,Oa]),S&&(Ba.trigger("ajaxComplete",[Ca,W]),--v.active||v.event.trigger("ajaxStop")))}"object"==typeof f&&(m=f,f=void 0);m=m||{};var w,B,G,I,N,S,Z,ia,W=v.ajaxSetup({},m),va=W.context||W,Ba=W.context&&(va.nodeType||
va.jquery)?v(va):v.event,za=v.Deferred(),Pa=v.Callbacks("once memory"),Za=W.statusCode||{},zb={},lb={},ub="canceled",Ca={readyState:0,getResponseHeader:function(Ra){var ib;if(Ka){if(!I)for(I={};ib=Ud.exec(G);)I[ib[1].toLowerCase()+" "]=(I[ib[1].toLowerCase()+" "]||[]).concat(ib[2]);ib=I[Ra.toLowerCase()+" "]}return null==ib?null:ib.join(", ")},getAllResponseHeaders:function(){return Ka?G:null},setRequestHeader:function(Ra,ib){return null==Ka&&(Ra=lb[Ra.toLowerCase()]=lb[Ra.toLowerCase()]||Ra,zb[Ra]=
ib),this},overrideMimeType:function(Ra){return null==Ka&&(W.mimeType=Ra),this},statusCode:function(Ra){var ib;if(Ra)if(Ka)Ca.always(Ra[Ca.status]);else for(ib in Ra)Za[ib]=[Za[ib],Ra[ib]];return this},abort:function(Ra){Ra=Ra||ub;return w&&w.abort(Ra),r(0,Ra),this}};if(za.promise(Ca),W.url=((f||W.url||ac.href)+"").replace(Wd,ac.protocol+"//"),W.type=m.method||m.type||W.method||W.type,W.dataTypes=(W.dataType||"*").toLowerCase().match(Cb)||[""],null==W.crossDomain){f=ra.createElement("a");try{f.href=
W.url,f.href=f.href,W.crossDomain=tc.protocol+"//"+tc.host!=f.protocol+"//"+f.host}catch(Ra){W.crossDomain=!0}}if(W.data&&W.processData&&"string"!=typeof W.data&&(W.data=v.param(W.data,W.traditional)),Ta(Vc,W,m,Ca),Ka)return Ca;for(Z in(S=v.event&&W.global)&&0==v.active++&&v.event.trigger("ajaxStart"),W.type=W.type.toUpperCase(),W.hasContent=!Vd.test(W.type),B=W.url.replace(Sd,""),W.hasContent?W.data&&W.processData&&0===(W.contentType||"").indexOf("application/x-www-form-urlencoded")&&(W.data=W.data.replace(Rd,
"+")):(ia=W.url.slice(B.length),W.data&&(W.processData||"string"==typeof W.data)&&(B+=(sc.test(B)?"&":"?")+W.data,delete W.data),!1===W.cache&&(B=B.replace(Td,"$1"),ia=(sc.test(B)?"&":"?")+"_="+Tc++ +ia),W.url=B+ia),W.ifModified&&(v.lastModified[B]&&Ca.setRequestHeader("If-Modified-Since",v.lastModified[B]),v.etag[B]&&Ca.setRequestHeader("If-None-Match",v.etag[B])),(W.data&&W.hasContent&&!1!==W.contentType||m.contentType)&&Ca.setRequestHeader("Content-Type",W.contentType),Ca.setRequestHeader("Accept",
W.dataTypes[0]&&W.accepts[W.dataTypes[0]]?W.accepts[W.dataTypes[0]]+("*"!==W.dataTypes[0]?", "+Wc+"; q=0.01":""):W.accepts["*"]),W.headers)Ca.setRequestHeader(Z,W.headers[Z]);if(W.beforeSend&&(!1===W.beforeSend.call(va,Ca,W)||Ka))return Ca.abort();if(ub="abort",Pa.add(W.complete),Ca.done(W.success),Ca.fail(W.error),w=Ta(nc,W,m,Ca)){if(Ca.readyState=1,S&&Ba.trigger("ajaxSend",[Ca,W]),Ka)return Ca;W.async&&0<W.timeout&&(N=c.setTimeout(function(){Ca.abort("timeout")},W.timeout));try{var Ka=!1;w.send(zb,
r)}catch(Ra){if(Ka)throw Ra;r(-1,Ra)}}else r(-1,"No Transport");return Ca},getJSON:function(f,m,r){return v.get(f,m,r,"json")},getScript:function(f,m){return v.get(f,void 0,m,"script")}});v.each(["get","post"],function(f,m){v[m]=function(r,w,B,G){return na(w)&&(G=G||B,B=w,w=void 0),v.ajax(v.extend({url:r,type:m,dataType:G,data:w,success:B},v.isPlainObject(r)&&r))}});v._evalUrl=function(f,m){return v.ajax({url:f,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},
dataFilter:function(r){v.globalEval(r,m)}})};v.fn.extend({wrapAll:function(f){var m;return this[0]&&(na(f)&&(f=f.call(this[0])),m=v(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var r=this;r.firstElementChild;)r=r.firstElementChild;return r}).append(this)),this},wrapInner:function(f){return na(f)?this.each(function(m){v(this).wrapInner(f.call(this,m))}):this.each(function(){var m=v(this),r=m.contents();r.length?r.wrapAll(f):m.append(f)})},
wrap:function(f){var m=na(f);return this.each(function(r){v(this).wrapAll(m?f.call(this,r):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}});v.expr.pseudos.hidden=function(f){return!v.expr.pseudos.visible(f)};v.expr.pseudos.visible=function(f){return!!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)};v.ajaxSettings.xhr=function(){try{return new c.XMLHttpRequest}catch(f){}};var Xd={0:200,1223:204},bc=v.ajaxSettings.xhr();
Ia.cors=!!bc&&"withCredentials"in bc;Ia.ajax=bc=!!bc;v.ajaxTransport(function(f){var m,r;if(Ia.cors||bc&&!f.crossDomain)return{send:function(w,B){var G,I=f.xhr();if(I.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(G in f.xhrFields)I[G]=f.xhrFields[G];for(G in f.mimeType&&I.overrideMimeType&&I.overrideMimeType(f.mimeType),f.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)I.setRequestHeader(G,w[G]);m=function(N){return function(){m&&(m=r=I.onload=I.onerror=
I.onabort=I.ontimeout=I.onreadystatechange=null,"abort"===N?I.abort():"error"===N?"number"!=typeof I.status?B(0,"error"):B(I.status,I.statusText):B(Xd[I.status]||I.status,I.statusText,"text"!==(I.responseType||"text")||"string"!=typeof I.responseText?{binary:I.response}:{text:I.responseText},I.getAllResponseHeaders()))}};I.onload=m();r=I.onerror=I.ontimeout=m("error");void 0!==I.onabort?I.onabort=r:I.onreadystatechange=function(){4===I.readyState&&c.setTimeout(function(){m&&r()})};m=m("abort");try{I.send(f.hasContent&&
f.data||null)}catch(N){if(m)throw N;}},abort:function(){m&&m()}}});v.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return v.globalEval(f),f}}});v.ajaxPrefilter("script",function(f){void 0===f.cache&&(f.cache=!1);f.crossDomain&&(f.type="GET")});v.ajaxTransport("script",function(f){var m,
r;if(f.crossDomain||f.scriptAttrs)return{send:function(w,B){m=v("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",r=function(G){m.remove();r=null;G&&B("error"===G.type?404:200,G.type)});ra.head.appendChild(m[0])},abort:function(){r&&r()}}});var Xc,Yc=[],uc=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=Yc.pop()||v.expando+"_"+Tc++;return this[f]=!0,f}});v.ajaxPrefilter("json jsonp",function(f,m,r){var w,B,G,I=!1!==f.jsonp&&
(uc.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&uc.test(f.data)&&"data");if(I||"jsonp"===f.dataTypes[0])return w=f.jsonpCallback=na(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,I?f[I]=f[I].replace(uc,"$1"+w):!1!==f.jsonp&&(f.url+=(sc.test(f.url)?"&":"?")+f.jsonp+"="+w),f.converters["script json"]=function(){return G||v.error(w+" was not called"),G[0]},f.dataTypes[0]="json",B=c[w],c[w]=function(){G=arguments},r.always(function(){void 0===
B?v(c).removeProp(w):c[w]=B;f[w]&&(f.jsonpCallback=m.jsonpCallback,Yc.push(w));G&&na(B)&&B(G[0]);G=B=void 0}),"script"});Ia.createHTMLDocument=((Xc=ra.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xc.childNodes.length);v.parseHTML=function(f,m,r){return"string"!=typeof f?[]:("boolean"==typeof m&&(r=m,m=!1),m||(Ia.createHTMLDocument?((w=(m=ra.implementation.createHTMLDocument("")).createElement("base")).href=ra.location.href,m.head.appendChild(w)):m=ra),G=!r&&
[],(B=Lc.exec(f))?[m.createElement(B[1])]:(B=ja([f],m,G),G&&G.length&&v(G).remove(),v.merge([],B.childNodes)));var w,B,G};v.fn.load=function(f,m,r){var w,B,G,I=this,N=f.indexOf(" ");return-1<N&&(w=Ga(f.slice(N)),f=f.slice(0,N)),na(m)?(r=m,m=void 0):m&&"object"==typeof m&&(B="POST"),0<I.length&&v.ajax({url:f,type:B||"GET",dataType:"html",data:m}).done(function(S){G=arguments;I.html(w?v("<div>").append(v.parseHTML(S)).find(w):S)}).always(r&&function(S,Z){I.each(function(){r.apply(this,G||[S.responseText,
Z,S])})}),this};v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(f,m){v.fn[m]=function(r){return this.on(m,r)}});v.expr.pseudos.animated=function(f){return v.grep(v.timers,function(m){return f===m.elem}).length};v.offset={setOffset:function(f,m,r){var w,B,G,I=v.css(f,"position"),N=v(f),S={};"static"===I&&(f.style.position="relative");var Z=N.offset();var ia=v.css(f,"top");var W=v.css(f,"left");("absolute"===I||"fixed"===I)&&-1<(ia+W).indexOf("auto")?(G=(w=
N.position()).top,B=w.left):(G=parseFloat(ia)||0,B=parseFloat(W)||0);na(m)&&(m=m.call(f,r,v.extend({},Z)));null!=m.top&&(S.top=m.top-Z.top+G);null!=m.left&&(S.left=m.left-Z.left+B);"using"in m?m.using.call(f,S):N.css(S)}};v.fn.extend({offset:function(f){if(arguments.length)return void 0===f?this:this.each(function(B){v.offset.setOffset(this,f,B)});var m,r,w=this[0];return w?w.getClientRects().length?(m=w.getBoundingClientRect(),r=w.ownerDocument.defaultView,{top:m.top+r.pageYOffset,left:m.left+r.pageXOffset}):
{top:0,left:0}:void 0},position:function(){if(this[0]){var f,m=this[0],r={top:0,left:0};if("fixed"===v.css(m,"position"))var w=m.getBoundingClientRect();else{w=this.offset();var B=m.ownerDocument;for(f=m.offsetParent||B.documentElement;f&&(f===B.body||f===B.documentElement)&&"static"===v.css(f,"position");)f=f.parentNode;f&&f!==m&&1===f.nodeType&&((r=v(f).offset()).top+=v.css(f,"borderTopWidth",!0),r.left+=v.css(f,"borderLeftWidth",!0))}return{top:w.top-r.top-v.css(m,"marginTop",!0),left:w.left-r.left-
v.css(m,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&"static"===v.css(f,"position");)f=f.offsetParent;return f||Xb})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,m){var r="pageYOffset"===m;v.fn[f]=function(w){return Kb(this,function(B,G,I){var N;if(nb(B)?N=B:9===B.nodeType&&(N=B.defaultView),void 0===I)return N?N[m]:B[G];N?N.scrollTo(r?N.pageXOffset:I,r?I:N.pageYOffset):B[G]=I},f,w,arguments.length)}});v.each(["top",
"left"],function(f,m){v.cssHooks[m]=q(Ia.pixelPosition,function(r,w){if(w)return w=k(r,m),mc.test(w)?v(r).position()[m]+"px":w})});v.each({Height:"height",Width:"width"},function(f,m){v.each({padding:"inner"+f,content:m,"":"outer"+f},function(r,w){v.fn[w]=function(B,G){var I=arguments.length&&(r||"boolean"!=typeof B),N=r||(!0===B||!0===G?"margin":"border");return Kb(this,function(S,Z,ia){var W;return nb(S)?0===w.indexOf("outer")?S["inner"+f]:S.document.documentElement["client"+f]:9===S.nodeType?(W=
S.documentElement,Math.max(S.body["scroll"+f],W["scroll"+f],S.body["offset"+f],W["offset"+f],W["client"+f])):void 0===ia?v.css(S,Z,N):v.style(S,Z,ia,N)},m,I?B:void 0,I)}})});v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,m){v.fn[m]=function(r,w){return 0<arguments.length?this.on(m,null,r,w):this.trigger(m)}});v.fn.extend({hover:function(f,
m){return this.mouseenter(f).mouseleave(m||f)}});v.fn.extend({bind:function(f,m,r){return this.on(f,null,m,r)},unbind:function(f,m){return this.off(f,null,m)},delegate:function(f,m,r,w){return this.on(m,f,r,w)},undelegate:function(f,m,r){return 1===arguments.length?this.off(f,"**"):this.off(m,f||"**",r)}});v.proxy=function(f,m){var r,w,B;if("string"==typeof m&&(r=f[m],m=f,f=r),na(f))return w=jb.call(arguments,2),(B=function(){return f.apply(m||this,w.concat(jb.call(arguments)))}).guid=f.guid=f.guid||
v.guid++,B};v.holdReady=function(f){f?v.readyWait++:v.ready(!0)};v.isArray=Array.isArray;v.parseJSON=JSON.parse;v.nodeName=t;v.isFunction=na;v.isWindow=nb;v.camelCase=Q;v.type=M;v.now=Date.now;v.isNumeric=function(f){var m=v.type(f);return("number"===m||"string"===m)&&!isNaN(f-parseFloat(f))};"function"==typeof define&&define.amd&&define("jquery",[],function(){return v});var Yd=c.jQuery,Zd=c.$;return v.noConflict=function(f){return c.$===v&&(c.$=Zd),f&&c.jQuery===v&&(c.jQuery=Yd),v},z||(c.jQuery=
c.$=v),v});
var dvJQuery=jQuery.noConflict(!0),DocuViewarejQueryPlugins={areRegistered:function(){return dvJQuery&&dvJQuery.fn&&dvJQuery.fn.HasDocuViewarePlugins?!0:!1},register:function(){DocuViewarejQueryPlugins.areRegistered()||(dvJQuery&&dvJQuery.fn&&dvJQuery.fn.jquery&&3<=parseInt(dvJQuery.fn.jquery)&&("undefined"==typeof dvJQuery.migrateMute&&(dvJQuery.migrateMute=!0),function(c,z){function E(a){u[a]||(u[a]=!0,c.migrateWarnings.push(a))}function M(a,C,J,b){Object.defineProperty(a,C,{configurable:!0,enumerable:!0,
get:function(){E(b);return J}})}c.migrateVersion="3.0.0";var u={};c.migrateWarnings=[];void 0===c.migrateTrace&&(c.migrateTrace=!0);c.migrateReset=function(){u={};c.migrateWarnings.length=0};"BackCompat"===document.compatMode&&E("jQuery is not compatible with Quirks Mode");var t=c.fn.init,g=c.isNumeric,l=c.find,p=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,A=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;c.fn.init=function(a){var C=Array.prototype.slice.call(arguments);"string"===
typeof a&&"#"===a&&(E("jQuery( '#' ) is not a valid selector"),C[0]=[]);return t.apply(this,C)};c.fn.init.prototype=c.fn;c.find=function(a){var C=Array.prototype.slice.call(arguments);if("string"===typeof a&&p.test(a))try{document.querySelector(a)}catch(J){a=a.replace(A,function(b,d,e,h){return"["+d+e+'"'+h+'"]'});try{document.querySelector(a),E("Attribute selector with '#' must be quoted: "+C[0]),C[0]=a}catch(b){E("Attribute selector with '#' was not fixed: "+C[0])}}return l.apply(this,C)};for(var D in l)Object.prototype.hasOwnProperty.call(l,
D)&&(c.find[D]=l[D]);c.fn.size=function(){E("jQuery.fn.size() is deprecated; use the .length property");return this.length};c.parseJSON=function(){E("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};c.isNumeric=function(a){var C=g(a),J=a&&a.toString();a=!c.isArray(a)&&0<=J-parseFloat(J)+1;C!==a&&E("jQuery.isNumeric() should not be called on constructed objects");return a};M(c,"unique",c.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");M(c.expr,
"filters",c.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");M(c.expr,":",c.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var L=c.ajax;c.ajax=function(){var a=L.apply(this,arguments);a.promise&&(M(a,"success",a.done,"jQXHR.success is deprecated and removed"),M(a,"error",a.fail,"jQXHR.error is deprecated and removed"),M(a,"complete",a.always,"jQXHR.complete is deprecated and removed"));return a};var P=c.fn.removeAttr,Q=c.fn.toggleClass,R=/\S+/g;c.fn.removeAttr=function(a){var C=
this;c.each(a.match(R),function(J,b){c.expr.match.bool.test(b)&&(E("jQuery.fn.removeAttr no longer sets boolean properties: "+b),C.prop(b,!1))});return P.apply(this,arguments)};c.fn.toggleClass=function(a){if(void 0!==a&&"boolean"!==typeof a)return Q.apply(this,arguments);E("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var C=this.getAttribute&&this.getAttribute("class")||"";C&&c.data(this,"__className__",C);this.setAttribute&&this.setAttribute("class",C||!1===a?"":
c.data(this,"__className__")||"")})};var X=!1;c.swap&&c.each(["height","width","reliableMarginRight"],function(a,C){var J=c.cssHooks[C]&&c.cssHooks[C].get;J&&(c.cssHooks[C].get=function(){X=!0;var b=J.apply(this,arguments);X=!1;return b})});c.swap=function(a,C,J,b){var d,e={};X||E("jQuery.swap() is undocumented and deprecated");for(d in C)e[d]=a.style[d],a.style[d]=C[d];J=J.apply(a,b||[]);for(d in C)a.style[d]=e[d];return J};var da=c.data;c.data=function(a,C,J){var b;return C&&C!==c.camelCase(C)&&
(b=c.hasData(a)&&da.call(this,a))&&C in b?(E("jQuery.data() always sets/gets camelCased names: "+C),2<arguments.length&&(b[C]=J),b[C]):da.apply(this,arguments)};var ea=c.Tween.prototype.run;c.Tween.prototype.run=function(a){1<c.easing[this.easing].length&&(E('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),c.easing[this.easing]=c.easing[this.easing].bind(c.easing,a,this.options.duration*a,0,1,this.options.duration));ea.apply(this,arguments)};var ua=c.fn.load,
V=c.event.fix;c.event.props=[];c.event.fixHooks={};c.event.fix=function(a){var C=a.type;var J=this.fixHooks[C],b=c.event.props;if(b.length)for(E("jQuery.event.props are deprecated and removed: "+b.join());b.length;)c.event.addProp(b.pop());if(J&&!J._migrated_&&(J._migrated_=!0,E("jQuery.event.fixHooks are deprecated and removed: "+C),(b=J.props)&&b.length))for(;b.length;)c.event.addProp(b.pop());C=V.call(this,a);return J&&J.filter?J.filter(C,a):C};c.each(["load","unload","error"],function(a,C){c.fn[C]=
function(){var J=Array.prototype.slice.call(arguments,0);if("load"===C&&"string"===typeof J[0])return ua.apply(this,J);E("jQuery.fn."+C+"() is deprecated");J.splice(0,0,C);if(arguments.length)return this.on.apply(this,J);this.triggerHandler.apply(this,J);return this}});c(function(){c(document).triggerHandler("ready")});c.event.special.ready={setup:function(){this===document&&E("'ready' event is deprecated")}};c.fn.extend({bind:function(a,C,J){E("jQuery.fn.bind() is deprecated");return this.on(a,null,
C,J)},unbind:function(a,C){E("jQuery.fn.unbind() is deprecated");return this.off(a,null,C)},delegate:function(a,C,J,b){E("jQuery.fn.delegate() is deprecated");return this.on(C,a,J,b)},undelegate:function(a,C,J){E("jQuery.fn.undelegate() is deprecated");return 1===arguments.length?this.off(a,"**"):this.off(C,a||"**",J)}});var ja=c.fn.offset;c.fn.offset=function(){var a=this[0],C={top:0,left:0};return a&&a.nodeType?c.contains((a.ownerDocument||document).documentElement,a)?ja.apply(this,arguments):(E("jQuery.fn.offset() requires an element connected to a document"),
C):(E("jQuery.fn.offset() requires a valid DOM element"),C)};var ka=c.param;c.param=function(a,C){var J=c.ajaxSettings&&c.ajaxSettings.traditional;void 0===C&&J&&(E("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),C=J);return ka.call(this,a,C)};var ma=c.fn.andSelf||c.fn.addBack;c.fn.andSelf=function(){E("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return ma.apply(this,arguments)};var sa=c.Deferred,Aa=[["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),
"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),"rejected"],["notify","progress",c.Callbacks("memory"),c.Callbacks("memory")]];c.Deferred=function(a){var C=sa(),J=C.promise();C.pipe=J.pipe=function(){var b=arguments;E("deferred.pipe() is deprecated");return c.Deferred(function(d){c.each(Aa,function(e,h){var k=c.isFunction(b[e])&&b[e];C[h[1]](function(){var q=k&&k.apply(this,arguments);if(q&&c.isFunction(q.promise))q.promise().done(d.resolve).fail(d.reject).progress(d.notify);
else d[h[0]+"With"](this===J?d.promise():this,k?[q]:arguments)})});b=null}).promise()};a&&a.call(C,C);return C}}(dvJQuery,window)),function(c){function z(g,l){var p,A,D,L=g.nodeName.toLowerCase();return"area"===L?(p=g.parentNode,A=p.name,g.href&&A&&"map"===p.nodeName.toLowerCase()?(D=c("img[usemap='#"+A+"']")[0],!!D&&E(D)):!1):(/input|select|textarea|button|object/.test(L)?!g.disabled:"a"===L?g.href||l:l)&&E(g)}function E(g){return c.expr.filters.visible(g)&&!c(g).parents().addBack().filter(function(){return"hidden"===
c.css(this,"visibility")}).length}c.dvUi=c.dvUi||{};c.extend(c.dvUi,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});c.fn.extend({scrollParent:function(g){var l=this.css("position"),p="absolute"===l,A=g?/(auto|scroll|hidden)/:/(auto|scroll)/;g=this.parents().filter(function(){var D=c(this);return p&&"static"===D.css("position")?!1:A.test(D.css("overflow")+D.css("overflow-y")+
D.css("overflow-x"))}).eq(0);return"fixed"!==l&&g.length?g:c(this[0].ownerDocument||document)},uniqueId:function(){var g=0;return function(){return this.each(function(){this.id||(this.id="dvUi-id-"+ ++g)})}}(),removeUniqueId:function(){return this.each(function(){/^dvUi-id-\d+$/.test(this.id)&&c(this).removeAttr("id")})}});c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(g){return function(l){return!!c.data(l,g)}}):function(g,l,p){return!!c.data(g,p[3])},focusable:function(g){return z(g,
!isNaN(c.attr(g,"tabindex")))},tabbable:function(g){var l=c.attr(g,"tabindex"),p=isNaN(l);return(p||0<=l)&&z(g,!p)}});c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(g,l){function p(P,Q,R,X){return c.each(A,function(){Q-=parseFloat(c.css(P,"padding"+this))||0;R&&(Q-=parseFloat(c.css(P,"border"+this+"Width"))||0);X&&(Q-=parseFloat(c.css(P,"margin"+this))||0)}),Q}var A="Width"===l?["Left","Right"]:["Top","Bottom"],D=l.toLowerCase(),L={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+l]=function(P){return void 0===P?L["inner"+l].call(this):this.each(function(){c(this).css(D,p(this,P)+"px")})};c.fn["outer"+l]=function(P,Q){return"number"!=typeof P?L["outer"+l].call(this,P):this.each(function(){c(this).css(D,p(this,P,!0,Q)+"px")})}});c.fn.addBack||(c.fn.addBack=function(g){return this.add(null==g?this.prevObject:this.prevObject.filter(g))});c("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(c.fn.removeData=
function(g){return function(l){return arguments.length?g.call(this,c.camelCase(l)):g.call(this)}}(c.fn.removeData));c.dvUi.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());c.fn.extend({focus:function(g){return function(l,p){return"number"==typeof l?this.each(function(){var A=this;setTimeout(function(){c(A).focus();p&&p.call(A)},l)}):g.apply(this,arguments)}}(c.fn.focus),disableSelection:function(){var g="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(g+
".dvUi-disableSelection",function(l){l.preventDefault()})}}(),enableSelection:function(){return this.unbind(".dvUi-disableSelection")},zIndex:function(g){if(void 0!==g)return this.css("zIndex",g);if(this.length){var l,p;for(g=c(this[0]);g.length&&g[0]!==document;){if(l=g.css("position"),("absolute"===l||"relative"===l||"fixed"===l)&&(p=parseInt(g.css("zIndex"),10),!isNaN(p)&&0!==p))return p;g=g.parent()}}return 0}});c.dvUi.plugin={add:function(g,l,p){var A;g=c.dvUi[g].prototype;for(A in p)g.plugins[A]=
g.plugins[A]||[],g.plugins[A].push([l,p[A]])},call:function(g,l,p,A){if((l=g.plugins[l])&&(A||g.element[0].parentNode&&11!==g.element[0].parentNode.nodeType))for(A=0;l.length>A;A++)g.options[l[A][0]]&&l[A][1].apply(g.element,p)}};var M=0,u=Array.prototype.slice;c.cleanData=function(g){return function(l){var p,A,D;for(D=0;null!=(A=l[D]);D++)try{(p=c._data(A,"events"))&&p.remove&&c(A).triggerHandler("remove")}catch(L){}g(l)}}(c.cleanData);c.widget=function(g,l,p){var A,D,L,P,Q={},R=g.split(".")[0];
return g=g.split(".")[1],A=R+"-"+g,p||(p=l,l=c.Widget),c.expr[":"][A.toLowerCase()]=function(X){return!!c.data(X,A)},c[R]=c[R]||{},D=c[R][g],L=c[R][g]=function(X,da){return this._createWidget?(arguments.length&&this._createWidget(X,da),void 0):new L(X,da)},c.extend(L,D,{version:p.version,_proto:c.extend({},p),_childConstructors:[]}),P=new l,P.options=c.widget.extend({},P.options),c.each(p,function(X,da){return c.isFunction(da)?(Q[X]=function(){var ea=function(){return l.prototype[X].apply(this,arguments)},
ua=function(V){return l.prototype[X].apply(this,V)};return function(){var V,ja=this._super,ka=this._superApply;return this._super=ea,this._superApply=ua,V=da.apply(this,arguments),this._super=ja,this._superApply=ka,V}}(),void 0):(Q[X]=da,void 0)}),L.prototype=c.widget.extend(P,{widgetEventPrefix:D?P.widgetEventPrefix||g:g},Q,{constructor:L,namespace:R,widgetName:g,widgetFullName:A}),D?(c.each(D._childConstructors,function(X,da){X=da.prototype;c.widget(X.namespace+"."+X.widgetName,L,da._proto)}),delete D._childConstructors):
l._childConstructors.push(L),c.widget.bridge(g,L),L};c.widget.extend=function(g){for(var l,p,A=u.call(arguments,1),D=0,L=A.length;L>D;D++)for(l in A[D])p=A[D][l],A[D].hasOwnProperty(l)&&void 0!==p&&(g[l]=c.isPlainObject(p)?c.isPlainObject(g[l])?c.widget.extend({},g[l],p):c.widget.extend({},p):p);return g};c.widget.bridge=function(g,l){var p=l.prototype.widgetFullName||g;c.fn[g]=function(A){var D="string"==typeof A,L=u.call(arguments,1),P=this;return A=!D&&L.length?c.widget.extend.apply(null,[A].concat(L)):
A,D?this.each(function(){var Q,R=c.data(this,p);return"instance"===A?(P=R,!1):R?c.isFunction(R[A])&&"_"!==A.charAt(0)?(Q=R[A].apply(R,L),Q!==R&&void 0!==Q?(P=Q&&Q.jquery?P.pushStack(Q.get()):Q,!1):void 0):c.error("no such method '"+A+"' for "+g+" widget instance"):c.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+A+"'")}):this.each(function(){var Q=c.data(this,p);Q?(Q.option(A||{}),Q._init&&Q._init()):c.data(this,p,new l(A,this))}),P}};c.Widget=function(){};
c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(g,l){l=c(l||this.defaultElement||this)[0];this.element=c(l);this.uuid=M++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();l!==this&&(c.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(p){p.target===l&&this.destroy()}}),this.document=c(l.style?l.ownerDocument:
l.document||l),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this.options=c.widget.extend({},this.options,this._getCreateOptions(),g);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+
"-disabled dvUi-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("dvUi-state-hover");this.focusable.removeClass("dvUi-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(g,l){var p,A,D=g;if(0===arguments.length)return c.widget.extend({},this.options);if("string"==typeof g)if(D={},p=g.split("."),g=p.shift(),p.length){var L=D[g]=c.widget.extend({},this.options[g]);for(A=0;p.length-1>A;A++)L[p[A]]=L[p[A]]||{},L=L[p[A]];if(g=p.pop(),
1===arguments.length)return void 0===L[g]?null:L[g];L[g]=l}else{if(1===arguments.length)return void 0===this.options[g]?null:this.options[g];D[g]=l}return this._setOptions(D),this},_setOptions:function(g){for(var l in g)this._setOption(l,g[l]);return this},_setOption:function(g,l){return this.options[g]=l,"disabled"===g&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!l),l&&(this.hoverable.removeClass("dvUi-state-hover"),this.focusable.removeClass("dvUi-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(g,l,p){var A,D=this;"boolean"!=typeof g&&(p=l,l=g,g=!1);p?(l=A=c(l),this.bindings=this.bindings.add(l)):(p=l,l=this.element,A=this.widget());c.each(p,function(L,P){function Q(){return g||!0!==D.options.disabled&&!c(this).hasClass("dvUi-state-disabled")?("string"==typeof P?D[P]:P).apply(D,arguments):void 0}"string"!=typeof P&&(Q.guid=P.guid=P.guid||Q.guid||c.guid++);var R=L.match(/^([\w:-]*)\s*(.*)$/);L=R[1]+D.eventNamespace;(R=
R[2])?A.delegate(R,L,Q):l.bind(L,Q)})},_off:function(g,l){l=(l||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(l).undelegate(l);this.bindings=c(this.bindings.not(g).get());this.focusable=c(this.focusable.not(g).get());this.hoverable=c(this.hoverable.not(g).get())},_delay:function(g,l){var p=this;return setTimeout(function(){return("string"==typeof g?p[g]:g).apply(p,arguments)},l||0)},_hoverable:function(g){this.hoverable=this.hoverable.add(g);this._on(g,{mouseenter:function(l){c(l.currentTarget).addClass("dvUi-state-hover")},
mouseleave:function(l){c(l.currentTarget).removeClass("dvUi-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g);this._on(g,{focusin:function(l){c(l.currentTarget).addClass("dvUi-state-focus")},focusout:function(l){c(l.currentTarget).removeClass("dvUi-state-focus")}})},_trigger:function(g,l,p){var A,D=this.options[g];if(p=p||{},l=c.Event(l),l.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase(),l.target=this.element[0],g=l.originalEvent)for(A in g)A in
l||(l[A]=g[A]);return this.element.trigger(l,p),!(c.isFunction(D)&&!1===D.apply(this.element[0],[l].concat(p))||l.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(g,l){c.Widget.prototype["_"+g]=function(p,A,D){"string"==typeof A&&(A={effect:A});var L=A?!0===A||"number"==typeof A?l:A.effect||l:g;A=A||{};"number"==typeof A&&(A={duration:A});var P=!c.isEmptyObject(A);A.complete=D;A.delay&&p.delay(A.delay);P&&c.effects&&c.effects.effect[L]?p[g](A):L!==g&&p[L]?p[L](A.duration,A.easing,
D):p.queue(function(Q){c(this)[g]();D&&D.call(p[0]);Q()})}});c.widget;var t=!1;c(document).mouseup(function(){t=!1});c.widget("dvUi.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var g=this;this.element.bind("mousedown."+this.widgetName,function(l){return g._mouseDown(l)}).bind("click."+this.widgetName,function(l){return!0===c.data(l.target,g.widgetName+".preventClickEvent")?(c.removeData(l.target,g.widgetName+".preventClickEvent"),
l.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(g){if(!t){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(g);this._mouseDownEvent=g;var l=this,p=1===g.which,A="string"==typeof this.options.cancel&&g.target.nodeName?c(g.target).closest(this.options.cancel).length:
!1;return p&&!A&&this._mouseCapture(g)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(g)&&this._mouseDelayMet(g)&&(this._mouseStarted=!1!==this._mouseStart(g),!this._mouseStarted)?(g.preventDefault(),!0):(!0===c.data(g.target,this.widgetName+".preventClickEvent")&&c.removeData(g.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(D){return l._mouseMove(D)},
this._mouseUpDelegate=function(D){return l._mouseUp(D)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),g.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(g){return this._mouseMoved&&(c.dvUi.ie&&(!document.documentMode||9>document.documentMode)&&!g.button||!g.which)?this._mouseUp(g):((g.which||g.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(g),g.preventDefault()):(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)&&
(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,g),this._mouseStarted?this._mouseDrag(g):this._mouseUp(g)),!this._mouseStarted))},_mouseUp:function(g){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,g.target===this._mouseDownEvent.target&&c.data(g.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(g)),t=!1,!1},_mouseDistanceMet:function(g){return Math.max(Math.abs(this._mouseDownEvent.pageX-
g.pageX),Math.abs(this._mouseDownEvent.pageY-g.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function g(V,ja,ka){return[parseFloat(V[0])*(ea.test(V[0])?ja/100:1),parseFloat(V[1])*(ea.test(V[1])?ka/100:1)]}function l(V){var ja=V[0];return 9===ja.nodeType?{width:V.width(),height:V.height(),offset:{top:0,left:0}}:c.isWindow(ja)?{width:V.width(),
height:V.height(),offset:{top:V.scrollTop(),left:V.scrollLeft()}}:ja.preventDefault?{width:0,height:0,offset:{top:ja.pageY,left:ja.pageX}}:{width:V.outerWidth(),height:V.outerHeight(),offset:V.offset()}}c.dvUi=c.dvUi||{};var p,A,D=Math.max,L=Math.abs,P=Math.round,Q=/left|center|right/,R=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,da=/^\w+/,ea=/%$/,ua=c.fn.position;c.position={scrollbarWidth:function(){if(void 0!==p)return p;var V,ja,ka=c("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
ma=ka.children()[0];return c("body").append(ka),V=ma.offsetWidth,ka.css("overflow","scroll"),ja=ma.offsetWidth,V===ja&&(ja=ka[0].clientWidth),ka.remove(),p=V-ja},getScrollInfo:function(V){var ja=V.isWindow||V.isDocument?"":V.element.css("overflow-x"),ka=V.isWindow||V.isDocument?"":V.element.css("overflow-y");ja="scroll"===ja||"auto"===ja&&V.width<V.element[0].scrollWidth;return{width:"scroll"===ka||"auto"===ka&&V.height<V.element[0].scrollHeight?c.position.scrollbarWidth():0,height:ja?c.position.scrollbarWidth():
0}},getWithinInfo:function(V){V=c(V||window);var ja=c.isWindow(V[0]),ka=!!V[0]&&9===V[0].nodeType;return{element:V,isWindow:ja,isDocument:ka,offset:V.offset()||{left:0,top:0},scrollLeft:V.scrollLeft(),scrollTop:V.scrollTop(),width:ja||ka?V.width():V.outerWidth(),height:ja||ka?V.height():V.outerHeight()}}};c.fn.position=function(V){if(!V||!V.of)return ua.apply(this,arguments);V=c.extend({},V);var ja,ka,ma,sa,Aa,a,C=c(V.of),J=c.position.getWithinInfo(V.within),b=c.position.getScrollInfo(J),d=(V.collision||
"flip").split(" "),e={};return a=l(C),C[0].preventDefault&&(V.at="left top"),ka=a.width,ma=a.height,sa=a.offset,Aa=c.extend({},sa),c.each(["my","at"],function(){var h=(V[this]||"").split(" ");1===h.length&&(h=Q.test(h[0])?h.concat(["center"]):R.test(h[0])?["center"].concat(h):["center","center"]);h[0]=Q.test(h[0])?h[0]:"center";h[1]=R.test(h[1])?h[1]:"center";var k=X.exec(h[0]);var q=X.exec(h[1]);e[this]=[k?k[0]:0,q?q[0]:0];V[this]=[da.exec(h[0])[0],da.exec(h[1])[0]]}),1===d.length&&(d[1]=d[0]),"right"===
V.at[0]?Aa.left+=ka:"center"===V.at[0]&&(Aa.left+=ka/2),"bottom"===V.at[1]?Aa.top+=ma:"center"===V.at[1]&&(Aa.top+=ma/2),ja=g(e.at,ka,ma),Aa.left+=ja[0],Aa.top+=ja[1],this.each(function(){var h,k=c(this),q=k.outerWidth(),n=k.outerHeight(),y=parseInt(c.css(this,"marginLeft"),10)||0,x=parseInt(c.css(this,"marginTop"),10)||0,K=q+y+(parseInt(c.css(this,"marginRight"),10)||0)+b.width,F=n+x+(parseInt(c.css(this,"marginBottom"),10)||0)+b.height,Y=c.extend({},Aa),aa=g(e.my,k.outerWidth(),k.outerHeight());
"right"===V.my[0]?Y.left-=q:"center"===V.my[0]&&(Y.left-=q/2);"bottom"===V.my[1]?Y.top-=n:"center"===V.my[1]&&(Y.top-=n/2);Y.left+=aa[0];Y.top+=aa[1];A||(Y.left=P(Y.left),Y.top=P(Y.top));var fa={marginLeft:y,marginTop:x};c.each(["left","top"],function(ca,la){c.dvUi.position[d[ca]]&&c.dvUi.position[d[ca]][la](Y,{targetWidth:ka,targetHeight:ma,elemWidth:q,elemHeight:n,collisionPosition:fa,collisionWidth:K,collisionHeight:F,offset:[ja[0]+aa[0],ja[1]+aa[1]],my:V.my,at:V.at,within:J,elem:k})});V.using&&
(h=function(ca){var la=sa.left-Y.left,Ga=la+ka-q,ya=sa.top-Y.top,xa=ya+ma-n,wa={target:{element:C,left:sa.left,top:sa.top,width:ka,height:ma},element:{element:k,left:Y.left,top:Y.top,width:q,height:n},horizontal:0>Ga?"left":0<la?"right":"center",vertical:0>xa?"top":0<ya?"bottom":"middle"};q>ka&&ka>L(la+Ga)&&(wa.horizontal="center");n>ma&&ma>L(ya+xa)&&(wa.vertical="middle");wa.important=D(L(la),L(Ga))>D(L(ya),L(xa))?"horizontal":"vertical";V.using.call(this,ca,wa)});k.offset(c.extend(Y,{using:h}))})};
c.dvUi.position={fit:{left:function(V,ja){var ka,ma=ja.within,sa=ma.isWindow?ma.scrollLeft:ma.offset.left;ma=ma.width;var Aa=V.left-ja.collisionPosition.marginLeft,a=sa-Aa,C=Aa+ja.collisionWidth-ma-sa;ja.collisionWidth>ma?0<a&&0>=C?(ka=V.left+a+ja.collisionWidth-ma-sa,V.left+=a-ka):V.left=0<C&&0>=a?sa:a>C?sa+ma-ja.collisionWidth:sa:0<a?V.left+=a:0<C?V.left-=C:V.left=D(V.left-Aa,V.left)},top:function(V,ja){var ka,ma=ja.within;ma=ma.isWindow?ma.scrollTop:ma.offset.top;var sa=ja.within.height,Aa=V.top-
ja.collisionPosition.marginTop,a=ma-Aa,C=Aa+ja.collisionHeight-sa-ma;ja.collisionHeight>sa?0<a&&0>=C?(ka=V.top+a+ja.collisionHeight-sa-ma,V.top+=a-ka):V.top=0<C&&0>=a?ma:a>C?ma+sa-ja.collisionHeight:ma:0<a?V.top+=a:0<C?V.top-=C:V.top=D(V.top-Aa,V.top)}},flip:{left:function(V,ja){var ka,ma,sa=ja.within,Aa=sa.offset.left+sa.scrollLeft,a=sa.width;sa=sa.isWindow?sa.scrollLeft:sa.offset.left;var C=V.left-ja.collisionPosition.marginLeft,J=C-sa;C=C+ja.collisionWidth-a-sa;var b="left"===ja.my[0]?-ja.elemWidth:
"right"===ja.my[0]?ja.elemWidth:0,d="left"===ja.at[0]?ja.targetWidth:"right"===ja.at[0]?-ja.targetWidth:0,e=-2*ja.offset[0];0>J?(ka=V.left+b+d+e+ja.collisionWidth-a-Aa,(0>ka||L(J)>ka)&&(V.left+=b+d+e)):0<C&&(ma=V.left-ja.collisionPosition.marginLeft+b+d+e-sa,(0<ma||C>L(ma))&&(V.left+=b+d+e))},top:function(V,ja){var ka,ma,sa=ja.within,Aa=sa.offset.top+sa.scrollTop,a=sa.height;sa=sa.isWindow?sa.scrollTop:sa.offset.top;var C=V.top-ja.collisionPosition.marginTop,J=C-sa;C=C+ja.collisionHeight-a-sa;var b=
"top"===ja.my[1]?-ja.elemHeight:"bottom"===ja.my[1]?ja.elemHeight:0,d="top"===ja.at[1]?ja.targetHeight:"bottom"===ja.at[1]?-ja.targetHeight:0,e=-2*ja.offset[1];0>J?(ma=V.top+b+d+e+ja.collisionHeight-a-Aa,V.top+b+d+e>J&&(0>ma||L(J)>ma)&&(V.top+=b+d+e)):0<C&&(ka=V.top-ja.collisionPosition.marginTop+b+d+e-sa,V.top+b+d+e>C&&(0<ka||C>L(ka))&&(V.top+=b+d+e))}},flipfit:{left:function(){c.dvUi.position.flip.left.apply(this,arguments);c.dvUi.position.fit.left.apply(this,arguments)},top:function(){c.dvUi.position.flip.top.apply(this,
arguments);c.dvUi.position.fit.top.apply(this,arguments)}}};(function(){var V,ja=document.getElementsByTagName("body")[0];var ka=document.createElement("div");var ma=document.createElement(ja?"div":"body");var sa={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};ja&&c.extend(sa,{position:"absolute",left:"-1000px",top:"-1000px"});for(V in sa)ma.style[V]=sa[V];ma.appendChild(ka);sa=ja||document.documentElement;sa.insertBefore(ma,sa.firstChild);ka.style.cssText="position: absolute; left: 10.7432222px;";
ka=c(ka).offset().left;A=10<ka&&11>ka;ma.innerHTML="";sa.removeChild(ma)})()})();c.dvUi.position;c.widget("dvUi.draggable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,
stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("dvUi-draggable");this.options.disabled&&this.element.addClass("dvUi-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(g,l){this._super(g,l);"handle"===g&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".dvUi-draggable-dragging")?
(this.destroyOnClear=!0,void 0):(this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(g){var l=this.options;return this._blurActiveElement(g),this.helper||l.disabled||0<c(g.target).closest(".dvUi-resizable-handle").length?!1:(this.handle=this._getHandle(g),this.handle?(this._blockFrames(!0===l.iframeFix?"iframe":l.iframeFix),!0):!1)},_blockFrames:function(g){this.iframeBlocks=this.document.find(g).map(function(){var l=
c(this);return c("<div>").css("position","absolute").appendTo(l.parent()).outerWidth(l.outerWidth()).outerHeight(l.outerHeight()).offset(l.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(g){var l=this.document[0];if(this.handleElement.is(g.target))try{l.activeElement&&"body"!==l.activeElement.nodeName.toLowerCase()&&c(l.activeElement).blur()}catch(p){}},_mouseStart:function(g){var l=this.options;return this.helper=
this._createHelper(g),this.helper.addClass("dvUi-draggable-dragging"),this._cacheHelperProportions(),c.dvUi.ddmanager&&(c.dvUi.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===c(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(g),this.originalPosition=
this.position=this._generatePosition(g,!1),this.originalPageX=g.pageX,this.originalPageY=g.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this._setContainment(),!1===this._trigger("start",g)?(this._clear(),!1):(this._cacheHelperProportions(),c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,g),this._normalizeRightBottom(),this._mouseDrag(g,!0),c.dvUi.ddmanager&&c.dvUi.ddmanager.dragStart(this,g),!0)},_refreshOffsets:function(g){this.offset={top:this.positionAbs.top-
this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:g.pageX-this.offset.left,top:g.pageY-this.offset.top}},_mouseDrag:function(g,l){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(g,!0),this.positionAbs=this._convertPositionTo("absolute"),!l){l=this._uiHash();if(!1===this._trigger("drag",g,l))return this._mouseUp({}),!1;this.position=
l.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",c.dvUi.ddmanager&&c.dvUi.ddmanager.drag(this,g),!1},_mouseStop:function(g){var l=this,p=!1;return c.dvUi.ddmanager&&!this.options.dropBehaviour&&(p=c.dvUi.ddmanager.drop(this,g)),this.dropped&&(p=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!p||"valid"===this.options.revert&&p||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,
p)?c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==l._trigger("stop",g)&&l._clear()}):!1!==this._trigger("stop",g)&&this._clear(),!1},_mouseUp:function(g){return this._unblockFrames(),c.dvUi.ddmanager&&c.dvUi.ddmanager.dragStop(this,g),this.handleElement.is(g.target)&&this.element.focus(),c.dvUi.mouse.prototype._mouseUp.call(this,g)},cancel:function(){return this.helper.is(".dvUi-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(g){return this.options.handle?
!!c(g.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("dvUi-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("dvUi-draggable-handle")},_createHelper:function(g){var l=this.options,p=c.isFunction(l.helper);g=p?c(l.helper.apply(this.element[0],[g])):"clone"===l.helper?this.element.clone().removeAttr("id"):
this.element;return g.parents("body").length||g.appendTo("parent"===l.appendTo?this.element[0].parentNode:l.appendTo),p&&g[0]===this.element[0]&&this._setPositionRelative(),g[0]===this.element[0]||/(fixed|absolute)/.test(g.css("position"))||g.css("position","absolute"),g},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(g){"string"==typeof g&&(g=g.split(" "));c.isArray(g)&&(g={left:+g[0],
top:+g[1]||0});"left"in g&&(this.offset.click.left=g.left+this.margins.left);"right"in g&&(this.offset.click.left=this.helperProportions.width-g.right+this.margins.left);"top"in g&&(this.offset.click.top=g.top+this.margins.top);"bottom"in g&&(this.offset.click.top=this.helperProportions.height-g.bottom+this.margins.top)},_isRootNode:function(g){return/(html|body)/i.test(g.tagName)||g===this.document[0]},_getParentOffset:function(){var g=this.offsetParent.offset(),l=this.document[0];return"absolute"===
this.cssPosition&&this.scrollParent[0]!==l&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(g.left+=this.scrollParent.scrollLeft(),g.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(g={top:0,left:0}),{top:g.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:g.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var g=this.element.position(),l=this._isRootNode(this.scrollParent[0]);
return{top:g.top-(parseInt(this.helper.css("top"),10)||0)+(l?0:this.scrollParent.scrollTop()),left:g.left-(parseInt(this.helper.css("left"),10)||0)+(l?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var g,l,p,A=this.options,D=this.document[0];return this.relativeContainer=null,A.containment?"window"===A.containment?(this.containment=[c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,c(window).scrollLeft()+c(window).width()-this.helperProportions.width-this.margins.left,c(window).scrollTop()+(c(window).height()||D.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top],void 0):"document"===A.containment?(this.containment=[0,0,c(D).width()-this.helperProportions.width-this.margins.left,(c(D).height()||D.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):A.containment.constructor===Array?(this.containment=A.containment,void 0):("parent"===A.containment&&(A.containment=this.helper[0].parentNode),l=c(A.containment),p=l[0],p&&(g=/(scroll|auto)/.test(l.css("overflow")),this.containment=
[(parseInt(l.css("borderLeftWidth"),10)||0)+(parseInt(l.css("paddingLeft"),10)||0),(parseInt(l.css("borderTopWidth"),10)||0)+(parseInt(l.css("paddingTop"),10)||0),(g?Math.max(p.scrollWidth,p.offsetWidth):p.offsetWidth)-(parseInt(l.css("borderRightWidth"),10)||0)-(parseInt(l.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(g?Math.max(p.scrollHeight,p.offsetHeight):p.offsetHeight)-(parseInt(l.css("borderBottomWidth"),10)||0)-(parseInt(l.css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=l),void 0):(this.containment=null,void 0)},_convertPositionTo:function(g,l){l||(l=this.position);g="absolute"===g?1:-1;var p=this._isRootNode(this.scrollParent[0]);return{top:l.top+this.offset.relative.top*g+this.offset.parent.top*g-("fixed"===this.cssPosition?-this.offset.scroll.top:p?0:this.offset.scroll.top)*g,left:l.left+this.offset.relative.left*g+this.offset.parent.left*g-("fixed"===this.cssPosition?
-this.offset.scroll.left:p?0:this.offset.scroll.left)*g}},_generatePosition:function(g,l){var p,A,D,L,P=this.options,Q=this._isRootNode(this.scrollParent[0]),R=g.pageX,X=g.pageY;return Q&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),l&&(this.containment&&(this.relativeContainer?(A=this.relativeContainer.offset(),p=[this.containment[0]+A.left,this.containment[1]+A.top,this.containment[2]+A.left,this.containment[3]+A.top]):p=this.containment,
g.pageX-this.offset.click.left<p[0]&&(R=p[0]+this.offset.click.left),g.pageY-this.offset.click.top<p[1]&&(X=p[1]+this.offset.click.top),g.pageX-this.offset.click.left>p[2]&&(R=p[2]+this.offset.click.left),g.pageY-this.offset.click.top>p[3]&&(X=p[3]+this.offset.click.top)),P.grid&&(D=P.grid[1]?this.originalPageY+Math.round((X-this.originalPageY)/P.grid[1])*P.grid[1]:this.originalPageY,X=p?D-this.offset.click.top>=p[1]||D-this.offset.click.top>p[3]?D:D-this.offset.click.top>=p[1]?D-P.grid[1]:D+P.grid[1]:
D,L=P.grid[0]?this.originalPageX+Math.round((R-this.originalPageX)/P.grid[0])*P.grid[0]:this.originalPageX,R=p?L-this.offset.click.left>=p[0]||L-this.offset.click.left>p[2]?L:L-this.offset.click.left>=p[0]?L-P.grid[0]:L+P.grid[0]:L),"y"===P.axis&&(R=this.originalPageX),"x"===P.axis&&(X=this.originalPageY)),{top:X-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:Q?0:this.offset.scroll.top),left:R-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:Q?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("dvUi-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));
"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(g,l,p){return p=p||this._uiHash(),c.dvUi.plugin.call(this,g,[l,p,this],!0),/^(drag|start|stop)/.test(g)&&(this.positionAbs=this._convertPositionTo("absolute"),p.offset=this.positionAbs),c.Widget.prototype._trigger.call(this,g,l,p)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}});c.dvUi.plugin.add("draggable","connectToSortable",{start:function(g,l,p){var A=c.extend({},l,{item:p.element});p.sortables=[];c(p.options.connectToSortable).each(function(){var D=c(this).sortable("instance");D&&!D.options.disabled&&(p.sortables.push(D),D.refreshPositions(),D._trigger("activate",g,A))})},stop:function(g,l,p){var A=c.extend({},l,{item:p.element});p.cancelHelperRemoval=!1;c.each(p.sortables,function(){this.isOver?(this.isOver=0,p.cancelHelperRemoval=!0,this.cancelHelperRemoval=
!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(g),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",g,A))})},drag:function(g,l,p){c.each(p.sortables,function(){var A=!1,D=this;D.positionAbs=p.positionAbs;D.helperProportions=p.helperProportions;D.offset.click=p.offset.click;D._intersectsWith(D.containerCache)&&(A=!0,c.each(p.sortables,function(){return this.positionAbs=
p.positionAbs,this.helperProportions=p.helperProportions,this.offset.click=p.offset.click,this!==D&&this._intersectsWith(this.containerCache)&&c.contains(D.element[0],this.element[0])&&(A=!1),A}));A?(D.isOver||(D.isOver=1,D.currentItem=l.helper.appendTo(D.element).data("dvUi-sortable-item",!0),D.options._helper=D.options.helper,D.options.helper=function(){return l.helper[0]},g.target=D.currentItem[0],D._mouseCapture(g,!0),D._mouseStart(g,!0,!0),D.offset.click.top=p.offset.click.top,D.offset.click.left=
p.offset.click.left,D.offset.parent.left-=p.offset.parent.left-D.offset.parent.left,D.offset.parent.top-=p.offset.parent.top-D.offset.parent.top,p._trigger("toSortable",g),p.dropped=D.element,c.each(p.sortables,function(){this.refreshPositions()}),p.currentItem=p.element,D.fromOutside=p),D.currentItem&&(D._mouseDrag(g),l.position=D.position)):D.isOver&&(D.isOver=0,D.cancelHelperRemoval=!0,D.options._revert=D.options.revert,D.options.revert=!1,D._trigger("out",g,D._uiHash(D)),D._mouseStop(g,!0),D.options.revert=
D.options._revert,D.options.helper=D.options._helper,D.placeholder&&D.placeholder.remove(),p._refreshOffsets(g),l.position=p._generatePosition(g,!0),p._trigger("fromSortable",g),p.dropped=!1,c.each(p.sortables,function(){this.refreshPositions()}))})}});c.dvUi.plugin.add("draggable","cursor",{start:function(g,l,p){g=c("body");p=p.options;g.css("cursor")&&(p._cursor=g.css("cursor"));g.css("cursor",p.cursor)},stop:function(g,l,p){g=p.options;g._cursor&&c("body").css("cursor",g._cursor)}});c.dvUi.plugin.add("draggable",
"opacity",{start:function(g,l,p){g=c(l.helper);p=p.options;g.css("opacity")&&(p._opacity=g.css("opacity"));g.css("opacity",p.opacity)},stop:function(g,l,p){g=p.options;g._opacity&&c(l.helper).css("opacity",g._opacity)}});c.dvUi.plugin.add("draggable","scroll",{start:function(g,l,p){p.scrollParentNotHidden||(p.scrollParentNotHidden=p.helper.scrollParent(!1));p.scrollParentNotHidden[0]!==p.document[0]&&"HTML"!==p.scrollParentNotHidden[0].tagName&&(p.overflowOffset=p.scrollParentNotHidden.offset())},
drag:function(g,l,p){l=p.options;var A=!1,D=p.scrollParentNotHidden[0],L=p.document[0];D!==L&&"HTML"!==D.tagName?(l.axis&&"x"===l.axis||(p.overflowOffset.top+D.offsetHeight-g.pageY<l.scrollSensitivity?D.scrollTop=A=D.scrollTop+l.scrollSpeed:g.pageY-p.overflowOffset.top<l.scrollSensitivity&&(D.scrollTop=A=D.scrollTop-l.scrollSpeed)),l.axis&&"y"===l.axis||(p.overflowOffset.left+D.offsetWidth-g.pageX<l.scrollSensitivity?D.scrollLeft=A=D.scrollLeft+l.scrollSpeed:g.pageX-p.overflowOffset.left<l.scrollSensitivity&&
(D.scrollLeft=A=D.scrollLeft-l.scrollSpeed))):(l.axis&&"x"===l.axis||(g.pageY-c(L).scrollTop()<l.scrollSensitivity?A=c(L).scrollTop(c(L).scrollTop()-l.scrollSpeed):c(window).height()-(g.pageY-c(L).scrollTop())<l.scrollSensitivity&&(A=c(L).scrollTop(c(L).scrollTop()+l.scrollSpeed))),l.axis&&"y"===l.axis||(g.pageX-c(L).scrollLeft()<l.scrollSensitivity?A=c(L).scrollLeft(c(L).scrollLeft()-l.scrollSpeed):c(window).width()-(g.pageX-c(L).scrollLeft())<l.scrollSensitivity&&(A=c(L).scrollLeft(c(L).scrollLeft()+
l.scrollSpeed))));!1!==A&&c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(p,g)}});c.dvUi.plugin.add("draggable","snap",{start:function(g,l,p){g=p.options;p.snapElements=[];c(g.snap.constructor!==String?g.snap.items||":data(dvUi-draggable)":g.snap).each(function(){var A=c(this),D=A.offset();this!==p.element[0]&&p.snapElements.push({item:this,width:A.outerWidth(),height:A.outerHeight(),top:D.top,left:D.left})})},drag:function(g,l,p){var A,D,L,P,Q,R,X=p.options,da=X.snapTolerance,
ea=l.offset.left,ua=ea+p.helperProportions.width,V=l.offset.top,ja=V+p.helperProportions.height;for(Q=p.snapElements.length-1;0<=Q;Q--){var ka=p.snapElements[Q].left-p.margins.left;var ma=ka+p.snapElements[Q].width;var sa=p.snapElements[Q].top-p.margins.top;var Aa=sa+p.snapElements[Q].height;ka-da>ua||ea>ma+da||sa-da>ja||V>Aa+da||!c.contains(p.snapElements[Q].item.ownerDocument,p.snapElements[Q].item)?(p.snapElements[Q].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,g,c.extend(p._uiHash(),
{snapItem:p.snapElements[Q].item})),p.snapElements[Q].snapping=!1):("inner"!==X.snapMode&&(A=da>=Math.abs(sa-ja),D=da>=Math.abs(Aa-V),L=da>=Math.abs(ka-ua),P=da>=Math.abs(ma-ea),A&&(l.position.top=p._convertPositionTo("relative",{top:sa-p.helperProportions.height,left:0}).top),D&&(l.position.top=p._convertPositionTo("relative",{top:Aa,left:0}).top),L&&(l.position.left=p._convertPositionTo("relative",{top:0,left:ka-p.helperProportions.width}).left),P&&(l.position.left=p._convertPositionTo("relative",
{top:0,left:ma}).left)),R=A||D||L||P,"outer"!==X.snapMode&&(A=da>=Math.abs(sa-V),D=da>=Math.abs(Aa-ja),L=da>=Math.abs(ka-ea),P=da>=Math.abs(ma-ua),A&&(l.position.top=p._convertPositionTo("relative",{top:sa,left:0}).top),D&&(l.position.top=p._convertPositionTo("relative",{top:Aa-p.helperProportions.height,left:0}).top),L&&(l.position.left=p._convertPositionTo("relative",{top:0,left:ka}).left),P&&(l.position.left=p._convertPositionTo("relative",{top:0,left:ma-p.helperProportions.width}).left)),!p.snapElements[Q].snapping&&
(A||D||L||P||R)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,g,c.extend(p._uiHash(),{snapItem:p.snapElements[Q].item})),p.snapElements[Q].snapping=A||D||L||P||R)}}});c.dvUi.plugin.add("draggable","stack",{start:function(g,l,p){var A;g=c.makeArray(c(p.options.stack)).sort(function(D,L){return(parseInt(c(D).css("zIndex"),10)||0)-(parseInt(c(L).css("zIndex"),10)||0)});g.length&&(A=parseInt(c(g[0]).css("zIndex"),10)||0,c(g).each(function(D){c(this).css("zIndex",A+D)}),this.css("zIndex",A+
g.length))}});c.dvUi.plugin.add("draggable","zIndex",{start:function(g,l,p){g=c(l.helper);p=p.options;g.css("zIndex")&&(p._zIndex=g.css("zIndex"));g.css("zIndex",p.zIndex)},stop:function(g,l,p){g=p.options;g._zIndex&&c(l.helper).css("zIndex",g._zIndex)}});c.dvUi.draggable;c.widget("dvUi.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,
over:null},_create:function(){var g,l=this.options,p=l.accept;this.isover=!1;this.isout=!0;this.accept=c.isFunction(p)?p:function(A){return A.is(p)};this.proportions=function(){return arguments.length?(g=arguments[0],void 0):g?g:g={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(l.scope);l.addClasses&&this.element.addClass("dvUi-droppable")},_addToManager:function(g){c.dvUi.ddmanager.droppables[g]=c.dvUi.ddmanager.droppables[g]||[];c.dvUi.ddmanager.droppables[g].push(this)},
_splice:function(g){for(var l=0;g.length>l;l++)g[l]===this&&g.splice(l,1)},_destroy:function(){this._splice(c.dvUi.ddmanager.droppables[this.options.scope]);this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")},_setOption:function(g,l){"accept"===g?this.accept=c.isFunction(l)?l:function(p){return p.is(l)}:"scope"===g&&(this._splice(c.dvUi.ddmanager.droppables[this.options.scope]),this._addToManager(l));this._super(g,l)},_activate:function(g){var l=c.dvUi.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);l&&this._trigger("activate",g,this.ui(l))},_deactivate:function(g){var l=c.dvUi.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);l&&this._trigger("deactivate",g,this.ui(l))},_over:function(g){var l=c.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",g,this.ui(l)))},_out:function(g){var l=c.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",g,this.ui(l)))},_drop:function(g,l){var p=l||c.dvUi.ddmanager.current,A=!1;return p&&(p.currentItem||p.element)[0]!==this.element[0]?(this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function(){var D=
c(this).droppable("instance");return D.options.greedy&&!D.options.disabled&&D.options.scope===p.options.scope&&D.accept.call(D.element[0],p.currentItem||p.element)&&c.dvUi.intersect(p,c.extend(D,{offset:D.element.offset()}),D.options.tolerance,g)?(A=!0,!1):void 0}),A?!1:this.accept.call(this.element[0],p.currentItem||p.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",
g,this.ui(p)),this.element):!1):!1},ui:function(g){return{draggable:g.currentItem||g.element,helper:g.helper,position:g.position,offset:g.positionAbs}}});c.dvUi.intersect=function(){return function(g,l,p,A){if(!l.offset)return!1;var D=(g.positionAbs||g.position.absolute).left+g.margins.left,L=(g.positionAbs||g.position.absolute).top+g.margins.top,P=D+g.helperProportions.width,Q=L+g.helperProportions.height,R=l.offset.left,X=l.offset.top,da=R+l.proportions().width,ea=X+l.proportions().height;switch(p){case "fit":return D>=
R&&da>=P&&L>=X&&ea>=Q;case "intersect":return D+g.helperProportions.width/2>R&&da>P-g.helperProportions.width/2&&L+g.helperProportions.height/2>X&&ea>Q-g.helperProportions.height/2;case "pointer":g=A.pageY;p=l.proportions().height;if(X=g>=X&&X+p>g)A=A.pageX,l=l.proportions().width,X=A>=R&&R+l>A;return X;case "touch":return(L>=X&&ea>=L||Q>=X&&ea>=Q||X>L&&Q>ea)&&(D>=R&&da>=D||P>=R&&da>=P||R>D&&P>da);default:return!1}}}();c.dvUi.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(g,
l){var p,A=c.dvUi.ddmanager.droppables[g.options.scope]||[],D=l?l.type:null,L=(g.currentItem||g.element).find(":data(dvUi-droppable)").addBack();var P=0;a:for(;A.length>P;P++)if(!(A[P].options.disabled||g&&!A[P].accept.call(A[P].element[0],g.currentItem||g.element))){for(p=0;L.length>p;p++)if(L[p]===A[P].element[0]){A[P].proportions().height=0;continue a}A[P].visible="none"!==A[P].element.css("display");A[P].visible&&("mousedown"===D&&A[P]._activate.call(A[P],l),A[P].offset=A[P].element.offset(),
A[P].proportions({width:A[P].element[0].offsetWidth,height:A[P].element[0].offsetHeight}))}},drop:function(g,l){var p=!1;return c.each((c.dvUi.ddmanager.droppables[g.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&c.dvUi.intersect(g,this,this.options.tolerance,l)&&(p=this._drop.call(this,l)||p),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],g.currentItem||g.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,l)))}),
p},dragStart:function(g,l){g.element.parentsUntil("body").bind("scroll.droppable",function(){g.options.refreshPositions||c.dvUi.ddmanager.prepareOffsets(g,l)})},drag:function(g,l){g.options.refreshPositions&&c.dvUi.ddmanager.prepareOffsets(g,l);c.each(c.dvUi.ddmanager.droppables[g.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var p,A,D,L=c.dvUi.intersect(g,this,this.options.tolerance,l);(L=!L&&this.isover?"isout":L&&!this.isover?"isover":null)&&(this.options.greedy&&
(A=this.options.scope,D=this.element.parents(":data(dvUi-droppable)").filter(function(){return c(this).droppable("instance").options.scope===A}),D.length&&(p=c(D[0]).droppable("instance"),p.greedyChild="isover"===L)),p&&"isover"===L&&(p.isover=!1,p.isout=!0,p._out.call(p,l)),this[L]=!0,this["isout"===L?"isover":"isout"]=!1,this["isover"===L?"_over":"_out"].call(this,l),p&&"isout"===L&&(p.isout=!1,p.isover=!0,p._over.call(p,l)))}})},dragStop:function(g,l){g.element.parentsUntil("body").unbind("scroll.droppable");
g.options.refreshPositions||c.dvUi.ddmanager.prepareOffsets(g,l)}};c.dvUi.droppable;c.widget("dvUi.resizable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(g){return parseInt(g,10)||0},_isNumber:function(g){return!isNaN(parseInt(g,
10))},_hasScroll:function(g,l){if("hidden"===c(g).css("overflow"))return!1;l=l&&"left"===l?"scrollLeft":"scrollTop";var p=!1;return 0<g[l]?!0:(g[l]=1,p=0<g[l],g[l]=0,p)},_create:function(){var g,l=this,p=this.options;if(this.element.addClass("dvUi-resizable"),c.extend(this,{_aspectRatio:!!p.aspectRatio,aspectRatio:p.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:p.helper||p.ghost||p.animate?p.helper||"dvUi-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&
(this.element.wrap(c("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("dvUi-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),
marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=p.handles||(c(".dvUi-resizable-handle",
this.element).length?{n:".dvUi-resizable-n",e:".dvUi-resizable-e",s:".dvUi-resizable-s",w:".dvUi-resizable-w",se:".dvUi-resizable-se",sw:".dvUi-resizable-sw",ne:".dvUi-resizable-ne",nw:".dvUi-resizable-nw"}:"e,s,se"),this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var A=this.handles.split(",");this.handles={};for(g=0;A.length>g;g++){var D=c.trim(A[g]);var L="dvUi-resizable-"+D;var P=c("<div class='dvUi-resizable-handle "+L+"'></div>");P.css({zIndex:p.zIndex});
"se"===D&&P.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se");this.handles[D]=".dvUi-resizable-"+D;this.element.append(P)}}this._renderAxis=function(Q){var R,X,da,ea;Q=Q||this.element;for(R in this.handles)this.handles[R].constructor===String&&(this.handles[R]=this.element.children(this.handles[R]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(X=c(this.handles[R],this.element),ea=/sw|ne|nw|se|n|s/.test(R)?X.outerHeight():X.outerWidth(),
da=["padding",/ne|nw|n/.test(R)?"Top":/se|sw|s/.test(R)?"Bottom":/^e$/.test(R)?"Right":"Left"].join(""),Q.css(da,ea),this._proportionallyResize()),c(this.handles[R]).length};this._renderAxis(this.element);this._handles=c(".dvUi-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){l.resizing||(this.className&&(P=this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=P&&P[1]?P[1]:"se")});p.autoHide&&(this._handles.hide(),c(this.element).addClass("dvUi-resizable-autohide").mouseenter(function(){p.disabled||
(c(this).removeClass("dvUi-resizable-autohide"),l._handles.show())}).mouseleave(function(){p.disabled||l.resizing||(c(this).addClass("dvUi-resizable-autohide"),l._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var g,l=function(p){c(p).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()};return this.elementIsWrapper&&(l(this.element),
g=this.element,this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g),g.remove()),this.originalElement.css("resize",this.originalResizeStyle),l(this.originalElement),this},_mouseCapture:function(g){var l,p=!1;for(l in this.handles){var A=c(this.handles[l])[0];(A===g.target||c.contains(A,g.target))&&(p=!0)}return!this.options.disabled&&p},_mouseStart:function(g){var l,p,A,D=this.options,L=this.element;return this.resizing=
!0,this._renderProxy(),l=this._num(this.helper.css("left")),p=this._num(this.helper.css("top")),D.containment&&(l+=c(D.containment).scrollLeft()||0,p+=c(D.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:p},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:L.width(),height:L.height()},this.originalSize=this._helper?{width:L.outerWidth(),height:L.outerHeight()}:{width:L.width(),height:L.height()},this.sizeDiff={width:L.outerWidth()-
L.width(),height:L.outerHeight()-L.height()},this.originalPosition={left:l,top:p},this.originalMousePosition={left:g.pageX,top:g.pageY},this.aspectRatio="number"==typeof D.aspectRatio?D.aspectRatio:this.originalSize.width/this.originalSize.height||1,A=c(".dvUi-resizable-"+this.axis).css("cursor"),c("body").css("cursor","auto"===A?this.axis+"-resize":A),L.addClass("dvUi-resizable-resizing"),this._propagate("start",g),!0},_mouseDrag:function(g){var l,p,A=this.originalMousePosition,D=g.pageX-A.left||
0;A=g.pageY-A.top||0;var L=this._change[this.axis];return this._updatePrevProperties(),L?(l=L.apply(this,[g,D,A]),this._updateVirtualBoundaries(g.shiftKey),(this._aspectRatio||g.shiftKey)&&(l=this._updateRatio(l,g)),l=this._respectSize(l,g),this._updateCache(l),this._propagate("resize",g),p=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),c.isEmptyObject(p)||(this._updatePrevProperties(),this._trigger("resize",g,this.ui()),this._applyChanges()),
!1):!1},_mouseStop:function(g){this.resizing=!1;var l,p,A,D,L,P,Q,R=this.options;return this._helper&&(l=this._proportionallyResizeElements,p=l.length&&/textarea/i.test(l[0].nodeName),A=p&&this._hasScroll(l[0],"left")?0:this.sizeDiff.height,D=p?0:this.sizeDiff.width,L={width:this.helper.width()-D,height:this.helper.height()-A},P=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,Q=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||
null,R.animate||this.element.css(c.extend(L,{top:Q,left:P})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!R.animate&&this._proportionallyResize()),c("body").css("cursor","auto"),this.element.removeClass("dvUi-resizable-resizing"),this._propagate("stop",g),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var g=
{};return this.position.top!==this.prevPosition.top&&(g.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(g.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(g.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(g.height=this.size.height+"px"),this.helper.css(g),g},_updateVirtualBoundaries:function(g){var l,p,A,D;var L=this.options;L={minWidth:this._isNumber(L.minWidth)?L.minWidth:0,maxWidth:this._isNumber(L.maxWidth)?L.maxWidth:1/0,minHeight:this._isNumber(L.minHeight)?
L.minHeight:0,maxHeight:this._isNumber(L.maxHeight)?L.maxHeight:1/0};(this._aspectRatio||g)&&(l=L.minHeight*this.aspectRatio,A=L.minWidth/this.aspectRatio,p=L.maxHeight*this.aspectRatio,D=L.maxWidth/this.aspectRatio,l>L.minWidth&&(L.minWidth=l),A>L.minHeight&&(L.minHeight=A),L.maxWidth>p&&(L.maxWidth=p),L.maxHeight>D&&(L.maxHeight=D));this._vBoundaries=L},_updateCache:function(g){this.offset=this.helper.offset();this._isNumber(g.left)&&(this.position.left=g.left);this._isNumber(g.top)&&(this.position.top=
g.top);this._isNumber(g.height)&&(this.size.height=g.height);this._isNumber(g.width)&&(this.size.width=g.width)},_updateRatio:function(g){var l=this.position,p=this.size,A=this.axis;return this._isNumber(g.height)?g.width=g.height*this.aspectRatio:this._isNumber(g.width)&&(g.height=g.width/this.aspectRatio),"sw"===A&&(g.left=l.left+(p.width-g.width),g.top=null),"nw"===A&&(g.top=l.top+(p.height-g.height),g.left=l.left+(p.width-g.width)),g},_respectSize:function(g){var l=this._vBoundaries,p=this.axis,
A=this._isNumber(g.width)&&l.maxWidth&&l.maxWidth<g.width,D=this._isNumber(g.height)&&l.maxHeight&&l.maxHeight<g.height,L=this._isNumber(g.width)&&l.minWidth&&l.minWidth>g.width,P=this._isNumber(g.height)&&l.minHeight&&l.minHeight>g.height,Q=this.originalPosition.left+this.originalSize.width,R=this.position.top+this.size.height,X=/sw|nw|w/.test(p);p=/nw|ne|n/.test(p);return L&&(g.width=l.minWidth),P&&(g.height=l.minHeight),A&&(g.width=l.maxWidth),D&&(g.height=l.maxHeight),L&&X&&(g.left=Q-l.minWidth),
A&&X&&(g.left=Q-l.maxWidth),P&&p&&(g.top=R-l.minHeight),D&&p&&(g.top=R-l.maxHeight),g.width||g.height||g.left||!g.top?g.width||g.height||g.top||!g.left||(g.left=null):g.top=null,g},_getPaddingPlusBorderDimensions:function(g){var l=0,p=[],A=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")];for(g=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];4>l;l++)p[l]=parseInt(A[l],10)||0,p[l]+=parseInt(g[l],10)||0;return{height:p[0]+
p[2],width:p[1]+p[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var g,l=0,p=this.helper||this.element;this._proportionallyResizeElements.length>l;l++)g=this._proportionallyResizeElements[l],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(g)),g.css({height:p.height()-this.outerDimensions.height||0,width:p.width()-this.outerDimensions.width||0})},_renderProxy:function(){var g=this.options;this.elementOffset=this.element.offset();
this._helper?(this.helper=this.helper||c("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++g.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(g,l){return{width:this.originalSize.width+l}},w:function(g,l){return{left:this.originalPosition.left+l,width:this.originalSize.width-
l}},n:function(g,l,p){return{top:this.originalPosition.top+p,height:this.originalSize.height-p}},s:function(g,l,p){return{height:this.originalSize.height+p}},se:function(g,l,p){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,l,p]))},sw:function(g,l,p){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,l,p]))},ne:function(g,l,p){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,l,p]))},nw:function(g,l,
p){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,l,p]))}},_propagate:function(g,l){c.dvUi.plugin.call(this,g,[l,this.ui()]);"resize"!==g&&this._trigger(g,l,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.dvUi.plugin.add("resizable","animate",{stop:function(g){var l=c(this).resizable("instance"),
p=l.options,A=l._proportionallyResizeElements,D=A.length&&/textarea/i.test(A[0].nodeName),L=D&&l._hasScroll(A[0],"left")?0:l.sizeDiff.height;D={width:l.size.width-(D?0:l.sizeDiff.width),height:l.size.height-L};L=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null;var P=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null;l.element.animate(c.extend(D,P&&L?{top:P,left:L}:{}),{duration:p.animateDuration,easing:p.animateEasing,step:function(){var Q=
{width:parseInt(l.element.css("width"),10),height:parseInt(l.element.css("height"),10),top:parseInt(l.element.css("top"),10),left:parseInt(l.element.css("left"),10)};A&&A.length&&c(A[0]).css({width:Q.width,height:Q.height});l._updateCache(Q);l._propagate("resize",g)}})}});c.dvUi.plugin.add("resizable","containment",{start:function(){var g,l,p,A,D,L,P,Q=c(this).resizable("instance"),R=Q.element,X=Q.options.containment;(R=X instanceof c?X.get(0):/parent/.test(X)?R.parent().get(0):X)&&(Q.containerElement=
c(R),/document/.test(X)||X===document?(Q.containerOffset={left:0,top:0},Q.containerPosition={left:0,top:0},Q.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(g=c(R),l=[],c(["Top","Right","Left","Bottom"]).each(function(da,ea){l[da]=Q._num(g.css("padding"+ea))}),Q.containerOffset=g.offset(),Q.containerPosition=g.position(),Q.containerSize={height:g.innerHeight()-l[3],width:g.innerWidth()-l[1]},p=Q.containerOffset,
A=Q.containerSize.height,D=Q.containerSize.width,L=Q._hasScroll(R,"left")?R.scrollWidth:D,P=Q._hasScroll(R)?R.scrollHeight:A,Q.parentData={element:R,left:p.left,top:p.top,width:L,height:P}))},resize:function(g){var l=c(this).resizable("instance");var p=l.options;var A=l.containerOffset;var D=l.position;g=l._aspectRatio||g.shiftKey;var L={top:0,left:0},P=l.containerElement,Q=!0;P[0]!==document&&/static/.test(P.css("position"))&&(L=A);D.left<(l._helper?A.left:0)&&(l.size.width+=l._helper?l.position.left-
A.left:l.position.left-L.left,g&&(l.size.height=l.size.width/l.aspectRatio,Q=!1),l.position.left=p.helper?A.left:0);D.top<(l._helper?A.top:0)&&(l.size.height+=l._helper?l.position.top-A.top:l.position.top,g&&(l.size.width=l.size.height*l.aspectRatio,Q=!1),l.position.top=l._helper?A.top:0);p=l.containerElement.get(0)===l.element.parent().get(0);D=/relative|absolute/.test(l.containerElement.css("position"));p&&D?(l.offset.left=l.parentData.left+l.position.left,l.offset.top=l.parentData.top+l.position.top):
(l.offset.left=l.element.offset().left,l.offset.top=l.element.offset().top);p=Math.abs(l.sizeDiff.width+(l._helper?l.offset.left-L.left:l.offset.left-A.left));A=Math.abs(l.sizeDiff.height+(l._helper?l.offset.top-L.top:l.offset.top-A.top));p+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-p,g&&(l.size.height=l.size.width/l.aspectRatio,Q=!1));A+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-A,g&&(l.size.width=l.size.height*l.aspectRatio,Q=!1));Q||(l.position.left=
l.prevPosition.left,l.position.top=l.prevPosition.top,l.size.width=l.prevSize.width,l.size.height=l.prevSize.height)},stop:function(){var g=c(this).resizable("instance"),l=g.options,p=g.containerOffset,A=g.containerPosition,D=g.containerElement,L=c(g.helper),P=L.offset(),Q=L.outerWidth()-g.sizeDiff.width;L=L.outerHeight()-g.sizeDiff.height;g._helper&&!l.animate&&/relative/.test(D.css("position"))&&c(this).css({left:P.left-A.left-p.left,width:Q,height:L});g._helper&&!l.animate&&/static/.test(D.css("position"))&&
c(this).css({left:P.left-A.left-p.left,width:Q,height:L})}});c.dvUi.plugin.add("resizable","alsoResize",{start:function(){var g=c(this).resizable("instance").options,l=function(p){c(p).each(function(){var A=c(this);A.data("dvUi-resizable-alsoresize",{width:parseInt(A.width(),10),height:parseInt(A.height(),10),left:parseInt(A.css("left"),10),top:parseInt(A.css("top"),10)})})};"object"!=typeof g.alsoResize||g.alsoResize.parentNode?l(g.alsoResize):g.alsoResize.length?(g.alsoResize=g.alsoResize[0],l(g.alsoResize)):
c.each(g.alsoResize,function(p){l(p)})},resize:function(g,l){g=c(this).resizable("instance");var p=g.options,A=g.originalSize,D=g.originalPosition,L={height:g.size.height-A.height||0,width:g.size.width-A.width||0,top:g.position.top-D.top||0,left:g.position.left-D.left||0},P=function(Q,R){c(Q).each(function(){var X=c(this),da=c(this).data("dvUi-resizable-alsoresize"),ea={},ua=R&&R.length?R:X.parents(l.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(ua,function(V,
ja){(V=(da[ja]||0)+(L[ja]||0))&&0<=V&&(ea[ja]=V||null)});X.css(ea)})};"object"!=typeof p.alsoResize||p.alsoResize.nodeType?P(p.alsoResize):c.each(p.alsoResize,function(Q,R){P(Q,R)})},stop:function(){c(this).removeData("resizable-alsoresize")}});c.dvUi.plugin.add("resizable","ghost",{start:function(){var g=c(this).resizable("instance"),l=g.options,p=g.size;g.ghost=g.originalElement.clone();g.ghost.css({opacity:.25,display:"block",position:"relative",height:p.height,width:p.width,margin:0,left:0,top:0}).addClass("dvUi-resizable-ghost").addClass("string"==
typeof l.ghost?l.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var g=c(this).resizable("instance");g.ghost&&g.ghost.css({position:"relative",height:g.size.height,width:g.size.width})},stop:function(){var g=c(this).resizable("instance");g.ghost&&g.helper&&g.helper.get(0).removeChild(g.ghost.get(0))}});c.dvUi.plugin.add("resizable","grid",{resize:function(){var g,l=c(this).resizable("instance"),p=l.options,A=l.size,D=l.originalSize,L=l.originalPosition,P=l.axis,Q="number"==typeof p.grid?[p.grid,
p.grid]:p.grid,R=Q[0]||1,X=Q[1]||1,da=Math.round((A.width-D.width)/R)*R;A=Math.round((A.height-D.height)/X)*X;var ea=D.width+da,ua=D.height+A,V=p.maxWidth&&ea>p.maxWidth,ja=p.maxHeight&&ua>p.maxHeight,ka=p.minWidth&&p.minWidth>ea,ma=p.minHeight&&p.minHeight>ua;p.grid=Q;ka&&(ea+=R);ma&&(ua+=X);V&&(ea-=R);ja&&(ua-=X);/^(se|s|e)$/.test(P)?(l.size.width=ea,l.size.height=ua):/^(ne)$/.test(P)?(l.size.width=ea,l.size.height=ua,l.position.top=L.top-A):/^(sw)$/.test(P)?(l.size.width=ea,l.size.height=ua,l.position.left=
L.left-da):((0>=ua-X||0>=ea-R)&&(g=l._getPaddingPlusBorderDimensions(this)),0<ua-X?(l.size.height=ua,l.position.top=L.top-A):(ua=X-g.height,l.size.height=ua,l.position.top=L.top+D.height-ua),0<ea-R?(l.size.width=ea,l.position.left=L.left-da):(ea=X-g.height,l.size.width=ea,l.position.left=L.left+D.width-ea))}});c.dvUi.resizable;c.widget("dvUi.selectable",c.dvUi.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,
stop:null,unselected:null,unselecting:null},_create:function(){var g,l=this;this.element.addClass("dvUi-selectable");this.dragged=!1;this.refresh=function(){g=c(l.options.filter,l.element[0]);g.addClass("dvUi-selectee");g.each(function(){var p=c(this),A=p.offset();c.data(this,"selectable-item",{element:this,$element:p,left:A.left,top:A.top,right:A.left+p.outerWidth(),bottom:A.top+p.outerHeight(),startselected:!1,selected:p.hasClass("dvUi-selected"),selecting:p.hasClass("dvUi-selecting"),unselecting:p.hasClass("dvUi-unselecting")})})};
this.refresh();this.selectees=g.addClass("dvUi-selectee");this._mouseInit();this.helper=c("<div class='dvUi-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");this._mouseDestroy()},_mouseStart:function(g){var l=this,p=this.options;this.opos=[g.pageX,g.pageY];this.options.disabled||(this.selectees=c(p.filter,this.element[0]),this._trigger("start",g),c(p.appendTo).append(this.helper),
this.helper.css({left:g.pageX,top:g.pageY,width:0,height:0}),p.autoRefresh&&this.refresh(),this.selectees.filter(".dvUi-selected").each(function(){var A=c.data(this,"selectable-item");A.startselected=!0;g.metaKey||g.ctrlKey||(A.$element.removeClass("dvUi-selected"),A.selected=!1,A.$element.addClass("dvUi-unselecting"),A.unselecting=!0,l._trigger("unselecting",g,{unselecting:A.element}))}),c(g.target).parents().addBack().each(function(){var A,D=c.data(this,"selectable-item");return D?(A=!g.metaKey&&
!g.ctrlKey||!D.$element.hasClass("dvUi-selected"),D.$element.removeClass(A?"dvUi-unselecting":"dvUi-selected").addClass(A?"dvUi-selecting":"dvUi-unselecting"),D.unselecting=!A,D.selecting=A,D.selected=A,A?l._trigger("selecting",g,{selecting:D.element}):l._trigger("unselecting",g,{unselecting:D.element}),!1):void 0}))},_mouseDrag:function(g){if(this.dragged=!0,!this.options.disabled){var l,p=this,A=this.options,D=this.opos[0],L=this.opos[1],P=g.pageX,Q=g.pageY;return D>P&&(l=P,P=D,D=l),L>Q&&(l=Q,Q=
L,L=l),this.helper.css({left:D,top:L,width:P-D,height:Q-L}),this.selectees.each(function(){var R=c.data(this,"selectable-item"),X=!1;R&&R.element!==p.element[0]&&("touch"===A.tolerance?X=!(R.left>P||D>R.right||R.top>Q||L>R.bottom):"fit"===A.tolerance&&(X=R.left>D&&P>R.right&&R.top>L&&Q>R.bottom),X?(R.selected&&(R.$element.removeClass("dvUi-selected"),R.selected=!1),R.unselecting&&(R.$element.removeClass("dvUi-unselecting"),R.unselecting=!1),R.selecting||(R.$element.addClass("dvUi-selecting"),R.selecting=
!0,p._trigger("selecting",g,{selecting:R.element}))):(R.selecting&&((g.metaKey||g.ctrlKey)&&R.startselected?(R.$element.removeClass("dvUi-selecting"),R.selecting=!1,R.$element.addClass("dvUi-selected"),R.selected=!0):(R.$element.removeClass("dvUi-selecting"),R.selecting=!1,R.startselected&&(R.$element.addClass("dvUi-unselecting"),R.unselecting=!0),p._trigger("unselecting",g,{unselecting:R.element}))),R.selected&&(g.metaKey||g.ctrlKey||R.startselected||(R.$element.removeClass("dvUi-selected"),R.selected=
!1,R.$element.addClass("dvUi-unselecting"),R.unselecting=!0,p._trigger("unselecting",g,{unselecting:R.element})))))}),!1}},_mouseStop:function(g){var l=this;return this.dragged=!1,c(".dvUi-unselecting",this.element[0]).each(function(){var p=c.data(this,"selectable-item");p.$element.removeClass("dvUi-unselecting");p.unselecting=!1;p.startselected=!1;l._trigger("unselected",g,{unselected:p.element})}),c(".dvUi-selecting",this.element[0]).each(function(){var p=c.data(this,"selectable-item");p.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");
p.selecting=!1;p.selected=!0;p.startselected=!0;l._trigger("selected",g,{selected:p.element})}),this._trigger("stop",g),this.helper.remove(),!1}});c.widget("dvUi.sortable",c.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,
scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(g,l,p){return g>=l&&l+p>g},_isFloating:function(g){return/left|right/.test(g.css("float"))||/inline|table-cell/.test(g.css("display"))},_create:function(){var g=this.options;this.containerCache={};this.element.addClass("dvUi-sortable");this.refresh();this.floating=this.items.length?
"x"===g.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(g,l){this._super(g,l);"handle"===g&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");c.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("dvUi-sortable-handle")})},_destroy:function(){this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");
this._mouseDestroy();for(var g=this.items.length-1;0<=g;g--)this.items[g].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(g,l){var p=null,A=!1,D=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(g),c(g.target).parents().each(function(){return c.data(this,D.widgetName+"-item")===D?(p=c(this),!1):void 0}),c.data(g.target,D.widgetName+"-item")===D&&(p=c(g.target)),p?!this.options.handle||l||(c(this.options.handle,p).find("*").addBack().each(function(){this===
g.target&&(A=!0)}),A)?(this.currentItem=p,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(g,l,p){var A;l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(g),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:g.pageX-this.offset.left,
top:g.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(g),this.originalPageX=g.pageX,this.originalPageY=g.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),
l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(A=this.document.find("body"),this.storedCursor=A.css("cursor"),A.css("cursor",l.cursor),this.storedStylesheet=c("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(A)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),this.scrollParent[0]!==
document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",g,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!p)for(p=this.containers.length-1;0<=p;p--)this.containers[p]._trigger("activate",g,this._uiHash(this));return c.dvUi.ddmanager&&(c.dvUi.ddmanager.current=this),c.dvUi.ddmanager&&!l.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,g),this.dragging=!0,this.helper.addClass("dvUi-sortable-helper"),
this._mouseDrag(g),!0},_mouseDrag:function(g){var l,p,A;var D=this.options;var L=!1;this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-g.pageY<D.scrollSensitivity?this.scrollParent[0].scrollTop=L=this.scrollParent[0].scrollTop+D.scrollSpeed:g.pageY-
this.overflowOffset.top<D.scrollSensitivity&&(this.scrollParent[0].scrollTop=L=this.scrollParent[0].scrollTop-D.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-g.pageX<D.scrollSensitivity?this.scrollParent[0].scrollLeft=L=this.scrollParent[0].scrollLeft+D.scrollSpeed:g.pageX-this.overflowOffset.left<D.scrollSensitivity&&(this.scrollParent[0].scrollLeft=L=this.scrollParent[0].scrollLeft-D.scrollSpeed)):(g.pageY-c(document).scrollTop()<D.scrollSensitivity?L=c(document).scrollTop(c(document).scrollTop()-
D.scrollSpeed):c(window).height()-(g.pageY-c(document).scrollTop())<D.scrollSensitivity&&(L=c(document).scrollTop(c(document).scrollTop()+D.scrollSpeed)),g.pageX-c(document).scrollLeft()<D.scrollSensitivity?L=c(document).scrollLeft(c(document).scrollLeft()-D.scrollSpeed):c(window).width()-(g.pageX-c(document).scrollLeft())<D.scrollSensitivity&&(L=c(document).scrollLeft(c(document).scrollLeft()+D.scrollSpeed))),!1!==L&&c.dvUi.ddmanager&&!D.dropBehaviour&&c.dvUi.ddmanager.prepareOffsets(this,g));this.positionAbs=
this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(D=this.items.length-1;0<=D;D--)if(l=this.items[D],p=l.item[0],A=this._intersectsWithPointer(l),A&&l.instance===this.currentContainer&&p!==this.currentItem[0]&&this.placeholder[1===A?"next":"prev"]()[0]!==p&&!c.contains(this.placeholder[0],p)&&("semi-dynamic"===this.options.type?
!c.contains(this.element[0],p):!0)){if(this.direction=1===A?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(l))break;this._rearrange(g,l);this._trigger("change",g,this._uiHash());break}return this._contactContainers(g),c.dvUi.ddmanager&&c.dvUi.ddmanager.drag(this,g),this._trigger("sort",g,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(g,l){if(g){if(c.dvUi.ddmanager&&!this.options.dropBehaviour&&c.dvUi.ddmanager.drop(this,g),this.options.revert){var p=
this;l=this.placeholder.offset();var A=this.options.axis,D={};A&&"x"!==A||(D.left=l.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));A&&"y"!==A||(D.top=l.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;c(this.helper).animate(D,parseInt(this.options.revert,10)||500,function(){p._clear(g)})}else this._clear(g,l);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper"):this.currentItem.show();for(var g=this.containers.length-1;0<=g;g--)this.containers[g]._trigger("deactivate",null,this._uiHash(this)),this.containers[g].containerCache.over&&(this.containers[g]._trigger("out",null,this._uiHash(this)),this.containers[g].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(g){var l=this._getItemsAsjQuery(g&&g.connected),p=[];return g=g||{},c(l).each(function(){var A=(c(g.item||this).attr(g.attribute||"id")||"").match(g.expression||/(.+)[\-=_](.+)/);A&&p.push((g.key||
A[1]+"[]")+"="+(g.key&&g.expression?A[1]:A[2]))}),!p.length&&g.key&&p.push(g.key+"="),p.join("&")},toArray:function(g){var l=this._getItemsAsjQuery(g&&g.connected),p=[];return g=g||{},l.each(function(){p.push(c(g.item||this).attr(g.attribute||"id")||"")}),p},_intersectsWith:function(g){var l=this.positionAbs.left,p=l+this.helperProportions.width,A=this.positionAbs.top,D=A+this.helperProportions.height,L=g.left,P=L+g.width,Q=g.top,R=Q+g.height,X=this.offset.click.top,da=this.offset.click.left;X="x"===
this.options.axis||A+X>Q&&R>A+X;da="y"===this.options.axis||l+da>L&&P>l+da;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>g[this.floating?"width":"height"]?X&&da:l+this.helperProportions.width/2>L&&P>p-this.helperProportions.width/2&&A+this.helperProportions.height/2>Q&&R>D-this.helperProportions.height/2},_intersectsWithPointer:function(g){var l="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,g.top,g.height);g="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,g.left,g.width);l=l&&g;g=this._getDragVerticalDirection();var p=this._getDragHorizontalDirection();return l?this.floating?p&&"right"===p||"down"===g?2:1:g&&("down"===g?2:1):!1},_intersectsWithSides:function(g){var l=this._isOverAxis(this.positionAbs.top+this.offset.click.top,g.top+g.height/2,g.height);g=this._isOverAxis(this.positionAbs.left+this.offset.click.left,g.left+
g.width/2,g.width);var p=this._getDragVerticalDirection(),A=this._getDragHorizontalDirection();return this.floating&&A?"right"===A&&g||"left"===A&&!g:p&&("down"===p&&l||"up"===p&&!l)},_getDragVerticalDirection:function(){var g=this.positionAbs.top-this.lastPositionAbs.top;return 0!==g&&(0<g?"down":"up")},_getDragHorizontalDirection:function(){var g=this.positionAbs.left-this.lastPositionAbs.left;return 0!==g&&(0<g?"right":"left")},refresh:function(g){return this._refreshItems(g),this._setHandleClassName(),
this.refreshPositions(),this},_connectWith:function(){var g=this.options;return g.connectWith.constructor===String?[g.connectWith]:g.connectWith},_getItemsAsjQuery:function(g){function l(){D.push(this)}var p,A,D=[],L=[],P=this._connectWith();if(P&&g)for(g=P.length-1;0<=g;g--){var Q=c(P[g]);for(p=Q.length-1;0<=p;p--)(A=c.data(Q[p],this.widgetFullName))&&A!==this&&!A.options.disabled&&L.push([c.isFunction(A.options.items)?A.options.items.call(A.element):c(A.options.items,A.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),
A])}L.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),this]);for(g=L.length-1;0<=g;g--)L[g][0].each(l);return c(D)},_removeCurrentsFromItems:function(){var g=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=c.grep(this.items,function(l){for(var p=0;g.length>p;p++)if(g[p]===l.item[0])return!1;return!0})},
_refreshItems:function(g){this.items=[];this.containers=[this];var l,p,A,D,L=this.items,P=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],g,{item:this.currentItem}):c(this.options.items,this.element),this]];if((D=this._connectWith())&&this.ready)for(l=D.length-1;0<=l;l--){var Q=c(D[l]);for(p=Q.length-1;0<=p;p--)(A=c.data(Q[p],this.widgetFullName))&&A!==this&&!A.options.disabled&&(P.push([c.isFunction(A.options.items)?A.options.items.call(A.element[0],g,{item:this.currentItem}):
c(A.options.items,A.element),A]),this.containers.push(A))}for(l=P.length-1;0<=l;l--)for(g=P[l][1],Q=P[l][0],p=0,D=Q.length;D>p;p++)A=c(Q[p]),A.data(this.widgetName+"-item",g),L.push({item:A,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(g){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var l,p,A;for(l=this.items.length-1;0<=l;l--){var D=this.items[l];D.instance!==this.currentContainer&&this.currentContainer&&D.item[0]!==this.currentItem[0]||(p=
this.options.toleranceElement?c(this.options.toleranceElement,D.item):D.item,g||(D.width=p.outerWidth(),D.height=p.outerHeight()),A=p.offset(),D.left=A.left,D.top=A.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(l=this.containers.length-1;0<=l;l--)A=this.containers[l].element.offset(),this.containers[l].containerCache.left=A.left,this.containers[l].containerCache.top=A.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),
this.containers[l].containerCache.height=this.containers[l].element.outerHeight();return this},_createPlaceholder:function(g){g=g||this;var l,p=g.options;p.placeholder&&p.placeholder.constructor!==String||(l=p.placeholder,p.placeholder={element:function(){var A=g.currentItem[0].nodeName.toLowerCase(),D=c("<"+A+">",g.document[0]).addClass(l||g.currentItem[0].className+" dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");return"tr"===A?g.currentItem.children().each(function(){c("<td>&#160;</td>",
g.document[0]).attr("colspan",c(this).attr("colspan")||1).appendTo(D)}):"img"===A&&D.attr("src",g.currentItem.attr("src")),l||D.css("visibility","hidden"),D},update:function(A,D){(!l||p.forcePlaceholderSize)&&(D.height()||D.height(g.currentItem.innerHeight()-parseInt(g.currentItem.css("paddingTop")||0,10)-parseInt(g.currentItem.css("paddingBottom")||0,10)),D.width()||D.width(g.currentItem.innerWidth()-parseInt(g.currentItem.css("paddingLeft")||0,10)-parseInt(g.currentItem.css("paddingRight")||0,10)))}});
g.placeholder=c(p.placeholder.element.call(g.element,g.currentItem));g.currentItem.after(g.placeholder);p.placeholder.update(g,g.placeholder)},_contactContainers:function(g){var l,p,A,D,L,P=A=null;for(l=this.containers.length-1;0<=l;l--)c.contains(this.currentItem[0],this.containers[l].element[0])||(this._intersectsWith(this.containers[l].containerCache)?A&&c.contains(this.containers[l].element[0],A.element[0])||(A=this.containers[l],P=l):this.containers[l].containerCache.over&&(this.containers[l]._trigger("out",
g,this._uiHash(this)),this.containers[l].containerCache.over=0));if(A)if(1===this.containers.length)this.containers[P].containerCache.over||(this.containers[P]._trigger("over",g,this._uiHash(this)),this.containers[P].containerCache.over=1);else{l=1E4;var Q=null;A=(p=A.floating||this._isFloating(this.currentItem))?"left":"top";var R=p?"width":"height";var X=p?"clientX":"clientY";for(p=this.items.length-1;0<=p;p--)c.contains(this.containers[P].element[0],this.items[p].item[0])&&this.items[p].item[0]!==
this.currentItem[0]&&(D=this.items[p].item.offset()[A],L=!1,g[X]-D>this.items[p][R]/2&&(L=!0),l>Math.abs(g[X]-D)&&(l=Math.abs(g[X]-D),Q=this.items[p],this.direction=L?"up":"down"));if(Q||this.options.dropOnEmpty){if(this.currentContainer===this.containers[P])return this.currentContainer.containerCache.over||(this.containers[P]._trigger("over",g,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;Q?this._rearrange(g,Q,null,!0):this._rearrange(g,null,this.containers[P].element,!0);this._trigger("change",
g,this._uiHash());this.containers[P]._trigger("change",g,this._uiHash(this));this.currentContainer=this.containers[P];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[P]._trigger("over",g,this._uiHash(this));this.containers[P].containerCache.over=1}}},_createHelper:function(g){var l=this.options;g=c.isFunction(l.helper)?c(l.helper.apply(this.element[0],[g,this.currentItem])):"clone"===l.helper?this.currentItem.clone():this.currentItem;return g.parents("body").length||
c("parent"!==l.appendTo?l.appendTo:this.currentItem[0].parentNode)[0].appendChild(g[0]),g[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!g[0].style.width||l.forceHelperSize)&&g.width(this.currentItem.width()),(!g[0].style.height||l.forceHelperSize)&&g.height(this.currentItem.height()),g},_adjustOffsetFromHelper:function(g){"string"==
typeof g&&(g=g.split(" "));c.isArray(g)&&(g={left:+g[0],top:+g[1]||0});"left"in g&&(this.offset.click.left=g.left+this.margins.left);"right"in g&&(this.offset.click.left=this.helperProportions.width-g.right+this.margins.left);"top"in g&&(this.offset.click.top=g.top+this.margins.top);"bottom"in g&&(this.offset.click.top=this.helperProportions.height-g.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var g=this.offsetParent.offset();return"absolute"===
this.cssPosition&&this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(g.left+=this.scrollParent.scrollLeft(),g.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&c.dvUi.ie)&&(g={top:0,left:0}),{top:g.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:g.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===
this.cssPosition){var g=this.currentItem.position();return{top:g.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:g.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var g,l,p,A=this.options;"parent"===A.containment&&(A.containment=this.helper[0].parentNode);"document"!==A.containment&&"window"!==A.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c("document"===A.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"===A.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top]);/^(document|window|parent)$/.test(A.containment)||(g=c(A.containment)[0],l=c(A.containment).offset(),p="hidden"!==c(g).css("overflow"),this.containment=[l.left+(parseInt(c(g).css("borderLeftWidth"),10)||0)+(parseInt(c(g).css("paddingLeft"),10)||0)-this.margins.left,l.top+(parseInt(c(g).css("borderTopWidth"),10)||0)+(parseInt(c(g).css("paddingTop"),10)||0)-this.margins.top,l.left+(p?Math.max(g.scrollWidth,g.offsetWidth):g.offsetWidth)-(parseInt(c(g).css("borderLeftWidth"),10)||0)-
(parseInt(c(g).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,l.top+(p?Math.max(g.scrollHeight,g.offsetHeight):g.offsetHeight)-(parseInt(c(g).css("borderTopWidth"),10)||0)-(parseInt(c(g).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(g,l){l||(l=this.position);g="absolute"===g?1:-1;var p="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:
this.offsetParent,A=/(html|body)/i.test(p[0].tagName);return{top:l.top+this.offset.relative.top*g+this.offset.parent.top*g-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():A?0:p.scrollTop())*g,left:l.left+this.offset.relative.left*g+this.offset.parent.left*g-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():A?0:p.scrollLeft())*g}},_generatePosition:function(g){var l,p,A=this.options,D=g.pageX,L=g.pageY,P="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&c.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,Q=/(html|body)/i.test(P[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(g.pageX-this.offset.click.left<this.containment[0]&&(D=this.containment[0]+this.offset.click.left),g.pageY-this.offset.click.top<this.containment[1]&&(L=this.containment[1]+this.offset.click.top),g.pageX-
this.offset.click.left>this.containment[2]&&(D=this.containment[2]+this.offset.click.left),g.pageY-this.offset.click.top>this.containment[3]&&(L=this.containment[3]+this.offset.click.top)),A.grid&&(l=this.originalPageY+Math.round((L-this.originalPageY)/A.grid[1])*A.grid[1],L=this.containment?l-this.offset.click.top>=this.containment[1]&&l-this.offset.click.top<=this.containment[3]?l:l-this.offset.click.top>=this.containment[1]?l-A.grid[1]:l+A.grid[1]:l,p=this.originalPageX+Math.round((D-this.originalPageX)/
A.grid[0])*A.grid[0],D=this.containment?p-this.offset.click.left>=this.containment[0]&&p-this.offset.click.left<=this.containment[2]?p:p-this.offset.click.left>=this.containment[0]?p-A.grid[0]:p+A.grid[0]:p)),{top:L-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():Q?0:P.scrollTop()),left:D-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():
Q?0:P.scrollLeft())}},_rearrange:function(g,l,p,A){p?p[0].appendChild(this.placeholder[0]):l.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?l.item[0]:l.item[0].nextSibling);var D=this.counter=this.counter?++this.counter:1;this._delay(function(){D===this.counter&&this.refreshPositions(!A)})},_clear:function(g,l){function p(L,P,Q){return function(R){Q._trigger(L,R,P._uiHash(P))}}this.reverting=!1;var A,D=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),
this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(A in this._storedCSS)"auto"!==this._storedCSS[A]&&"static"!==this._storedCSS[A]||(this._storedCSS[A]="");this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")}else this.currentItem.show();this.fromOutside&&!l&&D.push(function(L){this._trigger("receive",L,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".dvUi-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||
l||D.push(function(L){this._trigger("update",L,this._uiHash())});this!==this.currentContainer&&(l||(D.push(function(L){this._trigger("remove",L,this._uiHash())}),D.push(function(L){return function(P){L._trigger("receive",P,this._uiHash(this))}}.call(this,this.currentContainer)),D.push(function(L){return function(P){L._trigger("update",P,this._uiHash(this))}}.call(this,this.currentContainer))));for(A=this.containers.length-1;0<=A;A--)l||D.push(p("deactivate",this,this.containers[A])),this.containers[A].containerCache.over&&
(D.push(p("out",this,this.containers[A])),this.containers[A].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,l||this._trigger("beforeStop",g,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||
(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!l){for(A=0;D.length>A;A++)D[A].call(this,g);this._trigger("stop",g,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(g){var l=g||this;return{helper:l.helper,placeholder:l.placeholder||c([]),position:l.position,originalPosition:l.originalPosition,offset:l.positionAbs,item:l.currentItem,sender:g?
g.element:null}}})}(dvJQuery),dvJQuery&&function(c){(function(){function z(a){var C=a.css("color"),J;a=a[0];for(var b=!1;a&&!J&&!b;){try{var d=c(a).css("background-color")}catch(k){d="transparent"}"transparent"!==d&&"rgba(0, 0, 0, 0)"!==d&&(J=d);b=a.body;a=a.parentNode}a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/;b=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;var e;d=void 0;(d=C.match(a))?e={r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}:(d=C.match(b))&&(e={r:parseInt(d[1],
16),g:parseInt(d[2],16),b:parseInt(d[3],16)});var h;J?(d=void 0,(d=J.match(a))?h={r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}:(d=J.match(b))&&(h={r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)})):h=e?127<Math.max.apply(null,[e.r,e.g,e.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};d=function(k){return"rgb("+[k.r,k.g,k.b].join(", ")+")"};e&&h?(a=Math.max.apply(null,[e.r,e.g,e.b]),e=Math.max.apply(null,[h.r,h.g,h.b]),e=Math.round(e+-.75*(e-a)),e={r:e,g:e,b:e}):
e?(e=Math.max.apply(null,[e.r,e.g,e.b]),a=1,127<e&&(a=-1),e=Math.round(e+96*a),e={r:e,g:e,b:e}):e={r:191,g:191,b:191};return{color:C,"background-color":h?d(h):J,"decor-color":d(e)}}function E(a,C){this.x=a;this.y=C;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var J=function(b){return Math.round(b/Math.abs(b))};this.resizeTo=function(b){if(0===
this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=b,this.y=b*J(this.y);else if(0===this.y)this._length=b,this.x=b*J(this.x);else{var d=Math.abs(this.y/this.x),e=Math.sqrt(Math.pow(b,2)/(1+Math.pow(d,2)));d*=e;this._length=b;this.x=e*J(this.x);this.y=d*J(this.y)}return this};this.angleTo=function(b){var d=this.getLength()*b.getLength();return 0===d?0:Math.acos(Math.min(Math.max((this.x*b.x+this.y*b.y)/d,-1),1))/Math.PI}}function M(a,C){this.x=a;this.y=C;this.getVectorToCoordinates=
function(J,b){return new E(J-this.x,b-this.y)};this.getVectorFromCoordinates=function(J,b){return this.getVectorToCoordinates(J,b).reverse()};this.getVectorToPoint=function(J){return new E(J.x-this.x,J.y-this.y)};this.getVectorFromPoint=function(J){return this.getVectorToPoint(J).reverse()}}function u(a,C,J,b,d){this.data=a;this.context=C;if(a.length)for(var e=a.length,h,k,q=0;q<e;q++){h=a[q];k=h.x.length;J.call(C,h);for(var n=1;n<k;n++)b.call(C,h,n);d.call(C,h)}this.changed=function(){};this.startStrokeFn=
J;this.addToStrokeFn=b;this.endStrokeFn=d;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(y){if(y&&"number"==typeof y.x&&"number"==typeof y.y){this._stroke={x:[y.x],y:[y.y]};this.data.push(this._stroke);this._lastPoint=y;this.inStroke=!0;var x=this._stroke,K=this.startStrokeFn,F=this.context;setTimeout(function(){K.call(F,x)},3);return y}return null};this.addToStroke=function(y){if(this.inStroke&&"number"===typeof y.x&&"number"===typeof y.y&&4<Math.abs(y.x-this._lastPoint.x)+
Math.abs(y.y-this._lastPoint.y)){var x=this._stroke.x.length;this._stroke.x.push(y.x);this._stroke.y.push(y.y);this._lastPoint=y;var K=this._stroke,F=this.addToStrokeFn,Y=this.context;setTimeout(function(){F.call(Y,K,x)},3);return y}return null};this.endStroke=function(){var y=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(y){var x=this._stroke,K=this.endStrokeFn,F=this.context,Y=this.changed;setTimeout(function(){K.call(F,x);Y.call(F)},3);return!0}return null}}function t(a,C,J){var b=this.$parent=
c(a);a=this.eventTokens={};this.events=new p(this);var d=c.fn[g]("globalEvents"),e={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};c.extend(e,z(b));C&&c.extend(e,C);this.settings=e;for(var h in J)J.hasOwnProperty(h)&&J[h].call(this,h);this.events.publish(g+".initializing");this.$controlbarUpper=c('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(b);
this.isCanvasEmulator=!1;J=this.canvas=this.initializeCanvas(e);C=c(J);this.$controlbarLower=c('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(b);this.canvasContext=J.getContext("2d");C.data(g+".this",this);b=(b=e.lineWidth)?b:Math.max(Math.round(J.width/400),2);e.lineWidth=b;this.lineCurveThreshold=3*e.lineWidth;e.cssclass&&""!=c.trim(e.cssclass)&&C.addClass(e.cssclass);
this.fatFingerCompensation=0;b=function(F){var Y,aa,fa=function(la){la=la.changedTouches&&0<la.changedTouches.length?la.changedTouches[0]:la;return new M(Math.round(la.pageX+Y),Math.round(la.pageY+aa)+F.fatFingerCompensation)},ca=new l(750,function(){F.dataEngine.endStroke()});this.drawEndHandler=function(la){try{la.preventDefault()}catch(Ga){}ca.clear();F.dataEngine.endStroke()};this.drawStartHandler=function(la){la.preventDefault();var Ga=c(F.canvas).offset();Y=-1*Ga.left;aa=-1*Ga.top;F.dataEngine.startStroke(fa(la));
ca.kick()};this.drawMoveHandler=function(la){la.preventDefault();F.dataEngine.inStroke&&(F.dataEngine.addToStroke(fa(la)),ca.kick())};return this}.call({},this);var k=b.drawEndHandler,q=b.drawStartHandler,n=b.drawMoveHandler,y=this.canvas;C=c(y);this.isCanvasEmulator?(C.bind("mousemove."+g,n),C.bind("mouseup."+g,k),C.bind("mousedown."+g,q)):(y.ontouchstart=function(F){y.onmousedown=void 0;y.onmouseup=void 0;y.onmousemove=void 0;this.fatFingerCompensation=e.minFatFingerCompensation&&-3*e.lineWidth>
e.minFatFingerCompensation?-3*e.lineWidth:e.minFatFingerCompensation;q(F);y.ontouchend=k;y.ontouchstart=q;y.ontouchmove=n},y.onmousedown=function(F){y.ontouchstart=void 0;y.ontouchend=void 0;y.ontouchmove=void 0;q(F);y.onmousedown=q;y.onmouseup=k;y.onmousemove=n});a[g+".windowmouseup"]=d.subscribe(g+".windowmouseup",b.drawEndHandler);this.events.publish(g+".attachingEventHandlers");var x=this;a=e.width.toString(10);var K=g;if("ratio"===a||"%"===a.split("")[a.length-1])this.eventTokens[K+".parentresized"]=
d.subscribe(K+".parentresized",function(F,Y,aa){return function(){var fa=Y.width();if(fa!==aa){for(var ca in F)F.hasOwnProperty(ca)&&(d.unsubscribe(F[ca]),delete F[ca]);var la=x.settings;x.$parent.children().remove();for(ca in x)x.hasOwnProperty(ca)&&delete x[ca];ca=la.data;fa=1*fa/aa;var Ga=[],ya,xa;var wa=0;for(ya=ca.length;wa<ya;wa++){var Da=ca[wa];var Ta={x:[],y:[]};var Ja=0;for(xa=Da.x.length;Ja<xa;Ja++)Ta.x.push(Da.x[Ja]*fa),Ta.y.push(Da.y[Ja]*fa);Ga.push(Ta)}la.data=Ga;Y[K](la)}}}(this.eventTokens,
this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height));this.resetCanvas(e.data);this.events.publish(g+".initialized");return this}var g="jSignature",l=function(a,C){var J;this.kick=function(){clearTimeout(J);J=setTimeout(C,a)};this.clear=function(){clearTimeout(J)};return this},p=function(a){this.topics={};this.context=a?a:this;this.publish=function(C,J,b,d){if(this.topics[C]){var e=this.topics[C],h=Array.prototype.slice.call(arguments,1),k=[],q;var n=0;for(q=e.length;n<q;n++){var y=
e[n];var x=y[0];y[1]&&(y[0]=function(){},k.push(n));x.apply(this.context,h)}n=0;for(q=k.length;n<q;n++)e.splice(k[n],1)}};this.subscribe=function(C,J,b){this.topics[C]?this.topics[C].push([J,b]):this.topics[C]=[[J,b]];return{topic:C,callback:J}};this.unsubscribe=function(C){if(this.topics[C.topic])for(var J=this.topics[C.topic],b=0,d=J.length;b<d;b++)J[b][0]===C.callback&&J.splice(b,1)}},A=function(a){var C=this.canvasContext,J=a.x[0];a=a.y[0];var b=this.settings.lineWidth,d=C.fillStyle;C.fillStyle=
C.strokeStyle;C.fillRect(J+b/-2,a+b/-2,b,b);C.fillStyle=d},D=function(a,C){var J=new M(a.x[C-1],a.y[C-1]),b=new M(a.x[C],a.y[C]),d=J.getVectorToPoint(b);if(1<C){var e=new M(a.x[C-2],a.y[C-2]),h=e.getVectorToPoint(J);if(h.getLength()>this.lineCurveThreshold){var k=2<C?(new M(a.x[C-3],a.y[C-3])).getVectorToPoint(e):new E(0,0);a=.35*h.getLength();C=h.angleTo(k.reverse());var q=d.angleTo(h.reverse());k=(new E(k.x+h.x,k.y+h.y)).resizeTo(Math.max(.05,C)*a);var n=(new E(h.x+d.x,h.y+d.y)).reverse().resizeTo(Math.max(.05,
q)*a);h=this.canvasContext;a=e.x;q=e.y;C=J.x;var y=J.y,x=e.x+k.x;e=e.y+k.y;k=J.x+n.x;n=J.y+n.y;h.beginPath();h.moveTo(a,q);h.bezierCurveTo(x,e,k,n,C,y);h.stroke()}}d.getLength()<=this.lineCurveThreshold&&(d=this.canvasContext,e=J.x,J=J.y,k=b.x,b=b.y,d.beginPath(),d.moveTo(e,J),d.lineTo(k,b),d.stroke())},L=function(a){var C=a.x.length-1;if(0<C){var J=new M(a.x[C],a.y[C]),b=new M(a.x[C-1],a.y[C-1]),d=b.getVectorToPoint(J);if(d.getLength()>this.lineCurveThreshold){if(1<C){a=(new M(a.x[C-2],a.y[C-2])).getVectorToPoint(b);
var e=(new E(a.x+d.x,a.y+d.y)).resizeTo(d.getLength()/2);d=this.canvasContext;a=b.x;C=b.y;var h=J.x,k=J.y,q=b.x+e.x;b=b.y+e.y;e=J.x;J=J.y;d.beginPath();d.moveTo(a,C);d.bezierCurveTo(q,b,e,J,h,k)}else d=this.canvasContext,a=b.x,b=b.y,C=J.x,J=J.y,d.beginPath(),d.moveTo(a,b),d.lineTo(C,J);d.stroke()}}};t.prototype.resetCanvas=function(a){var C=this.canvas,J=this.settings,b=this.canvasContext,d=this.isCanvasEmulator,e=C.width,h=C.height;b.clearRect(0,0,e+30,h+30);b.shadowColor=b.fillStyle=J["background-color"];
d&&b.fillRect(0,0,e+30,h+30);b.lineWidth=Math.ceil(parseInt(J.lineWidth,10));b.lineCap=b.lineJoin="round";b.strokeStyle=J["decor-color"];b.shadowOffsetX=0;b.shadowOffsetY=0;var k=Math.round(h/5),q=1.5*k,n=h-k;e-=1.5*k;h-=k;b.beginPath();b.moveTo(q,n);b.lineTo(e,h);b.stroke();b.strokeStyle=J.color;d||(b.shadowColor=b.strokeStyle,b.shadowOffsetX=.5*b.lineWidth,b.shadowOffsetY=-.6*b.lineWidth,b.shadowBlur=0);a||(a=[]);b=this.dataEngine=new u(a,this,A,D,L);J.data=a;c(C).data(g+".data",a).data(g+".settings",
J);var y=this.$parent,x=this.events,K=g;b.changed=function(){x.publish(K+".change");y.trigger("change")};b.changed();return!0};t.prototype.initializeCanvas=function(a){var C=document.createElement("canvas"),J=c(C);a.width===a.height&&"ratio"===a.height&&(a.width="100%");J.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==a.height&&a.height?a.height.toString(10):1).css("width","ratio"!==a.width&&a.width?a.width.toString(10):1);J.appendTo(this.$parent);"ratio"===a.height?
J.css("height",Math.round(J.width()/a.sizeRatio)):"ratio"===a.width&&J.css("width",Math.round(J.height()*a.sizeRatio));J.addClass(g);C.width=J.width();C.height=J.height();a=C;if(a.getContext)a=!1;else{J=a.ownerDocument.parentWindow;var b=J.FlashCanvas?a.ownerDocument.parentWindow.FlashCanvas:"undefined"===typeof FlashCanvas?void 0:FlashCanvas;if(b){a=b.initElement(a);b=1;J&&J.screen&&J.screen.deviceXDPI&&J.screen.logicalXDPI&&(b=1*J.screen.deviceXDPI/J.screen.logicalXDPI);if(1!==b)try{c(a).children("object").get(0).resize(Math.ceil(a.width*
b),Math.ceil(a.height*b)),a.getContext("2d").scale(b,b)}catch(d){}a=!0}else throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");}this.isCanvasEmulator=a;C.onselectstart=function(d){d&&d.preventDefault&&d.preventDefault();d&&d.stopPropagation&&d.stopPropagation();return!1};return C};var P=window,Q=function(a,C){var J=new Image,b=this;J.onload=function(){b.getContext("2d").drawImage(J,0,0,J.width<b.width?J.width:b.width,J.height<b.height?J.height:b.height)};J.src="data:"+
C+","+a},R=function(a){this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").resetCanvas(a);return this},X=function(a,C){if(void 0!==C||"string"!==typeof a||"data:"!==a.substr(0,5)||(C=a.slice(5).split(",")[0],a=a.slice(6+C.length),C!==a)){var J=this.find("canvas."+g).add(this.filter("canvas."+g));if(ma.hasOwnProperty(C))0!==J.length&&ma[C].call(J[0],a,C,function(b){return function(){return b.resetCanvas.apply(b,arguments)}}(J.data(g+".this")));else throw Error(g+" is unable to find import plugin with for format '"+
String(C)+"'");return this}},da=new p,ea=g,ua,V=function(){da.publish(ea+".parentresized")};c(P).bind("resize."+ea,function(){ua&&clearTimeout(ua);ua=setTimeout(V,500)}).bind("mouseup."+ea,function(){da.publish(ea+".windowmouseup")});var ja={},ka={"default":function(){return this.toDataURL()},"native":function(a){return a},image:function(){var a=this.toDataURL();if("string"===typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var C=a.indexOf(",");return[a.slice(5,C),a.substr(C+1)]}return[]}},
ma={"native":function(a,C,J){J(a)},image:Q,"image/png;base64":Q,"image/jpeg;base64":Q,"image/jpg;base64":Q},sa={"export":ka,"import":ma,instance:ja},Aa={init:function(a){return this.each(function(){var C,J=!1;for(C=this.parentNode;C&&!J;)J=C.body,C=C.parentNode;!J||new t(this,a,ja)})},getSettings:function(){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").settings},clear:R,reset:R,addPlugin:function(a,C,J){sa.hasOwnProperty(a)&&(sa[a][C]=J);return this},listPlugins:function(a){var C=
[];if(sa.hasOwnProperty(a)){a=sa[a];for(var J in a)a.hasOwnProperty(J)&&C.push(J)}return C},getData:function(a){var C=this.find("canvas."+g).add(this.filter("canvas."+g));void 0===a&&(a="default");if(0!==C.length&&ka.hasOwnProperty(a))return ka[a].call(C.get(0),C.data(g+".data"))},importData:X,setData:X,globalEvents:function(){return da},events:function(){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").events}};c.fn[g]=function(a){if(!a||"object"===typeof a)return Aa.init.apply(this,
arguments);if("string"===typeof a&&Aa[a])return Aa[a].apply(this,Array.prototype.slice.call(arguments,1));c.error("Method "+String(a)+" does not exist on dvJQuery."+g)}})();(function(){c.fn.jSignature("addPlugin","instance","UndoButton",function(z){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[z]){var E=this.settings[z];"function"!==typeof E&&(E=function(){var l=c('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),
p=l.width();l.css("left",Math.round((this.canvas.width-p)/2));p!==l.width()&&l.width(p);return l});var M=E.call(this),u=this;u.events.subscribe("jSignature.change",function(){u.dataEngine.data.length?M.show():M.hide()});var t=this,g=(this.events.topics.hasOwnProperty("jSignature.undo")?z:"jSignature")+".undo";M.bind("click",function(){t.events.publish(g)});t.events.subscribe(g,function(){var l=t.dataEngine.data;l.length&&(l.pop(),t.resetCanvas(l))})}})})})();(function(){for(var z={},E={},M="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),
u=M.length/2,t=u-1;-1<t;t--)z[M[t]]=M[t+u],E[M[t+u]]=M[t];var g=function(P){P=P.split("");for(var Q=P.length,R=1;R<Q;R++)P[R]=z[P[R]];return P.join("")},l=function(P){for(var Q=[],R=0,X=1,da=P.length,ea,ua,V=0;V<da;V++)ea=Math.round(P[V]),ua=ea-R,R=ea,0>ua&&0<X?(X=-1,Q.push("Z")):0<ua&&0>X&&(X=1,Q.push("Y")),ea=Math.abs(ua),ea>=u?Q.push(g(ea.toString(u))):Q.push(ea.toString(u));return Q.join("")},p=function(P){var Q=[];P=P.split("");for(var R=P.length,X,da=1,ea=[],ua=0,V=0;V<R;V++)X=P[V],X in z||
"Z"===X||"Y"===X?(0!==ea.length&&(ea=parseInt(ea.join(""),u)*da+ua,Q.push(ea),ua=ea),"Z"===X?(da=-1,ea=[]):"Y"===X?(da=1,ea=[]):ea=[X]):ea.push(E[X]);Q.push(parseInt(ea.join(""),u)*da+ua);return Q},A=function(P){for(var Q=[],R=P.length,X,da=0;da<R;da++)X=P[da],Q.push(l(X.x)),Q.push(l(X.y));return Q.join("_")},D=function(P){var Q=[];P=P.split("_");for(var R=P.length/2,X=0;X<R;X++)Q.push({x:p(P[2*X]),y:p(P[2*X+1])});return Q};M=function(P){return["image/jsignature;base30",A(P)]};t=function(P,Q,R){"string"===
typeof P&&("image/jsignature;base30"===P.substring(0,23).toLowerCase()&&(P=P.substring(24)),R(D(P)))};if(null==this.dvJQuery)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");var L=this.dvJQuery.fn.jSignature;L("addPlugin","export","base30",M);L("addPlugin","export","image/jsignature;base30",M);L("addPlugin","import","base30",t);L("addPlugin","import","image/jsignature;base30",t);this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:g,
compressstrokeleg:l,uncompressstrokeleg:p,compressstrokes:A,uncompressstrokes:D,charmap:z})}).call("undefined"!==typeof window?window:this);(function(){function z(L,P){this.x=L;this.y=P;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var Q=function(R){return Math.round(R/Math.abs(R))};this.resizeTo=function(R){if(0===this.x&&0===this.y)this._length=
0;else if(0===this.x)this._length=R,this.y=R*Q(this.y);else if(0===this.y)this._length=R,this.x=R*Q(this.x);else{var X=Math.abs(this.y/this.x),da=Math.sqrt(Math.pow(R,2)/(1+Math.pow(X,2)));X*=da;this._length=R;this.x=da*Q(this.x);this.y=X*Q(this.y)}return this};this.angleTo=function(R){var X=this.getLength()*R.getLength();return 0===X?0:Math.acos(Math.min(Math.max((this.x*R.x+this.y*R.y)/X,-1),1))/Math.PI}}function E(L,P){this.x=L;this.y=P;this.getVectorToCoordinates=function(Q,R){return new z(Q-
this.x,R-this.y)};this.getVectorFromCoordinates=function(Q,R){return this.getVectorToCoordinates(Q,R).reverse()};this.getVectorToPoint=function(Q){return new z(Q.x-this.x,Q.y-this.y)};this.getVectorFromPoint=function(Q){return this.getVectorToPoint(Q).reverse()}}function M(L,P){P=Math.pow(10,P);return Math.round(L*P)/P}function u(L){var P=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],
Q,R=L.length,X,da=[],ea=[],ua=X=Q=0,V=0,ja=[];if(0!==R){for(Q=0;Q<R;Q++){ua=L[Q];V=[];X={x:[],y:[]};var ka;var ma=0;for(ka=ua.x.length;ma<ka;ma++)V.push({x:ua.x[ma],y:ua.y[ma]});V=simplify(V,.7,!0);ma=0;for(ka=V.length;ma<ka;ma++)X.x.push(V[ma].x),X.y.push(V[ma].y);ja.push(X);da=da.concat(X.x);ea=ea.concat(X.y)}L=Math.min.apply(null,da)-1;R=Math.max.apply(null,da)+1;da=Math.min.apply(null,ea)-1;ea=Math.max.apply(null,ea)+1;ua=0>L?0:L;V=0>da?0:da;Q=R-L;X=ea-da}P.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+
Q.toString()+'" height="'+X.toString()+'">');Q=0;for(R=ja.length;Q<R;Q++){X=ja[Q];L=P;da=L.push;ma=X;X=ua;ea=V;X=["M",M(ma.x[0]-X,2),M(ma.y[0]-ea,2)];ea=1;for(ka=ma.x.length-1;ea<ka;ea++){var sa=X.push,Aa=sa.apply,a=X,C=ma,J=ea,b=1;J+=1;var d=new E(C.x[J-1],C.y[J-1]);var e=new E(C.x[J],C.y[J]);e=d.getVectorToPoint(e);var h=new E(C.x[J-2],C.y[J-2]);d=h.getVectorToPoint(d);d=d.getLength()>b?(b=2<J?(new E(C.x[J-3],C.y[J-3])).getVectorToPoint(h):new z(0,0),C=.35*d.getLength(),h=d.angleTo(b.reverse()),
J=e.angleTo(d.reverse()),b=(new z(b.x+d.x,b.y+d.y)).resizeTo(Math.max(.05,h)*C),e=(new z(d.x+e.x,d.y+e.y)).reverse().resizeTo(Math.max(.05,J)*C),e=new z(d.x+e.x,d.y+e.y),["c",M(b.x,2),M(b.y,2),M(e.x,2),M(e.y,2),M(d.x,2),M(d.y,2)]):["l",M(d.x,2),M(d.y,2)];Aa.call(sa,a,d)}0<ka?(ka=X.push,sa=ka.apply,Aa=X,J=ea,ea=ma.x.length-1,a=new E(ma.x[ea],ma.y[ea]),C=new E(ma.x[ea-1],ma.y[ea-1]),a=C.getVectorToPoint(a),1<ea&&a.getLength()>J?(ea=(new E(ma.x[ea-2],ma.y[ea-2])).getVectorToPoint(C),C=a.angleTo(ea.reverse()),
ma=.35*a.getLength(),ea=(new z(ea.x+a.x,ea.y+a.y)).resizeTo(Math.max(.05,C)*ma),ea=["c",M(ea.x,2),M(ea.y,2),M(a.x,2),M(a.y,2),M(a.x,2),M(a.y,2)]):ea=["l",M(a.x,2),M(a.y,2)],sa.call(ka,Aa,ea)):0===ka&&X.push.apply(X,["l",1,1]);X=X.join(" ");da.call(L,'<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+X+'"/>')}P.push("</svg>");return P.join("")}function t(L){return[A,u(L)]}function g(L){return[D,p(u(L))]}var l=window;"use strict";("undefined"!=typeof exports?
exports:l).simplify=function(L,P,Q){P=void 0!==P?P*P:1;if(!Q){var R=L.length,X=L[0],da=[X];for(Q=1;Q<R;Q++){var ea=L[Q];var ua=ea.x-X.x,V=ea.y-X.y;ua*ua+V*V>P&&(da.push(ea),X=ea)}L=(X!==ea&&da.push(ea),da)}ea=L;Q=ea.length;R=new ("undefined"!=typeof Uint8Array?Uint8Array:Array)(Q);X=0;da=Q-1;var ja,ka=[],ma=[],sa=[];for(R[X]=R[da]=1;da;){V=0;for(ua=X+1;ua<da;ua++){var Aa=ea[ua];var a=ea[X],C=ea[da],J=a.x,b=a.y;a=C.x-J;var d=C.y-b;if(0!==a||0!==d){var e=((Aa.x-J)*a+(Aa.y-b)*d)/(a*a+d*d);1<e?(J=C.x,
b=C.y):0<e&&(J+=a*e,b+=d*e)}Aa=(a=Aa.x-J,d=Aa.y-b,a*a+d*d);Aa>V&&(ja=ua,V=Aa)}V>P&&(R[ja]=1,ka.push(X),ma.push(ja),ka.push(ja),ma.push(da));X=ka.pop();da=ma.pop()}for(ua=0;ua<Q;ua++)R[ua]&&sa.push(ea[ua]);return L=sa,L};if("function"!==typeof p)var p=function(L){var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),Q=0,R=0;var X=[];do{var da=L.charCodeAt(Q++);var ea=L.charCodeAt(Q++);var ua=L.charCodeAt(Q++);var V=da<<16|ea<<8|ua;da=V>>18&63;ea=V>>12&63;ua=V>>6&63;V&=
63;X[R++]=P[da]+P[ea]+P[ua]+P[V]}while(Q<L.length);X=X.join("");L=L.length%3;return(L?X.slice(0,L-3):X)+"===".slice(L||3)};var A="image/svg+xml",D="image/svg+xml;base64";if("undefined"===typeof c)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");l=c.fn.jSignature;l("addPlugin","export","svg",t);l("addPlugin","export",A,t);l("addPlugin","export","svgbase64",g);l("addPlugin","export",D,g)})()}(dvJQuery),dvJQuery&&function(c){var z=!1,E=
{x:null,y:null},M=null,u={init:function(t){function g(){"none"!==c("#"+t.idMenu).css("display")&&(c("#"+t.idMenu).css("opacity",1),clearTimeout(M),M=null)}function l(){"none"!==c("#"+t.idMenu).css("display")&&(c("#"+t.idMenu).css("opacity",.85),clearTimeout(M),M=setTimeout(function(){c("#"+t.idMenu).hide()},2E3))}"string"===typeof t&&(t={idMenu:t});t=c.extend(!0,{},c.fn.dvContextMenu.defaults,t);t.idMenu?null===document.getElementById(t.idMenu)&&c.error("The menu specified does not exist"):c.error("No menu specified");
u.destroy.call(this);this.data("dv-context-menu",t);var p="dv-context-menu-"+t.idMenu;c("html").on("contextmenu."+p+" click."+p,function(){z?z=!1:c("#"+t.idMenu).hide()});c(t.referrer).on("contextmenu."+p+" scroll."+p,function(A){if("none"!==c("#"+t.idMenu).css("display")){var D={x:A.target.scrollLeft,y:A.target.scrollTop};A=D.x-E.x;var L=D.y-E.y;E=D;D=parseInt(c("#"+t.idMenu).css("top").slice(0,-2))-L;A=parseInt(c("#"+t.idMenu).css("left").slice(0,-2))-A;c("#"+t.idMenu).css({left:A+"px",top:D+"px"})}});
c("#"+t.idMenu).on("contextmenu."+p+" mouseenter."+p,g);c("#"+t.idMenu).on("contextmenu."+p+" mouseleave."+p,l);this.on("contextmenu."+p,function(A){A.preventDefault();A.stopPropagation();if(null==t.beforeShow||"function"!==typeof t.beforeShow||t.beforeShow()){var D={x:A.clientX,y:A.clientY};null!=t.translateMouse&&"function"===typeof t.translateMouse&&t.translateMouse(D);c("#"+t.idMenu).css({left:D.x+"px",top:D.y+"px"});c("#"+t.idMenu).css("opacity",1);c("#"+t.idMenu).show();E={x:A.currentTarget.scrollLeft,
y:A.currentTarget.scrollTop};A.skipNextCloseEvent&&(z=A.skipNextCloseEvent);t.dependsOnTextSelection&&(A=c(t.referrer).children('[data-dv-sel-type="us"]'),A.on("contextmenu."+p+" mouseenter."+p,g),A.on("contextmenu."+p+" mouseleave."+p,l))}});return this},destroy:function(){this.each(function(){var t=c(this),g=t.data("dv-context-menu");void 0!==g&&(c("#"+g.idMenu).hide(),t.removeData("dv-context-menu").off(".dv-context-menu-"+g.idMenu))});c("html").off(".dv-context-menu");return this}};c.fn.dvContextMenu=
function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof t&&"string"!==typeof t&&t)c.error("Method "+t+" does not exist on dvJQuery.dvContextMenu");else return u.init.apply(this,arguments)};c.fn.dvContextMenu.defaults={idMenu:null,translateMouse:null,beforeShow:null,dependsOnTextSelection:!1}}(dvJQuery),dvJQuery&&function(c){function z(a,C){Aa();var J=c('<div class="minicolors" />'),b=c.minicolors.defaults,d;if(!a.data("minicolors-initialized")){C=c.extend(!0,
{},b,C);J.addClass("minicolors-theme-"+C.theme).toggleClass("minicolors-with-opacity",C.opacity);void 0!==C.position&&c.each(C.position.split(" "),function(){J.addClass("minicolors-position-"+this)});b="rgb"===C.format?C.opacity?"25":"20":C.keywords?"11":"7";a.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",C).prop("size",b).wrap(J).after('<div class="minicolors-panel minicolors-slider-'+C.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');
C.inline||(a.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),a.next(".minicolors-input-swatch").on("click",function(h){h.preventDefault();a.focus()}));b=a.parent().find(".minicolors-panel");b.on("selectstart",function(){return!1}).end();if(C.swatches&&0!==C.swatches.length)for(b.addClass("minicolors-with-swatches"),b=c('<ul class="minicolors-swatches"></ul>').appendTo(b),d=0;d<C.swatches.length;++d){var e=C.swatches[d];
e=ea(e)?R(e,!0):sa(Q(e,!0));c('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(b).data("swatch-color",C.swatches[d]).find(".minicolors-swatch-color").css({backgroundColor:ja(e),opacity:e.a});C.swatches[d]=e}C.inline&&a.parent().addClass("minicolors-inline");p(a,!1);a.data("minicolors-initialized",!0)}}function E(a){var C=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
C.before(a).remove();c(C).off(".minicolors")}function M(a){var C=a.parent(),J=C.find(".minicolors-panel"),b=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||C.hasClass("minicolors-inline")||C.hasClass("minicolors-focus")||(u(),C.addClass("minicolors-focus"),J.stop(!0,!0).fadeIn(b.showSpeed,function(){b.show&&b.show.call(a.get(0))}))}function u(){c(".minicolors-focus").each(function(){var a=c(this),C=a.find(".minicolors-input"),J=a.find(".minicolors-panel"),b=C.data("minicolors-settings");
J.fadeOut(b.hideSpeed,function(){b.hide&&"function"===typeof b.hide&&b.hide.call(C.get(0));a.removeClass("minicolors-focus")})})}function t(a,C,J){var b=a.parents(".minicolors").find(".minicolors-input"),d=b.data("minicolors-settings"),e=a.find("[class$=-picker]"),h=a.offset().left,k=a.offset().top,q=Math.round(C.pageX-h),n=Math.round(C.pageY-k);J=J?d.animationSpeed:0;C.originalEvent.changedTouches&&(q=C.originalEvent.changedTouches[0].pageX-h,n=C.originalEvent.changedTouches[0].pageY-k);0>q&&(q=
0);0>n&&(n=0);q>a.width()&&(q=a.width());n>a.height()&&(n=a.height());a.parent().is(".minicolors-slider-wheel")&&e.parent().is(".minicolors-grid")&&(h=75-q,k=75-n,C=Math.sqrt(h*h+k*k),h=Math.atan2(k,h),0>h&&(h+=2*Math.PI),75<C&&(C=75,q=75-75*Math.cos(h),n=75-75*Math.sin(h)),q=Math.round(q),n=Math.round(n));a.is(".minicolors-grid")?e.stop(!0).animate({top:n+"px",left:q+"px"},J,d.animationEasing,function(){g(b,a)}):e.stop(!0).animate({top:n+"px"},J,d.animationEasing,function(){g(b,a)})}function g(a,
C){function J(Y,aa){if(!Y.length||!aa)return null;var fa=Y.offset().left;var ca=Y.offset().top;return{x:fa-aa.offset().left+Y.outerWidth()/2,y:ca-aa.offset().top+Y.outerHeight()/2}}var b=a.val();var d=a.attr("data-opacity");var e=a.parent();var h=a.data("minicolors-settings"),k=e.find(".minicolors-input-swatch");var q=e.find(".minicolors-grid");var n=e.find(".minicolors-slider"),y=e.find(".minicolors-opacity-slider");var x=q.find("[class$=-picker]");var K=n.find("[class$=-picker]"),F=y.find("[class$=-picker]");
x=J(x,q);K=J(K,n);F=J(F,y);if(C.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(h.control){case "wheel":b=q.width()/2-x.x;e=q.height()/2-x.y;q=Math.sqrt(b*b+e*e);b=Math.atan2(e,b);0>b&&(b+=2*Math.PI);75<q&&(q=75,x.x=69-75*Math.cos(b),x.y=69-75*Math.sin(b));C=da(q/.75,0,100);d=da(180*b/Math.PI,0,360);x=da(100-Math.floor(K.y*(100/n.height())),0,100);b=ka({h:d,s:C,b:x});n.css("backgroundColor",ka({h:d,s:C,b:100}));break;case "saturation":d=da(parseInt(x.x*(360/q.width()),
10),0,360);C=da(100-Math.floor(K.y*(100/n.height())),0,100);x=da(100-Math.floor(x.y*(100/q.height())),0,100);b=ka({h:d,s:C,b:x});n.css("backgroundColor",ka({h:d,s:100,b:x}));e.find(".minicolors-grid-inner").css("opacity",C/100);break;case "brightness":d=da(parseInt(x.x*(360/q.width()),10),0,360);C=da(100-Math.floor(x.y*(100/q.height())),0,100);x=da(100-Math.floor(K.y*(100/n.height())),0,100);b=ka({h:d,s:C,b:x});n.css("backgroundColor",ka({h:d,s:C,b:100}));e.find(".minicolors-grid-inner").css("opacity",
1-x/100);break;default:d=da(360-parseInt(K.y*(360/n.height()),10),0,360),C=da(Math.floor(x.x*(100/q.width())),0,100),x=da(100-Math.floor(x.y*(100/q.height())),0,100),b=ka({h:d,s:C,b:x}),q.css("backgroundColor",ka({h:d,s:100,b:100}))}d=h.opacity?parseFloat(1-F.y/y.height()).toFixed(2):1;l(a,b,d)}else k.find("span").css({backgroundColor:b,opacity:d}),A(a,b,d)}function l(a,C,J){var b=a.parent(),d=a.data("minicolors-settings");b=b.find(".minicolors-input-swatch");d.opacity&&a.attr("data-opacity",J);if("rgb"===
d.format){C=ea(C)?R(C,!0):sa(Q(C,!0));J=""===a.attr("data-opacity")?1:da(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(J)||!d.opacity)J=1;C=1>=a.minicolors("rgbObject").a&&C&&d.opacity?"rgba("+C.r+", "+C.g+", "+C.b+", "+parseFloat(J)+")":"rgb("+C.r+", "+C.g+", "+C.b+")"}else ea(C)&&(C=V(C)),C=P(C,d.letterCase);a.val(C);b.find("span").css({backgroundColor:C,opacity:J});A(a,C,J)}function p(a,C){var J;var b=a.parent();var d=a.data("minicolors-settings");var e=b.find(".minicolors-input-swatch");
var h=b.find(".minicolors-grid"),k=b.find(".minicolors-slider"),q=b.find(".minicolors-opacity-slider"),n=h.find("[class$=-picker]"),y=k.find("[class$=-picker]"),x=q.find("[class$=-picker]");if(ea(a.val())){var K=V(a.val());(J=da(parseFloat(ua(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",J)}else K=P(Q(a.val(),!0),d.letterCase);K||(K=P(X(d.defaultValue,!0),d.letterCase));J=ma(K);var F=d.keywords?c.map(d.keywords.split(","),function(aa){return c.trim(aa.toLowerCase())}):[];F=""!==a.val()&&-1<c.inArray(a.val().toLowerCase(),
F)?P(a.val()):ea(a.val())?R(a.val()):K;C||a.val(F);if(d.opacity){var Y=""===a.attr("data-opacity")?1:da(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);isNaN(Y)&&(Y=1);a.attr("data-opacity",Y);e.find("span").css("opacity",Y);C=da(q.height()-q.height()*Y,0,q.height());x.css("top",C+"px")}"transparent"===a.val().toLowerCase()&&e.find("span").css("opacity",0);e.find("span").css("backgroundColor",K);switch(d.control){case "wheel":b=da(Math.ceil(.75*J.s),0,h.height()/2);e=J.h*Math.PI/180;d=da(75-Math.cos(e)*
b,0,h.width());C=da(75-Math.sin(e)*b,0,h.height());n.css({top:C+"px",left:d+"px"});C=150-J.b/(100/h.height());""===K&&(C=0);y.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));break;case "saturation":d=da(5*J.h/12,0,150);C=da(h.height()-Math.ceil(J.b/(100/h.height())),0,h.height());n.css({top:C+"px",left:d+"px"});C=da(k.height()-J.s*(k.height()/100),0,k.height());y.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:100,b:J.b}));b.find(".minicolors-grid-inner").css("opacity",J.s/
100);break;case "brightness":d=da(5*J.h/12,0,150);C=da(h.height()-Math.ceil(J.s/(100/h.height())),0,h.height());n.css({top:C+"px",left:d+"px"});C=da(k.height()-J.b*(k.height()/100),0,k.height());y.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));b.find(".minicolors-grid-inner").css("opacity",1-J.b/100);break;default:d=da(Math.ceil(J.s/(100/h.width())),0,h.width()),C=da(h.height()-Math.ceil(J.b/(100/h.height())),0,h.height()),n.css({top:C+"px",left:d+"px"}),C=da(k.height()-J.h/(360/
k.height()),0,k.height()),y.css("top",C+"px"),h.css("backgroundColor",ka({h:J.h,s:100,b:100}))}a.data("minicolors-initialized")&&A(a,F,Y)}function A(a,C,J){var b=a.data("minicolors-settings"),d=a.data("minicolors-lastChange"),e;if(!d||d.value!==C||d.opacity!==J){a.data("minicolors-lastChange",{value:C,opacity:J});if(b.swatches&&0!==b.swatches.length){d=ea(C)?R(C,!0):sa(C);var h=-1;for(e=0;e<b.swatches.length;++e)if(d.r===b.swatches[e].r&&d.g===b.swatches[e].g&&d.b===b.swatches[e].b&&d.a===b.swatches[e].a){h=
e;break}a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==h&&a.parent().find(".minicolors-swatches .minicolors-swatch").eq(e).addClass("selected")}b.change&&(b.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){b.change.call(a.get(0),C,J)},b.changeDelay))):b.change.call(a.get(0),C,J));a.trigger("change").trigger("input")}}function D(a){var C=c(a).attr("data-opacity");ea(c(a).val())?a=R(c(a).val(),
!0):(a=Q(c(a).val(),!0),a=sa(a));if(!a)return null;void 0!==C&&c.extend(a,{a:parseFloat(C)});return a}function L(a,C){var J=c(a).attr("data-opacity");ea(c(a).val())?a=R(c(a).val(),!0):(a=Q(c(a).val(),!0),a=sa(a));if(!a)return null;void 0===J&&(J=1);return C?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(J)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"}function P(a,C){return"uppercase"===C?a.toUpperCase():a.toLowerCase()}function Q(a,C){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==
a.length)return"";3===a.length&&C&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function R(a,C){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=da(parseInt(a[0],10),0,255);a[1]=da(parseInt(a[1],10),0,255);a[2]=da(parseInt(a[2],10),0,255);a[3]&&(a[3]=da(parseFloat(a[3],10),0,1));return C?a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function X(a,C){return ea(a)?R(a):Q(a,C)}
function da(a,C,J){a<C&&(a=C);a>J&&(a=J);return a}function ea(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?!0:!1}function ua(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===a.length?a[4]:"1"}function V(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+
("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function ja(a){var C=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];c.each(C,function(J,b){1===b.length&&(C[J]="0"+b)});return"#"+C.join("")}function ka(a){var C,J;var b=Math.round(a.h);var d=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===d)b=C=J=a;else{d=(255-d)*a/255;var e=b%60*(a-d)/60;360===b&&(b=0);60>b?(b=a,J=d,C=d+e):120>b?(C=a,J=d,b=a-e):180>b?(C=a,b=d,J=d+e):240>b?(J=a,b=d,C=a-
e):300>b?(J=a,C=d,b=d+e):360>b?(b=a,C=d,J=a-e):J=C=b=0}return ja({r:Math.round(b),g:Math.round(C),b:Math.round(J)})}function ma(a){a=sa(a);var C={h:0,s:0,b:0},J=Math.max(a.r,a.g,a.b),b=J-Math.min(a.r,a.g,a.b);C.b=J;C.s=0!==J?255*b/J:0;C.h=0!==C.s?a.r===J?(a.g-a.b)/b:a.g===J?2+(a.b-a.r)/b:4+(a.r-a.g)/b:-1;C.h*=60;0>C.h&&(C.h+=360);C.s*=100/255;C.b*=100/255;0===C.s&&(C.h=360);return C}function sa(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}function Aa(){c([document]).on("mousedown.minicolors touchstart.minicolors",
function(a){c(a.target).parents().add(a.target).hasClass("minicolors")||u()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var C=c(this);a.preventDefault();c(a.delegateTarget).data("minicolors-target",C);t(C,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var C=c(a.delegateTarget).data("minicolors-target");C&&t(C,a)}).on("mouseup.minicolors touchend.minicolors",function(){c(this).removeData("minicolors-target")}).on("click.minicolors",
".minicolors-swatches li",function(a){a.preventDefault();var C=c(this);a=C.parents(".minicolors").find(".minicolors-input");C=C.data("swatch-color");l(a,C,ua(C));p(a)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var C=c(this).parent().find(".minicolors-input");a.preventDefault();M(C)}).on("focus.minicolors",".minicolors-input",function(){var a=c(this);a.data("minicolors-initialized")&&M(a)}).on("blur.minicolors",".minicolors-input",function(){var a=c(this),
C=a.data("minicolors-settings");if(a.data("minicolors-initialized")){var J=C.keywords?c.map(C.keywords.split(","),function(d){return c.trim(d.toLowerCase())}):[];if(""!==a.val()&&-1<c.inArray(a.val().toLowerCase(),J))var b=a.val();else J=ea(a.val())?R(a.val(),!0):(J=Q(a.val(),!0))?sa(J):null,b=null===J?C.defaultValue:"rgb"===C.format?C.opacity?R("rgba("+J.r+","+J.g+","+J.b+","+a.attr("data-opacity")+")"):R("rgb("+J.r+","+J.g+","+J.b+")"):ja(J);J=C.opacity?a.attr("data-opacity"):1;"transparent"===
b.toLowerCase()&&(J=0);a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",J);a.val(b);""===a.val()&&a.val(X(C.defaultValue,!0));a.val(P(a.val(),C.letterCase))}}).on("keydown.minicolors",".minicolors-input",function(a){var C=c(this);if(C.data("minicolors-initialized"))switch(a.keyCode){case 9:u();break;case 13:case 27:u(),C.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=c(this);a.data("minicolors-initialized")&&p(a,!0)}).on("paste.minicolors",".minicolors-input",
function(){var a=c(this);a.data("minicolors-initialized")&&setTimeout(function(){p(a,!0)},1)})}c.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom right",show:null,showSpeed:100,theme:"default",swatches:[]}};c.extend(c.fn,{minicolors:function(a,C){switch(a){case "destroy":return c(this).each(function(){E(c(this))}),c(this);
case "hide":return u(),c(this);case "opacity":if(void 0===C)return c(this).attr("data-opacity");c(this).each(function(){p(c(this).attr("data-opacity",C))});return c(this);case "rgbObject":return D(c(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return L(c(this),"rgbaString"===a);case "settings":if(void 0===C)return c(this).data("minicolors-settings");c(this).each(function(){var J=c(this).data("minicolors-settings")||{};E(c(this));c(this).minicolors(c.extend(!0,J,C))});return c(this);
case "show":return M(c(this).eq(0)),c(this);case "value":if(void 0===C)return c(this).val();c(this).each(function(){"object"===typeof C&&null!==C?(C.opacity&&c(this).attr("data-opacity",da(C.opacity,0,1)),C.color&&c(this).val(C.color)):c(this).val(C);p(c(this))});return c(this);default:return"create"!==a&&(C=a),c(this).each(function(){z(c(this),C)}),c(this)}}})}(dvJQuery),dvJQuery&&function(c){var z,E=function(){var u=c(this);setTimeout(function(){u.find(":dvUi-dvButton").dvButton("refresh")},1)},
M=function(u){var t=u.name,g=u.form,l=c([]);t&&(t=t.replace(/'/g,"\\'"),l=g?c(g).find("[name='"+t+"'][type=radio]"):c("[name='"+t+"'][type=radio]",u.ownerDocument).filter(function(){return!this.form}));return l};c.widget("dvUi.dvButton",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null},setActive:null},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,E);"boolean"!==
typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var u=this,t=this.options,g="checkbox"===this.type||"radio"===this.type,l=g?"":"dvUi-state-active";null===t.label&&(t.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){t.disabled||this===z&&c(this).addClass("dvUi-state-active")}).bind("mouseleave"+this.eventNamespace,function(){t.disabled||c(this).removeClass(l)}).bind("click"+this.eventNamespace,function(p){t.disabled&&(p.preventDefault(),p.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("dvUi-state-focus")},blur:function(){this.buttonElement.removeClass("dvUi-state-focus")}});g&&this.element.bind("change"+this.eventNamespace,
function(){u.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1;c(this).addClass("dvUi-state-active");u.buttonElement.attr("aria-pressed","true");var p=u.element[0];M(p).not(p).map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+
this.eventNamespace,function(){if(t.disabled)return!1;c(this).addClass("dvUi-state-active");z=this;u.document.one("mouseup",function(){z=null})}).bind("mouseup"+this.eventNamespace,function(){if(t.disabled)return!1;c(this).removeClass("dvUi-state-active")}).bind("keydown"+this.eventNamespace,function(p){if(t.disabled)return!1;p.keyCode!==c.dvUi.keyCode.SPACE&&p.keyCode!==c.dvUi.keyCode.ENTER||c(this).addClass("dvUi-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){c(this).removeClass("dvUi-state-active")}),
this.buttonElement.is("a")&&this.buttonElement.keyup(function(p){p.keyCode===c.dvUi.keyCode.SPACE&&c(this).click()}));this._setOption("disabled",t.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var u=this.element.parents().last();var t="label[for='"+this.element.attr("id")+
"']";this.buttonElement=u.find(t);this.buttonElement.length||(u=u.length?u.siblings():this.element.siblings(),this.buttonElement=u.filter(t),this.buttonElement.length||(this.buttonElement=u.find(t)));this.element.addClass("dvUi-helper-hidden-accessible");(u=this.element.is(":checked"))&&this.buttonElement.addClass("dvUi-state-active");this.buttonElement.prop("aria-pressed",u)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("dvUi-helper-hidden-accessible");
this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(u,t){this._super(u,t);"disabled"===u?(this.widget().toggleClass("dvUi-state-disabled",
!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("dvUi-state-focus"):this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))):this._resetButton()},refresh:function(){var u=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("dvUi-button-disabled"),t=this;u!==this.options.disabled&&this._setOption("disabled",u);"radio"===this.type?M(this.element[0]).each(function(){c(this).is(":checked")?
(c(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):c(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?(this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&
this.element.val(this.options.label);else{var u=this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),t=c("<span></span>",this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(u.empty()).text(),g=this.options.icons,l=g.primary&&g.secondary,p=[];g.primary||g.secondary?(this.options.text&&p.push("dvUi-button-text-icon"+(l?"s":g.primary?"-primary":
"-secondary")),g.primary&&u.prepend("<span class='dvUi-button-icon-primary dvUi-icon "+g.primary+"'></span>"),g.secondary&&u.append("<span class='dvUi-button-icon-secondary dvUi-icon "+g.secondary+"'></span>"),this.options.text||(p.push(l?"dvUi-button-icons-only":"dvUi-button-icon-only"),this.hasTitle||u.attr("title",c.trim(t)))):p.push("dvUi-button-text-only");u.addClass(p.join(" "))}}});c.widget("dvUi.dvButtonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",
setActive:null},_create:function(){this.element.addClass("dvUi-buttonset");this.refresh()},_init:function(){this.refresh()},_setOption:function(u,t){"disabled"===u&&this.buttons.dvButton("option",u,t);this._super(u,t)},refresh:function(){var u="rtl"===this.element.css("direction"),t=this.element.find(this.options.items),g=t.filter(":dvUi-dvButton");t.not(":dvUi-dvButton").dvButton({setActive:this.options.setActive});g.dvButton("refresh");this.buttons=t.map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(u?
"dvUi-corner-right":"dvUi-corner-left").end().filter(":last").addClass(u?"dvUi-corner-left":"dvUi-corner-right").end().end()},_destroy:function(){this.element.removeClass("dvUi-buttonset");this.buttons.map(function(){return c(this).dvButton("widget")[0]}).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")}});c.widget("dvUi.dvDialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,
maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(u){var t=c(this).css(u).offset().top;0>t&&c(this).css("top",u.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,
maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();
this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&c.fn.draggable&&this._makeDraggable();this.options.resizable&&c.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var u=this.options.appendTo;return u&&(u.jquery||u.nodeType)?c(u):this.document.find(u||"body").eq(0)},
_destroy:function(){var u=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var t=u.parent.children().eq(u.index);t.length&&t[0]!==this.element[0]?t.before(this.element):u.parent.append(this.element)},widget:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(u){var t,
g=this;if(this._isOpen&&!1!==this._trigger("beforeClose",u)){this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{(t=this.document[0].activeElement)&&"body"!==t.nodeName.toLowerCase()&&c(t).blur()}catch(l){}this._hide(this.uiDialog,this.options.hide,function(){g._trigger("close",u)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(u,t){var g=!1,l=this.uiDialog.siblings(".dvUi-front:visible").map(function(){return+c(this).css("z-index")}).get();
l=Math.max.apply(null,l);l>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",l+1),g=!0);g&&!t&&this._trigger("focus",u);return g},open:function(){var u=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=c(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){u._focusTabbable();
u._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},refresh:function(u){u&&(this._setOption("maxHeight",u),this._size());this._position()},_focusTabbable:function(){var u=this._focusedElement;u||(u=this.element.find("[autofocus]"));u.length||(u=this.element.find(":tabbable"));u.length||(u=this.uiDialogButtonPane.find(":tabbable"));u.length||(u=this.uiDialogTitlebarClose.filter(":tabbable"));u.length||(u=this.uiDialog);u.eq(0).focus()},_keepFocus:function(u){function t(){var g=this.document[0].activeElement;
this.uiDialog[0]===g||c.contains(this.uiDialog[0],g)||this._focusTabbable()}u.preventDefault();t.call(this);this._delay(t)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(u){if(this.options.closeOnEscape&&!u.isDefaultPrevented()&&u.keyCode&&u.keyCode===c.dvUi.keyCode.ESCAPE)u.preventDefault(),
this.close(u);else if(u.keyCode===c.dvUi.keyCode.TAB&&!u.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),g=t.filter(":first"),l=t.filter(":last");u.target!==l[0]&&u.target!==this.uiDialog[0]||u.shiftKey?u.target!==g[0]&&u.target!==this.uiDialog[0]||!u.shiftKey||(this._delay(function(){l.focus()}),u.preventDefault()):(this._delay(function(){g.focus()}),u.preventDefault())}},mousedown:function(u){this._moveToTop(u)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||
this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=c("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){c(t.target).closest(".dvUi-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=c('<div class="dvUi-button"><svg width="100%" height="100%" viewbox="0 0 512 512"><path d="M490.767,471.211L275.512,255.989L490.658,40.79c5.4-5.402,5.4-14.153,0-19.555c-5.402-5.401-14.152-5.401-19.556,0l-215.148,215.2L40.79,21.302c-5.402-5.402-14.153-5.402-19.555,0c-5.401,5.402-5.401,14.153,0,19.555l215.167,215.135L21.234,471.211c-5.401,5.401-5.401,14.152,0,19.556c5.402,5.4,14.153,5.4,19.555,0l215.169-215.221l215.252,215.221c5.402,5.4,14.152,5.4,19.556,0C496.167,485.363,496.167,476.612,490.767,471.211z"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault();this.close(t)}});var u=c("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);this._title(u);this.uiDialog.attr({"aria-labelledby":u.attr("id")})},_title:function(u){this.options.title||u.html("&#160;");u.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=c("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");this.uiDialogButtonSpacer=
c("<div>").addClass("dvUi-dialog-spacer");this.uiButtonSet=c("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var u=this,t=this.options.buttons;this.uiDialogButtonPane.remove();this.uiDialogButtonSpacer.remove();this.uiButtonSet.empty();c.isEmptyObject(t)||c.isArray(t)&&!t.length?this.uiDialog.removeClass("dvUi-dialog-buttons"):(c.each(t,function(g,l){l=c.isFunction(l)?{click:l,text:g}:l;l=c.extend({type:"button"},l);var p=
l.click;l.click=function(){p.apply(u.element[0],arguments)};g={icons:l.icons,text:l.showText};delete l.icons;delete l.showText;c("<button></button>",l).dvButton(g).appendTo(u.uiButtonSet)}),this.uiDialog.addClass("dvUi-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))},_makeDraggable:function(){function u(l){return{position:l.position,offset:l.offset}}var t=this,g=this.options;this.uiDialog.draggable({cancel:".dvUi-dialog-content, .dvUi-dialog-titlebar-close",
handle:".dvUi-dialog-titlebar",containment:"document",start:function(l,p){c(this).addClass("dvUi-dialog-dragging");t._blockFrames();t._trigger("dragStart",l,u(p))},drag:function(l,p){t._trigger("drag",l,u(p))},stop:function(l,p){var A=p.offset.left-t.document.scrollLeft(),D=p.offset.top-t.document.scrollTop();g.position={my:"left top",at:"left"+(0<=A?"+":"")+A+" top"+(0<=D?"+":"")+D,of:t.window};c(this).removeClass("dvUi-dialog-dragging");t._unblockFrames();t._trigger("dragStop",l,u(p))}})},_makeResizable:function(){function u(A){return{originalPosition:A.originalPosition,
originalSize:A.originalSize,position:A.position,size:A.size}}var t=this,g=this.options,l=g.resizable,p=this.uiDialog.css("position");l="string"===typeof l?l:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".dvUi-dialog-content",containment:"document",alsoResize:this.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:l,start:function(A,D){c(this).addClass("dvUi-dialog-resizing");t._blockFrames();t._trigger("resizeStart",A,u(D))},resize:function(A,
D){t._trigger("resize",A,u(D))},stop:function(A,D){var L=t.uiDialog.offset(),P=L.left-t.document.scrollLeft();L=L.top-t.document.scrollTop();g.height=t.uiDialog.height();g.width=t.uiDialog.width();g.position={my:"left top",at:"left"+(0<=P?"+":"")+P+" top"+(0<=L?"+":"")+L,of:t.window};c(this).removeClass("dvUi-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",A,u(D))}}).css("position",p)},_trackFocus:function(){this._on(this.widget(),{focusin:function(u){this._makeFocusTarget();this._focusedElement=
c(u.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var u=this._trackingInstances(),t=c.inArray(this,u);-1!==t&&u.splice(t,1)},_trackingInstances:function(){var u=this.document.data("dvUi-dvDialog-instances");u||(u=[],this.document.data("dvUi-dvDialog-instances",u));return u},_minHeight:function(){var u=this.options;return"auto"===u.height?u.minHeight:Math.min(u.minHeight,u.height)},_position:function(){var u=this.uiDialog.is(":visible");
u||this.uiDialog.show();this.uiDialog.position(this.options.position);u||this.uiDialog.hide()},_setOptions:function(u){var t=this,g=!1,l={};c.each(u,function(p,A){t._setOption(p,A);p in t.sizeRelatedOptions&&(g=!0);p in t.resizableRelatedOptions&&(l[p]=A)});g&&(this._size(),this._position());this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(u,t){var g,l=this.uiDialog;"dialogClass"===u&&l.removeClass(this.options.dialogClass).addClass(t);"disabled"!==
u&&(this._super(u,t),"appendTo"===u&&this.uiDialog.appendTo(this._appendTo()),"buttons"===u&&this._createButtons(),"draggable"===u&&((g=l.is(":data(dvUi-draggable)"))&&!t&&l.draggable("destroy"),!g&&t&&this._makeDraggable()),"position"===u&&this._position(),"resizable"===u&&((g=l.is(":data(dvUi-resizable)"))&&!t&&l.resizable("destroy"),g&&"string"===typeof t&&l.resizable("option","handles",t),g||!1===t||this._makeResizable()),"title"===u&&this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))},
_size:function(){var u=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});u.minWidth>u.width&&(u.width=u.minWidth);var t=this.uiDialog.css({height:"auto",width:u.width}).outerHeight();var g=Math.max(0,u.minHeight-t);var l="number"===typeof u.maxHeight?Math.max(0,u.maxHeight-t):"none";"auto"===u.height?this.element.css({minHeight:g,maxHeight:l,height:"auto"}):this.element.height(Math.max(0,u.height-t));this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var u=c(this);return c("<div>").css({position:"absolute",width:u.outerWidth(),height:u.outerHeight()}).appendTo(u.parent()).offset(u.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(u){return c(u.target).closest(".dvUi-dialog").length?!0:!!c(u.target).closest(".dvUi-datepicker").length},_createOverlay:function(){if(this.options.modal){var u=
!0;this._delay(function(){u=!1});this.document.data("dvUi-dvDialog-overlays")||this._on(this.document,{focusin:function(t){u||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=c("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("dvUi-dvDialog-overlays",(this.document.data("dvUi-dvDialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var u=this.document.data("dvUi-dvDialog-overlays")-1;u?this.document.data("dvUi-dvDialog-overlays",u):this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");this.overlay.remove();this.overlay=null}}});c.widget("dvUi.dvMenu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"dvUi-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;
this.mouseHandled=!1;this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("dvUi-state-disabled").attr("aria-disabled","true");this._on({"mousedown .dvUi-menu-item":function(u){u.preventDefault()},"click .dvUi-menu-item":function(u){var t=c(u.target);!this.mouseHandled&&t.not(".dvUi-state-disabled").length&&(this.select(u),
u.isPropagationStopped()||(this.mouseHandled=!0),t.has(".dvUi-menu").length?this.expand(u):!this.element.is(":focus")&&c(this.document[0].activeElement).closest(".dvUi-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".dvUi-menu").length&&clearTimeout(this.timer)))},"mouseenter .dvUi-menu-item":function(u){if(!this.previousFilter){var t=c(u.currentTarget);t.siblings(".dvUi-state-active").removeClass("dvUi-state-active");this.focus(u,t)}},mouseleave:"collapseAll",
"mouseleave .dvUi-menu":"collapseAll",focus:function(u,t){var g=this.active||this.element.find(this.options.items).eq(0);t||this.focus(u,g)},blur:function(u){this._delay(function(){c.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(u)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(u){this._closeOnDocumentClick(u)&&this.collapseAll(u);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var u=c(this);u.data("dvUi-dvMenu-submenu-carat")&&u.remove()});this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")},_keydown:function(u){var t=!0;switch(u.keyCode){case c.dvUi.keyCode.PAGE_UP:this.previousPage(u);
break;case c.dvUi.keyCode.PAGE_DOWN:this.nextPage(u);break;case c.dvUi.keyCode.HOME:this._move("first","first",u);break;case c.dvUi.keyCode.END:this._move("last","last",u);break;case c.dvUi.keyCode.UP:this.previous(u);break;case c.dvUi.keyCode.DOWN:this.next(u);break;case c.dvUi.keyCode.LEFT:this.collapse(u);break;case c.dvUi.keyCode.RIGHT:this.active&&!this.active.is(".dvUi-state-disabled")&&this.expand(u);break;case c.dvUi.keyCode.ENTER:case c.dvUi.keyCode.SPACE:this._activate(u);break;case c.dvUi.keyCode.ESCAPE:this.collapse(u);
break;default:t=!1;var g=this.previousFilter||"";var l=String.fromCharCode(u.keyCode);var p=!1;clearTimeout(this.filterTimer);l===g?p=!0:l=g+l;g=this._filterMenuItems(l);g=p&&-1!==g.index(this.active.next())?this.active.nextAll(".dvUi-menu-item"):g;g.length||(l=String.fromCharCode(u.keyCode),g=this._filterMenuItems(l));g.length?(this.focus(u,g),this.previousFilter=l,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}t&&u.preventDefault()},_activate:function(u){this.active.is(".dvUi-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(u):this.select(u))},refresh:function(){var u=this,t=this.options.icons.submenu;var g=this.element.find(this.options.menus);this.element.toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length);g.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var l=c(this),p=l.parent(),A=c("<span>").addClass("dvUi-menu-icon dvUi-icon "+
t).data("dvUi-dvMenu-submenu-carat",!0);p.attr("aria-haspopup","true").prepend(A);l.attr("aria-labelledby",p.attr("id"))});g=g.add(this.element).find(this.options.items);g.not(".dvUi-menu-item").each(function(){var l=c(this);u._isDivider(l)&&l.addClass("dvUi-widget-content dvUi-menu-divider")});g.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});g.filter(".dvUi-state-disabled").attr("aria-disabled","true");this.active&&!c.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(u,t){"icons"===u&&this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);"disabled"===u&&this.element.toggleClass("dvUi-state-disabled",!!t).attr("aria-disabled",t);this._super(u,t)},focus:function(u,t){this.blur(u,u&&"focus"===u.type);this._scrollIntoView(t);this.active=t.first();var g=this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
this.options.role&&this.element.attr("aria-activedescendant",g.attr("id"));this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");u&&"keydown"===u.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);g=t.children(".dvUi-menu");g.length&&u&&/^mouse/.test(u.type)&&this._startOpening(g);this.activeMenu=t.parent();this._trigger("focus",u,{item:t})},_scrollIntoView:function(u){if(this._hasScroll()){var t=parseFloat(c.css(this.activeMenu[0],"borderTopWidth"))||
0;var g=parseFloat(c.css(this.activeMenu[0],"paddingTop"))||0;t=u.offset().top-this.activeMenu.offset().top-t-g;g=this.activeMenu.scrollTop();var l=this.activeMenu.height();u=u.outerHeight();0>t?this.activeMenu.scrollTop(g+t):t+u>l&&this.activeMenu.scrollTop(g+t-l+u)}},blur:function(u,t){t||clearTimeout(this.timer);this.active&&(this.active.removeClass("dvUi-state-focus"),this.active=null,this._trigger("blur",u,{item:this.active}))},_startOpening:function(u){clearTimeout(this.timer);"true"===u.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(u)},this.delay))},_open:function(u){var t=c.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".dvUi-menu").not(u.parents(".dvUi-menu")).hide().attr("aria-hidden","true");u.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(u,t){clearTimeout(this.timer);this.timer=this._delay(function(){var g=t?this.element:c(u&&u.target).closest(this.element.find(".dvUi-menu"));
g.length||(g=this.element);this._close(g);this.blur(u);this.activeMenu=g},this.delay)},_close:function(u){u||(u=this.active?this.active.parent():this.element);u.find(".dvUi-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")},_closeOnDocumentClick:function(u){return!c(u.target).closest(".dvUi-menu").length},_isDivider:function(u){return!/[^\-\u2014\u2013\s]/.test(u.text())},collapse:function(u){var t=
this.active&&this.active.parent().closest(".dvUi-menu-item",this.element);t&&t.length&&(this._close(),this.focus(u,t))},expand:function(u){var t=this.active&&this.active.children(".dvUi-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(u,t)}))},next:function(u){this._move("next","first",u)},previous:function(u){this._move("prev","last",u)},isFirstItem:function(){return this.active&&!this.active.prevAll(".dvUi-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".dvUi-menu-item").length},_move:function(u,t,g){var l;this.active&&(l="first"===u||"last"===u?this.active["first"===u?"prevAll":"nextAll"](".dvUi-menu-item").eq(-1):this.active[u+"All"](".dvUi-menu-item").eq(0));l&&l.length&&this.active||(l=this.activeMenu.find(this.options.items)[t]());this.focus(g,l)},nextPage:function(u){var t;if(!this.active)this.next(u);else if(!this.isLastItem())if(this._hasScroll()){var g=this.active.offset().top;var l=this.element.height();this.active.nextAll(".dvUi-menu-item").each(function(){t=
c(this);return 0>t.offset().top-g-l});this.focus(u,t)}else this.focus(u,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(u){var t;if(!this.active)this.next(u);else if(!this.isFirstItem())if(this._hasScroll()){var g=this.active.offset().top;var l=this.element.height();this.active.prevAll(".dvUi-menu-item").each(function(){t=c(this);return 0<t.offset().top-g+l});this.focus(u,t)}else this.focus(u,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(u){this.active=this.active||c(u.target).closest(".dvUi-menu-item");var t={item:this.active};this.active.has(".dvUi-menu").length||this.collapseAll(u,!0);this._trigger("select",u,t)},_filterMenuItems:function(u){u=u.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var t=new RegExp("^"+u,"i");return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function(){return t.test(c.trim(c(this).text()))})}});c.widget("dvUi.dvSelectmenu",
{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"dvUi-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var u=this.element.uniqueId().attr("id");this.ids={element:u,button:u+"-button",menu:u+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var u=this,t=this.element.attr("tabindex");
this.label=c("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(g){this.button.focus();g.preventDefault()}});this.element.hide();this.button=c("<span>",{"class":"dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",tabindex:t||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);c("<span>",{"class":"dvUi-icon "+
this.options.icons.button}).prependTo(this.button);this.buttonText=c("<span>",{"class":"dvUi-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){u.menuItems||u._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var u=this;this.menu=c("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,
id:this.ids.menu});this.menuWrap=c("<div>",{"class":"dvUi-selectmenu-menu dvUi-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.dvMenu({role:"listbox",select:function(t,g){t.preventDefault();u._setSelection();u._select(g.item.data("dvUi-dvSelectmenu-item"),t)},focus:function(t,g){g=g.item.data("dvUi-dvSelectmenu-item");null!=u.focusIndex&&g.index!==u.focusIndex&&(u._trigger("focus",t,{item:g}),u.isOpen||u._select(g,t));u.focusIndex=g.index;u.button.attr("aria-activedescendant",
u.menuItems.eq(g.index).attr("id"))}}).dvMenu("instance");this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var u=this.element.find("option");
u.length&&(this._parseOptions(u),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".dvUi-selectmenu-optgroup"),u=this._getSelectedItem(),this.menuInstance.focus(null,u),this._setAria(u.data("dvUi-dvSelectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(u){this.options.disabled||(this.menuItems?(this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",u))},_position:function(){this.menuWrap.position(c.extend({of:this.button},this.options.position))},close:function(u){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",u))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(u,t){var g=this,
l="";c.each(t,function(p,A){A.optgroup!==l&&(c("<li>",{"class":"dvUi-selectmenu-optgroup dvUi-menu-divider"+(A.element.parent("optgroup").prop("disabled")?" dvUi-state-disabled":""),text:A.optgroup}).appendTo(u),l=A.optgroup);g._renderItemData(u,A)})},_renderItemData:function(u,t){return this._renderItem(u,t).data("dvUi-dvSelectmenu-item",t)},_renderItem:function(u,t){var g=c("<li>",{text:t.label});t.disabled&&g.addClass("dvUi-state-disabled");t.element.attr("data-class")&&g.addClass("dv-SelectIcon").addClass(t.element.attr("data-class"));
return g.appendTo(u)},_setText:function(u,t){t?u.text(t):u.html("&#160;")},_move:function(u,t){var g=".dvUi-menu-item";if(this.isOpen)var l=this.menuItems.eq(this.focusIndex);else l=this.menuItems.eq(this.element[0].selectedIndex),g+=":not(.dvUi-state-disabled)";u="first"===u||"last"===u?l["first"===u?"prevAll":"nextAll"](g).eq(-1):l[u+"All"](g).eq(0);u.length&&this.menuInstance.focus(t,u)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(u){this[this.isOpen?
"close":"open"](u)},_setSelection:function(){if(this.range){if(window.getSelection){var u=window.getSelection();u.removeAllRanges();u.addRange(this.range)}else this.range.select();this.button.focus()}},_documentClick:{mousedown:function(u){this.isOpen&&(c(u.target).closest(".dvUi-selectmenu-menu, #"+this.ids.button).length||this.close(u))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var u=window.getSelection();u.rangeCount&&(this.range=u.getRangeAt(0))}else this.range=document.selection.createRange()},
click:function(u){this._setSelection();this._toggle(u)},keydown:function(u){var t=!0;switch(u.keyCode){case c.dvUi.keyCode.TAB:case c.dvUi.keyCode.ESCAPE:this.close(u);t=!1;break;case c.dvUi.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(u);break;case c.dvUi.keyCode.UP:u.altKey?this._toggle(u):this._move("prev",u);break;case c.dvUi.keyCode.DOWN:u.altKey?this._toggle(u):this._move("next",u);break;case c.dvUi.keyCode.SPACE:this.isOpen?this._selectFocusedItem(u):this._toggle(u);break;case c.dvUi.keyCode.LEFT:this._move("prev",
u);break;case c.dvUi.keyCode.RIGHT:this._move("next",u);break;case c.dvUi.keyCode.HOME:case c.dvUi.keyCode.PAGE_UP:this._move("first",u);break;case c.dvUi.keyCode.END:case c.dvUi.keyCode.PAGE_DOWN:this._move("last",u);break;default:this.menu.trigger(u),t=!1}t&&u.preventDefault()}},_selectFocusedItem:function(u){var t=this.menuItems.eq(this.focusIndex);t.hasClass("dvUi-state-disabled")||this._select(t.data("dvUi-dvSelectmenu-item"),u)},_select:function(u,t){var g=this.element[0].selectedIndex;this.element[0].selectedIndex=
u.index;this._setText(this.buttonText,u.label);this._setAria(u);this._trigger("select",t,{item:u});u.index!==g&&this._trigger("change",t,{item:u});this.close(t)},_setAria:function(u){u=this.menuItems.eq(u.index).attr("id");this.button.attr({"aria-labelledby":u,"aria-activedescendant":u});this.menu.attr("aria-activedescendant",u)},_setOption:function(u,t){"icons"===u&&this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(t.button);this._super(u,t);"appendTo"===u&&this.menuWrap.appendTo(this._appendTo());
"disabled"===u&&(this.menuInstance.option("disabled",t),this.button.toggleClass("dvUi-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===u&&this._resizeButton()},_appendTo:function(){var u=this.options.appendTo;u&&(u=u.jquery||u.nodeType?c(u):this.document.find(u).eq(0));u&&u[0]||(u=this.element.closest(".dvUi-front"));u.length||(u=this.document[0].body);return u},_toggleAttr:function(){this.button.toggleClass("dvUi-corner-top",
this.isOpen).toggleClass("dvUi-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("dvUi-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var u=this.options.width;u||(u=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(u)},_resizeMenu:function(){},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(u){var t=[];u.each(function(g,l){l=c(l);var p=
l.parent("optgroup");t.push({element:l,index:g,value:l.attr("value"),label:l.text(),optgroup:p.attr("label")||"",disabled:p.prop("disabled")||l.prop("disabled")})});this.items=t},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}(dvJQuery),dvJQuery.fn.HasDocuViewarePlugins=!0)}},DocuViewareConstants={MAX_PAGE_TRANSFER_RETRIES:10,IE_MAX_SCROLL_TOP_LIMIT:153E4},DocuViewareEncodingUtilities={File:{New:function(c,
z,E){c={blob:new Blob([new Uint8Array(c)],{type:z}),type:z,lastModified:new Date(Date.now()),name:E,slice:function(M,u){return this.blob.slice(M,u)}};c.size=c.blob.size;return c}},TypedArray:{Uint8Array:function(c){return window.Uint8Array?new window.Uint8Array(c):new DocuViewareEncodingUtilities.TypedArray.TypedArray(c)},subarray:function(c,z){return this.slice(c,z)},set_:function(c,z){2>arguments.length&&(z=0);for(var E=0,M=c.length;E<M;++E,++z)this[z]=c[E]&255},TypedArray:function(c){if("number"===
typeof c){var z=Array(c);for(var E=0;E<c;++E)z[E]=0}else z=c.slice(0);z.subarray=DocuViewareEncodingUtilities.TypedArray.subarray;z.buffer=z;z.byteLength=z.length;z.set=DocuViewareEncodingUtilities.TypedArray.set_;"object"===typeof c&&c.buffer&&(z.buffer=c.buffer);return z}},base64:{PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(c,z){return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(c.charAt(z))},decode:function(c){if(window.atob)return window.atob(c);
c=""+c;var z=DocuViewareEncodingUtilities.base64.getbyte64,E,M=c.length;if(0===M)return c;var u=0;c.charAt(M-1)===DocuViewareEncodingUtilities.base64.PADCHAR&&(u=1,c.charAt(M-2)===DocuViewareEncodingUtilities.base64.PADCHAR&&(u=2),M-=4);var t=[];for(E=0;E<M;E+=4){var g=z(c,E)<<18|z(c,E+1)<<12|z(c,E+2)<<6|z(c,E+3);t.push(String.fromCharCode(g>>16,g>>8&255,g&255))}switch(u){case 1:g=z(c,E)<<18|z(c,E+1)<<12|z(c,E+2)<<6;t.push(String.fromCharCode(g>>16,g>>8&255));break;case 2:g=z(c,E)<<18|z(c,E+1)<<12,
t.push(String.fromCharCode(g>>16))}return t.join("")},getbyte:function(c,z){return c.charCodeAt(z)},encode:function(c){if(window.btoa)return window.btoa(c);var z=DocuViewareEncodingUtilities.base64.PADCHAR,E=DocuViewareEncodingUtilities.base64.ALPHA,M=DocuViewareEncodingUtilities.base64.getbyte,u,t=[];c=""+c;var g=c.length-c.length%3;if(0===c.length)return c;for(u=0;u<g;u+=3){var l=M(c,u)<<16|M(c,u+1)<<8|M(c,u+2);t.push(E.charAt(l>>18));t.push(E.charAt(l>>12&63));t.push(E.charAt(l>>6&63));t.push(E.charAt(l&
63))}switch(c.length-g){case 1:l=M(c,u)<<16;t.push(E.charAt(l>>18)+E.charAt(l>>12&63)+z+z);break;case 2:l=M(c,u)<<16|M(c,u+1)<<8,t.push(E.charAt(l>>18)+E.charAt(l>>12&63)+E.charAt(l>>6&63)+z)}return t.join("")},base64toArrayBuffer:function(c){c=this.decode(c);for(var z=c.length,E=new Uint8Array(z),M=0;M<z;M++)E[M]=c.charCodeAt(M);return E.buffer},base64toBlob:function(c,z,E){z=z||"";c=DocuViewareEncodingUtilities.base64.decode(c);for(var M=c.length,u=Math.ceil(M/E),t=Array(u),g=0;g<u;++g){for(var l=
g*E,p=Math.min(l+E,M),A=Array(p-l),D=0;l<p;++D,++l)A[D]=c[l].charCodeAt(0);t[g]=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(A)}return new Blob(t,{type:z})}}},DocuViewareUtilities={addEvent:function(c,z,E){c.attachEvent?(c["e"+z+E]=E,c[z+E]=function(){c["e"+z+E](window.event)},c.attachEvent("on"+z,c[z+E])):c.addEventListener(z,E,!1)},removeEvent:function(c,z,E){c.detachEvent?(c.detachEvent("on"+z,c[z+E]),c[z+E]=null):c.removeEventListener(z,E,!1)},getWindowsVersion:function(){var c=window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);
return null!=c?2==c.length||3==c.length?parseFloat(c[1]):0:0},getInternetExplorerVersion:function(){var c=-1;if("Microsoft Internet Explorer"==navigator.appName){var z=navigator.userAgent,E=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=E.exec(z)&&(c=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(z=navigator.userAgent,E=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=E.exec(z)&&(c=parseFloat(RegExp.$1)));return c},getScrollbarWidth:function(){var c=document.createElement("div");c.style.position="absolute";
c.style.top="-1000px";c.style.left="-1000px";c.style.width="100px";c.style.height="50px";c.style.overflow="hidden";var z=document.createElement("div");z.style.width="100%";z.style.height="200px";c.appendChild(z);document.body.appendChild(c);var E=z.offsetWidth;c.style.overflow="auto";c=z.offsetWidth;document.body.removeChild(document.body.lastChild);return E-c},getDevicePixelRatio:function(){var c=1;void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?
c=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(c=window.devicePixelRatio);return c},isValidURL:function(c){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(c)},clonePageCanvasSizes:function(c){if(null!=
c){for(var z=[],E=0;E<c.length;E++)z.push({PageNo:c[E].PageNo,Width:c[E].Width,Height:c[E].Height,OffsetX:c[E].OffsetX,OffsetY:c[E].OffsetY});return z}return null},getPageCanvasSize:function(c){var z={width:0,height:0};if(null!=c)for(var E=0;E<c.length;E++){var M=c[E].OffsetX+c[E].Width,u=c[E].OffsetY+c[E].Height;M>z.width&&(z.width=M);u>z.height&&(z.height=u)}return z},isBetaEnabled:function(c){return!1},getLocaleDateTimeFormat:function(c,z){if(Date.parse(c)===Number.NaN)return null;if(10===this.getInternetExplorerVersion())return c.split("T")[0]+
" "+c.split("T")[1].split(".")[0];z||(z="en");c=new Date(c);return c.toLocaleDateString(z,{day:"2-digit",month:"2-digit",year:"numeric"})+" "+c.toLocaleTimeString(z,{hour12:!1,hour:"2-digit",minute:"2-digit"})}},DocuViewareAnnotationsUtilities={getAnnotationDefaultProperties:function(c){switch(c){case 0:return{type:0,borderWidth:.2,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:1,foreColor:"#FF0000",opacity:1,radiusFactor:.25,rotation:0,stroke:!0,strokeColor:"#FF0000",
text:"STAMP",autoCreate:!1};case 1:return{type:1,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,radiusFactor:0,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 2:return{type:2,fillColor:"#FFFF00",rotation:0,squaredBox:!1,autoCreate:!1};case 3:return{type:3,borderWidth:.04,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:"#000000",autoCreate:!1};case 4:return{type:4,arrowFilled:!0,arrowHeight:10,arrowWidth:5,borderWidth:.04,
dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 5:return{type:5,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 6:return{type:6,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 7:return{type:7,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,
radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#FFFFFF",autoCreate:!1,keepAspectRatio:!1,bitmapData:""};case 8:return{type:8,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FFFFFF",fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",lineAlignment:0,opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 9:return{type:9,alignment:0,autoSize:!1,borderWidth:.01,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FDFD32",
fontName:"Arial",fontSize:20,fontStyle:1,foreColor:"#000000",lineAlignment:0,opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 10:return{type:10,borderWidth:.04,dashStyle:0,dashCap:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 11:return{type:11,borderWidth:.2,rotation:0,strokeColor:"#FFFF00",autoCreate:!1};case 12:return{type:11,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",
autoCreate:!1};case 13:return{type:13,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:3,foreColor:"#0000FF",link:"",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",autoCreate:!1,text:""};case 14:return{type:14,borderWidth:.04,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 15:return{type:15,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,
foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",ticksPerUnit:10,opacity:1,rotation:0,strokeColor:"#000000",scale:1,autoCreate:!1};case 16:return{type:16,borderWidth:.02,dashCap:0,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",scale:1,autoCreate:!1};case 17:return{type:17,title:"",fillColor:"#010101",autoCreate:!1};case 2048:return{type:2048,
allowReview:!0,allowAnswer:!0,reviewStatus:0,fontName:"Arial",fontSize:9,fontStyle:0,foreColor:"#000000"};default:return null}},getAnnotationDefaultPropertiesDisplay:function(c){switch(c){case 0:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");case 1:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");case 2:return["fillColor","rotation",
"squaredBox"];case 3:return"borderWidth dashCap dashStyle endCap opacity rotation startCap strokeColor".split(" ");case 4:return"arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 5:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 6:return"borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox stroke strokeColor".split(" ");case 7:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");
case 8:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");case 9:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");case 10:return"borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");case 11:return["borderWidth","rotation",
"strokeColor"];case 12:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 13:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");case 14:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 15:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");
case 16:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");case 17:return["title","fillColor"];case 2048:return"allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");default:return null}}},JSON=JSON||{};
JSON.stringify=JSON.stringify||function(c){var z=typeof c;if("object"!=z||null===c)return"string"==z&&(c='"'+c+'"'),String(c);var E,M=[],u=c&&c.constructor==Array;for(E in c){var t=c[E];z=typeof t;"string"==z?t='"'+t+'"':"object"==z&&null!==t&&(t=JSON.stringify(t));M.push((u?"":'"'+E+'":')+String(t))}return(u?"[":"{")+String(M)+(u?"]":"}")};
var DocuViewareAPI={Constants:{SINGLE_COLUMN_MOBILE_MENU_WIDTH:126,TWO_COLUMNS_MOBILE_MENU_WIDTH:188},Status:{OK:0,GenericError:1,PasswordRequired:27,InvalidPassword:29},Toolbar:{None:0,Standard:1,Mobile:2},SearchPageSelection:{CurrentPage:0,AllPages:1},RotateFlipType:{Rotate90FlipNone:1,Rotate180FlipNone:2,Rotate270FlipNone:3},LocalServiceStatus:{Ready:0,NotFound:1,WrongVersion:2},TwainCapabilities:{ACAP_AUDIOFILEFORMAT:4609,ACAP_XFERMECH:4610,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTHOR:4096,
CAP_AUTOFEED:4103,CAP_AUTOMATICCAPTURE:4122,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_AUTOSCAN:4112,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_CAMERAPREVIEWUI:4129,CAP_CAMERASIDE:4148,CAP_CAPTION:4097,CAP_CLEARBUFFERS:4125,CAP_CLEARPAGE:4104,CAP_CUSTOMBASE:32768,CAP_CUSTOMDSDATA:4117,CAP_CUSTOMINTERFACEGUID:4156,CAP_DEVICEEVENT:4130,CAP_DEVICEONLINE:4111,CAP_DEVICETIMEDATE:4127,CAP_DOUBLEFEEDDETECTION:4159,CAP_DOUBLEFEEDDETECTIONLENGTH:4160,CAP_DOUBLEFEEDDETECTIONRESPONSE:4162,
CAP_DOUBLEFEEDDETECTIONSENSITIVITY:4161,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_ENDORSER:4118,CAP_EXTENDEDCAPS:4102,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_FEEDERORDER:4142,CAP_FEEDERPOCKET:4154,CAP_FEEDERPREP:4153,CAP_FEEDPAGE:4105,CAP_INDICATORS:4107,CAP_INDICATORSMODE:4164,CAP_JOBCONTROL:4119,CAP_LANGUAGE:4140,CAP_MAXBATCHBUFFERS:4126,CAP_MICRENABLED:4152,CAP_PAPERDETECTABLE:4109,CAP_PAPERHANDLING:4163,CAP_POWERSAVETIME:4166,CAP_POWERSUPPLY:4128,
CAP_PRINTER:4134,CAP_PRINTERCHARROTATION:4167,CAP_PRINTERENABLED:4135,CAP_PRINTERFONTSTYLE:4168,CAP_PRINTERINDEX:4136,CAP_PRINTERINDEXLEADCHAR:4169,CAP_PRINTERINDEXMAXVALUE:4170,CAP_PRINTERINDEXNUMDIGITS:4171,CAP_PRINTERINDEXSTEP:4172,CAP_PRINTERINDEXTRIGGER:4173,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSTRINGPREVIEW:4174,CAP_PRINTERSUFFIX:4139,CAP_PRINTERVERTICALOFFSET:4165,CAP_REACQUIREALLOWED:4144,CAP_REWINDPAGE:4106,CAP_SEGMENTED:4149,CAP_SERIALNUMBER:4132,CAP_SUPPORTEDCAPS:4101,
CAP_SUPPORTEDCAPSEXT:4108,CAP_SUPPORTEDCAPSSEGMENTUNIQUE:4157,CAP_SUPPORTEDDATS:4158,CAP_THUMBNAILSENABLED:4113,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_TIMEDATE:4100,CAP_UICONTROLLABLE:4110,CAP_XFERCOUNT:1,ICAP_AUTOBRIGHT:4352,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICROTATE:4434,
ICAP_AUTOSIZE:4438,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODETIMEOUT:4413,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_BITORDER:4380,ICAP_BITORDERCODES:4390,ICAP_BRIGHTNESS:4353,ICAP_CCITTKFACTOR:4381,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_COMPRESSION:256,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_EXTIMAGEINFO:4399,ICAP_FEEDERTYPE:4436,
ICAP_FILMTYPE:4447,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_FLASHUSED2:4422,ICAP_FLIPROTATION:4406,ICAP_FRAMES:4372,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_ICCPROFILE:4437,ICAP_IMAGEDATASET:4398,ICAP_IMAGEFILEFORMAT:4364,ICAP_IMAGEFILTER:4423,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_JPEGPIXELTYPE:4392,ICAP_JPEGQUALITY:4435,ICAP_JPEGSUBSAMPLING:4449,ICAP_LAMPSTATE:4365,ICAP_LIGHTPATH:4382,ICAP_LIGHTSOURCE:4366,ICAP_MAXFRAMES:4378,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,
ICAP_MIRROR:4448,ICAP_NOISEFILTER:4424,ICAP_ORIENTATION:4368,ICAP_OVERSCAN:4425,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODETIMEOUT:4421,ICAP_PHYSICALHEIGHT:4370,ICAP_PHYSICALWIDTH:4369,ICAP_PIXELFLAVOR:4383,ICAP_PIXELFLAVORCODES:4391,ICAP_PIXELTYPE:257,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SHADOW:4371,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_SUPPORTEDEXTIMAGEINFO:4446,
ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_TILES:4379,ICAP_TIMEFILL:4394,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_UNITS:258,ICAP_XFERMECH:259,ICAP_XNATIVERESOLUTION:4374,ICAP_XRESOLUTION:4376,ICAP_XSCALING:4388,ICAP_YNATIVERESOLUTION:4375,ICAP_YRESOLUTION:4377,ICAP_YSCALING:4389,ICAP_ZOOMFACTOR:4414},GetSessionID:function(c){return(c=document.getElementById(c))&&c.control?c.control.ajax.sessionID:null},IsInitialized:function(c){return(c=document.getElementById(c))&&
c.control?!0:!1},IsLoaded:function(c){return(c=document.getElementById(c))&&c.control&&!c.control.waitForInit&&!c.control.hasPendingResize()},IsTwainSupportAvailable:function(c){return(c=document.getElementById(c))&&c.control?c.control.IsTwainSupportAvailable():!1},PostCustomServerAction:function(c,z,E,M,u,t){return(c=document.getElementById(c))&&c.control?c.control.PostCustomServerAction(z,E,M,u,t):DocuViewareAPI.Status.GenericError},SetMaxUploadThreads:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.SetMaxUploadThreads(z):DocuViewareAPI.Status.GenericError},LoadFromByteArray:function(c,z,E,M,u,t){return(c=document.getElementById(c))&&c.control?c.control.LoadFromByteArray(z,E,M,u,t):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(c,z,E,M,u,t){return(c=document.getElementById(c))&&c.control?c.control.LoadFromBase64(z,E,M,u,t):DocuViewareAPI.Status.GenericError},LoadFromFile:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.LoadFromFile(z,
E):DocuViewareAPI.Status.GenericError},LoadFromUri:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.LoadFromUri(z,"",E,M):DocuViewareAPI.Status.GenericError},LoadFromUriEx:function(c,z,E,M,u){return(c=document.getElementById(c))&&c.control?c.control.LoadFromUri(z,E,M,u):DocuViewareAPI.Status.GenericError},ToggleLoadFromUriDialog:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.ToggleLoadFromUriDialog(z):DocuViewareAPI.Status.GenericError},Save:function(c,
z,E){return(c=document.getElementById(c))&&c.control?c.control.ToggleSaveDialog(z,E):DocuViewareAPI.Status.GenericError},DirectSave:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.DirectSave(z,E,M):DocuViewareAPI.Status.GenericError},Print:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.TogglePrintDialog(z,E):DocuViewareAPI.Status.GenericError},DirectPrint:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.LaunchDirectPrint(z,
E,M):DocuViewareAPI.Status.GenericError},TwainAcquire:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.TwainToggleAcquisitionDialog(z,E):DocuViewareAPI.Status.GenericError},TwainSetConfig:function(c,z,E,M,u,t,g,l){return(c=document.getElementById(c))&&c.control?c.control.TwainSetConfig(z,E,M,u,t,g,l):DocuViewareAPI.Status.GenericError},TwainDownloadServiceSetup:function(c){return(c=document.getElementById(c))&&c.control?c.control.DownloadTwainServiceSetup():DocuViewareAPI.Status.GenericError},
TwainGetLocalServiceStatus:function(c){return(c=document.getElementById(c))&&c.control?c.control.TwainGetLocalServiceStatus():DocuViewareAPI.Status.GenericError},TwainGetSources:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetTwainSourceList():DocuViewareAPI.Status.GenericError},TwainGetClientInfo:function(c){return(c=document.getElementById(c))&&c.control?c.control.TwainGetClientInfo():DocuViewareAPI.Status.GenericError},TwainAcquireToNewDocument:function(c,z,E,M){return(c=
document.getElementById(c))&&c.control?c.control.TwainAcquireToNewDocument(z,E,M):DocuViewareAPI.Status.GenericError},TwainAcquireToCurrentDocument:function(c,z,E,M,u){return(c=document.getElementById(c))&&c.control?c.control.TwainAcquireToCurrentDocument(z,E,M,u):DocuViewareAPI.Status.GenericError},GetDocumentType:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetDocumentType():-1},GetDocumentName:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetDocumentName():
""},GetPageCount:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetPageCount():-1},GetPageWidth:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetPageWidth(z):-1},GetPageHeight:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetPageHeight(z):-1},GetSelectedTextAreas:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectedTextArea():DocuViewareAPI.Status.GenericError},GetDisplayedArea:function(c){return(c=
document.getElementById(c))&&c.control?c.control.GetDisplayedArea():{left:0,top:0,width:0,height:0}},GetViewerScrollLeft:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetViewerScrollLeft():-1},GetViewerScrollTop:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetViewerScrollTop():-1},SetViewerScrollLeft:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetViewerScrollLeft(z):DocuViewareAPI.Status.GenericError},SetViewerScrollTop:function(c,
z){return(c=document.getElementById(c))&&c.control?c.control.SetViewerScrollTop(z):DocuViewareAPI.Status.GenericError},GetSelectionAreaCoordinates:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetSelectionAreaCoordinates(z):DocuViewareAPI.Status.GenericError},ClearSelectionArea:function(c){return(c=document.getElementById(c))&&
c.control?c.control.ClearSelectionArea():DocuViewareAPI.Status.GenericError},GetMouseMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetMouseMode():DocuViewareAPI.Status.GenericError},SetMouseMode:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetMouseMode(z):DocuViewareAPI.Status.GenericError},GetCurrentPage:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentPage():-1},GetSelectedThumbnailItems:function(c){return(c=
document.getElementById(c))&&c.control?c.control.GetSelectedThumbnailItems():null},SetThumbnailSelected:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.SetThumbnailSelected(z,E):null},GetCurrentZoom:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentZoom():-1},SetCurrentZoom:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetCurrentZoom(z):DocuViewareAPI.Status.GenericError},SelectPage:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.SelectPage(z):DocuViewareAPI.Status.GenericError},ZoomIN:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.ZoomIN(1,!0,!1,z,E):DocuViewareAPI.Status.GenericError},ZoomOUT:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.ZoomOUT(1,!0,!1,z,E):DocuViewareAPI.Status.GenericError},ZoomRect:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.ZoomRect(z,E,M):DocuViewareAPI.Status.GenericError},RotateView:function(c,
z){if((c=document.getElementById(c))&&c.control){var E=!1;"number"!=typeof z||z!=this.RotateFlipType.Rotate90FlipNone&&z!=this.RotateFlipType.Rotate180FlipNone&&z!=this.RotateFlipType.Rotate270FlipNone||(E=!0);return E?c.control.Rotate(z,0):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},RotatePage:function(c,z,E,M){return this.RotatePages(c,this.GetCurrentPage(c),z,E,M)},RotatePages:function(c,z,E,M,u){return(c=document.getElementById(c))&&c.control?"number"!=typeof z&&
"object"!=typeof z||"number"!=typeof E||E!=this.RotateFlipType.Rotate90FlipNone&&E!=this.RotateFlipType.Rotate180FlipNone&&E!=this.RotateFlipType.Rotate270FlipNone?DocuViewareAPI.Status.GenericError:c.control.RotatePage(z,E,M,u):DocuViewareAPI.Status.GenericError},SwapPages:function(c,z,E,M,u){return(c=document.getElementById(c))&&c.control?c.control.SwapPages(z,E,M,u):DocuViewareAPI.Status.GenericError},DeletePage:function(c,z,E){return this.DeletePages(c,this.GetCurrentPage(c),z,E)},DeletePages:function(c,
z,E,M){return(c=document.getElementById(c))&&c.control?"number"==typeof z||"object"==typeof z?c.control.DeletePage(z,E,M):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},ToggleSinglePageViewMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.ToggleSinglePageViewMode():DocuViewareAPI.Status.GenericError},SetZoomWidthViewer:function(c){return(c=document.getElementById(c))&&c.control?c.control.SetZoomMode(3):DocuViewareAPI.Status.GenericError},SetZoomFitViewer:function(c){return(c=
document.getElementById(c))&&c.control?c.control.SetZoomMode(2):DocuViewareAPI.Status.GenericError},CloseDocument:function(c){return(c=document.getElementById(c))&&c.control?c.control.CloseDocument():DocuViewareAPI.Status.GenericError},SelectThumbnailSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowThumbnailsSnapIn():DocuViewareAPI.Status.GenericError},SelectBookmarksSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowBookmarksSnapIn():
DocuViewareAPI.Status.GenericError},SelectSearchSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowSearchSnapIn():DocuViewareAPI.Status.GenericError},SelectAnnotationsSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowAnnotationsSnapIn():DocuViewareAPI.Status.GenericError},SelectCommentsSnapIn:function(c){return(c=document.getElementById(c))&&c.control?c.control.ShowCommentsSnapIn():DocuViewareAPI.Status.GenericError},SelectRedactionSnapIn:function(c){return(c=
document.getElementById(c))&&c.control?c.control.ShowRedactionSnapIn():DocuViewareAPI.Status.GenericError},SelectSnapIn:function(c,z){return(c=document.getElementById(c))&&""!==z?c.control.SelectSnapIn(z,!1):DocuViewareAPI.Status.GenericError},ShowSnapIn:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.ToggleSnapIn(z,!0):DocuViewareAPI.Status.GenericError},HideSnapIn:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.ToggleSnapIn(z,!1):DocuViewareAPI.Status.GenericError},
CollapseSnapInPanel:function(c){return(c=document.getElementById(c))&&c.control?c.control.SetSnapinsPanelVisibility(!1):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(c,z,E,M,u,t,g){return(c=document.getElementById(c))&&c.control?c.control.AddCustomSnapIn(z,E,M,u,t,g):DocuViewareAPI.Status.GenericError},GetSnapInPanelWidth:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSnapInPanelWidth():0},SetSnapInPanelWidth:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.SetSnapInPanelWidth(z):DocuViewareAPI.Status.GenericError},GetSelectedText:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSelectedText():""},HighlightSelectedText:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.HighlightSelectedText(z):DocuViewareAPI.Status.GenericError},StrikeoutSelectedText:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.StrikeoutSelectedText(z):DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(c,
z){return(c=document.getElementById(c))&&c.control?c.control.UnderlineSelectedText(z):DocuViewareAPI.Status.GenericError},RedactSelectedText:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RedactSelectedText(z):DocuViewareAPI.Status.GenericError},AddSelectedTextContextMenuItem:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddSelectedTextContextMenuItem(z,E,M):DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(c){return(c=
document.getElementById(c))&&c.control?c.control.ResetSelectedTextContextMenu():DocuViewareAPI.Status.GenericError},AddAnnotationsActionButton:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotationsActionButton(z,E,M):DocuViewareAPI.Status.GenericError},Search:function(c,z,E,M,u,t){if((c=document.getElementById(c))&&c.control){var g=!1;"string"===typeof z&&("undefined"===typeof t&&(t=!1),"boolean"==typeof E&&"boolean"==typeof M&&"boolean"==typeof t&&("number"!=typeof u||
u!==this.SearchPageSelection.AllPages&&u!==this.SearchPageSelection.CurrentPage||(g=!0)));return g?c.control.Search(z,E,M,t,u):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},SetSearchSettings:function(c,z,E,M,u){return(c=document.getElementById(c))&&c.control?"boolean"==typeof z&&"boolean"==typeof E&&"boolean"==typeof M?"number"!=typeof u||u!==this.SearchPageSelection.AllPages&&u!==this.SearchPageSelection.CurrentPage?DocuViewareAPI.Status.GenericError:c.control.SetSearchSettings(z,
E,M,u):DocuViewareAPI.Status.GenericError:null},SearchNavigateToOccurrence:function(c,z){return(c=document.getElementById(c))&&c.control?Number.isInteger(z)?c.control.SearchNavigateToOccurrence(z):DocuViewareAPI.Status.GenericError:null},GetSearchResultsCount:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetSearchResultsCount():0},GetCurrentSearchOccurrenceIdx:function(c){return(c=document.getElementById(c))&&c.control?c.control.GetCurrentSearchOccurrenceIdx():0},ClearSearch:function(c){return(c=
document.getElementById(c))&&c.control?c.control.ClearSearch():DocuViewareAPI.Status.GenericError},UpdateLayout:function(c){return(c=document.getElementById(c))&&c.control?c.control.UpdateLayout():DocuViewareAPI.Status.GenericError},ExitAnnotationDrawingMode:function(c){return(c=document.getElementById(c))&&c.control?c.control.ExitAnnotationDrawingMode():DocuViewareAPI.Status.GenericError},DisplayMessageBox:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.DisplayMessageBox(z):
DocuViewareAPI.Status.GenericError},DisplayPendingActionNotification:function(c){if((c=document.getElementById(c))&&c.control)c.control.DisplayPendingActionNotification();else return DocuViewareAPI.Status.GenericError},HidePendingActionNotification:function(c){if((c=document.getElementById(c))&&c.control)c.control.HidePendingActionNotification();else return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(c){return(c=document.getElementById(c))&&c.control?c.control.ApplyAllRedactions():
DocuViewareAPI.Status.GenericError},RegisterOnViewerScroll:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnViewerScroll(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationSelectedStateChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationSelectedStateChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationAdded:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationAdded(z):
DocuViewareAPI.Status.GenericError},RegisterOnAnnotationEdited:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationEdited(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMoved:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMoved(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationDeleted:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationDeleted(z):DocuViewareAPI.Status.GenericError},
RegisterOnDocumentSigned:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentSigned(z):DocuViewareAPI.Status.GenericError},RegisterOnFormFieldChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnFormFieldChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnPageChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnPageChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnZoomChanged:function(c,
z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnZoomChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnRotationChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnRotationChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnNewDocumentLoaded:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnNewDocumentLoaded(z):DocuViewareAPI.Status.GenericError},RegisterOnDocumentClosed:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.RegisterOnDocumentClosed(z):DocuViewareAPI.Status.GenericError},RegisterOnDocumentPrinted:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentPrinted(z):DocuViewareAPI.Status.GenericError},RegisterOnDocumentSaved:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnDocumentSaved(z):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(z):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(z):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsOrderChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnThumbnailsOrderChanged(z):DocuViewareAPI.Status.GenericError},RegisterOnTextSelected:function(c,
z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextSelected(z):DocuViewareAPI.Status.GenericError},RegisterOnTextUnselected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextUnselected(z):DocuViewareAPI.Status.GenericError},RegisterOnAreaSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAreaSelected(z):DocuViewareAPI.Status.GenericError},RegisterOnCommentAdded:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.RegisterOnCommentAdded(z):DocuViewareAPI.Status.GenericError},RegisterOnCommentEdited:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentEdited(z):DocuViewareAPI.Status.GenericError},RegisterOnCommentDeleted:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentDeleted(z):DocuViewareAPI.Status.GenericError},RegisterOnFullscreenModeChanged:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnFullscreenModeChanged(z):
DocuViewareAPI.Status.GenericError},RegisterOnSearchInvoked:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSearchInvoked(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseEnter:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMouseEnter(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseLeave:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationMouseLeave(z):
DocuViewareAPI.Status.GenericError},RegisterOnTextAnnotated:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnTextAnnotated(z):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsSnapInSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnThumbnailsSnapInSelected(z):DocuViewareAPI.Status.GenericError},RegisterOnBookmarksSnapInSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnBookmarksSnapInSelected(z):
DocuViewareAPI.Status.GenericError},RegisterOnSearchSnapInSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSearchSnapInSelected(z):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationsSnapInSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnAnnotationsSnapInSelected(z):DocuViewareAPI.Status.GenericError},RegisterOnCommentsSnapInSelected:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnCommentsSnapInSelected(z):
DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelResized:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSnapInPanelResized(z):DocuViewareAPI.Status.GenericError},RegisterOnRedactionMarksApplied:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnRedactionMarksApplied(z):DocuViewareAPI.Status.GenericError},SetSignatureAppearance:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?null!=z?c.control.Internal.DigiSign.setSignatureAppearanceImage(z):
null!=E&&null!=M?c.control.Internal.DigiSign.setSignatureAppearanceText(E,M):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},SetSignatureCertificate:function(c,z,E,M,u,t){return(c=document.getElementById(c))&&c.control?(c.control.Internal.DigiSign.setCertificate(z,E,M),c.control.Internal.DigiSign.sendSignatureRequest(u,t)):DocuViewareAPI.Status.GenericError},SetSignatureTimeStamp:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.setTimeStamp(z,
E,M):DocuViewareAPI.Status.GenericError},AddSignatureInteractive:function(c){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.beginAddSignatureInteractive(!1):DocuViewareAPI.Status.GenericError},AddSignature:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.Internal.DigiSign.addSignature(z,E):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelToggle:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.RegisterOnSnapInPanelToggle(z):
DocuViewareAPI.Status.GenericError},SetAnnotationsInteractionState:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationsInteractionState(z):DocuViewareAPI.Status.GenericError},SetAnnotationsVisibility:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationsVisibility(z):DocuViewareAPI.Status.GenericError},AddRubberStampAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(0,z,
E,M):DocuViewareAPI.Status.GenericError},AddRectangleAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(1,z,E,M):DocuViewareAPI.Status.GenericError},AddRectangleHighlighterAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(2,z,E,M):DocuViewareAPI.Status.GenericError},AddLineAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(3,
z,E,M):DocuViewareAPI.Status.GenericError},AddConnectedLineAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(5,z,E,M):DocuViewareAPI.Status.GenericError},AddLineArrowAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(4,z,E,M):DocuViewareAPI.Status.GenericError},AddEllipseAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(6,
z,E,M):DocuViewareAPI.Status.GenericError},AddTextAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(8,z,E,M):DocuViewareAPI.Status.GenericError},AddStickyNoteAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(9,z,E,M):DocuViewareAPI.Status.GenericError},AddFreeHandAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(10,
z,E,M):DocuViewareAPI.Status.GenericError},AddFreeHandHighLighterAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(11,z,E,M):DocuViewareAPI.Status.GenericError},AddLinkAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(13,z,E,M):DocuViewareAPI.Status.GenericError},AddRulerAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(15,
z,E,M):DocuViewareAPI.Status.GenericError},AddPolyRulerAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(16,z,E,M):DocuViewareAPI.Status.GenericError},AddRedactionMarkAnnotInteractive:function(c,z,E,M){return(c=document.getElementById(c))&&c.control?c.control.AddAnnotInteractive(17,z,E,M):DocuViewareAPI.Status.GenericError},AddAnnot:function(c,z,E,M){if((c=document.getElementById(c))&&c.control){if(Array.isArray(z))return c.control.AddAnnot(z,
!1,E,M);var u=[];u.push(z);return c.control.AddAnnot(u,!1,E,M)}return DocuViewareAPI.Status.GenericError},RemoveAnnotById:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.DeleteAnnotationById(z,"undefined"===typeof E?!1:E):DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(c){return(c=document.getElementById(c))&&c.control?c.control.UnselectAllAnnotations():DocuViewareAPI.Status.GenericError},UpdateAnnotById:function(c,z,E){return(c=document.getElementById(c))&&
c.control?c.control.UpdateAnnotationById(z,E):DocuViewareAPI.Status.GenericError},GetAnnotProperties:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotationProperties(z):DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetPageAnnotCount(z):DocuViewareAPI.Status.GenericError},GetPageAnnotId:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.GetPageAnnotId(z,E):DocuViewareAPI.Status.GenericError},
GetAnnotClientTag:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotationClientTag(z):DocuViewareAPI.Status.GenericError},SetAnnotClientTag:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotationClientTag(z,E):DocuViewareAPI.Status.GenericError},GetPageFormFields:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetPageFormFields(z):DocuViewareAPI.Status.GenericError},UpdateFormFields:function(c,z,E,M){if((c=document.getElementById(c))&&
c.control){if(Array.isArray(z))return c.control.UpdateFormFields(z,E,M);var u=[];u.push(z);return c.control.UpdateFormFields(u,E,M)}return DocuViewareAPI.Status.GenericError},HasPendingRedactionMark:function(c){return(c=document.getElementById(c))&&c.control?c.control.HasPendingRedactionMark():DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.EnableAnnotEditionOnDblClick(z):DocuViewareAPI.Status.GenericError},ResetAnnotAutoCreateProperty:function(c,
z){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotAutoCreate(z):DocuViewareAPI.Status.GenericError},ResetAnnotToDefault:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotToDefault(z):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesValues:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotPropertiesValues(z,E):DocuViewareAPI.Status.GenericError},GetAnnotPropertiesValues:function(c,z){return(c=document.getElementById(c))&&
c.control?c.control.GetAnnotPropertiesValues(z):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.SetAnnotPropertiesToDisplay(z,E):DocuViewareAPI.Status.GenericError},ResetAnnotPropertiesToDisplayDefault:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.ResetAnnotPropertiesToDisplayDefault(z):DocuViewareAPI.Status.GenericError},SetAnnotDefaultAuthor:function(c,z,E){return(c=document.getElementById(c))&&
c.control?c.control.SetAnnotDefaultAuthor(z,E):DocuViewareAPI.Status.GenericError},EnsureAnnotVisibility:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.FocusAnnot(z,E,!0):DocuViewareAPI.Status.GenericError},EnableAnnotMultiSelect:function(c,z){return(c=document.getElementById(c))&&c.control?(c.control.EnableAnnotMultiSelect(z),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SelectAnnot:function(c,z,E){return(c=document.getElementById(c))&&c.control?c.control.FocusAnnot(z,
!0,E):DocuViewareAPI.Status.GenericError},UnselectAnnot:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.UnselectAnnot(z):DocuViewareAPI.Status.GenericError},GetAnnotBBoxOnViewer:function(c,z){return(c=document.getElementById(c))&&c.control?c.control.GetAnnotBBoxOnViewer(z):DocuViewareAPI.Status.GenericError}},DOCUVIEWARE_JS_VERSION=30039,DocuViewareProgressbar=function(){var c={width:"100%",height:"4px",zIndex:16777271},z={width:0,height:"100%",clear:"both",transition:"height .3s"};
var E=function(p,A){for(var D in A)p.style[D]=A[D];p.style.float="left"};var M=function(){var p=this,A=this.width-this.here;.1>A&&-.1<A?(u.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){p.cont.el.removeChild(p.el)},300))):(u.call(this,this.width-A/4),setTimeout(function(){p.go()},16))};var u=function(p){this.width=p;this.el.style.width=this.width+"%"};var t=function(){var p=new g(this);this.bars.unshift(p)};var g=function(p){this.el=document.createElement("div");
this.el.style.backgroundColor=p.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=p;E(this.el,z);p.el.appendChild(this.el)};g.prototype.go=function(p){p?(this.here=p,this.moving||(this.moving=!0,M.call(this))):this.moving&&M.call(this)};var l=function(p){p=this.opts=p||{};p.bg=p.bg||"#000";this.bars=[];var A=this.el=document.createElement("div");E(this.el,c);p.id&&(A.id=p.id);A.style.position=p.target?"absolute":"fixed";p.target?p.target.insertBefore(A,p.target.firstChild):document.getElementsByTagName("body")[0].appendChild(A);
t.call(this)};l.prototype.value=function(){return this.bars[0].here};l.prototype.go=function(p){this.bars[0].go(p);100==p&&t.call(this)};return l}(),CreateDocuViewareCursorManager=function(c,z){return{target:c,isIE:z,cursor:null,customCursorClass:null,setStdCursor:function(E){E!=this.cursor&&(this.dropCurrentCursor(),this.cursor=E,this.target.style.cursor=this.cursor)},setCustomCursorClass:function(E){this.isIE&&(E+="IE");E!=this.customCursorClass&&(this.dropCurrentCursor(),this.customCursorClass=
E,dvJQuery(this.target).addClass(this.customCursorClass))},dropCurrentCursor:function(){this.customCursorClass&&(dvJQuery(this.target).removeClass(this.customCursorClass),this.customCursorClass=null);null!=this.cursor&&(this.cursor=null,this.target.style.cursor="")}}},CreateDocuViewareController=function(c,z,E,M,u,t,g,l,p,A,D,L,P,Q,R,X,da,ea,ua,V,ja,ka,ma){function sa(b){null!=b.dom.openfile&&DocuViewareUtilities.addEvent(b.dom.openfile,"change",function(d){if(null!=d.target.files&&0!=d.target.files.length){d=
d.target.files[0];var e=dvJQuery(b.dom.openfile);e.val("");e.replaceWith(e.clone());sa(b);b.Internal.Files.uploadFile(d,0)}},!0)}function Aa(){"tiff"===dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").val()&&"0"===dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").val()?dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","visible"):(dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility",
"hidden"),dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").prop("checked",!1))}if(c!=DOCUVIEWARE_JS_VERSION)R=document.getElementById("main"+t),null!=R&&(R.style.visibility="visible"),document.write("The version of the DocuVieware javascript used is incorrect. The JavaScript version version is: "+DOCUVIEWARE_JS_VERSION+". The expected version is: "+c+". Please refresh this page or contact the webmaster if the problem persists.");else{DocuViewarejQueryPlugins.register();
var a={viewerWidth:null,viewerHeight:null,waitForInit:!1,appControllerPath:z,useIdInRoot:E,uniqueID:t,maxUploadSize:l,packetSize:p,favorMultipartUpload:g,debug:A,localization:eval("("+D+")"),certificateNames:eval("("+L+")"),UIconfig:P,snapIns:eval("("+Q+")"),attachedDebugger:X,twainServiceUri32:da,twainServiceUri64:ea,twainServiceSupportedVersion:ua,twainSourceConfig:JSON.parse(V),isWindows:-1<navigator.platform.indexOf("Win"),windowsVersion:DocuViewareUtilities.getWindowsVersion(),isIOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?
!0:!1,isSafari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE:-1!=DocuViewareUtilities.getInternetExplorerVersion(),isIE9:9==DocuViewareUtilities.getInternetExplorerVersion(),isIE10:10==DocuViewareUtilities.getInternetExplorerVersion(),isIE11:11==DocuViewareUtilities.getInternetExplorerVersion(),isIEorEdge:-1!=DocuViewareUtilities.getInternetExplorerVersion()||"Netscape"==navigator.appName&&-1<navigator.appVersion.indexOf("Edge"),isFirefox:"undefined"!==typeof InstallTrigger,
fastMode:!0,log:function(b){this.debug&&(dvJQuery("#logDebug"+this.uniqueID).val(dvJQuery("#logDebug"+this.uniqueID).val()+b+"\n"),dvJQuery("#logDebug"+this.uniqueID).scrollTop(dvJQuery("#logDebug"+this.uniqueID)[0].scrollHeight),dvJQuery("#debugBar"+this.uniqueID).show())},Internal:{Libs:{pica:{FILTER_INFO:[{win:.5,filter:function(b){return-.5<=b&&.5>b?1:0}},{win:1,filter:function(b){if(-1>=b||1<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*(.54+.46*Math.cos(b/
1))}},{win:2,filter:function(b){if(-2>=b||2<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/2)/(b/2)}},{win:3,filter:function(b){if(-3>=b||3<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/3)/(b/3)}}],toFixedPoint:function(b){return Math.floor(16384*b)},createFilters:function(b,d,e){var h=this.FILTER_INFO[b].filter,k=e/d,q=1/k;k=Math.min(1,k);b=this.FILTER_INFO[b].win/k;var n,y,x=new Int16Array((Math.floor(2*
(b+1))+2)*e),K=0;for(n=0;n<e;n++){var F=(n+.5)*q;var Y=Math.max(0,Math.floor(F-b));var aa=Math.min(d-1,Math.ceil(F+b));var fa=aa-Y+1;var ca=new Float32Array(fa);fa=new Int16Array(fa);var la=0;var Ga=Y;for(y=0;Ga<=aa;Ga++,y++){var ya=h((Ga+.5-F)*k);la+=ya;ca[y]=ya}for(y=F=0;y<ca.length;y++)aa=this.toFixedPoint(ca[y]/la),F+=aa,fa[y]=aa;fa[e>>1]+=this.toFixedPoint(1)-F;for(ca=0;ca<fa.length&&0===fa[ca];)ca++;if(ca<fa.length){for(la=fa.length-1;0<la&&0===fa[la];)la--;Y+=ca;y=la-ca+1;x[K++]=Y;x[K++]=y;
x.set(fa.subarray(ca,la+1),K);K+=y}else x[K++]=0,x[K++]=0}return x},convolveHorizontally:function(b,d,e,h,k,q,n){var y,x,K,F,Y,aa,fa=0,ca=0;for(Y=0;Y<k;Y++){for(aa=F=0;aa<q;aa++){var la=n[F++];var Ga=n[F++];var ya=fa+4*la|0;for(la=y=x=K=0;0<Ga;Ga--){var xa=n[F++];0!=xa&&(b&&(K=K+xa*d[ya+3]|0),x=x+xa*d[ya+2]|0,y=y+xa*d[ya+1]|0,la=la+xa*d[ya]|0);ya=ya+4|0}e[ca+3]=b&&4169728>K?K+8192>>14:255;e[ca+2]=4169728>x?x+8192>>14:255;e[ca+1]=4169728>y?y+8192>>14:255;e[ca]=4169728>la?la+8192>>14:255;ca=ca+4*k|
0}ca=4*(Y+1)|0;fa=(Y+1)*h*4|0}},convolveVertically:function(b,d,e,h,k,q,n){var y,x,K,F,Y,aa,fa=0,ca=0;for(Y=0;Y<k;Y++){for(aa=F=0;aa<q;aa++){var la=n[F++];var Ga=n[F++];var ya=fa+4*la|0;for(la=y=x=K=0;0<Ga;Ga--){var xa=n[F++];0!=xa&&(b&&(K=K+xa*d[ya+3]|0),x=x+xa*d[ya+2]|0,y=y+xa*d[ya+1]|0,la=la+xa*d[ya]|0);ya=ya+4|0}e[ca+3]=b&&4169728>K?K+8192>>14:255;e[ca+2]=4169728>x?x+8192>>14:255;e[ca+1]=4169728>y?y+8192>>14:255;e[ca]=4169728>la?la+8192>>14:255;ca=ca+4*k|0}ca=4*(Y+1)|0;fa=(Y+1)*h*4|0}},resize:function(b){var d=
b.width,e=b.height,h=b.toWidth,k=b.toHeight,q=b.dest||new DocuViewareEncodingUtilities.TypedArray.Uint8Array(h*k*4),n="undefined"===typeof b.quality?3:b.quality,y=b.alpha||!1;if(1>d||1>e||1>h||1>k)return[];var x=this.createFilters(n,d,h);n=this.createFilters(n,e,k);var K=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(h*e*4);this.convolveHorizontally(y,b.src,K,d,e,h,x);this.convolveVertically(y,K,q,e,h,k,n);return q}}},Capabilities:{_hasWebPSupport:null,hasWebPSupport:function(){if(null===
this._hasWebPSupport){if(-1!=navigator.userAgent.indexOf("Firefox")){var b=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);b=b?parseInt(b[1]):0;0!=b&&(this._hasWebPSupport=65<=b)}1!=this._hasWebPSupport&&(b=document.createElement("canvas"),b.getContext&&b.getContext("2d")?this._hasWebPSupport=0==b.toDataURL("image/webp").indexOf("data:image/webp"):this._hasWebPSupport=!1)}return this._hasWebPSupport},hasTiffSupport:function(){return a.isIE}},Utilities:{normalizeRotation:function(b){b%=360;
0>b&&(b+=360);return b},rgb2hex:function(b,d,e){return"#"+(16777216+(e|d<<8|b<<16)).toString(16).slice(1)},color2Hex:function(b){return"#"===b.substr(0,1)?b:(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===b.length?"#"+("0"+parseInt(b[1],10).toString(16)).slice(-2)+("0"+parseInt(b[2],10).toString(16)).slice(-2)+("0"+parseInt(b[3],10).toString(16)).slice(-2):""},color2Object:function(b){"#"===b.substr(0,1)&&(b=this.hex2Rgb(b));return(b=b.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i))&&
5===b.length?{r:parseInt(b[1]),g:parseInt(b[2]),b:parseInt(b[3]),a:b[4]?parseFloat(b[4]):1}:null},hex2Rgb:function(b){return"#"!==b.substr(0,1)?"":"rgb("+(b>>16)+","+(b>>8&255)+","+(b&255)+")"},roundEx:function(b,d){d=Math.pow(10,d);return Math.round(b*d)/d},pageRangeChecker:function(b,d){if(""!=d&&"*"!=d){d=d.split(";");var e=/([0-9])/,h;for(h in d){var k=d[h].split("-");if(2>=k.length)for(var q in k){if(1!=e.test(k[q])||0==parseInt(k[q])||parseInt(k[q])>b)return!1}else return!1}}return!0},pageRangeToArrayConverter:function(b){var d=
a.serverCtx.pageCount,e=(b+"").replace(/\s+/g,""),h=[];if("*"==b||""==b){for(e=1;e<=d;e++)h.push(e);return h}b=-1!=b.indexOf(";")?";":",";e=e.split(b);for(b=0;b<e.length;b++){var k=e[b].split("-");if(1===k.length)h.push(parseInt(k[0],10));else if(2===k.length){var q=parseInt(k[0],10);k=parseInt(k[1],10);if(!(k<q))for(;q<=k;q++)h.push(q)}}return h=h.filter(function(n,y,x){return x.indexOf(n)===y&&0<n&&n<=d}).sort(function(n,y){return n-y})}},Thumbnails:{lastUpdatedPageThumbnail:-1,selectedItems:[],
THUMBNAIL_SHADOW_OFFSET:3,THUMBNAIL_SHADOW_BLUR:6,THUMBNAIL_SHADOW_COLOR:"gray",getThumbnailPage:function(b){if(null!=b){var d=b.getAttribute("data-pageNo");if(d)return parseInt(d);if(null!=b.parentNode&&b.parentNode.getAttribute("data-pageNo"))return parseInt(b.parentNode.getAttribute("data-pageNo"))}return 0},setThumbnailPageDest:function(b,d){return null!=b?(b.setAttribute("data-pageNo",d.toString()),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},setThumbnailText:function(b,d){return null!=
b?(b.children[1].innerHTML="<p align=center style='margin: 0 0 0 0;'><font size='-3'>"+d+"</font></p>",DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},getThumbnailFromPageNo:function(b){b=dvJQuery(a.dom.thumbnailArea).children("[data-pageNo="+b+"]");return 0<b.length?b:null},resetThumbnailFromPageNo:function(b){b=this.getThumbnailFromPageNo(b);null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false"))},getThumbnailAt:function(b,d){for(var e=a.dom.thumbnailArea.childElementCount,
h=!1,k=0;k<e;k++){var q=a.dom.thumbnailArea.children[k];if(0!=a.Internal.Thumbnails.getThumbnailPage(q)){var n=dvJQuery(q).position().top;if(n+dvJQuery(q).innerHeight()>=d&&n<=d){n=dvJQuery(q).position().left;if(n+dvJQuery(q).innerWidth()>=b&&n<=b)return q;h|=1}else if(h)break}}return null},createThumbnail:function(b){var d=document.createElement("div");DocuViewareUtilities.isBetaEnabled("thumbnailMenu")&&(d.className="thumbnail-preview");a.Internal.Thumbnails.setThumbnailPageDest(d,b);d.setAttribute("data-loaded",
"false");d.setAttribute("data-loading","false");d.setAttribute("data-moving","false");d.onmouseover=a.events.onThumbnailItemMouseOverHandler;d.onmouseout=a.events.onThumbnailItemMouseOutHandler;d.onclick=a.events.onThumbnailItemClickHandler;var e=document.createElement("canvas");e.className="spinner-thumb";e.width=a.dom.UIconfig.thumbnailWidth*DocuViewareUtilities.getDevicePixelRatio()+2*this.THUMBNAIL_SHADOW_OFFSET;e.height=a.dom.UIconfig.thumbnailHeight*DocuViewareUtilities.getDevicePixelRatio()+
2*this.THUMBNAIL_SHADOW_OFFSET;e.style.width=a.dom.UIconfig.thumbnailWidth+2*this.THUMBNAIL_SHADOW_OFFSET+"px";e.style.height=a.dom.UIconfig.thumbnailHeight+2*this.THUMBNAIL_SHADOW_OFFSET+"px";d.appendChild(e);e=document.createElement("div");e.style.position="relative";d.appendChild(e);if(DocuViewareUtilities.isBetaEnabled("thumbnailMenu")){e=document.createElement("div");e.className="dv-thumbnail-menu";var h=document.createElement("div");h.classList="menu dv-list-group";var k=document.createElement("a");
k.className="dv-list-group-item";k.href="#";k.onclick=function(){a.RotatePage(b,3)};var q=document.createElement("span");q.className="context-menu-icon";q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 11.5V7.6c2.8.5 5 2.9 5 5.9s-2.2 5.4-5 5.9v2c3.9-.5 7-3.9 7-7.9s-3.1-7.4-7-7.9V2.5L8.4 7.1l4.6 4.4zm-6.9 1c.1-.9.5-1.7 1-2.5L5.7 8.6c-.9 1.2-1.5 2.5-1.7 3.9h2.1zm2.4 5.9l-1.4 1.4c1.2.9 2.5 1.4 3.9 1.6v-2c-.9-.1-1.7-.5-2.5-1zm-2.4-3.9H4c.2 1.4.7 2.7 1.6 3.9L7.1 17c-.6-.7-.9-1.6-1-2.5z"/></svg>';
k.appendChild(q);h.appendChild(k);k=document.createElement("a");k.className="dv-list-group-item";k.href="#";k.onclick=function(){a.RotatePage(b,1)};a.RotatePage();q=document.createElement("span");q.className="context-menu-icon";q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.6 7.1L11 2.5v3.1c-3.9.5-7 3.9-7 7.9s3.1 7.4 7 7.9v-2c-2.8-.5-5-2.9-5-5.9s2.2-5.4 5-5.9v3.9l4.6-4.4zm4.4 5.4c-.2-1.4-.7-2.7-1.6-3.9L17 10c.5.8.9 1.6 1 2.5h2zm-7 6.9v2c1.4-.2 2.7-.7 3.9-1.6l-1.4-1.4c-.8.5-1.6.9-2.5 1zm3.9-2.4l1.4 1.4c.9-1.2 1.5-2.5 1.6-3.9h-2c-.1.9-.4 1.8-1 2.5z"/></svg>';
k.appendChild(q);h.appendChild(k);k=document.createElement("a");k.className="dv-list-group-item";k.href="#";k.onclick=function(){a.DeletePage(b)};q=document.createElement("span");q.className="context-menu-icon";q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>';k.appendChild(q);h.appendChild(k);e.appendChild(h);d.appendChild(e)}a.Internal.Thumbnails.setThumbnailText(d,b.toString());
return d},getSelectedThumbnails:function(b){var d=a.Internal.Thumbnails.selectedItems.slice();b&&d.sort(function(e,h){return e-h});return d},setThumbnailSelected:function(b,d){return d?this.selectThumbnail(b):this.unselectThumbnail(b)},selectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;-1==this.selectedItems.indexOf(b)&&(this.selectedItems.push(b),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},unselectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;
this.selectedItems&&-1<this.selectedItems.indexOf(b)&&(this.selectedItems.splice(this.selectedItems.indexOf(b),1),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},isThumbnailSelected:function(b){return this.selectedItems?-1<this.selectedItems.indexOf(b):!1},toggleThumbnailSelection:function(b){return 1>b||b>a.GetPageCount()?DocuViewareAPI.Status.GenericError:this.isThumbnailSelected(b)?this.unselectThumbnail(b):this.selectThumbnail(b)},reinitThumbnailsSelection:function(){var b=this.selectedItems;
this.selectedItems=[];if(0!=b.length)for(var d=0;d<b.length;d++)a.dom.updateThumbStyle(b[d])},reinitThumbnails:function(){a.Internal.Thumbnails.reinitThumbnailsSelection();for(var b=a.dom.thumbnailArea.childElementCount,d=0;d<b;d++){var e=a.dom.thumbnailArea.children[d];a.Internal.Thumbnails.setThumbnailPageDest(e,d+1);a.Internal.Thumbnails.setThumbnailText(e,(d+1).toString())}},removeAllThumbnails:function(){this.selectedItems=[];if(a.dom.thumbnailArea)for(;a.dom.thumbnailArea.hasChildNodes();)a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)}},
Files:{MAX_UPLOAD_THREADS:3,uploadThreads:0,uploadStates:[],uploading:!1,uploadChunks:0,file:null,updateProgress:function(){for(var b=0,d=0;d<a.Internal.Files.uploadStates.length;d++)b+=a.Internal.Files.uploadStates[d];d=Math.min(b/(100*a.Internal.Files.uploadStates.length)*100,99.9);if("undefined"===typeof a.dom.progressbar.value100||a.dom.progressbar.value100<d)a.dom.progressbar.go(d),a.dom.progressbar.value100=d,b=dvJQuery(a.dom.mainSpinnerContent),d=parseFloat(Math.round(100*d)/100).toFixed(2),
b.children(b.children.length-1).text(a.Localize("label__loading_progress")+" ("+d+"%)")},uploadFile:function(b,d,e,h){var k=b.size;if(0!=k)if(a.Internal.Files.file=b,0<a.dom.maxUploadSize&&a.dom.maxUploadSize<k)b=alert,d=a.Localize("error__upload_max_size"),e=a.dom.maxUploadSize,h=1099511627776,e=0<=e&&1024>e?e+" B":1024<=e&&1048576>e?(e/1024).toFixed(2)+" KB":1048576<=e&&1073741824>e?(e/1048576).toFixed(2)+" MB":1073741824<=e&&e<h?(e/1073741824).toFixed(2)+" GB":e>=h?(e/h).toFixed(2)+" TB":e+" B",
b(d+e+".");else{for(var q=[],n=0,y=0,x=a.dom.packetSize>k?k:a.dom.packetSize;y<k;)n++,q.push(b.slice(y,x)),y=x,x=y+a.dom.packetSize;y=0;x=Date.now();for(a.debug&&console.log("DocuVieware: uploadFile::creating packets");y<n;)this.uploadChunk(x,b.name,q[y],n,y+1,k,d,e,h),y++;a.debug&&console.log("DocuVieware: uploadFile::"+n+" packets generated")}},uploadChunk:function(b,d,e,h,k,q,n,y,x){function K(aa,fa){dvJQuery(a.dom.mainSpinner).show();a.ajax.transferID=aa;a.Internal.Files.uploading=!0;a.Internal.Files.uploadStates=
Array(h);for(aa=0;aa<h;aa++)a.Internal.Files.uploadStates[aa]=0;a.Internal.Files.uploadThreads=0;a.Internal.Files.uploadChunks=fa;a.dom.progressbar.go(0);a.dom.progressbar.value100=0;fa=dvJQuery(a.dom.mainSpinnerContent);fa.children(fa.children.length-1).text(a.Localize("label__loading_progress"))}a.ajax.transferID!=b&&K(b,h);if(1==a.Internal.Files.uploading)if(a.Internal.Files.uploadThreads>=a.Internal.Files.MAX_UPLOAD_THREADS)setTimeout(function(){a.Internal.Files.uploadChunk(b,d,e,h,k,q,n,y,x)},
10);else{a.Internal.Files.uploadThreads++;var F=new FileReader;if(a.favorMultipartUpload)F.onload=function(aa){a.Internal.Files.transferChunk(b,d,e,null,h,k,q,n,y,x)},F.readAsArrayBuffer(e);else if(null==F.readAsBinaryString)if(a.isIE11){F=URL.createObjectURL(e);var Y=new XMLHttpRequest;Y.open("get",F,!0);Y.responseType="arraybuffer";Y.onload=function(){if(200==this.status){for(var aa=new Uint8Array(this.response),fa=aa.length,ca=Array(fa);fa--;)ca[fa]=String.fromCharCode(aa[fa]);aa=window.btoa(ca.join(""));
a.Internal.Files.transferChunk(b,d,e,aa,h,k,q,n,y,x)}};Y.send()}else F.onload=function(aa){var fa=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);aa=DocuViewareEncodingUtilities.base64;for(var ca=aa.encode,la=fa.length,Ga=Array(la);la--;)Ga[la]=String.fromCharCode(fa[la]);fa=Ga.join("");aa=ca.call(aa,fa);a.Internal.Files.transferChunk(b,d,e,aa,h,k,q,n,y,x)},F.readAsArrayBuffer(e);else F.onload=function(aa){aa=DocuViewareEncodingUtilities.base64.encode(aa.target.result);a.Internal.Files.transferChunk(b,
d,e,aa,h,k,q,n,y,x)},F.readAsBinaryString(e)}},transferChunk:function(b,d,e,h,k,q,n,y,x,K){function F(aa){a.Internal.Files.uploading=!1;a.dom.progressbar.go(100);a.dom.progressbar.value100=100;dvJQuery(a.dom.mainSpinner).hide();if(aa){if(a.callbacks.onFileOpenSuccess)a.callbacks.onFileOpenSuccess()}else if(a.callbacks.onFileOpenError)a.callbacks.onFileOpenError()}var Y={url:a.appControllerPath+(a.favorMultipartUpload?"/loadfromfilemultipart":"/loadfromfile")+(a.useIdInRoot?"/1":""),async:!0,beforeSend:function(){a.Internal.Files.uploadStates[q-
1]=0;return a.Internal.Files.uploading},success:function(aa){a.Internal.Files.uploading?(aa="string"===typeof aa?eval("("+aa+")"):aa)&&aa.status==DocuViewareAPI.Status.OK?(a.Internal.Files.uploadThreads--,aa.isTransfering?(a.Internal.Files.uploadStates[q-1]=100,a.Internal.Files.updateProgress()):(F(!0),a.ajax.SetNewServerCtx(aa))):aa&&aa.status!=DocuViewareAPI.Status.OK&&null!=aa.responseType&&"DocuVieware"===aa.responseType&&aa.allowRetry?(console.log("DocuVieware: Failed to upload packet: "+q.toString()+
". Retrying..."),a.ajax.PostAjaxRequestForDocuViewareAction(Y)):(F(!1),a.Internal.Files.uploadThreads--,a.ajax.HandleError(aa)):a.Internal.Files.uploadThreads--},error:function(aa){a.ajax.HandleError(aa);F(!1);a.Internal.Files.uploadThreads--},xhr:function(){var aa=dvJQuery.ajaxSettings.xhr();aa.upload&&aa.upload.addEventListener("progress",function(fa){fa.lengthComputable&&(a.Internal.Files.uploadStates[q-1]=fa.loaded/fa.total*100,a.Internal.Files.updateProgress())},!1);return aa}};a.favorMultipartUpload?
(b=new FormData,b.append("transferID",a.ajax.transferID),b.append("sessionID",a.ajax.sessionID),b.append("appendMode",y),b.append("fileName",d),b.append("fileSize",n),b.append("data",e,"fileblob"),b.append("chunkCount",k),b.append("chunkID",q),b.append("password",x),b.append("contentEncoding",K),Y.data=b,Y.cache=!1,Y.contentType=!1,Y.processData=!1):(d=JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,appendMode:y,fileName:d,fileSize:n,data:h,chunkCount:k,chunkID:q,password:x,
contentEncoding:K}),Y.data=d,Y.contentType="application/json");a.ajax.PostAjaxRequestForDocuViewareAction(Y)}},FilePassword:{dialog:null,createAndShowDialog:function(b,d){null!=a.Internal.FilePassword.dialog&&a.Internal.FilePassword.dialog.remove();a.Internal.FilePassword.dialog=dvJQuery(a.dom.dvpassword).clone();var e=a.Internal.FilePassword.dialog;dvJQuery(a.dom.mainSpinner).hide();dvJQuery(a.dom.modalOverlayArea).show();e.appendTo(dvJQuery(a.dom.mainArea));e.css("display","block");e.find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.headerColor);e.find(".dvUi-dialog-content").css("background-color",a.dom.UIconfig.panelBackColor);e.find(".password-dialog-submit-button").click(function(){b(e.find("input[type=password]").val())});e.find(".password-dialog-close-button").click(function(){d()})},showError:function(b){var d=a.Internal.FilePassword.dialog.find(".dvUi-state-error-text");d.text(b);d.css({"font-weight":"bold"});setTimeout(function(){d.css({"font-weight":"normal"})},1E3)},destroyDialog:function(){a.Internal.FilePassword.dialog.remove();
dvJQuery(a.dom.modalOverlayArea).hide()},setPassword:function(b,d){a.ajax.PostBaseRequest("setpassword",{data:{password:b},success:function(e){(e="string"===typeof e?eval("("+e+")"):e)&&e.status==DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(e),a.Internal.FilePassword.destroyDialog()):e.status!==DocuViewareAPI.Status.InvalidPassword&&e.status!==DocuViewareAPI.Status.PasswordRequired||!d?a.ajax.HandleError(e):a.Internal.FilePassword.showError(a.Localize("dialog_password_incorrect"))},error:function(e){a.ajax.HandleError(e)}},
!1,!0)}},Print:{MAX_PRINTING_THREADS:5,printThreads:0,isPrinting:!1,printPages:function(b,d,e,h,k,q){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.isIE&&a.IsFullScreenMode()&&a.ToggleFullscreen();if(d&&!a.Internal.Utilities.pageRangeChecker(a.GetPageCount(),d))return a.DisplayError(a.Localize("error__invalid_page_range")),DocuViewareAPI.Status.GenericError;if("0"==e)if(a.Internal.Utilities.pageRangeToArrayConverter(d)){e=function(){a.Internal.Print.isPrinting=!1;q&&q()};var n=
function(F,Y){if(a.Internal.Print.isPrinting&&(x[F-1]=Y,K++,h&&h(K,y.length),K==y.length)){var aa=document.createElement("iframe");document.body.appendChild(aa);aa.contentWindow.document.open();aa.contentWindow.document.write("<!doctype html>");a.isFirefox?aa.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>"):
aa.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:10mm;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");for(F=0;F<K;F++)0<F&&aa.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"),aa.contentWindow.document.write(x[y[F]-
1]),"function"==typeof CollectGarbage&&CollectGarbage();aa.contentWindow.document.write("</body></html>");aa.contentWindow.document.close();setTimeout(function(){document.body.removeChild(aa)},6E3);a.Internal.Print.isPrinting=!1;k&&k();if(a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted()}},y=a.Internal.Utilities.pageRangeToArrayConverter(d),x=[],K=0;a.Internal.Print.isPrinting=!0;for(d=0;d<y.length;d++)this.getPageForPrint(b,y[d],y.length,n,e)}else return DocuViewareAPI.Status.GenericError;
else if(window.open(a.appControllerPath+"/print"+(a.useIdInRoot?"/1":"")+"?sessionID="+a.ajax.sessionID+"&pageRange="+(d?d:"*")+"&printAnnotations="+b,"_blank"),k&&k(),a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted();return DocuViewareAPI.Status.OK},getPageForPrint:function(b,d,e,h,k){1==a.Internal.Print.isPrinting&&(a.Internal.Print.printThreads>=a.Internal.Print.MAX_PRINTING_THREADS?setTimeout(function(){a.Internal.Print.getPageForPrint(b,d,e,h,k)},10):(a.Internal.Print.printThreads++,
a.ajax.PostBaseRequest("print",{data:{entries:[d],printAnnotations:b,pageCount:e},success:function(q){if((q="string"===typeof q?eval("("+q+")"):q)&&q.status==DocuViewareAPI.Status.OK&&q.contextID==a.ajax.contextID)for(var n=0;n<q.images.length;n++){var y=null;if(q.images[n].getFromCache){var x=a.cache.getPageObject(q.images[n].pageNo);x&&(y=x.bitmap,y.style.display="block",y.style.maxWidth="99.5%",y.style.maxHeight="99.5%",y.style.margin="0 auto",y.style.padding="0",y.style.height="auto",y.style.width=
"auto",y=y.outerHTML)}else q.images[n].mime&&q.images[n].data&&(y="<img src='data:"+q.images[n].mime+";base64,"+q.images[n].data+"' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>",q.images[n].setInCache&&a.cache.cachePageBitmap(q.images[n].pageNo,q.images[n].mime,q.images[n].data,q.images[n].scale,q.images[n].hasTransparency));h&&h(q.images[n].pageNo,y)}"function"==typeof CollectGarbage&&CollectGarbage()},error:function(q){a.ajax.HandleError(q);
k&&k()},complete:function(q){a.Internal.Print.printThreads--}},!1,!0)))}},Selection:{getSelectionAreaCoordinates:function(){var b={left:0,top:0,width:0,height:0};if((3==a.events.mouseMode||4==a.events.mouseMode)&&0<dvJQuery(a.dom.rselect).width()&&dvJQuery(a.dom.rselect).height()){var d=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.dom.viewerArea.getBoundingClientRect(),h=a.dom.rselect.getBoundingClientRect();e={left:h.left-e.left-d.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),
top:h.top-e.top-d.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:dvJQuery(a.dom.rselect).width(),height:dvJQuery(a.dom.rselect).height()};d=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(d,0,e);b.left=a.Internal.Utilities.roundEx(e.left,7);b.top=a.Internal.Utilities.roundEx(e.top,7);b.width=a.Internal.Utilities.roundEx(e.width,7);b.height=a.Internal.Utilities.roundEx(e.height,7)}return b},setSelectionAreaCoordinates:function(b){if(!a.serverCtx.documentLoaded||
"object"!==typeof b||!b.left&&0!=b.left||!b.top&&0!=b.top||!b.width||!b.height)return DocuViewareAPI.Status.GenericError;var d=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.Internal.Matrix.scale(d.contentMatrix,96,96,!1);a.Internal.Matrix.transformBBox(e,0,b);e=b.left+d.pageLeft;var h=b.top+d.pageTop,k=b.width;b=b.height;if(e<d.pageLeft||e+k>d.pageLeft+d.pageWidth||h<d.pageTop||h+b>d.pageTop+d.pageHeight)return DocuViewareAPI.Status.GenericError;3!=a.events.mouseMode&&4!=a.events.mouseMode&&
a.SetMouseMode(3);this.selectionArea.startNewSelectionBox(e,h,!0);a.dom.rselect.style.height=b+"px";a.dom.rselect.style.width=k+"px";a.dom.rselect.height=b;a.dom.rselect.width=k;this.selectionArea.show();return DocuViewareAPI.Status.OK},clearSelectionArea:function(){this.selectionArea.reset()},selectionArea:{isMoving:!1,isSelected:!1,isOver:!1,resizingMode:-1,lineMode:0,startX:0,endX:0,startY:0,endY:0,antOffset:0,dashList:[4,4,4,4],dashLength:0,init:function(b){a.dom.rselect=document.createElement("canvas");
a.dom.rselect.style.zIndex=a.dom.zindexManager.getSelectionAreaZindex();a.dom.rselect.style.display="block";a.dom.rselect.style.position="absolute";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.style.left="0px";a.dom.rselect.style.top="0px";a.dom.rselect.style.padding="0px";a.dom.rselect.style.margin="0px";a.dom.rselect.style.visibility="hidden";window.PointerEvent?(a.dom.rselect.onpointerup=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseUp(d);
break;case "pen":a.Internal.Selection.selectionArea.mouseUp(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;default:a.Internal.Selection.selectionArea.mouseUp(d)}},a.dom.rselect.onpointerdown=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseDown(d);break;case "pen":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(d,!0);break;default:a.Internal.Selection.selectionArea.mouseDown(d)}},
a.dom.rselect.onpointermove=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseMove(d);break;case "pen":a.Internal.Selection.selectionArea.mouseMove(d,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseMove(d,!0);break;default:a.Internal.Selection.selectionArea.mouseMove(d)}},a.dom.rselect.onpointerleave=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseLeave(d);break;case "pen":a.Internal.Selection.selectionArea.mouseLeave(d);
break;default:a.Internal.Selection.selectionArea.mouseLeave(d)}},a.dom.rselect.onpointerenter=function(d){switch(d.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseEnter(d);break;case "pen":a.Internal.Selection.selectionArea.mouseEnter(d);break;default:a.Internal.Selection.selectionArea.mouseEnter(d)}}):(a.dom.rselect.onmouseup=function(d,e){return a.Internal.Selection.selectionArea.mouseUp(d,e)},a.dom.rselect.onmousedown=function(d,e){return a.Internal.Selection.selectionArea.mouseDown(d,
e)},a.dom.rselect.onmouseenter=function(d,e){return a.Internal.Selection.selectionArea.mouseEnter(d,e)},a.dom.rselect.onmousemove=function(d,e){return a.Internal.Selection.selectionArea.mouseMove(d,e)},a.dom.rselect.onmouseleave=function(d,e){return a.Internal.Selection.selectionArea.mouseLeave(d,e)});b.appendChild(a.dom.rselect)},reset:function(){if(3==a.events.mouseMode||4==a.events.mouseMode)this.isOver=this.isSelected=this.isMoving=!1,this.resizingMode=-1,a.dom.rselect.style.height="0px",a.dom.rselect.style.width=
"0px",a.dom.rselect.height=0,a.dom.rselect.width=0,this.hide()},show:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="visible")},hide:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="hidden")},getCornerHitTest:function(b,d,e,h){return b>=e.left-h&&b<=e.left+h&&d>=e.top-h&&d<=e.top+h?0:b>=e.right-h&&b<=e.right+h&&d>=e.top-h&&d<=e.top+h?1:b>=e.right-h&&b<=e.right+h&&d<=e.bottom+h&&d>=e.bottom-h?2:b>=e.left-h&&b<=e.left+h&&d<=e.bottom+h&&d>=e.bottom-h?3:b>=e.left-h&&b<=e.left+h?4:
d>=e.top-h&&d<=e.top+h?5:b>=e.right-h&&b<=e.right+h?6:d<=e.bottom+h&&d>=e.bottom-h?7:-1},getGripSize:function(b){return 6*(b?3:1)},getStartPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.startX-b.pageLeft,y:this.startY-b.pageTop}},getEndPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.endX-b.pageLeft,y:this.endY-b.pageTop}},getPageBounds:function(b){b=a.Internal.Pages.getRenderingState(b);var d=a.dom.viewerArea.getBoundingClientRect(),
e=a.dom.rselect.getBoundingClientRect();return{left:e.left-d.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:e.top-d.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:e.width,height:e.height}},setCursor:function(b){if(this.isSelected&&this.isOver||this.isSelected&&this.isMoving){if(this.isMoving)b=this.resizingMode;else{b=this.getGripSize(b);var d=a.dom.rselect.getBoundingClientRect();b=this.getCornerHitTest(a.events.mouseX,a.events.mouseY,d,b)}switch(b){case 0:a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");
break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");break;case 2:a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");break;case 3:a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");break;case 4:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;case 6:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 7:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;default:a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")}}else this.isOver&&
!this.isDrawing?a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")},setSelectionRectangleStyle:function(b){a.dom.rselect&&(b?(a.dom.rselect.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,a.dom.rselect.style.borderStyle="none",a.dom.rselect.style.borderWidth="0px"):(a.dom.rselect.style.backgroundColor="rgba(0,0,255,0.2)",a.dom.rselect.style.borderStyle="solid",a.dom.rselect.style.borderColor="red",a.dom.rselect.style.borderWidth=
"1px"))},setLineMode:function(b){this.lineMode=b},startNewAnnotBox:function(b,d){this.stopDrawingAnts();this.startX=b;this.startY=d;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=d+"px";a.dom.rselect.style.height="1px";a.dom.rselect.style.width="1px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);this.show();this.isDrawing=!0},setAnnotBoxEndPoint:function(b,
d){this.endX=b;this.endY=d},startNewSelectionBox:function(b,d,e){this.stopDrawingAnts();this.isSelected=!1;this.startX=b;this.startY=d;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=d+"px";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);for(b=this.dashLength=this.antOffset=0;b<this.dashList.length;b++)this.dashLength+=
this.dashList[b];this.drawingAnts();e||(this.isDrawing=!0)},drawingAnts:function(){a.Internal.Selection.selectionArea.antOffset++;a.Internal.Selection.selectionArea.antOffset>a.Internal.Selection.selectionArea.dashLength&&(a.Internal.Selection.selectionArea.antOffset=0);a.Internal.Selection.selectionArea.draw();a.Internal.Selection.selectionArea.drawingAntsOn=setTimeout(a.Internal.Selection.selectionArea.drawingAnts,20)},stopDrawingAnts:function(){this.drawingAntsOn&&(clearTimeout(this.drawingAntsOn),
this.drawingAntsOn=null)},draw:function(){if(3==a.events.mouseMode||4==a.events.mouseMode){var b=a.dom.rselect.getContext("2d");b.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);b.lineWidth="1";b.strokeStyle=a.dom.UIconfig.activeSelectedColor;b.setLineDash?(b.setLineDash(this.dashList),b.lineDashOffset=-this.antOffset,b.strokeRect(0,0,a.dom.rselect.width,a.dom.rselect.height)):(b.beginPath(),this.drawDashedLine(b,0,0,a.dom.rselect.width,0,this.dashList,this.antOffset),this.drawDashedLine(b,
a.dom.rselect.width,0,a.dom.rselect.width,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,a.dom.rselect.height,0,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,0,a.dom.rselect.height,0,0,this.dashList,this.antOffset),b.closePath(),b.stroke())}},drawDashedLine:function(b,d,e,h,k,q,n){var y=q.length,x=0;for(J=0;J<y;J++)x+=parseInt(q[J]);h-=d;k-=e;var K=h?k/h:1E15;n=x*(1-n/x);n=Math.sqrt(n*n/(1+K*K));if(0>h||0>k)n=-n;d-=n;h+=n;e-=
K*n;k+=K*n;b.moveTo(d,e);n=Math.sqrt(h*h+k*k);x=0;for(var F=!0;.1<=n;){var Y=q[x++%y];Y>n&&(Y=n);var aa=Math.sqrt(Y*Y/(1+K*K));if(0>h||0>k)aa=-aa;d+=aa;e+=K*aa;b[F?"lineTo":"moveTo"](d,e);n-=Y;F=!F}},mouseUp:function(b,d){if(1==a.events.mouseMode&&this.isDrawing){d=a.dom.viewerArea.getBoundingClientRect();var e=a.Internal.Coordinates.getViewerScrollLeft(),h=a.Internal.Coordinates.getViewerScrollTop();a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(b.clientX+e-d.left,b.clientY+h-d.top);this.isDrawing=
!1;this.hide();a.Internal.DigiSign.isAddingSignature?a.Internal.DigiSign.addSignatureInteractive():a.Internal.Annotations.addAnnotInteractive();return!0}if(4==a.events.mouseMode&&this.isDrawing)return b=a.GetSelectionAreaCoordinates(),this.reset(),this.isDrawing=!1,a.ZoomRect(b),!0;if(3==a.events.mouseMode&&this.isDrawing){this.isDrawing=!1;if(0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height())this.hide();else if(this.isSelected=!0,a.callbacks.onAreaSelected)a.callbacks.onAreaSelected();
return!0}return 3==a.events.mouseMode&&this.isMoving?(this.isMoving=!1,0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height()&&this.hide(),-1!=this.resizingMode&&(this.resizingMode=-1,this.setCursor()),!0):!1},mouseDown:function(b,d){a.events.mouseX=b.clientX;a.events.mouseY=b.clientY;a.events.mouseDownClientX=b.clientX;a.events.mouseDownClientY=b.clientY;this.isSelected=this.isMoving=!0;d=this.getGripSize(d);var e=a.dom.rselect.getBoundingClientRect();this.resizingMode=this.getCornerHitTest(b.clientX,
b.clientY,e,d);b.stopImmediatePropagation();b.preventDefault();return!1},mouseMove:function(b,d){this.setCursor(d);if(1==a.events.mouseMode){var e=a.dom.viewerArea.getBoundingClientRect();d=b.clientX-a.events.mouseDownX+a.Internal.Coordinates.getViewerScrollLeft();var h=b.clientY-a.events.mouseDownY+a.Internal.Coordinates.getViewerScrollTop();a.dom.rselect.style.width=Math.abs(d)+"px";a.dom.rselect.style.height=Math.abs(h)+"px";a.dom.rselect.width=Math.abs(d);a.dom.rselect.height=Math.abs(h);a.dom.rselect.style.left=
0>d?b.clientX-e.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":a.events.mouseDownX-e.left+"px";a.dom.rselect.style.top=0>h?b.clientY-e.top+a.Internal.Coordinates.getViewerScrollTop()+"px":a.events.mouseDownY-e.top+"px";1==this.lineMode&&(b=a.dom.rselect.getContext("2d"),b.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom(),b.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor,b.clearRect(0,0,a.dom.rselect.width,
a.dom.rselect.height),b.beginPath(),b.moveTo(0<d?0:a.dom.rselect.width,0<h?0:a.dom.rselect.height),b.lineTo(0>d?0:a.dom.rselect.width,0>h?0:a.dom.rselect.height),b.stroke());return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isDrawing){e=a.dom.viewerArea.getBoundingClientRect();var k=b.clientX-e.left+a.Internal.Coordinates.getViewerScrollLeft(),q=b.clientY-e.top+a.Internal.Coordinates.getViewerScrollTop(),n=this.startX,y=this.startY+a.Internal.Coordinates.getViewerScrollTop(),x=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
K=null;n>=x.pageLeft&&n<=x.pageLeft+x.pageWidth?K=this.startX+e.left:n<x.pageLeft?K=e.left+x.pageLeft:n>x.pageLeft+x.pageWidth&&(K=e.left+x.pageLeft+x.pageWidth);var F=null;y>=a.Internal.Coordinates.getViewerScrollTop()+x.pageTop&&y<=a.Internal.Coordinates.getViewerScrollTop()+x.pageTop+x.pageHeight?F=this.startY+e.top:y<a.Internal.Coordinates.getViewerScrollTop()+x.pageTop?F=e.top+x.pageTop:y>a.Internal.Coordinates.getViewerScrollTop()+x.pageTop+x.pageHeight&&(F=e.top+x.pageTop+x.pageHeight);K&&
F&&(d=b.clientX-K+a.Internal.Coordinates.getViewerScrollLeft(),h=b.clientY-F+a.Internal.Coordinates.getViewerScrollTop(),k<=x.pageLeft+x.pageWidth?a.dom.rselect.style.width=k>=x.pageLeft?Math.abs(d)+"px":dvJQuery(a.dom.rselect).position().left+dvJQuery(a.dom.rselect).width()-x.pageLeft+"px":n<=a.Internal.Coordinates.getViewerScrollLeft()+x.pageLeft+x.pageWidth?a.dom.rselect.style.width=x.pageLeft+x.pageWidth-dvJQuery(a.dom.rselect).position().left+"px":a.dom.rselect.style.width="0px",q<=x.pageTop+
x.pageHeight?a.dom.rselect.style.height=q>=x.pageTop?Math.abs(h)+"px":dvJQuery(a.dom.rselect).position().top+dvJQuery(a.dom.rselect).height()-x.pageTop+"px":y<=a.Internal.Coordinates.getViewerScrollTop()+x.pageTop+x.pageHeight?a.dom.rselect.style.height=x.pageTop+x.pageHeight-dvJQuery(a.dom.rselect).position().top+"px":a.dom.rselect.style.height="0px",a.dom.rselect.style.left=0>d?k>=x.pageLeft?b.clientX-e.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":x.pageLeft+"px":K-e.left+"px",a.dom.rselect.style.top=
0>h?q>=x.pageTop?b.clientY-e.top+a.Internal.Coordinates.getViewerScrollTop()+"px":x.pageTop+"px":F-e.top+"px");a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height();0<dvJQuery(a.dom.rselect).width()&&0<dvJQuery(a.dom.rselect).height()&&this.show();return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isMoving){x=a.Internal.Pages.getRenderingState(a.GetCurrentPage());e=a.dom.viewerArea.getBoundingClientRect();k=a.dom.rselect.getBoundingClientRect();
if(-1!=this.resizingMode&&8!=this.resizingMode){q=b.pageX-e.left+a.Internal.Coordinates.getViewerScrollLeft();e=b.pageY-e.top+a.Internal.Coordinates.getViewerScrollTop();d=b.clientX-k.left;h=b.clientY-k.top;switch(this.resizingMode){case 0:0<dvJQuery(a.dom.rselect).width()-d&&(q<x.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-x.pageLeft)),a.dom.rselect.style.left=x.pageLeft+"px"):(a.dom.rselect.style.left=q+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-
d)));0<dvJQuery(a.dom.rselect).height()-h&&(e<x.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-x.pageTop)),a.dom.rselect.style.top=x.pageTop+"px"):(a.dom.rselect.style.top=e+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-h)));break;case 1:d=b.clientX-k.right;0<dvJQuery(a.dom.rselect).width()+d&&(q>x.pageLeft+x.pageWidth?dvJQuery(a.dom.rselect).width(x.pageLeft+x.pageWidth-dvJQuery(a.dom.rselect).position().left):
dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+d));0<dvJQuery(a.dom.rselect).height()-h&&(e<x.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-x.pageTop)),a.dom.rselect.style.top=x.pageTop+"px"):(a.dom.rselect.style.top=e+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-h)));break;case 2:d=b.clientX-k.right;0<dvJQuery(a.dom.rselect).width()+d&&(q>x.pageLeft+x.pageWidth?dvJQuery(a.dom.rselect).width(x.pageLeft+
x.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+d));h=b.clientY-k.bottom;0<dvJQuery(a.dom.rselect).height()+h&&(e>x.pageTop+x.pageHeight?dvJQuery(a.dom.rselect).height(x.pageTop+x.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+h));break;case 3:0<dvJQuery(a.dom.rselect).width()-d&&(q<x.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-
x.pageLeft)),a.dom.rselect.style.left=x.pageLeft+"px"):(a.dom.rselect.style.left=q+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-d)));h=b.clientY-k.bottom;0<dvJQuery(a.dom.rselect).height()+h&&(e>x.pageTop+x.pageHeight?dvJQuery(a.dom.rselect).height(x.pageTop+x.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+h));break;case 4:0<dvJQuery(a.dom.rselect).width()-d&&(q<x.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+
(dvJQuery(a.dom.rselect).position().left-x.pageLeft)),a.dom.rselect.style.left=x.pageLeft+"px"):(a.dom.rselect.style.left=q+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-d)));break;case 5:0<dvJQuery(a.dom.rselect).height()-h&&(e<x.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-x.pageTop)),a.dom.rselect.style.top=x.pageTop+"px"):(a.dom.rselect.style.top=e+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-
h)));break;case 6:d=b.clientX-k.right;0<dvJQuery(a.dom.rselect).width()+d&&(q>x.pageLeft+x.pageWidth?dvJQuery(a.dom.rselect).width(x.pageLeft+x.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+d));break;case 7:h=b.clientY-k.bottom,0<dvJQuery(a.dom.rselect).height()+h&&(e>x.pageTop+x.pageHeight?dvJQuery(a.dom.rselect).height(x.pageTop+x.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+
h))}a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height()}else d=b.clientX-a.events.mouseDownClientX,h=b.clientY-a.events.mouseDownClientY,dvJQuery(a.dom.rselect).position().left+d>=x.pageLeft&&dvJQuery(a.dom.rselect).position().left+d+dvJQuery(a.dom.rselect).width()<=x.pageLeft+x.pageWidth?(a.dom.rselect.style.left=dvJQuery(a.dom.rselect).position().left+d+"px",a.events.mouseDownClientX+=d):dvJQuery(a.dom.rselect).position().left+d<=x.pageLeft?
a.dom.rselect.style.left=x.pageLeft+"px":dvJQuery(a.dom.rselect).position().left+d+dvJQuery(a.dom.rselect).width()>=x.pageLeft+x.pageWidth&&(a.dom.rselect.style.left=x.pageLeft+x.pageWidth-dvJQuery(a.dom.rselect).width()+"px"),dvJQuery(a.dom.rselect).position().top+h>=x.pageTop&&dvJQuery(a.dom.rselect).position().top+h+dvJQuery(a.dom.rselect).height()<=x.pageTop+x.pageHeight?(a.dom.rselect.style.top=dvJQuery(a.dom.rselect).position().top+h+"px",a.events.mouseDownClientY+=h):dvJQuery(a.dom.rselect).position().top+
h<=x.pageTop?a.dom.rselect.style.top=x.pageTop+"px":dvJQuery(a.dom.rselect).position().top+h+dvJQuery(a.dom.rselect).height()>=x.pageTop+x.pageHeight&&(a.dom.rselect.style.top=x.pageTop+x.pageHeight-dvJQuery(a.dom.rselect).height()+"px");return!0}return!1},mouseEnter:function(b,d){return this.isOver=!0},mouseLeave:function(b,d){this.isOver=!1;return!0}}},Pages:{getPage:function(b){if(null!=a.cache.Pages)for(var d=0;d<a.cache.Pages.length;d++)if(a.cache.Pages[d].pageNo==b)return a.cache.Pages[d];return null},
selectByDestination:function(b){return a.ajax.PostBaseRequest("rundestination",{data:{destinationName:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!0,!0);a.dom.updateSelectedPageFader(0,a.GetCurrentPage())}},!1)},getVisiblePageNumbers:function(){var b=a.Internal.Coordinates.getViewerScrollTop(),d=b+dvJQuery(a.dom.viewerArea).innerHeight();return this.getVisiblePageNumbersEx(b,d)},getVisiblePageNumbersEx:function(b,d){var e=[];if(0==a.dom.viewerArea.offsetWidth||
0==a.dom.viewerArea.offsetHeight||null==a.cache.canvas)return e;if(b>d){var h=b;b=d;d=h}h=!1;for(var k=0;k<a.cache.canvas.length;k++){var q=a.cache.canvas[k],n=q.pageNo,y=q.canvas.length,x=parseFloat(q.canvas[0].tile.style.top);q=q.canvas[y-1];q=parseFloat(q.tile.style.top)+parseFloat(q.tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(x,q,b,d))e.push(n),h=!0;else if(h)break}0<e.length&&e.sort(function(K,F){return K-F});return e},getText:function(b){return(b=a.Internal.Pages.getPage(b))?
b.text:null},getPageWidth:function(b){return(b=a.Internal.Pages.getPage(b))?b.width:0},getPageHeight:function(b){return(b=a.Internal.Pages.getPage(b))?b.height:0},isPageVisible:function(b){var d=a.cache.getPageCanvas(b);if(d){b=a.Internal.Coordinates.getViewerScrollTop();var e=b+dvJQuery(a.dom.viewerArea).innerHeight(),h=d.canvas.length,k=parseFloat(d.canvas[0].tile.style.top);d=parseFloat(d.canvas[h-1].tile.style.top)+parseFloat(d.canvas[h-1].tile.style.height);if(a.Internal.Coordinates.hasVerticalIntersection(k,
d,b,e))return!0}return!1},isPageRendered:function(b){return(b=a.Internal.Pages.getPage(b))?b.drawn||b.drawing:!1},getRenderRotation:function(b){return(b=a.Internal.Pages.getPage(b))?b.renderRotation:0},getPageRotation:function(b){return(b=a.Internal.Pages.getPage(b))?b.pageRotation:0},getRenderingState:function(b){for(var d,e,h,k,q,n,y,x=0;x<a.cache.canvas.length;x++)if(a.cache.canvas[x].pageNo==b){d=a.cache.canvas[x].left;e=a.cache.canvas[x].top;h=a.cache.canvas[x].right-d;k=a.cache.canvas[x].bottom-
e;break}if(b=a.Internal.Pages.getPage(b))q=b.contentMatrix,n=b.matrix,y=b.zoom;return{pageLeft:d,pageTop:e,pageWidth:h,pageHeight:k,zoom:y,matrix:n,contentMatrix:q}},pageView:function(b,d,e){function h(){if(null!=a.ajax.pendingPageViewRequests)for(var K=0;K<k.length;K++)for(var F=k[K],Y=0;Y<a.ajax.pendingPageViewRequests.length;Y++)if(a.ajax.pendingPageViewRequests[Y]==F){a.ajax.pendingPageViewRequests.splice(Y,1);break}}if(!a.serverCtx.documentLoaded||!a.cache.canvas)return 0;for(var k=[],q=0;q<
b.length;q++){var n=b[q],y=!1,x=a.Internal.Pages.getPage(n);x&&(x.drawn||x.drawing||x.renderStatus!=DocuViewareAPI.Status.OK&&!e)&&(y=!0);if(!y){y=!1;if(null!=a.ajax.pendingPageViewRequests)for(x=0;x<a.ajax.pendingPageViewRequests.length;x++)if(a.ajax.pendingPageViewRequests[x]==n){y=!0;break}y||(null==a.ajax.pendingPageViewRequests&&(a.ajax.pendingPageViewRequests=[]),a.ajax.pendingPageViewRequests.push(n),k.push(n))}}0<k.length&&(d&&a.DisplayPendingActionNotification(),a.ajax.pageViewRequestNo+=
1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,contentType:"application/json",data:JSON.stringify({requestName:"pageview",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,zoom:a.serverCtx.zoom,forceReload:e,entries:k,requestNo:a.ajax.pageViewRequestNo}}),success:function(K){d&&a.HidePendingActionNotification();h();if((K="string"===typeof K?eval("("+K+")"):K)&&K.status==DocuViewareAPI.Status.OK&&K.contextID==a.ajax.contextID){var F=
!0,Y=!1,aa=!1;K.checkZoom&&Math.round(1E3*a.cache.pageCanvasZoom)!=Math.round(1E3*K.zoom)&&(a.debug&&console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: "+a.serverCtx.zoom+". response zoom: "+K.zoom+"."),aa=!0,F=!1);F&&a.serverCtx.viewRotation!=K.viewRotation&&(a.debug&&console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: "+a.serverCtx.viewRotation+". Content view rotation: "+K.viewRotation),Y=!0);a.serverCtx.page=
K.images;a.UpdateUI(!1,!0,F,!1,aa,Y)}},error:function(K){a.ajax.HandleError(K);a.debug&&console.log("DocuVieware pageview error");h()}}));return k.length}},Coordinates:{getViewerScrollLeft:function(){return a.dom.viewerArea.scrollLeft},getViewerScrollLeftMax:function(){return a.dom.viewerArea.scrollWidth-a.dom.viewerArea.clientWidth},getViewerScrollTop:function(){return a.dom.viewerArea.scrollTop},getViewerScrollTopMax:function(){return a.dom.viewerArea.scrollHeight-a.dom.viewerArea.clientHeight},
setViewerScrollLeft:function(b,d){b=Math.round(b);if(null!=d&&Math.abs(a.dom.viewerArea.scrollLeft-b)<d)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollLeft=b;return DocuViewareAPI.Status.OK},setViewerScrollTop:function(b,d){b=Math.round(b);if(null!=d&&Math.abs(a.dom.viewerArea.scrollTop-b)<d)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollTop=b;return DocuViewareAPI.Status.OK},clienttodocument:function(b,d,e,h,k){b=a.Internal.Pages.getRenderingState(b);var q=a.dom.viewerArea.getBoundingClientRect();
k="undefined"===typeof k?!0:k;d={x:d-q.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),y:e-q.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop()};h=1==h?1/96:1;b=b.contentMatrix;k&&(b=a.Internal.Matrix.invert(b));h=a.Internal.Matrix.scale(b,h,h,!1);a.Internal.Matrix.transformPoint(h,d);return d},documentToViewer:function(b,d,e){b=a.Internal.Pages.getRenderingState(b);d={x:d,y:e};a.Internal.Matrix.transformPoint(b.contentMatrix,d);d.x+=b.pageLeft;d.y+=b.pageTop;return d},documentToViewerBox:function(b,
d){b=a.Internal.Pages.getRenderingState(b);a.Internal.Matrix.transformBBox(b.contentMatrix,0,d);d.left+=b.pageLeft;d.top+=b.pageTop},hasVerticalIntersection:function(b,d,e,h){return Math.min(d,h)>=Math.max(b,e)},hasIntersection:function(b,d,e,h,k,q,n,y){return Math.min(e,n)>=Math.max(b,k)&&Math.min(h,y)>=Math.max(d,q)},newRectangle:function(b,d,e,h){return{Left:b,Top:d,Right:b+e,Bottom:d+h,Width:e,Height:h}},rectUnion:function(b,d,e,h,k,q,n,y){b=Math.min(b,k);d=Math.min(d,q);return this.newRectangle(b,
d,Math.max(e,n)-b,Math.max(h,y)-d)},isPointInsideRect:function(b,d,e){return b.x>=d.Left-e&&b.x<=d.Right+e&&b.y>=d.Top-e&&b.y<=d.Bottom+e}},Rotations:{getRotateFlipTypeAngle:function(b){switch(b){case 1:return 90;case 2:return 180;case 3:return 270}return 0}},Text:{_selectedText:null,clearSelection:function(){a.callbacks.onTextUnselected&&null!==this._selectedText?(this._selectedText=null,a.callbacks.onTextUnselected()):this._selectedText=null},removeSelectedText:function(b,d){var e=this.getSelectedTextAreas(1);
if(!e.length)return DocuViewareAPI.Status.GenericError;a.ajax.PostBaseRequest("removetext",{data:{areas:e},success:function(h){var k="string"===typeof h?eval("("+h+")"):h;k&&k.status===DocuViewareAPI.Status.OK?(a.ajax.HandleServerContextResponse("string"===typeof h?eval("("+h+")"):h,!1),a.dom.SelectedTextRegions.clear(),b&&b()):(a.ajax.HandleError(h),d&&d())},error:function(h){a.ajax.HandleError(h);d&&d()}},!1);return DocuViewareAPI.Status.OK},anyWordHitTest:function(b,d,e){var h=a.Internal.Pages.getVisiblePageNumbers();
if(null!=h)for(var k=0;k<h.length;k++)if(a.Internal.Pages.isPageRendered(h[k])){var q=a.Internal.Pages.getText(h[k]);if(null!=q){var n=a.Internal.Coordinates.clienttodocument(h[k],b,d,0);n.x*=q.scale;n.y*=q.scale;if(q.textBlock.Matrix){var y=a.Internal.Matrix.invert(q.textBlock.Matrix);a.Internal.Matrix.transformPoint(y,n)}y=n.x;n=n.y;for(var x=q.textBlock.words,K=x.length,F=0;F<K;F++)if(-1!=x[F].PId&&x[F].BBox.Left-e<=y&&x[F].BBox.Right+e>=y&&x[F].BBox.Top-e<=n&&x[F].BBox.Bottom+e>=n)return{page:h[k],
textRotate:q.textBlock.Rotation}}}return null},getSelectedText:function(){return this._selectedText},getSelectedTextCoordinatesOnDocument:function(b){var d=[];if(0<a.dom.SelectedTextRegions._cache.length)for(var e=0;e<a.dom.SelectedTextRegions._cache.length;e++)if(!Number.isInteger(b)||b===a.dom.SelectedTextRegions._cache[e].category){var h=a.Internal.Pages.getRenderingState(a.dom.SelectedTextRegions._cache[e].pageNo),k={left:a.dom.SelectedTextRegions._cache[e].offsetLeft-h.pageLeft,top:a.dom.SelectedTextRegions._cache[e].offsetTop-
h.pageTop,width:a.dom.SelectedTextRegions._cache[e].offsetWidth,height:a.dom.SelectedTextRegions._cache[e].offsetHeight};h=a.Internal.Matrix.scale(a.Internal.Matrix.invert(h.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(h,0,k);k={pageNo:a.dom.SelectedTextRegions._cache[e].pageNo,left:a.Internal.Utilities.roundEx(k.left,7),top:a.Internal.Utilities.roundEx(k.top,7),height:a.Internal.Utilities.roundEx(k.height,7),width:a.Internal.Utilities.roundEx(k.width,7)};d.push(k)}return d},getSelectedTextAreas:function(b){b=
a.Internal.Text.getSelectedTextCoordinatesOnDocument(b);var d=[];if(0<b.length)for(var e=0;e<b.length;e++)d.push({pageNo:b[e].pageNo,coordinates:{left:b[e].left,top:b[e].top,height:b[e].height,width:b[e].width}});return d},captureSelectedText:function(b,d,e,h,k,q){function n(nb,Gb,v){var Ob=nb._selectedText.length;0<Ob&&(v?nb._selectedText+="\r\n":" "!=nb._selectedText[Ob-1]&&"\t"!=nb._selectedText[Ob-1]&&" "!=Gb[0]&&"\t"!=Gb[0]&&(nb._selectedText+=" "))}function y(nb,Gb){for(var v=[],Ob=nb.Paragraphs.length,
Bb=0;Bb<Ob;Bb++){var yb=nb.Paragraphs[Bb];a.Internal.Coordinates.hasIntersection(Gb.Left,Gb.Top,Gb.Right,Gb.Bottom,yb.BBox.Left,yb.BBox.Top,yb.BBox.Right,yb.BBox.Bottom)&&v.push(yb.Id)}return v}this._selectedText="";var x=[],K=a.dom.viewerArea.getBoundingClientRect(),F=a.Internal.Coordinates.getViewerScrollTop()-K.top;F=(K=-1==b&&-1==e&&-1==d&&-1==h)?[a.GetCurrentPage()]:a.Internal.Pages.getVisiblePageNumbersEx(d+F,h+F);if(null!=F)for(var Y=!0,aa=1==F.length,fa=-1,ca=-1,la=0;la<F.length;la++){var Ga=
0==la,ya=la==F.length-1,xa=F[la];if(a.Internal.Pages.isPageRendered(xa)){var wa=[],Da=[],Ta=a.Internal.Pages.getText(xa);if(null!=Ta){var Ja=q;0==Ta.textBlock.Rotation||K||(Ja=!0);var ta=a.Internal.Coordinates.clienttodocument(xa,b,d,0);ta.x*=Ta.scale;ta.y*=Ta.scale;var ra=a.Internal.Coordinates.clienttodocument(xa,e,h,0);ra.x*=Ta.scale;ra.y*=Ta.scale;if(Ta.textBlock.Matrix){var rb=a.Internal.Matrix.invert(Ta.textBlock.Matrix);a.Internal.Matrix.transformPoint(rb,ta);a.Internal.Matrix.transformPoint(rb,
ra)}rb=ta.x;var jb=ta.y;ta=ra.x;ra=ra.y;if(jb>ra){var ob=rb;rb=ta;ta=ob;ob=jb;jb=ra;ra=ob}ra=a.Internal.Coordinates.newRectangle(Math.min(rb,ta),Math.min(jb,ra),Math.abs(rb-ta),Math.abs(jb-ra));ra.Right=ra.Left+ra.Width;ra.Bottom=ra.Top+ra.Height;jb=y(Ta.textBlock,ra);ob=Ta.textBlock.words;for(var Va=ob.length,Xa=-1,gb=0,La=!1,hb=null,Db=0;Db<Va;Db++){var ha=ob[Db];if(-1!=ha.PId&&(K||-1!=jb.indexOf(ha.PId)))if(Ja){if(a.Internal.Coordinates.hasIntersection(ra.Left,ra.Top,ra.Right,ra.Bottom,ha.BBox.Left,
ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom)){null!=hb?(La=hb.LineNo==ha.LineNo,na=!La):na=La=!1;if(La&&Da[Da.length-1]===ha.PId){var Ia=wa[wa.length-1];wa[wa.length-1]=a.Internal.Coordinates.rectUnion(Ia.Left,Ia.Top,Ia.Right,Ia.Bottom,ha.BBox.Left,ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom)}else wa.push(a.Internal.Coordinates.newRectangle(ha.BBox.Left,ha.BBox.Top,ha.BBox.Width,ha.BBox.Height)),Da.push(ha.PId);n(this,ha.Content,na);this._selectedText+=ha.Content;La=!0;hb=ha}}else{var na=gb!=ha.LineNo;
na&&(gb=ha.LineNo,La=!1,Xa=-1);if(K||!Ga||-1!=fa&&fa!=ha.LineNo||-1!=Xa){if(K)Xa=ha.LineNo;else if(-1==Xa||-1!=Xa&&ha.LineNo!=Xa&&-1==ca)Xa=ha.BBox.Bottom<ra.Bottom?ha.LineNo:-1;if(-1!=Xa)na||Da[Da.length-1]!==ha.PId?(wa.push(a.Internal.Coordinates.newRectangle(ha.BBox.Left,ha.BBox.Top,ha.BBox.Width,ha.BBox.Height)),Da.push(ha.PId)):(Ia=wa[wa.length-1],wa[wa.length-1]=a.Internal.Coordinates.rectUnion(Ia.Left,Ia.Top,Ia.Right,Ia.Bottom,ha.BBox.Left,ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom)),n(this,
ha.Content,na),this._selectedText+=ha.Content;else if(-1==ca||ca==ha.LineNo){if(ha.BBox.Top<ra.Bottom)if(ha.BBox.Right<ta)La&&Da[Da.length-1]===ha.PId?(Ia=wa[wa.length-1],wa[wa.length-1]=a.Internal.Coordinates.rectUnion(Ia.Left,Ia.Top,Ia.Right,Ia.Bottom,ha.BBox.Left,ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom)):(wa.push(a.Internal.Coordinates.newRectangle(ha.BBox.Left,ha.BBox.Top,ha.BBox.Width,ha.BBox.Height)),Da.push(ha.PId)),n(this,ha.Content,na),this._selectedText+=ha.Content,La=!0;else{if(a.Internal.Coordinates.hasIntersection(ra.Left,
ra.Top,ra.Right,ra.Bottom,ha.BBox.Left,ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom))for(n(this,ha.Content,na),na=0;na<=ha.GlyphBoxes.length-1;na++)ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width/2<ta&&(La&&Da[Da.length-1]===ha.PId?(La=wa[wa.length-1],wa[wa.length-1]=a.Internal.Coordinates.rectUnion(La.Left,La.Top,La.Right,La.Bottom,ha.GlyphBoxes[na].x,ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width,ha.GlyphBoxes[na].y+ha.GlyphBoxes[na].height)):(wa.push(a.Internal.Coordinates.newRectangle(ha.GlyphBoxes[na].x,
ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].width,ha.GlyphBoxes[na].height)),Da.push(ha.PId)),La=!0,this._selectedText+=ha.GlyphBoxes[na].glyph);break}else break;-1==ca&&ya&&(ca=ha.LineNo)}else break}else if(a.Internal.Coordinates.hasIntersection(ra.Left,ra.Top,ra.Right,ra.Bottom,ha.BBox.Left,ha.BBox.Top,ha.BBox.Right,ha.BBox.Bottom)){if(Y&&1==F.length){for(Y=Db;Y<Va;){if(ob[Y].LineNo!=gb){aa=ob[Y].BBox.Top>ra.Bottom;break}Y+=1}Y=!1}n(this,ha.Content,na);for(na=0;na<=ha.GlyphBoxes.length-1;na++)k?Ia=!0:
aa?La?(Ia=ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width/2,Ia=a.Internal.Coordinates.hasIntersection(ra.Left,ra.Top,ra.Right,ra.Bottom,ha.GlyphBoxes[na].x,ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width,ha.GlyphBoxes[na].y+ha.GlyphBoxes[na].height)&&Ia<ra.Right):Ia=a.Internal.Coordinates.hasIntersection(ra.Left,ra.Top,ra.Right,ra.Bottom,ha.GlyphBoxes[na].x,ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width,ha.GlyphBoxes[na].y+ha.GlyphBoxes[na].height):(Ia=-1!=Xa?!0:(La?ha.GlyphBoxes[na].x+
ha.GlyphBoxes[na].width/2:ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width)>rb)&&-1==fa&&(fa=ha.LineNo,Xa=ha.BBox.Bottom<ra.Bottom?ha.LineNo:-1),Ia&&(La&&Da[Da.length-1]===ha.PId?(La=wa[wa.length-1],wa[wa.length-1]=a.Internal.Coordinates.rectUnion(La.Left,La.Top,La.Right,La.Bottom,ha.GlyphBoxes[na].x,ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].x+ha.GlyphBoxes[na].width,ha.GlyphBoxes[na].y+ha.GlyphBoxes[na].height)):(wa.push(a.Internal.Coordinates.newRectangle(ha.GlyphBoxes[na].x,ha.GlyphBoxes[na].y,ha.GlyphBoxes[na].width,
ha.GlyphBoxes[na].height)),Da.push(ha.PId)),this._selectedText+=ha.GlyphBoxes[na].glyph,La=!0)}}}if(null!=Ta.textBlock.Matrix)for(Ga=0;Ga<wa.length;Ga++)a.Internal.Matrix.transformRect(Ta.textBlock.Matrix,wa[Ga]);x.push({regions:wa,regionPids:Da,pageNo:xa,scale:Ta.scale})}}}return x},captureAndHighlightSelectedText:function(b,d,e,h,k,q){if((b=a.Internal.Text.captureSelectedText(b,d,e,h,k,q))&&0<b.length){for(d=0;d<b.length;d++)for(e=0;e<b[d].regions.length;e++)a.dom.SelectedTextRegions.addNew(b[d].pageNo,
{left:b[d].regions[e].Left/b[d].scale,top:b[d].regions[e].Top/b[d].scale,width:b[d].regions[e].Width/b[d].scale,height:b[d].regions[e].Height/b[d].scale},"rgba(0,0,201,0.3)",null,1);a.callbacks.onTextSelected&&(b=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(b))}}},Matrix:{transformPoint:function(b,d){var e=b.b*d.x+b.d*d.y+b.f;d.x=b.a*d.x+b.c*d.y+b.e;d.y=e},equal:function(b,d){return b.a===d.a&&b.b===d.b&&b.c===d.c&&b.d===d.d&&b.e===d.e&&b.f===d.f},combine:function(b,d){return{a:b.a*
d.a+b.b*d.c,b:b.a*d.b+b.b*d.d,c:b.c*d.a+b.d*d.c,d:b.c*d.b+b.d*d.d,e:b.e*d.a+b.f*d.c+d.e,f:b.e*d.b+b.f*d.d+d.f}},invert:function(b){var d=1/(b.a*b.d-b.b*b.c);d={a:b.d*d,b:-b.b*d,c:-b.c*d,d:b.a*d};d.e=-b.e*d.a-b.f*d.c;d.f=-b.e*d.b-b.f*d.d;return d},translate:function(b,d,e){return this.combine(b,{a:1,b:0,c:0,d:1,e:d,f:e})},isRotatedOrFlipped:function(b){return 0!=b.b||0!=b.c||0>b.a||0>b.d},scale:function(b,d,e,h){return h?this.combine({a:d,b:0,c:0,d:e,e:0,f:0},b):this.combine(b,{a:d,b:0,c:0,d:e,e:0,
f:0})},rotateAt:function(b,d,e,h,k){d=Math.PI*d/180;d={a:Math.cos(d),b:Math.sin(d),c:-Math.sin(d),d:Math.cos(d),e:e,f:h};if(k)return e=this.combine({a:1,b:0,c:0,d:1,e:-e,f:-h},d),this.combine(e,b);b=this.combine(b,{a:1,b:0,c:0,d:1,e:-e,f:-h});return this.combine(b,d)},transformBBox:function(b,d,e,h){var k=0==d?b:null==h?this.rotateAt(b,d,e.left+e.width/2,e.top+e.height/2,!0):this.rotateAt(b,d,h.x,h.y,!0);b={x:e.left,y:e.top};d={x:e.left+e.width,y:e.top};h={x:e.left+e.width,y:e.top+e.height};var q=
{x:e.left,y:e.top+e.height};this.transformPoint(k,b);this.transformPoint(k,d);this.transformPoint(k,h);this.transformPoint(k,q);k=Math.min(b.x,d.x,h.x,q.x);var n=Math.max(b.x,d.x,h.x,q.x),y=Math.min(b.y,d.y,h.y,q.y);b=Math.max(b.y,d.y,h.y,q.y);e.left=k;e.top=y;e.width=n-k;e.height=b-y},transformRect:function(b,d){var e={x:d.Left,y:d.Top},h={x:d.Left+d.Width,y:d.Top},k={x:d.Left+d.Width,y:d.Top+d.Height},q={x:d.Left,y:d.Top+d.Height};this.transformPoint(b,e);this.transformPoint(b,h);this.transformPoint(b,
k);this.transformPoint(b,q);b=Math.min(e.x,h.x,k.x,q.x);var n=Math.max(e.x,h.x,k.x,q.x),y=Math.min(e.y,h.y,k.y,q.y);e=Math.max(e.y,h.y,k.y,q.y);d.Left=b;d.Top=y;d.Width=n-b;d.Height=e-y}},Search:{_currentOccurence:null,_occurences:null,_firstResult:null,clearResults:function(){this._currentOccurence=this._occurences=this._firstResult=null;if(a.dom.searchResults&&a.dom.searchResults.hasChildNodes())for(var b=a.dom.searchResults.children.length-1;0<=b;b--)a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);
a.dom.SelectedTextRegions.clear(2)},addResults:function(b,d){this.clearResults();this._occurences=d;a.dom.SelectedTextRegions.clear(2);this.occurences=d;var e=null!=d?d.length:0;if(0<e)for(var h=1,k,q=0,n=0;n<e;n++){var y=document.createElement("div");y.id=a.uniqueID+"searchResultItem"+n;y.setAttribute("data-idx",n);0==n?this._firstResult=y:d[n].page!=k&&(h=1);k=d[n].page;y.pageOccurence=h++;y.className="searchResultItem";var x=d[n].context.content,K=d[n].context.resultStart,F=d[n].context.resultLen;
y.innerHTML=x.substr(0,K)+'<strong style="color:'+a.dom.UIconfig.activeSelectedColor+';">'+x.substr(K,F)+"</strong>"+x.substr(K+F);y.pageNo=d[n].page;x=d[n].resultBoxes[d[n].resultBoxes.length-1];y.wordLeft=x.Left;y.wordTop=x.Top;y.wordWidth=x.Width;y.wordHeight=x.Height;y.searchedValue=b;a.dom.searchArea&&(y.onmouseenter=this.resultOnMouseEnterHandler,y.onmouseleave=this.resultOnMouseLeaveHandler,y.onclick=this.resultOnClickHandler);if(a.dom.searchArea&&q!=k){x=d.slice(n+1);q=1;if(0!==x.length)for(K=
0;x[K]&&x[K].page===k;K++)q++;x=document.createElement("div");x.className="searchResultItemPage";x.style.backgroundColor=a.dom.UIconfig.panelDarkerBackColor;K=document.createElement("span");K.className="matches";K.innerText=q.toString()+" "+(1===q?a.Localize("label_match"):a.Localize("label_matches"));q=document.createElement("span");q.className="pageNumber";q.innerText=a.Localize("label_page")+" "+k;F=document.createElement("div");F.className="separator";x.appendChild(K);x.appendChild(q);x.appendChild(F);
q=k;a.dom.searchResults.appendChild(x)}a.dom.searchArea&&a.dom.searchResults.appendChild(y)}},highlightResults:function(b){a.dom.SelectedTextRegions.clear(2,b);if(null!=this._occurences){var d=this._occurences.length;if(0<d)for(var e=1,h=0;h<d;h++)if(this._occurences[h].page==b){var k=this._occurences[h].resultBoxes.map(function(q){return{left:96*q.Left,top:96*q.Top,width:96*q.Width,height:96*q.Height}});null!=this._currentOccurence&&this._currentOccurence.pageNo==b&&this._currentOccurence.pageOccurence==
e?a.dom.SelectedTextRegions.addNews(this._occurences[h].page,k,"rgba(0,200,0,0.3)","rgba(255,0,0,1)",2):a.dom.SelectedTextRegions.addNews(this._occurences[h].page,k,"rgba(0,200,0,0.3)",null,2);e++}}},navigateToFirstResult:function(){this._firstResult&&(this.navigateToResult(this._firstResult),a.dom.searchResults.parentElement.scrollTop=0)},resultOnClickHandler:function(b){a.Internal.Search.navigateToResult(b.currentTarget)},resultOnMouseEnterHandler:function(b){b.target.style.borderColor=a.dom.UIconfig.activeSelectedColor},
resultOnMouseLeaveHandler:function(b){b.target.style.borderLeftColor="transparent";b.target.style.borderRightColor="transparent";b.target.style.borderTopColor="transparent";b.target.style.borderBottomColor=a.dom.UIconfig.miscBorderColor},navigateToResult:function(b){a.Internal.Search._currentOccurence=b;a.dom.searchArea&&(dvJQuery(a.dom.searchResults).find(".searchResultItem").each(function(){dvJQuery(this).removeClass("active");dvJQuery(this).css("border-left-color","transparent");dvJQuery(this).css("border-right-color",
"transparent");dvJQuery(this).css("border-top-color","transparent");dvJQuery(this).css("border-bottom-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent")}),b.style.borderColor="transparent",b.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,dvJQuery(b).addClass("active"),a.Internal.Search.scrollContainerToItem(b));a.SelectPageEx(b.pageNo,!0,!0,!0,!1,!0,function(){a.EnsurePageRegionVisibility(b.pageNo,b.wordLeft,b.wordTop,b.wordWidth,b.wordHeight)})},
scrollContainerToItem:function(b){var d=a.dom.searchResultsContainer.getBoundingClientRect(),e=a.dom.searchResultsContainer.clientHeight;b=b.getBoundingClientRect();b.top>=d.top&&b.top<=d.top+e||(a.dom.searchResultsContainer.scrollTop=b.top+a.dom.searchResultsContainer.scrollTop-d.top)}},FormFields:{existFormField:function(b){if(!b.control)return!1;if(a.dom.viewerArea.hasChildNodes())for(var d=a.dom.viewerArea.children.length-1;0<=d;d--)if(a.dom.viewerArea.children[d]===b.control)return!0;return!1},
removePageFormFields:function(b){if(null!=a.cache.FormFields)for(var d=0;d<a.cache.FormFields.length;d++){var e=a.cache.FormFields[d];e.formFieldApp.pageNo==b&&(this.removeFormField(e),a.cache.FormFields.splice(d,1),d--)}},removeAll:function(b){if(null!=a.cache.FormFields){for(b=0;b<a.cache.FormFields.length;b++)this.removeFormField(a.cache.FormFields[b]);a.cache.FormFields=null}},removeFormField:function(b){b.control&&b.control.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(b.control);
if(b.children)for(var d=0;d<b.children.length;d++)this.removeFormField(b.children[d])},removeFormFieldFromCache:function(b){if(null!=a.cache.FormFields)for(var d=0;d<a.cache.FormFields.length;d++)a.cache.FormFields[d].formFieldApp.id===b&&(a.cache.FormFields.splice(d,1),d--)},newController:function(b){var d={};d.formFieldApp=b;d.updateNo=0;d.pendingUpdate=0;d.stopEditing=function(){this.isEditing()&&this.isModified()&&this.updateFormField(null)};d.updateFormField=function(k){if(a.hasPendingAction(!0,
!0))return DocuViewareAPI.Status.GenericError;var q={};q.properties=this.formFieldApp.properties;q.sessionID=a.ajax.sessionID;q.contextID=a.ajax.contextID;q.pageNo=this.formFieldApp.pageNo;q.id=this.formFieldApp.id;k&&(dvJQuery.extend(!0,q.properties,k),q.rotation=k.rotation);this.updateNo+=1;this.pendingUpdate+=1;q.updateNo=this.updateNo;var n=this;0!==q.properties.parentId&&3===q.properties.type&&(q.id=q.properties.parentId,q.properties.id=q.properties.parentId,q.properties.parentId=0);a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/formfieldupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(q),contentType:"application/json",success:function(y){--n.pendingUpdate;if((y="string"===typeof y?eval("("+y+")"):y)&&null!=y.formFieldApp){if(n.isEditing()||y.updateNo!=n.updateNo||(n.formFieldApp=y.formFieldApp,n.render(),a.updateThumbnails([n.formFieldApp.pageNo])),a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:y.formFieldApp.id,pageNo:y.formFieldApp.pageNo})}else a.ajax.HandleError(y)},error:function(y){a.ajax.HandleError(y);
--n.pendingUpdate}});return DocuViewareAPI.Status.OK};d.isEditing=function(){return document.activeElement==this.control};d.hasPendingUpdate=function(){return 0<this.pendingUpdate};d.isModified=function(){var k=!1;switch(this.formFieldApp.properties.type){case 2:k=this.formFieldApp.properties.isChecked!=this.control.checked;break;case 4:k=this.formFieldApp.properties.value!=this.control.value;break;case 3:k=!0;break;case 7:k=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value;
break;case 8:k=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value}return k};d.blur=function(){this.control.style.backgroundColor="#CCD7FF";this.isModified()&&(this.setCurrentValue(),this.updateFormField(null))};d.focus=function(){this.control.style.backgroundColor=this.formFieldApp.properties.backgroundColor};d.setCurrentValue=function(){switch(this.formFieldApp.properties.type){case 2:this.formFieldApp.properties.isChecked=this.control.checked;break;case 4:this.formFieldApp.properties.value=
this.control.value;break;case 3:this.formFieldApp.properties.value=dvJQuery('input[name="'+a.uniqueID+"_formfield_"+this.formFieldApp.properties.parentId+'"]:checked').val();break;case 7:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value;break;case 8:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value}};d.render=function(){if(this.children)for(var k=0;k<this.children.length;k++)this.children[k].render();if(this.control){k=
{left:this.formFieldApp.properties.left,top:this.formFieldApp.properties.top,width:this.formFieldApp.properties.width,height:this.formFieldApp.properties.height};var q=a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);k.left*=96;k.top*=96;k.width*=96;k.height*=96;var n=a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),y=0;switch(n){case 2:y=180;break;case 3:y=270;break;case 1:y=90}a.Internal.Matrix.transformBBox(q.contentMatrix,-y,k);k.left+=q.pageLeft;k.top+=q.pageTop;this.control.style.display=
0==this.formFieldApp.properties.visibility||0==this.formFieldApp.properties.visibility?"block":"none";this.control.style.position="absolute";this.control.style.padding="0px";this.control.style.margin="0px";this.control.style.outline="0";this.control.style.backgroundColor=this.formFieldApp.properties.readOnly?"transparent":"rgba(204,215,255,0.7)";this.control.style.fontSize=0!=this.formFieldApp.properties.fontSize?this.formFieldApp.properties.fontSize*a.GetCurrentZoom()+"pt":12*a.GetCurrentZoom()+
"pt";this.control.style.color=this.formFieldApp.properties.fontColor;this.formFieldApp.properties.fontFamily&&(this.control.style.fontFamily='"'+this.formFieldApp.properties.fontFamily+'"');switch(this.formFieldApp.properties.fontStyle){case 0:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 1:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 2:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 3:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 4:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 5:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 6:this.control.style.fontStyle=
"italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 7:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 8:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 9:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";
break;case 10:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 11:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 12:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 13:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";
this.control.style.textDecoration="none";break;case 14:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 15:this.control.style.fontStyle="normal",this.control.style.fontWeight="normal",this.control.style.textDecoration="none"}if(2!=this.formFieldApp.properties.type&&3!=this.formFieldApp.properties.type){switch(this.formFieldApp.properties.borderStyle){case 0:this.control.style.borderStyle="solid";break;case 1:this.control.style.borderStyle=
"dashed";break;case 2:this.control.style.borderStyle="outset";break;case 3:this.control.style.borderStyle="inset";break;case 4:this.control.style.borderStyle="none";this.control.style.borderBottomStyle="solid";break;default:this.control.style.borderStyle="none"}this.control.style.borderWidth=96*this.formFieldApp.properties.borderWidth*a.GetCurrentZoom()+"px";this.control.style.borderColor=this.formFieldApp.properties.borderColor}3===this.formFieldApp.properties.type&&"checkbox"===this.formFieldApp.properties.appearance&&
(this.control.style["-webkit-appearance"]="checkbox",this.control.style["-moz-appearance"]="checkbox",this.control.style["-ms-appearance"]="checkbox",this.control.style["-o-appearance"]="checkbox",this.control.style.appearance="checkbox");this.control.alt=this.formFieldApp.properties.title;switch(this.formFieldApp.properties.textAlignment){case 0:this.control.style.textAlign="left";break;case 1:this.control.style.textAlign="center";break;case 2:this.control.style.textAlign="right"}this.control.disabled=
this.formFieldApp.properties.readOnly;this.control.style.left=k.left+"px";this.control.style.top=k.top+"px";this.control.style.width=k.width+"px";this.control.style.height=k.height+"px";this.control.style.transform=0!=y?"rotate("+y+"deg)":"none";this.control.style.cursor=4!=this.formFieldApp.properties.type||1!=n&&3!=n&&5!=n&&7!=n?"auto":"vertical-text"}};switch(b.properties.type){case 2:d.control=document.createElement("input");d.control.type="checkbox";d.control.checked=b.properties.isChecked;break;
case 4:b.properties.isMultiline?d.control=document.createElement("textarea"):(d.control=document.createElement("input"),d.control.type=b.properties.password?"password":"text");d.control.value=b.properties.value;b.properties.maxLength&&0<b.properties.maxLength&&(d.control.maxLength=b.properties.maxLength);break;case 3:if(b.properties.children){d.children=[];for(var e=0;e<b.properties.children.length;e++){var h=this.newController(b.properties.children[e]);h.control.checked=h.control&&h.formFieldApp.properties.value==
b.properties.value?!0:!1;d.children.push(h)}}else d.control=document.createElement("input"),d.control.type="radio",d.control.value=b.properties.value,d.control.checked="Off"!==b.properties.value;break;case 7:d.control=document.createElement("select");d.control.size=b.properties.items.length;b.properties.isMultiSelect&&(d.control.multiple=!0);if(null!=b.properties.items)for(e=0;e<b.properties.items.length;e++)h=document.createElement("option"),h.text=b.properties.items[e].Value,h.value=b.properties.items[e].Key,
b.properties.value==h.value&&(h.selected=!0),d.control.appendChild(h);break;case 8:if(d.control=document.createElement("select"),null!=b.properties.items)for(e=0;e<b.properties.items.length;e++)h=document.createElement("option"),h.text=b.properties.items[e].Value,h.value=b.properties.items[e].Key,b.properties.value==h.value&&(h.selected=!0),d.control.appendChild(h)}d.control&&(d.control.style.display="none",d.control.owner=d,d.control.name=0==b.properties.parentId?a.uniqueID+"_formfield_"+b.properties.id:
a.uniqueID+"_formfield_"+b.properties.parentId,d.control.id=a.uniqueID+"_formfield_"+b.properties.id,d.control.classList.add("dvFormField"),d.control.style.zIndex=a.dom.zindexManager.getFirstFormFieldZindex(),d.control.onblur=function(k){this.owner.blur()},d.control.onfocus=function(k){this.owner.focus()});null==a.cache.FormFields?a.cache.FormFields=[d]:a.cache.FormFields.push(d);d.control&&a.dom.viewerArea.appendChild(d.control);return d}},Twain:{Status:{OK:0,WARNING:1,ERROR:2,BAD_VERSION:3,NOT_RESPONDING:4},
updateStatusBar:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #3c763d";a.dom.twainAcquisitionStatusBarMessage.style.color="#3c763d";break;case a.Internal.Twain.Status.WARNING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #cc5500";a.dom.twainAcquisitionStatusBarMessage.style.color="#cc5500";break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:a.dom.twainAcquisitionStatusBarMessage.style.border=
"1px solid #a94442";a.dom.twainAcquisitionStatusBarMessage.style.color="#a94442";break;default:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid transparent",a.dom.twainAcquisitionStatusBarMessage.style.color="#000000"}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");a.dom.twainAcquisitionStatusBarMessage.innerHTML=d},updateTwainAcquisitionDialogMessageBox:function(b,d){d=d?d:"";switch(b){case a.Internal.Twain.Status.OK:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #3c763d");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#3c763d");break;case a.Internal.Twain.Status.WARNING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+
a.uniqueID).css("border","1px solid #cc5500");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#cc5500");break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #a94442");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#a94442");
break;default:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid transparent"),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#000000")}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(d=d+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).html(d)},acquire:function(b,d,e){if(!b||!d)return DocuViewareAPI.Status.GenericError;var h=b.endsWith("(64-bit)");h&&(b=b.substring(0,b.length-9));b={url:(h?a.twainServiceUri64:a.twainServiceUri32)+"TWAINAcquire2/",timeout:999999999,data:JSON.stringify({source:{sourceName:b,outputFormat:a.twainSourceConfig.acquisitionFormat,sourceConfig:a.twainSourceConfig}}),success:function(k){(k=
k.TwainAcquire2Result)&&k.status===DocuViewareAPI.Status.OK?d(k):(e&&e(k),a.ajax.HandleError(k))},error:function(){var k={status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),throwError:!1};e&&e(k);a.ajax.HandleError(k)}};a.ajax.PostAjaxRequestForCrossDomainApp(b);return DocuViewareAPI.Status.OK}},DigiSign:{isAddingSignature:!1,signatureAppearance:{image:null,isFreehandDrawn:!1,text:null,pageNo:0,coordinates:{top:0,width:0,left:0,height:0},textApearance:{fontName:"Arial",
fontSize:14,fontStyle:0,fontLineWidth:.1,verticalAlignment:0,horizontalAlignment:1,fontColor:"#000000"}},signatureCertificat:{data:null,displayedName:null,password:null},signatureTimeStamp:{server:null,username:null,password:null},setSignatureAppearanceTextInteractive:function(){dvJQuery(a.dom.signatureTextDialogForm).find("select[name='signature_font_name_select"+a.uniqueID+"']").find("option[value='"+a.Internal.DigiSign.signatureAppearance.textApearance.fontName+"']").prop("selected",!0);a.DisplayDialogForm(dvJQuery(a.dom.signatureTextDialogForm),
a.Localize("label_signature_text"),function(){dvJQuery(document).ready(function(){dvJQuery("input[name='signature_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureAlignmentPropertiesPreview()});dvJQuery("input[name='signature_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureLineAlignmentPropertiesPreview()});dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.signatureDialogFormTextInput).height());
dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("value",a.Internal.DigiSign.signatureAppearance.textApearance.fontColor)})},function(){var b=dvJQuery(a.dom.signatureDialogFormFontSizeInput).val();dvJQuery.isNumeric(b)&&0!==parseInt(b)||dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(a.dom.signatureTextDialogForm).show()},
function(){dvJQuery(a.dom.signatureTextDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){a.Internal.DigiSign.signatureAppearance.text=dvJQuery(a.dom.signatureDialogFormTextInput).val();a.Internal.DigiSign.signatureAppearance.textApearance.fontName=dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.fontSize=
parseInt(dvJQuery(a.dom.signatureDialogFormFontSizeInput).val())||a.Internal.DigiSign.signatureAppearance.textApearance.fontSize;a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle=dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment=parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val());a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment=
parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val());a.Internal.DigiSign.signatureAppearance.textApearance.fontColor=dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString");a.Internal.DigiSign.setSignatureAppearanceText(a.Internal.DigiSign.signatureAppearance.text,{fontName:a.Internal.DigiSign.signatureAppearance.textApearance.fontName,fontStyle:a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,fontSize:a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,
fontLineWidth:a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,horizontalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment,verticalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment,fontColor:a.Internal.DigiSign.signatureAppearance.textApearance.fontColor});dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}}])},setSignatureAppearanceImgInteractive:function(){dvJQuery(a.dom.digisignAppearanceInputImg).on("change",
function(){if(this.files&&this.files[0]){var b=this,d=new FileReader;d.addEventListener("load",function(e){a.Internal.DigiSign.isFreehandDrawn=!1;dvJQuery(b).val("");a.Internal.DigiSign.setSignatureAppearanceImage(e.target.result)});d.readAsDataURL(this.files[0])}});dvJQuery(a.dom.digisignAppearanceInputImg).trigger("click")},setSignatureAppearanceFreehandInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.signatureFreehandDialogForm),a.Localize("label_signature_pad"),function(){dvJQuery(document).ready(function(){dvJQuery(a.dom.signatureFreehandPad).jSignature()})},
function(){dvJQuery(a.dom.signatureFreehandDialogForm).show()},function(){dvJQuery(a.dom.signatureFreehandDialogForm).hide()},[{text:a.Localize("text_reset"),style:"float: left;",click:function(){dvJQuery(a.dom.signatureFreehandPad).jSignature("clear")}},{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){if(0!=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData",
"native").length){var b=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData","svgbase64");a.Internal.DigiSign.isFreehandDrawn=!0;a.Internal.DigiSign.setSignatureAppearanceImage("data:"+b[0]+","+b[1])}dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}}])},setCertificateInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignCertificateDialogForm),a.Localize("label_add_certificate"),this.signatureUiSetCertificateDialog,function(){dvJQuery(a.dom.digisignCertificateDialogForm).show()},
function(){dvJQuery(a.dom.digisignCertificateDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignCertificateName).val(),d=dvJQuery(a.dom.digisignCertificatePasswordInput).val();a.dom.digisignInputCertificateFile.files&&a.dom.digisignInputCertificateFile.files[0]?(b=new FileReader,b.addEventListener("load",
function(e){e=e.target.result;a.dom.digisignCertificateCertificateLabel.style.color=e?"black":"red";a.dom.digisignCertificatePasswordLabel.style.color=d?"black":"red";e&&d&&(a.Internal.DigiSign.setCertificate(e,null,d),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close"))}),b.readAsDataURL(a.dom.digisignInputCertificateFile.files[0])):(a.dom.digisignCertificateCertificateLabel.style.color=b?"black":"red",b&&(a.Internal.DigiSign.setCertificate(null,b,null),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")))}}])},
setTimeStampInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignTimeStampDialogForm),a.Localize("label_add_time_stamp"),function(){},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).show()},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_pad_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignTimestampServerInput).val(),
d=dvJQuery(a.dom.digisignTimestampLoginInput).val(),e=dvJQuery(a.dom.digisignTimestampPasswordInput).val();a.dom.digisignTimestampServerLabel.style.color=b?"black":"red";b&&(a.Internal.DigiSign.setTimeStamp(b,d,e),dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close"))}}])},setCertificate:function(b,d,e){this.signatureCertificat.data=b;this.signatureCertificat.displayedName=d;this.signatureCertificat.password=e;this.refreshSignatureUi()},setTimeStamp:function(b,d,e){this.signatureTimeStamp.server=
b;this.signatureTimeStamp.username=d;this.signatureTimeStamp.password=e;this.refreshSignatureUi()},setSignatureAppearanceText:function(b,d){this.signatureAppearance.text=b;this.signatureAppearance.textApearance={fontName:d.fontName,fontSize:d.fontSize,fontStyle:d.fontStyle,fontLineWidth:d.fontLineWidth,verticalAlignment:d.verticalAlignment,horizontalAlignment:d.horizontalAlignment,fontColor:d.fontColor};this.refreshSignatureUi()},setSignatureAppearanceImage:function(b){this.signatureAppearance.text=
null;this.signatureAppearance.image=b;this.refreshSignatureUi()},resetSignatureConfiguration:function(){this.signatureAppearance.text=null;this.signatureAppearance.image=null;this.refreshSignatureUi()},refreshSignatureUi:function(){dvJQuery(a.dom.digisignAppearancePreview)&&dvJQuery(a.dom.digisignAppearancePreviewText)&&(this.signatureAppearance.text?(this.signatureUiSetText(this.signatureAppearance.text),this.signatureUiHighlineTextButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):
this.signatureAppearance.image?(this.signatureUiSetImage(this.signatureAppearance.image),this.isFreehandDrawn?this.signatureUiHighlinePadButton():this.signatureUiHighlineImageButton(),a.dom.digisignAppearancePreviewDelete.style.display="block"):(this.signatureUiUnselectAllButtons(),a.dom.digisignAppearancePreviewDelete.style.display="none",dvJQuery(a.dom.digisignAppearancePreviewText).html(a.Localize("label_invisible_signature")),dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")));
dvJQuery(a.dom.digisignCertificateButton)&&(this.signatureCertificat.data&&this.signatureCertificat.password||this.signatureCertificat.displayedName?this.signatureUiValidateCertificateButton():this.signatureUiUnvalidateCertificateButton());dvJQuery(a.dom.digisignTimeStampButton)&&(this.signatureTimeStamp.server?this.signatureUiValidateTimestampButton():this.signatureUiUnvalidateTimestampButton());a.dom.digisignButtonSubmit.disabled=!this.areSignatureRequiredDataSet()},areSignatureRequiredDataSet:function(){return this.signatureAppearance.text||
this.signatureAppearance.image?!0:this.signatureCertificat.data&&this.signatureCertificat.password?!0:this.signatureCertificat.displayedName?!0:!1},beginAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!0;a.SetMouseMode(1);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;return DocuViewareAPI.Status.OK},stopAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!1;a.SetMouseMode(0);a.events.ownMouseEvents=!1},sendSignatureRequest:function(b,
d){var e={};if(a.Internal.DigiSign.areSignatureRequiredDataSet()){e.signaturePageNo=a.Internal.DigiSign.signatureAppearance.pageNo;e.signatureLeft=a.Internal.DigiSign.signatureAppearance.coordinates.left;e.signatureTop=a.Internal.DigiSign.signatureAppearance.coordinates.top;e.signatureWidth=a.Internal.DigiSign.signatureAppearance.coordinates.width;e.signatureHeight=a.Internal.DigiSign.signatureAppearance.coordinates.height;null!=a.Internal.DigiSign.signatureAppearance.text?(e.signatureText=a.Internal.DigiSign.signatureAppearance.text,
e.signatureFontName=a.Internal.DigiSign.signatureAppearance.textApearance.fontName,e.signatureFontStyle=a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,e.signatureFontSize=a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,e.signatureFontLineWidth=a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,e.signatureVerticalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment||0,e.signatureHorizontalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment||
0,e.signatureFontColor=a.Internal.DigiSign.signatureAppearance.textApearance.fontColor):null!=a.Internal.DigiSign.signatureAppearance.image&&(e.signatureImageData=a.Internal.DigiSign.signatureAppearance.image);if(a.Internal.DigiSign.signatureCertificat.data&&a.Internal.DigiSign.signatureCertificat.password||a.Internal.DigiSign.signatureCertificat.displayedName)e.certificateData=a.Internal.DigiSign.signatureCertificat.data||"",e.certificateDisplayName=a.Internal.DigiSign.signatureCertificat.displayedName||
"",e.certificatePassword=a.Internal.DigiSign.signatureCertificat.password||"";a.Internal.DigiSign.signatureTimeStamp.server?(e.includeTimestamp=!0,e.timeStampServer=a.Internal.DigiSign.signatureTimeStamp.server,e.timeStampUserName=a.Internal.DigiSign.signatureTimeStamp.username||"",e.timeStampPassword=a.Internal.DigiSign.signatureTimeStamp.password||""):e.includeTimestamp=!1;return a.ajax.PostBaseRequest("digisign",{data:e,success:function(h){var k="string"===typeof h?eval("("+h+")"):h;if(k&&k.status===
DocuViewareAPI.Status.OK){if(h="string"===typeof h?eval("("+h+")"):h,a.ajax.HandleServerContextResponse(h,!1),h={certificate:a.Internal.DigiSign.signatureCertificat.data||a.Internal.DigiSign.signatureCertificat.displayedName,image:null!=a.Internal.DigiSign.signatureAppearance.image,text:null!=a.Internal.DigiSign.signatureAppearance.text},b&&b(h),a.callbacks.onDocumentSigned)a.callbacks.onDocumentSigned(h)}else a.ajax.HandleError(h),d&&d()},error:function(h){a.ajax.HandleError(h);d&&d()}},!1)}a.DisplayError("Digsign appearance or certificate must be set to place the signature")},
addSignatureInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),d=a.Internal.Selection.selectionArea.getPageBounds(a.GetCurrentPage());b=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(b,0,d);a.Internal.DigiSign.signatureAppearance.coordinates.left=a.Internal.Utilities.roundEx(d.left,7);a.Internal.DigiSign.signatureAppearance.coordinates.top=a.Internal.Utilities.roundEx(d.top,
7);a.Internal.DigiSign.signatureAppearance.coordinates.width=a.Internal.Utilities.roundEx(d.width,7);a.Internal.DigiSign.signatureAppearance.coordinates.height=a.Internal.Utilities.roundEx(d.height,7);a.Internal.DigiSign.signatureAppearance.pageNo=a.GetCurrentPage();a.Internal.DigiSign.sendSignatureRequest();a.Internal.DigiSign.stopAddSignatureInteractive()},addSignature:function(b,d){a.Internal.DigiSign.signatureAppearance.pageNo=b;a.Internal.DigiSign.signatureAppearance.coordinates=d;a.Internal.DigiSign.sendSignatureRequest()},
signatureUiSetCertificateDialog:function(){dvJQuery(a.dom.digisignCertificateName).empty();if(null!=a.certificateNames&&0<a.certificateNames.length){for(var b=0;b<a.certificateNames.length;b++){var d=document.createElement("option");d.text=a.certificateNames[b];a.dom.digisignCertificateName.add(d)}a.dom.digisignCertificateNameContainer.style.marginRight="15px";a.dom.digisignCertificateNameContainer.style.display="block";a.dom.digisignCertificateInputContainer.style.display="none";a.dom.digisignCertificatePasswordContainer.style.display=
"none"}else a.dom.digisignCertificateNameContainer.style.display="none",a.dom.digisignCertificateInputContainer.style.display="block",a.dom.digisignCertificatePasswordContainer.style.display="block"},signatureUiValidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="block";a.dom.digisignCertificateIconUnvalidate.style.display="none";a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10";a.dom.digisignCertificateButtonDelete.style.display=
"block"},signatureUiUnvalidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="none";a.dom.digisignCertificateIconUnvalidate.style.display="block";a.dom.digisignCertificateButton.style.backgroundColor="white";a.dom.digisignCertificateButtonDelete.style.display="none"},signatureUiValidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="block";a.dom.digisignTimeStampIconUnvalidate.style.display="none";a.dom.digisignTimeStampButtonDelete.style.display=
"block";a.dom.digisignTimeStampButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10"},signatureUiUnvalidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="none";a.dom.digisignTimeStampIconUnvalidate.style.display="block";a.dom.digisignTimeStampButton.style.backgroundColor="white";a.dom.digisignTimeStampButtonDelete.style.display="none"},signatureUiUnselectAllButtons:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=
a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineTextButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonText.style.fill=
"#fff";a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineImageButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor=
a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.fill="#fff";a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.fill=a.dom.UIconfig.activeSelectedColor},signatureUiHighlinePadButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.fill=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.fill=
a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.fill="#fff"},signatureUiSetText:function(b){dvJQuery(a.dom.digisignAppearancePreviewText).html(b);dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")},signatureUiSetImage:function(b){dvJQuery(a.dom.digisignAppearancePreview).css("background-image","url("+b+")");dvJQuery(a.dom.digisignAppearancePreviewText).html("")}},
Redaction:{selectRedactionSelectorById:function(b,d){var e=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea");b=document.getElementById("redactionAreaButton"+t+"_"+b);if(!d)for(;0<e.length;)e[0].style.backgroundColor="rgb(255, 255, 255)",e[0].classList.remove("activeRedactionArea");null!=b&&(b.classList.contains("activeRedactionArea")?(b.style.backgroundColor="rgb(255, 255, 255)",b.classList.remove("activeRedactionArea")):(b.style.backgroundColor="rgb(200, 200, 200)",b.classList.add("activeRedactionArea")));
1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display="none"},refreshRedactionPanel:function(b){var d=null==a.cache.AnnotsRedactionReferences?0:a.cache.AnnotsRedactionReferences.length;for(1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display=
"none";a.dom.redactionAreaButtonsList.firstChild;)a.dom.redactionAreaButtonsList.removeChild(a.dom.redactionAreaButtonsList.firstChild);if(0==d)a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_no_mark"),a.dom.redactionApplyButton.disabled=!0,a.dom.redactionRemoveAllButton.style.display="none";else for(a.dom.redactionApplyButton.disabled=!1,1==d?(a.dom.redactionRemoveAllButton.style.display="none",a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_one_mark").replace("#",
d)):(a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_several_marks").replace("#",d),a.dom.redactionRemoveAllButton.style.display="block"),d=0;d<a.cache.AnnotsRedactionReferences.length;d++)this.addReadactionMarkSelector(a.cache.AnnotsRedactionReferences[d]);b&&a.events.isAddingRedactionMarksMode&&(b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"),a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b}))},
addReadactionMarkSelector:function(b){var d=a.dom.redactionAreaButtonModel.cloneNode(!0),e="";d.id="redactionAreaButton"+t+"_"+b.id;d.style.display="block";e=b.title&&""!=b.title?"Page "+b.pageNo+": "+b.title:"Page "+b.pageNo+": "+a.Localize("label_redaction_title_none");d.getElementsByClassName("redactionAreaSelectionText")[0].innerHTML=e;d.getElementsByClassName("redactionSelectorToolTipText")[0].innerHTML=e;d.getElementsByClassName("redactionAreaColorSquare")[0].style.backgroundColor=b.fillColor;
d.addEventListener("click",function(h){a.Internal.Redaction.disableAddRedactionMarksMode();a.Internal.Redaction.selectAnnotFromRedactionSelector(b.id,!0);h.ctrlKey?a.Internal.Redaction.selectRedactionSelectorById(b.id,!0):a.Internal.Redaction.selectRedactionSelectorById(b.id,!1)});d.addEventListener("dblclick",function(){a.Internal.Annotations.editSelectedAnnotation()});d.addEventListener("mouseenter",function(){"rgb(255, 255, 255)"==this.style.backgroundColor&&(this.style.backgroundColor="rgb(242, 242, 242)")});
d.addEventListener("mouseleave",function(){"rgb(242, 242, 242)"==this.style.backgroundColor&&(this.style.backgroundColor="rgb(255, 255, 255)")});d.getElementsByClassName("redactionAreaDeleteIconDiv")[0].addEventListener("click",function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.deleteRedactionMarkById(b.id);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])});a.dom.redactionAreaButtonsList.appendChild(d);dvJQuery("#"+d.id+" .redactionSelectorToolTipText").hide();dvJQuery("#"+d.id+" .redactionAreaSelectionText").bind("mouseenter",function(){this.offsetWidth<this.scrollWidth?dvJQuery("#"+d.id+" .redactionSelectorToolTipText").show():dvJQuery("#"+d.id+" .redactionSelectorToolTipText").hide()})},
selectAnnotFromRedactionSelector:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++){var e=a.cache.AnnotsRedactionReferences[d];if(e.id===b){var h=e.pageNo;a.SelectPage(h,function(){for(var k,q=0;q<a.cache.Annots.length;q++){var n=a.cache.Annots[q];if(n.annotApp.id==b){k=n.annotApp;break}}null!=k&&(k.visible&&a.Internal.Annotations.selectById(k.id),a.EnsurePageRegionVisibility(h,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},
deleteRedactionMarkSelector:function(b){var d=document.getElementById("redactionAreaButton"+t+"_"+b);a.Internal.Annotations.deleteAnnotsRedactionReferencesById(b);d.parentNode.removeChild(d);this.refreshRedactionPanel(!1)},enableAddRedactionMarksMode:function(){if(a.dom.redactionsPanel&&!a.events.isAddingRedactionMarksMode){if(a.hasPendingAction(!0,!1,!1,!0))return DocuViewareAPI.Status.GenericError;var b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+
"']")).minicolors("value");b=a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b});b===DocuViewareAPI.Status.OK&&(a.dom.redactionAddAreasButton.classList.add("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.color="#FFF",a.dom.redactionAddAreasButton.style.border="3px solid #FFFFFF78",a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -3px",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display="block",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display=
"none",a.events.isAddingRedactionMarksMode=!0,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!0));return b}return DocuViewareAPI.Status.OK},disableAddRedactionMarksMode:function(){a.events.isAddingRedactionMarksMode&&(a.dom.redactionAddAreasButton.classList.remove("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -1px",a.dom.redactionAddAreasButton.style.border="none",a.dom.redactionAddAreasButton.getElementsByClassName("addAreasButtonIcon")[0].style.display=
"block",a.dom.redactionAddAreasButton.getElementsByClassName("stopAddAreasButtonIcon")[0].style.display="none",a.Internal.Annotations.stopAnnotInteractiveAdd(),a.events.isAddingRedactionMarksMode=!1,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("disabled",!1));return DocuViewareAPI.Status.OK},deleteRedactionMarkById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++){var e=a.cache.AnnotsRedactionReferences[d];
if(e.id===b){a.SelectPage(e.pageNo,function(){for(var h,k=0;k<a.cache.Annots.length;k++){var q=a.cache.Annots[k];if(q.annotApp.id==b){h=q.annotApp;break}}null!=h&&h.visible&&a.DeleteAnnotationById(h.id)});break}}},hasPendingRedactionMark:function(){return null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length},removeAllRedactionMarks:function(){if(null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length){var b=a.cache.AnnotsRedactionReferences[0];
a.SelectPage(b.pageNo,function(){for(var d,e=0;e<a.cache.Annots.length;e++){var h=a.cache.Annots[e];if(h.annotApp.id==b.id){d=h.annotApp;break}}if(null!=d&&d.visible)return a.DeleteAnnotationById(d.id),a.Internal.Redaction.removeAllRedactionMarks()})}}},Annotations:{DEFAULT_GRIP_SIZE:6,CANVAS_PADDING:19,RECT_OUTER_MARGIN:1,currentInteractiveAnnotProperties:null,currentInteractiveAnnotPageNo:0,annotationsVisibility:"visible",interactionEnabled:!0,multiSelectionEnabled:!0,selected:[],cached:[],hoveredAnnot:null,
annotEdit:null,defaultAuthor:null,getMaxZindex:function(){var b=0;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];null!=e&&null!=e.canvas&&(b=Math.max(b,e.canvas.style.zIndex))}return b},defaultProperties:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),
4:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),
12:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)},defaultPropertiesDisplay:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),
1:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),
8:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),
15:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)},setDefaultPropertiesValues:function(b,d){this.defaultProperties[b]=this.mergeAnnotationProperties(b,d)},setDefaultPropertiesToDisplay:function(b,d){this.defaultPropertiesDisplay[b]=d},setDefaultAuthor:function(b){this.defaultAuthor=
b},getAnnotPropertiesValues:function(b){b=a.Internal.Annotations.defaultProperties[b];delete b.autoCreate;delete b.left;delete b.top;delete b.width;delete b.height;delete b.startX;delete b.startY;delete b.endX;delete b.endY;return b},getAnnotationTitleFromType:function(b){var d="";switch(b){case 0:d=a.Localize("_label_rubber_stamp_properties");break;case 1:d=a.Localize("_label_rectangle_properties");break;case 2:d=a.Localize("_label_rectangle_highlighter_properties");break;case 3:d=a.Localize("_label_line_properties");
break;case 4:d=a.Localize("_label_line_arrow_properties");break;case 5:d=a.Localize("_label_connected_line_properties");break;case 6:d=a.Localize("_label_ellipse_properties");break;case 7:d=a.Localize("_label_embedded_image_properties");break;case 8:d=a.Localize("_label_text_properties");break;case 9:d=a.Localize("_label_stickynote_properties");break;case 10:d=a.Localize("_label_freehand_properties");break;case 11:d=a.Localize("_label_freehand_highlighter_properties");break;case 12:d=a.Localize("_label_freehand_polygon_properties");
break;case 13:d=a.Localize("_label_link_properties");break;case 14:d=a.Localize("_label_polygon_properties");break;case 15:d=a.Localize("_label_ruler_properties");break;case 16:d=a.Localize("_label_polyruler_properties");break;case 17:d=a.Localize("_label_redaction_properties")}return d},editSelectedAnnotation:function(){if(null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canEdit){var b=a.dom.selectedAnnotation;a.EditAnnotInteractive(b,this.defaultPropertiesDisplay[b.annotApp.properties.type])}},
getAllFirstAnnotationComments:function(b){var d=[];if(null!=a.cache.AnnotsComments)for(var e=0;e<a.cache.AnnotsComments.length;e++){var h=!1,k=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[e].annotApp.id);if(null!=k){for(var q=0;q<d.length;q++)if(d[q].comment.annotApp.id===k.annotApp.id){h=!0;break}h||d.push({comment:k})}}null!=b&&b(d);return d},getFirstAnnotationCommentOfAnnotationFromId:function(b,d){if(null!=b&&""!=b&&(d=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),
null!=d))for(var e=0;e<d.length;e++)if(d[e].comment.annotApp.properties.previousGuid===b)return d[e];return null},getAnnotationCommentFromId:function(b){if(null!=b&&""!=b)for(var d=0;d<a.cache.AnnotsComments.length;d++)if(a.cache.AnnotsComments[d].annotApp.id===b)return a.cache.AnnotsComments[d];return null},getFirstAnnotationCommentOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
if(null!=d)b=d;else break}return b}return null},getFirstAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);return null!=b&&(b=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id),null!=b)?a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid):null},getLastAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);
if(null!=d)b=d;else break}return b}return null},getAnnotationCommentOwnerAnnotApp:function(b,d){if(null==b||2048!=b.properties.type)return null;if(d)for(;;)if(d=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b,!1),null!=d)if(2048==d.properties.type)b=d;else return d;else break;if(null!=a.cache.AnnotsComments)for(d=0;d<a.cache.AnnotsComments.length;d++){var e=a.cache.AnnotsComments[d];if(e.annotApp.id==b.properties.previousGuid)return e.annotApp}if(null!=a.cache.Annots)for(d=0;d<a.cache.Annots.length;d++)if(e=
a.cache.Annots[d],e.annotApp.id==b.properties.previousGuid)return e.annotApp;return null},deleteAnnotationComment:function(b,d){var e=!1;if(null!=a.cache.AnnotsComments)for(var h=0;h<a.cache.AnnotsComments.length;h++)if(a.cache.AnnotsComments[h].annotApp.id===b){b=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[h].annotApp.properties.nextGuid);e=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[h].annotApp.properties.previousGuid);null==b?null!=e&&(e.annotApp.properties.nextGuid=
null):null!=e?(e.annotApp.properties.nextGuid=b.annotApp.id,b.annotApp.properties.previousGuid=e.annotApp.id):b.annotApp.properties.previousGuid=null;a.cache.AnnotsComments.splice(h,1);e=!0;break}return e?(d&&a.refreshCommentsPanel(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},scrollToSelectedAnnotationCommentVisibility:function(b){var d=dvJQuery(a.dom.commentsContainer),e=d.innerHeight(),h=dvJQuery("#dvcomment-"+b+"-"+a.uniqueID);b=h.position().top;h=h.children(".dvcomment-header").outerHeight()+
h.children(".dvcomment-content").children(".dvcomment-message").outerHeight();0>b?d.animate({scrollTop:d.scrollTop()+b},600):b>e&&d.animate({scrollTop:d.scrollTop()+(h+(b-e))},600)},resetAnnotationCommentSelection:function(){var b=a.Internal.Annotations.getSelectedAnnotationComment();b&&dvJQuery(b).removeClass("dvcomment-selected");dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).children(".dvcomment").children().each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"",
"padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""});dvJQuery(this).children(".dvcomment-content").children(".dvanswer").each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"",
"border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""})})})},getSelectedAnnotationComment:function(){return dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).find(".dvcomment-selected")},selectAnnotationCommentById:function(b,d,e){var h=a.Internal.Annotations.getSelectedAnnotationComment();dvJQuery(h).attr("id")!=="dvcomment-"+b+"-"+a.uniqueID&&(a.Internal.Annotations.resetAnnotationCommentSelection(),h=document.getElementById("dvcomment-"+b+
"-"+a.uniqueID),dvJQuery(h).addClass("dvcomment-selected"),dvJQuery(h).children(".dvcomment-header").css({border:"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"7px","padding-top":"7px","padding-bottom":"7px","padding-right":"7px"}),dvJQuery(h).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"3px solid "+a.dom.UIconfig.headerColor,"border-left":"3px solid "+a.dom.UIconfig.headerColor,"border-right":"3px solid "+a.dom.UIconfig.headerColor,"padding-left":"8px",
"padding-right":"8px","padding-bottom":"8px"}));d&&a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b);e&&a.SelectSnapIn("comments",!0)},removeSelectedAnnotations:function(){for(var b=[],d=0;d<a.Internal.Annotations.selected.length;d++)a.Internal.Annotations.selected[d].annotApp.canDelete&&b.push(a.Internal.Annotations.selected[d]);0<b.length&&a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_annotation_removal"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_annotation_removal")+
(1<b.length?" ("+b.length.toString()+")":""))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Annotations.unselectAll();a.DeleteAnnotations(b);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},stopAnnotInteractiveAdd:function(){null!=this.currentInteractiveAnnotProperties&&(this.currentInteractiveAnnotProperties=null,this.currentInteractiveAnnotPageNo=
0,a.events.pathPoints=null,a.events.isDrawingPath=!1,a.SetMouseMode(0),a.events.ownMouseEvents=!1)},beginAddAnnotInteractive:function(b){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;this.unselectAll();this.currentInteractiveAnnotProperties=b;5==b.type||10==b.type||11==b.type||16==b.type?a.SetMouseMode(2):(a.SetMouseMode(1),3==b.type||4==b.type||15==b.type?a.Internal.Selection.selectionArea.setLineMode(1):a.Internal.Selection.selectionArea.setLineMode(0));a.events.ownMouseEvents=
!0;a.dom.removeViewAreaTouchAction();return DocuViewareAPI.Status.OK},addAnnotInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;if(0!==Math.abs(a.events.mouseX-a.events.mouseDownX)&&0!==Math.abs(a.events.mouseY-a.events.mouseDownY)||17!==this.currentInteractiveAnnotProperties.type){var b=this.currentInteractiveAnnotPageNo,d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Selection.selectionArea.getPageBounds(b),h=a.Internal.Matrix.scale(a.Internal.Matrix.invert(d.contentMatrix),
1/96,1/96,!1);a.Internal.Matrix.transformBBox(h,0,e);this.currentInteractiveAnnotProperties.left=a.Internal.Utilities.roundEx(e.left,7);this.currentInteractiveAnnotProperties.top=a.Internal.Utilities.roundEx(e.top,7);this.currentInteractiveAnnotProperties.width=a.Internal.Utilities.roundEx(e.width,7);this.currentInteractiveAnnotProperties.height=a.Internal.Utilities.roundEx(e.height,7);e=a.Internal.Selection.selectionArea.getStartPosition();var k=a.Internal.Selection.selectionArea.getEndPosition();
a.Internal.Matrix.transformPoint(h,e);a.Internal.Matrix.transformPoint(h,k);if(5==this.currentInteractiveAnnotProperties.type||10==this.currentInteractiveAnnotProperties.type||11==this.currentInteractiveAnnotProperties.type||16==this.currentInteractiveAnnotProperties.type){if(null==a.events.pathPoints)return;this.currentInteractiveAnnotProperties.startX=-1;this.currentInteractiveAnnotProperties.startY=-1;this.currentInteractiveAnnotProperties.endX=-1;this.currentInteractiveAnnotProperties.endY=-1;
this.currentInteractiveAnnotProperties.pathData=[];for(e=0;e<a.events.pathPoints.length;e++)131072!=a.events.pathPoints[e].x&&131072!=a.events.pathPoints[e].x?(k={x:a.events.pathPoints[e].x-d.pageLeft,y:a.events.pathPoints[e].y-d.pageTop},a.Internal.Matrix.transformPoint(h,k),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.x,7)),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.y,7))):(this.currentInteractiveAnnotProperties.pathData.push(131072),
this.currentInteractiveAnnotProperties.pathData.push(131072))}else this.currentInteractiveAnnotProperties.startX=a.Internal.Utilities.roundEx(e.x,7),this.currentInteractiveAnnotProperties.startY=a.Internal.Utilities.roundEx(e.y,7),this.currentInteractiveAnnotProperties.endX=a.Internal.Utilities.roundEx(k.x,7),this.currentInteractiveAnnotProperties.endY=a.Internal.Utilities.roundEx(k.y,7);d=a.Internal.Annotations.defaultAuthor;h=null;null!=d&&(h={author:d});a.ajax.PostBaseRequest("newannotation",{data:{annots:[{extProperties:h,
properties:this.currentInteractiveAnnotProperties,pageNo:b}]},success:function(q){if((q="string"===typeof q?eval("("+q+")"):q)&&null!=q.annots)for(var n=0;n<q.annots.length;n++){var y=q.annots[n].annotApp,x=a.Internal.Pages.getRenderingState(y.pageNo);x=a.Internal.Annotations.newController(y,x.pageLeft,x.pageTop,x.contentMatrix);a.dom.singlePageView&&y.pageNo!=a.GetCurrentPage()||x.render();a.updateThumbnails([y.pageNo]);if(a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:y.id,pageNo:y.pageNo});
17==y.properties.type&&(a.Internal.Annotations.addAnnotsRedactionReferences({id:y.id,pageNo:y.pageNo,title:y.properties.title,fillColor:y.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}else a.ajax.HandleError(q)}},!1);a.Internal.Annotations.stopAnnotInteractiveAdd()}else a.Internal.Redaction.disableAddRedactionMarksMode()},setAnnotationsComments:function(b){a.cache.AnnotsComments=b},addAnnotationComment:function(b){if(null!=b&&(null==a.cache.AnnotsComments?
a.cache.AnnotsComments=[b]:a.cache.AnnotsComments.push(b),null!=b.annotApp.properties.previousGuid&&""!=b.annotApp.properties.previousGuid)){var d=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);null!=d&&(d.annotApp.properties.nextGuid=b.annotApp.id)}},setAnnotsRedactionReferences:function(b){a.cache.AnnotsRedactionReferences=b},addAnnotsRedactionReferences:function(b){null!=b&&(null==a.cache.AnnotsRedactionReferences?a.cache.AnnotsRedactionReferences=[b]:a.cache.AnnotsRedactionReferences.push(b))},
updateAnnotRedactionReferences:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++)if(a.cache.AnnotsRedactionReferences[d].id===b.id){a.cache.AnnotsRedactionReferences[d]=b;break}},deleteAnnotsRedactionReferencesById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var d=0;d<a.cache.AnnotsRedactionReferences.length;d++)if(a.cache.AnnotsRedactionReferences[d].id===b){a.cache.AnnotsRedactionReferences.splice(d,1);break}},addAnnotation:function(b){null==
a.cache.Annots?a.cache.Annots=[b]:a.cache.Annots.push(b)},getAnnotationFromCanvas:function(b){if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.canvas===b)return e}return null},removePageAnnots:function(b){this.unselectAll(b);if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];e.annotApp.pageNo==b&&(e.canvas.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(e.canvas),a.cache.Annots.splice(d,1),d--)}},removeAll:function(){this.unselectAll();
a.cache.Annots=null;a.cache.AnnotsComments=null},disableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents="none")}this.interactionEnabled=!1},enableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var d=a.cache.Annots[b];null!=d&&null!=d.canvas&&(d.canvas.style.pointerEvents="")}this.interactionEnabled=!0},unselectAll:function(b){if(!b||null!=a.dom.selectedAnnotation&&
a.dom.selectedAnnotation.annotApp.pageNo==b)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide(),a.dom.selectedAnnotation=null;for(var d=this.selected.length-1;0<=d;d--)b&&this.selected[d].annotApp.pageNo!=b||this.selected[d].setSelectState(!1)},selectById:function(b){a.Internal.Annotations.multiSelectionEnabled||a.Internal.Annotations.unselectAll();if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return e.setSelectState(!0),
DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},unselectById:function(b){if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return e.setSelectState(!1),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},computeEditToolsCoordinates:function(b){if(0!=b.annotApp.properties.rotation){b.EditToolsMat=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},b.annotApp.properties.rotation,b.annotrectNew.width/2,b.annotrectNew.height/
2,!0);var d=b.getBBoxOnViewer(!0,!0);b.EditToolsMat.e+=b.annotrectNew.left-d.left;b.EditToolsMat.f+=b.annotrectNew.top-d.top}else b.EditToolsMat={a:1,b:0,c:0,d:1,e:b.annotrect.left-b.annotbox.left,f:b.annotrect.top-b.annotbox.top};b.EditToolsMat.e+=this.CANVAS_PADDING;b.EditToolsMat.f+=this.CANVAS_PADDING;b.EditToolsTopLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+
b.annotrectNew.width-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/
2+b.annotrectNew.width/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);b.EditToolsBottomMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-
b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);d=b.gripSize/2;b.EditToolsRotateGrip=a.Internal.Coordinates.newRectangle(b.annotrectNew.width/2-d,b.annotrectNew.height/2-d,b.gripSize,b.gripSize)},subrender:function(b,d,e){for(var h=0,k=b;k<e.annotApp.commands.length;k++)switch(e.annotApp.commands[k]){case 0:d.save();break;case 1:d.restore();break;case 2:d.transform(e.annotApp.args[k][0],e.annotApp.args[k][1],e.annotApp.args[k][2],e.annotApp.args[k][3],e.annotApp.args[k][4],
e.annotApp.args[k][5]);break;case 3:d.fillStyle="rgba("+e.annotApp.args[k][1]+","+e.annotApp.args[k][2]+","+e.annotApp.args[k][3]+","+e.annotApp.args[k][0]/255+")";break;case 4:d.beginPath();d.moveTo(e.annotApp.args[k][0],e.annotApp.args[k][1]);d.lineTo(e.annotApp.args[k][0]+e.annotApp.args[k][2],e.annotApp.args[k][1]);d.lineTo(e.annotApp.args[k][0]+e.annotApp.args[k][2],e.annotApp.args[k][1]+e.annotApp.args[k][3]);d.lineTo(e.annotApp.args[k][0],e.annotApp.args[k][1]+e.annotApp.args[k][3]);d.closePath();
d.clip();break;case 5:d.globalAlpha=.5;break;case 6:d.globalAlpha=e.annotApp.args[k][0]/255;break;case 7:for(var q=DocuViewareEncodingUtilities.base64.decode(e.annotApp.data[k]),n=q.length,y=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(n),x=0;x<n;x++)y[x]=q.charCodeAt(x);q=e.annotApp.args[k].length/2;n=[{x:0,y:0},{x:0,y:0},{x:0,y:0}];var K=0;d.beginPath();for(x=0;x<q;x++){var F=128<=y[x];F&&(y[x]-=128);switch(y[x]){case 0:d.moveTo(e.annotApp.args[k][2*x],e.annotApp.args[k][2*x+1]);K=0;break;
case 1:d.lineTo(e.annotApp.args[k][2*x],e.annotApp.args[k][2*x+1]);K=0;break;case 3:n[K].x=e.annotApp.args[k][2*x],n[K].y=e.annotApp.args[k][2*x+1],K+=1,3==K&&(d.bezierCurveTo(n[0].x,n[0].y,n[1].x,n[1].y,n[2].x,n[2].y),K=0)}F&&d.closePath()}d.fill();break;case 8:var Y=e.annotApp.args[k][0],aa=e.annotApp.args[k][1],fa=e.annotApp.args[k][2],ca=e.annotApp.args[k][3];h++;if(0==b&&e.cachedImages.length>=h)d.drawImage(e.cachedImages[h-1],Y,aa,fa,ca);else{var la=new Image;la.onload=function(){d.drawImage(la,
Y,aa,fa,ca);a.Internal.Annotations.subrender(k+1,d,e)};la.src=null==e.annotApp.data[k]?"data:image/png;base64,"+e.annotApp.properties.bitmapData:"data:image/png;base64,"+e.annotApp.data[k];e.cachedImages.push(la);return}}d.restore();e.isSelected&&(d.save(),d.strokeStyle="rgba(153, 209, 255, 0.5)",d.beginPath(),d.moveTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,this.CANVAS_PADDING),d.lineTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.stroke(),
d.beginPath(),d.moveTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),d.lineTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),d.stroke(),d.restore(),d.save(),d.globalCompositeOperation="destination-over",d.fillStyle="rgba(204, 232, 255, 0.2)",d.fillRect(this.CANVAS_PADDING+1,this.CANVAS_PADDING+1,e.canvas.width-2*(1+this.CANVAS_PADDING),e.canvas.height-2*(1+this.CANVAS_PADDING)),d.restore(),d.save(),
d.lineWidth=1,d.strokeStyle="rgba(100, 100, 100, 1.0)",d.setLineDash([5,2]),this.computeEditToolsCoordinates(e),b=e.EditToolsMat,d.transform(b.a,b.b,b.c,b.d,b.e,b.f),d.strokeRect(-a.Internal.Annotations.RECT_OUTER_MARGIN,-a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.width+2*a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.height+2*a.Internal.Annotations.RECT_OUTER_MARGIN),e.annotApp.canResize&&!e.annotApp.properties.autoSize&&(e.annotApp.properties.keepAspectRatio||e.annotApp.properties.squaredBox||
(d.fillRect(e.EditToolsTopLeftGrip.Left,e.EditToolsTopLeftGrip.Top,e.EditToolsTopLeftGrip.Width,e.EditToolsTopLeftGrip.Height),d.fillRect(e.EditToolsTopRightGrip.Left,e.EditToolsTopRightGrip.Top,e.EditToolsTopRightGrip.Width,e.EditToolsTopRightGrip.Height),d.fillRect(e.EditToolsBottomRightGrip.Left,e.EditToolsBottomRightGrip.Top,e.EditToolsBottomRightGrip.Width,e.EditToolsBottomRightGrip.Height),d.fillRect(e.EditToolsBottomLeftGrip.Left,e.EditToolsBottomLeftGrip.Top,e.EditToolsBottomLeftGrip.Width,
e.EditToolsBottomLeftGrip.Height)),d.fillRect(e.EditToolsTopMiddleGrip.Left,e.EditToolsTopMiddleGrip.Top,e.EditToolsTopMiddleGrip.Width,e.EditToolsTopMiddleGrip.Height),d.fillRect(e.EditToolsMiddleRightGrip.Left,e.EditToolsMiddleRightGrip.Top,e.EditToolsMiddleRightGrip.Width,e.EditToolsMiddleRightGrip.Height),d.fillRect(e.EditToolsBottomMiddleGrip.Left,e.EditToolsBottomMiddleGrip.Top,e.EditToolsBottomMiddleGrip.Width,e.EditToolsBottomMiddleGrip.Height),d.fillRect(e.EditToolsMiddleLeftGrip.Left,e.EditToolsMiddleLeftGrip.Top,
e.EditToolsMiddleLeftGrip.Width,e.EditToolsMiddleLeftGrip.Height)),e.annotApp.canRotate&&(b=e.gripSize/2,d.beginPath(),d.arc(e.EditToolsRotateGrip.Left+b,e.EditToolsRotateGrip.Top+b,b,0,2*Math.PI,!1),d.fill()),d.restore());d=null},prerenderPendingFreenhandAnnot:function(b){var d=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,e=parseFloat(a.dom.freehandCan.style.top),h=parseFloat(a.dom.freehandCan.style.left),k=
a.dom.freehandCan.getContext("2d");k.clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);k.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom();k.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor;k.globalAlpha=11==a.Internal.Annotations.currentInteractiveAnnotProperties.type?.5:a.Internal.Annotations.currentInteractiveAnnotProperties.opacity;k.beginPath();d||(k.lineJoin="round",k.lineCap="round");var q=a.events.pathPoints;
if(null!==q){for(var n=0;n<q.length;n++)131072===q[n].x&&131072===q[n].y?(k.stroke(),k.beginPath(),d||(k.lineJoin="round",k.lineCap="round")):k.lineTo(q[n].x-h,q[n].y-e);d&&null!=b&&k.lineTo(b.x-h,b.y-e);k.stroke()}},dropPendingFreenhandAnnotLastSubPath:function(){var b=a.events.pathPoints;if(null!==b){for(var d=b.length-1;0!==d&&(131072!==b[d].x||131072!==b[d].y)&&5!==a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!==a.Internal.Annotations.currentInteractiveAnnotProperties.type;)d--;
a.events.pathPoints=0===d?null:b.slice(0,d);this.prerenderPendingFreenhandAnnot()}},setAnnotationsVisibility:function(b){a.Internal.Annotations.annotationsVisibility=b;if(null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++)a.cache.Annots[d].canvas.style.visibility=b;return DocuViewareAPI.Status.OK},newController:function(b,d,e,h){var k={cachedImages:[]};k.annotApp=b;k.updateNo=0;k.pendingUpdate=0;k.isMoving=!1;k.isRotating=!1;k.resizingMode=-1;k.isSelected=!1;k.stopMoving=function(){this.isMoving&&
(this.isMoving=!1)};k.stopResizing=function(){-1!=this.resizingMode&&(this.resizingMode=-1)};k.stopRotating=function(){this.isRotating&&(this.isRotating=!1)};k.stopEditing=function(){this.isEditing()&&(this.stopMoving(),this.stopResizing(),this.stopRotating(),this.isModified()&&this.updateAnnotation(!1,null,a.Internal.Annotations.multiSelectionEnabled))};k.hasPendingUpdate=function(){return 0<this.pendingUpdate};k.isEditing=function(){return this.isRotating||this.isMoving||-1!=this.resizingMode};
k.setSelectState=function(n,y){if(n!=this.isSelected){if(n)this.gripSize=a.Internal.Annotations.DEFAULT_GRIP_SIZE*(y?3:1),this.canvas.bakzIndex=this.canvas.style.zIndex,this.canvas.style.zIndex=a.Internal.Annotations.getMaxZindex()+1,this.canvas.tabIndex=1,a.Internal.Annotations.selected.push(this);else for(this.canvas.style.zIndex=this.canvas.bakzIndex,this.canvas.removeAttribute("tabindex"),this.stopEditing(),y=a.Internal.Annotations.selected.length-1;0<=y;y--)if(a.Internal.Annotations.selected[y]===
this){a.Internal.Annotations.selected.splice(y,1);break}this.isSelected=n;this.render(!1,n);if(a.callbacks.onAnnotationSelectedStateChanged)a.callbacks.onAnnotationSelectedStateChanged({id:this.annotApp.id,state:n})}};k.editPointsHitTest=function(n,y,x){if(a.serverCtx.annotationEditorMode&&this.annotApp.canMove&&this.annotApp.canSelect&&this.annotApp.pageNo==a.GetCurrentPage()){x=this.canvas.getBoundingClientRect();n={x:n-x.left,y:y-x.top};a.Internal.Annotations.computeEditToolsCoordinates(this);
a.Internal.Matrix.transformPoint(a.Internal.Matrix.invert(this.EditToolsMat),n);if(!this.annotApp.properties.keepAspectRatio&&!this.annotApp.properties.squaredBox){if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopLeftGrip,2))return 1;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopRightGrip,2))return 3;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomRightGrip,2))return 5;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomLeftGrip,2))return 7}if(a.Internal.Coordinates.isPointInsideRect(n,
this.EditToolsMiddleLeftGrip,2))return 0;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopMiddleGrip,2))return 2;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsMiddleRightGrip,2))return 4;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomMiddleGrip,2))return 6;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsRotateGrip,2))return 8}return-1};k.isModified=function(){return this.rotationinit!=this.annotApp.properties.rotation||this.annotrect.left!=
this.annotrectNew.left||this.annotrect.top!=this.annotrectNew.top||this.annotrect.width!=this.annotrectNew.width||this.annotrect.height!=this.annotrectNew.height};k.hasPendingRotateUpdate=function(){return this.rotationinit!=this.annotApp.properties.rotation};k.hasPendingResizeUpdate=function(){return this.annotrectNew.width!=this.annotrect.width||this.annotrectNew.height!=this.annotrect.height};k.hasPendingMoveUpdate=function(){return this.annotrectNew.left!=this.annotrect.left||this.annotrectNew.top!=
this.annotrect.top};k.addWidth=function(n,y){this.annotrectNew.width+=n;this.annotApp.properties.squaredBox?this.annotrectNew.height+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.height=this.annotrectNew.width/this.annotApp.properties.aspectRatio);y&&this.render(!1)};k.addHeight=function(n,y){this.annotrectNew.height+=n;this.annotApp.properties.squaredBox?this.annotrectNew.width+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.width=this.annotrectNew.height*this.annotApp.properties.aspectRatio);
y&&this.render(!1)};k.updateCursor=function(n){if(!this.isEditing())if(this.annotApp.canSelect&&!n&&a.serverCtx.annotationEditorMode)if(this.annotApp.pageNo!=a.GetCurrentPage())this.cursorMgr.setStdCursor("not-allowed");else{n=this.editPointsHitTest(a.events.mouseX,a.events.mouseY,a.Internal.Annotations.DEFAULT_GRIP_SIZE);if(this.isSelected){0<=n&&7>=n&&(n+=Math.trunc((this.annotApp.properties.rotation+22.5)/45),n%=8);if(0<=n&&7>=n&&this.annotApp.canResize&&!this.annotApp.properties.autoSize){if(this.hasPendingRotateUpdate()||
this.hasPendingMoveUpdate()){this.cursorMgr.setStdCursor("wait");return}if(0==n){this.cursorMgr.setStdCursor("w-resize");return}if(1==n){this.cursorMgr.setStdCursor("nw-resize");return}if(2==n){this.cursorMgr.setStdCursor("n-resize");return}if(3==n){this.cursorMgr.setStdCursor("ne-resize");return}if(4==n){this.cursorMgr.setStdCursor("w-resize");return}if(5==n){this.cursorMgr.setStdCursor("nwse-resize");return}if(6==n){this.cursorMgr.setStdCursor("n-resize");return}if(7==n){this.cursorMgr.setStdCursor("nesw-resize");
return}}if(this.annotApp.canRotate&&8==n){this.hasPendingResizeUpdate()?this.cursorMgr.setStdCursor("wait"):this.cursorMgr.setCustomCursorClass("rotateCursor");return}}this.annotApp.canMove?this.hasPendingResizeUpdate()&&0!=this.annotApp.properties.rotation?this.cursorMgr.setStdCursor("wait"):13===this.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&2==a.dom.UIconfig.linkAnnotationClickBehaviour?this.cursorMgr.setStdCursor("pointer"):this.cursorMgr.setStdCursor("all-scroll"):this.cursorMgr.setStdCursor("default")}else this.cursorMgr.setStdCursor("")};
k.getBBoxOnViewer=function(n,y){var x=n?0:this.pageLeft;n=n?0:this.pageTop;var K=this.annotrectNew.left-this.annotrect.left,F=this.annotrectNew.top-this.annotrect.top;K={left:this.annotbox.left+x+K,top:this.annotbox.top+n+F,width:this.annotbox.width+(this.annotrectNew.left+this.annotrectNew.width-(this.annotrect.left+this.annotrect.width)-K),height:this.annotbox.height+(this.annotrectNew.top+this.annotrectNew.height-(this.annotrect.top+this.annotrect.height)-F)};0!=this.annotApp.properties.rotation&&
(y=!this.hasPendingResizeUpdate()||y?{x:this.annotrectNew.left+x+this.annotrectNew.width/2,y:this.annotrectNew.top+n+this.annotrectNew.height/2}:{x:this.annotrect.left+x+this.annotrect.width/2,y:this.annotrect.top+n+this.annotrect.height/2},a.Internal.Matrix.transformBBox({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,K,y));return K};k.render=function(n,y){var x=this.getBBoxOnViewer(),K=Math.round(x.left-a.Internal.Annotations.CANVAS_PADDING),F=Math.round(x.top-a.Internal.Annotations.CANVAS_PADDING),
Y=Math.round(x.width+2*a.Internal.Annotations.CANVAS_PADDING),aa=Math.round(x.height+2*a.Internal.Annotations.CANVAS_PADDING);this.canvas.style.left=K+"px";this.canvas.style.top=F+"px";if(this.isSelected){if(null!=a.dom.annotationsActionButtons)if(null!=a.dom.commentsArea&&a.IsSnapInAvailable("comments")?this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()),1===a.Internal.Annotations.selected.length){dvJQuery(a.dom.annotationsActionButtons).show();var fa=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationActionButtonsSplitter']:visible").length,
ca=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationAction']:visible").length-fa;dvJQuery(a.dom.annotationsActionButtons).width(17*fa+17*ca);0===ca&&0===fa?dvJQuery(a.dom.annotationsActionButtons).hide():(dvJQuery(a.dom.annotationsActionButtons).css("left",K+Y-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",F+aa+"px"))}else dvJQuery(a.dom.annotationsActionButtons).hide();y&&(a.dom.selectedAnnotation=
this)}n||(this.canvas.width!=Y&&(this.canvas.width=Y),this.canvas.height!=aa&&(this.canvas.height=aa),n=this.annotrectNew.width/this.annotrect.width,y=this.annotrectNew.height/this.annotrect.height,1<n&&1>this.annotrect.width&&(n=1),1<y&&1>this.annotrect.height&&(y=1),K=this.canvas.getContext("2d"),K.clearRect(0,0,this.canvas.width,this.canvas.height),K.save(),F=this.annotmat,F=a.Internal.Matrix.translate(F,-this.annotbox.left,-this.annotbox.top),F=a.Internal.Matrix.scale(F,n,y,!1),0!=this.annotApp.properties.rotation&&
(F=a.Internal.Matrix.rotateAt(F,this.annotApp.properties.rotation,this.annotbox.width/2*n,this.annotbox.height/2*y,!1),F=a.Internal.Matrix.translate(F,(x.width-this.annotbox.width*n)/2,(x.height-this.annotbox.height*y)/2)),F=a.Internal.Matrix.translate(F,a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING),K.transform(F.a,F.b,F.c,F.d,F.e,F.f),a.dom.UIconfig.annotsDropShadow&&this.annotApp.supportShadow&&(K.shadowOffsetX=2,K.shadowOffsetY=2,K.shadowBlur=4,K.shadowColor="rgba(100, 100, 100, 0.6)"),
a.Internal.Annotations.subrender(0,K,this))};k.canvas=document.createElement("canvas");k.canvas.style.display="block";k.canvas.style.position="absolute";k.canvas.style.padding="0px";k.canvas.style.margin="0px";k.canvas.style.outline="0";a.Internal.Annotations.interactionEnabled||(k.canvas.style.pointerEvents="none");k.canvas.style.visibility=a.Internal.Annotations.annotationsVisibility;var q=Math.min(Math.max(k.annotApp.zorder,0),65535);k.canvas.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()+
q;k.cursorMgr=CreateDocuViewareCursorManager(k.canvas,a.isIEorEdge);k.updateAnnotationDeferred=function(n,y){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var x=this;this.timeout=setTimeout(function(){x.updateAnnotation(n,y,!1)},300);return DocuViewareAPI.Status.OK};k.getPendingAnnotationUpdateData=function(n,y,x){var K={x:this.annotrectNew.left+this.annotrectNew.width/2,y:this.annotrectNew.top+this.annotrectNew.height/2},F={x:this.annotrectNew.width,y:this.annotrectNew.height};if(0!=
this.annotApp.properties.rotation&&this.hasPendingResizeUpdate()){var Y=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,this.annotrect.left+this.annotrect.width/2,this.annotrect.top+this.annotrect.height/2,!0);a.Internal.Matrix.transformPoint(Y,K)}Y=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:0,f:0}),1/96,1/96,!1);var aa=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,
b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:this.annotmat.e,f:this.annotmat.f}),1/96,1/96,!1);a.Internal.Matrix.transformPoint(aa,K);a.Internal.Matrix.transformPoint(Y,F);x&&(this.updateNo+=1,this.pendingUpdate+=1);n={clientTag:this.annotApp.clientTag,properties:this.annotApp.properties,"delete":n,pageNo:this.annotApp.pageNo,id:this.annotApp.id,updateNo:this.updateNo};n.properties.left=a.Internal.Utilities.roundEx(K.x,7);n.properties.top=a.Internal.Utilities.roundEx(K.y,7);n.properties.width=
a.Internal.Utilities.roundEx(Math.abs(F.x),7);n.properties.height=a.Internal.Utilities.roundEx(Math.abs(F.y),7);y&&dvJQuery.extend(!0,n.properties,y);null!=n.properties&&null!=n.properties.bitmapData&&(n.properties.bitmapData=null);return n};k.updateAnnotation=function(n,y,x,K){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.GenericError;var F=this.getPendingAnnotationUpdateData(n,y,!0),Y={annots:[F],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID};if(x)for(x=a.Internal.Annotations.selected.length-
1;0<=x;x--){var aa=a.Internal.Annotations.selected[x];aa!=this&&Y.annots.push(aa.getPendingAnnotationUpdateData(n,y,!1))}if(null!=K)for(x=0;x<K.length;x++)aa=K[x],aa!=this&&Y.annots.push(aa.getPendingAnnotationUpdateData(n,y,!1));var fa=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!n,data:JSON.stringify(Y),contentType:"application/json",success:function(ca){--fa.pendingUpdate;ca="string"===typeof ca?eval("("+ca+")"):ca;var la=
[];if(ca&&null!=ca.annots){for(var Ga=!1,ya=0;ya<ca.annots.length;ya++)if(n){if(null!=ca.annots[ya].deletedAnnotsCommentId)for(var xa=ca.annots[ya].deletedAnnotsCommentId.length,wa=0;wa<xa;wa++)a.Internal.Annotations.deleteAnnotationComment(ca.annots[ya].deletedAnnotsCommentId[wa],wa==xa-1);17==ca.annots[ya].annotType&&(a.Internal.Annotations.deleteAnnotsRedactionReferencesById(ca.annots[ya].id),a.dom.redactionsPanel&&(a.Internal.Redaction.deleteRedactionMarkSelector(ca.annots[ya].id),a.Internal.Redaction.refreshRedactionPanel(!1)));
null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();a.updateThumbnails([ca.annots[ya].pageNo]);if(null!=a.cache.Annots)for(wa=0;wa<a.cache.Annots.length;wa++)xa=a.cache.Annots[wa],xa.annotApp.pageNo===ca.annots[ya].pageNo&&(xa.annotApp.id===ca.annots[ya].id?(a.dom.viewerArea.removeChild(xa.canvas),a.cache.Annots.splice(wa,1),wa--):xa.annotApp.idx>F.idx&&xa.annotApp.idx--);if(a.callbacks.onAnnotationDeleted)a.callbacks.onAnnotationDeleted({id:ca.annots[ya].id,pageNo:ca.annots[ya].pageNo})}else{if(!fa.isEditing()&&
(Ga||ca.annots[ya].updateNo==fa.updateNo)&&(0==ya&&1<ca.annots.length&&(Ga=!0),null!=a.cache.Annots))for(wa=0;wa<a.cache.Annots.length;wa++)if(xa=a.cache.Annots[wa],xa.annotApp.pageNo===ca.annots[ya].pageNo&&xa.annotApp.id===ca.annots[ya].id){var Da=null!=xa.annotApp.properties&&null!=xa.annotApp.properties.bitmapData?xa.annotApp.properties.bitmapData:null;xa.annotApp=ca.annots[ya].annotApp;if(null==xa.annotApp.properties||null==xa.annotApp.properties.bitmapData)fa.annotApp.properties.bitmapData=
Da;xa.reset();xa.render();-1===la.indexOf(ca.annots[ya].pageNo)&&la.push(ca.annots[ya].pageNo)}if(a.callbacks.onAnnotationEdited)a.callbacks.onAnnotationEdited({id:ca.annots[ya].id,pageNo:ca.annots[ya].pageNo});wa=ca.annots[ya].annotApp;17==wa.properties.type&&(a.Internal.Annotations.updateAnnotRedactionReferences({id:wa.id,pageNo:wa.pageNo,title:wa.properties.title,fillColor:wa.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!1))}0<la.length&&a.updateThumbnails(la)}else a.ajax.HandleError(ca)},
error:function(ca){a.ajax.HandleError(ca);--fa.pendingUpdate}});return DocuViewareAPI.Status.OK};a.serverCtx.annotationEditorMode&&(window.PointerEvent?(dvJQuery(k.canvas).css("touch-action","none"),k.canvas.onpointerdown=function(n){switch(n.pointerType){case "mouse":this.mousedown(n);break;case "pen":this.mousedown(n,!0);n.preventDefault();break;case "touch":this.mousedown(n,!0);n.preventDefault();break;default:this.mousedown(n)}},k.canvas.onpointermove=function(n){switch(n.pointerType){case "mouse":this.mousemove(n);
break;case "pen":this.mousemove(n);n.preventDefault();break;case "touch":this.mousemove(n);n.preventDefault();break;default:this.mousemove(n)}},k.canvas.onpointerup=function(n){switch(n.pointerType){case "mouse":this.mouseup(n);break;case "pen":this.mouseup(n);n.preventDefault();break;case "touch":this.mouseup(n);n.preventDefault();break;default:this.mouseup(n)}},k.canvas.onpointerenter=function(n){switch(n.pointerType){case "mouse":this.mouseenter(n);break;case "pen":this.mouseenter(n);break;default:this.mouseenter(n)}},
k.canvas.onpointerleave=function(n){switch(n.pointerType){case "mouse":this.mouseleave(n);break;case "pen":this.mouseleave(n);break;default:this.mouseleave(n)}}):(k.canvas.ontouchstart=function(n){1==n.changedTouches.length&&(this.mousedown(n.changedTouches[0],!0),n.cancelable&&n.preventDefault())},k.canvas.ontouchmove=function(n){1==n.changedTouches.length&&(this.mousemove(n.changedTouches[0]),n.cancelable&&n.preventDefault())},k.canvas.ontouchend=function(n){1==n.changedTouches.length&&(this.mouseup(n.changedTouches[0]),
n.cancelable&&n.preventDefault())},k.canvas.onmousedown=function(n){this.mousedown(n)},k.canvas.onmousemove=function(n){this.mousemove(n)},k.canvas.onmouseup=function(n){this.mouseup(n)},k.canvas.onmouseenter=function(n){this.mouseenter(n)},k.canvas.onmouseleave=function(n){this.mouseleave(n)}),k.canvas.onkeyup=function(n){this.keyup(n)},k.canvas.ondblclick=function(n){this.dblClick(n)},k.canvas.mouseenter=function(n){n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.Internal.Annotations.hoveredAnnot=
n;if(a.callbacks.onAnnotationMouseEnter)a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})},k.canvas.mouseleave=function(n){a.Internal.Annotations.hoveredAnnot=null;a.callbacks.onAnnotationMouseLeave&&(n=a.Internal.Annotations.getAnnotationFromCanvas(this),a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id}))},k.canvas.mouseup=function(n,y){a.events.mouseup(n,y)},k.canvas.mousedown=function(n,y){if(a.events.ownMouseEvents)a.events.mousedown(n,y);else{var x=a.Internal.Annotations.getAnnotationFromCanvas(this),
K=x.annotApp.pageNo!=a.GetCurrentPage();if(!K){if(x.annotApp.canSelect){if(a.Internal.Annotations.multiSelectionEnabled)if(!n.ctrlKey){var F=!0;x.isSelected&&1<a.Internal.Annotations.selected.length&&(F=!1);F&&a.Internal.Annotations.unselectAll()}else{if(x.isSelected){x.setSelectState(!1,y);return}}else a.Internal.Annotations.unselectAll();F=!0;13===x.annotApp.properties.type&&(a.serverCtx.annotationEditorMode&&2!=a.dom.UIconfig.linkAnnotationClickBehaviour||(F=!1));F&&(x.setSelectState(!0,y),F=x.editPointsHitTest(n.clientX,
n.clientY,a.Internal.Annotations.DEFAULT_GRIP_SIZE*(y?3:1)),x.annotApp.canResize&&!x.annotApp.properties.autoSize&&-1!=F&&8!=F?x.hasPendingRotateUpdate()||x.hasPendingMoveUpdate()||(x.resizingMode=F):x.annotApp.canRotate&&8==F?x.hasPendingResizeUpdate()||(x.isRotating=!0):!x.annotApp.canMove||x.hasPendingResizeUpdate()&&0!=x.annotApp.properties.rotation||(x.isMoving=!0))}a.cache.AnnotsComments&&(F=a.Internal.Annotations.getFirstAnnotationCommentOfAnnotationFromId(x.annotApp.id),null!=F?a.Internal.Annotations.selectAnnotationCommentById(F.comment.annotApp.id,
!0,!1):a.Internal.Annotations.resetAnnotationCommentSelection())}a.events.mouseX=n.clientX;a.events.mouseY=n.clientY;x.updateCursor();K&&3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.events.mousedown(n,y)}},k.canvas.mousemove=function(n){if(a.events.ownMouseEvents){var y=a.Internal.Annotations.getAnnotationFromCanvas(this);y.updateCursor(!0);a.events.mousemove(n)}else a.events.mousemove(n),y=a.Internal.Annotations.getAnnotationFromCanvas(this),y.updateCursor()},k.canvas.keyup=function(n){13==n.keyCode?
a.Internal.Annotations.editSelectedAnnotation():46==n.keyCode&&a.Internal.Annotations.removeSelectedAnnotations()},k.canvas.dblClick=function(n){!a.dom.enableAnnotEditionOnDblClick||13===k.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour||a.Internal.Annotations.editSelectedAnnotation()});k.updatePageInfo=function(n,y,x){null!=x&&(this.annotmat=x);this.pageLeft=n;this.pageTop=y;this.reset()};k.runLinkDestination=function(){a.Internal.Destinations.followLink(k.annotApp.properties.link)};
k.reset=function(){this.rotationinit=this.annotApp.properties.rotation;this.annotrect={left:this.annotApp.rect.Left,top:this.annotApp.rect.Top,width:this.annotApp.rect.Right-this.annotApp.rect.Left,height:this.annotApp.rect.Bottom-this.annotApp.rect.Top};this.annotbox={left:this.annotApp.bbox.Left,top:this.annotApp.bbox.Top,width:this.annotApp.bbox.Right-this.annotApp.bbox.Left,height:this.annotApp.bbox.Bottom-this.annotApp.bbox.Top};null!=this.annotmat&&(a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,
96,96,!0),0,this.annotrect),a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotbox));this.annotrectNew={left:this.annotrect.left,top:this.annotrect.top,width:this.annotrect.width,height:this.annotrect.height};var n=Math.min(this.annotrect.left,this.annotbox.left),y=Math.min(this.annotrect.top,this.annotbox.top),x=Math.max(this.annotrect.top+this.annotrect.height,this.annotbox.top+this.annotbox.height),K=Math.max(this.annotrect.left+this.annotrect.width,this.annotbox.left+
this.annotbox.width);this.annotbox.left=n;this.annotbox.top=y;this.annotbox.width=K-n;this.annotbox.height=x-y};a.Internal.Annotations.addAnnotation(k);k.updatePageInfo(d,e,h);if(b.visible){a.serverCtx.annotationEditorMode||(dvJQuery(k.canvas).mouseenter(function(){if(a.callbacks.onAnnotationMouseEnter){var n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})}}),dvJQuery(k.canvas).mouseleave(function(){if(a.callbacks.onAnnotationMouseLeave){var n=
a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id})}}));if(13===k.annotApp.properties.type)if(b=a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour,!a.serverCtx.annotationEditorMode||2==a.dom.UIconfig.linkAnnotationClickBehaviour)dvJQuery(k.canvas).hover(function(){dvJQuery(this).css("cursor","pointer")}),dvJQuery(k.canvas).on("click",function(n){n.preventDefault();k.runLinkDestination()});else if(b)dvJQuery(k.canvas).on("dblclick",
function(n){n.preventDefault();k.runLinkDestination()});a.dom.viewerArea.appendChild(k.canvas)}return k},mergeAnnotationProperties:function(b,d){var e=dvJQuery.extend(!0,{},a.Internal.Annotations.getAnnotPropertiesValues(b));"object"===typeof d&&dvJQuery.each(d,function(h,k){h in e&&(e[h]=k)});return e},showAnnotationPropertiesUI:function(b,d,e,h){a.Internal.Annotations.annotEdit=e;dvJQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();dvJQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation"+
a.uniqueID).hide();dvJQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled",!1);dvJQuery.each(b,function(k,q){switch(k){case "fill":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").prop("checked",q).trigger("change");if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("fill"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "fillColor":k=1;-1!=q.indexOf("rgba")&&(k=q.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(q));
dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_fill_color_control"+a.uniqueID).find("input").is(":disabled")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+
a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("fillColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block");break;case "dashCap":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+
a.uniqueID+"'][value='"+q+"']:radio").prop("checked",!0);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("dashCap"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","inline-block");break;case "dashStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",
!0);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("dashStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_style"+a.uniqueID).css("display","inline-block");break;case "stroke":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").prop("checked",q).trigger("change");if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("stroke"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+a.uniqueID).css("display","inline-block");break;case "strokeColor":k=1;-1!=q.indexOf("rgba")&&(k=q.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+
a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(q));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_stroke_color_control"+a.uniqueID).find("input").is(":disabled")||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("strokeColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+a.uniqueID).css("display",
"inline-block");break;case "borderWidth":0==b.type||11==b.type||17==b.type?(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*q).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html(a.Localize("label_annotation_property_border_width"))):(k=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+
"']").find("option[value='"+Number((9600*q).toFixed(2).replace(".00",""))+"']").val())||0,dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+k+"']").prop("selected",!0).trigger("change"),0==k&&dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*q).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+
a.uniqueID+" label").html("&nbsp;"));if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("borderWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),0==b.type||11==b.type?(dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).hide()):dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+
a.uniqueID).css("display","inline-block");break;case "opacity":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val(Number((100*q).toFixed(2).replace(".00","")));(!h||h&&Array.isArray(h)&&-1!=h.indexOf("opacity"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_opacity"+a.uniqueID).css("display","inline-block");break;case "link":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val(q);if(!h||h&&Array.isArray(h)&&
-1!=h.indexOf("link"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_link"+a.uniqueID).css("display","inline-block");break;case "radiusFactor":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val(Number((100*q).toFixed(2).replace(".00","")));if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("radiusFactor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor"+a.uniqueID).css("display","inline-block");break;case "rotation":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val(Number(q.toFixed(2).replace(".00","")));(!h||h&&Array.isArray(h)&&-1!=h.indexOf("rotation"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_rotation"+a.uniqueID).css("display","inline-block");break;case "squaredBox":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+
a.uniqueID+"']").prop("checked",q).trigger("change");if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("squaredBox"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_squared_box"+a.uniqueID).css("display","inline-block");break;case "text":dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").val(q);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("text"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","inline-block");b.canEditText||8!=b.type&&9!=b.type||dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+a.uniqueID+"']").prop("disabled",!0);break;case "fontName":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",!0);a.setDialogAnnotationFontNamePropertiesPreview();
if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("fontName"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display","table-cell");break;case "fontStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",!0);a.setDialogAnnotationFontStylePropertiesPreview();
if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("fontStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","table-cell");break;case "foreColor":k=1;0<=q.indexOf("rgba")&&(k=q.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",
k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(q));if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("foreColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","table-cell");break;case "alignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+
a.uniqueID+"'][value='"+q+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("alignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","table-cell");break;case "autoSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+
"']").prop("checked",q).trigger("change");if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("autoSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","inline-block");break;case "fontSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val(Number(q.toFixed(2).replace(".00","")));if(!h||h&&Array.isArray(h)&&
-1!=h.indexOf("fontSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+a.uniqueID).css("display","table-cell");break;case "lineAlignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='"+q+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!h||h&&Array.isArray(h)&&-1!=
h.indexOf("lineAlignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+a.uniqueID).css("display","table-cell");break;case "arrowFilled":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").prop("checked",q).trigger("change");if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("arrowFilled"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+a.uniqueID).css("display","inline-block");break;case "arrowHeight":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val(q);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("arrowHeight"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height"+
a.uniqueID).css("display","inline-block");break;case "arrowWidth":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val(q);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("arrowWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width"+a.uniqueID).css("display","inline-block");break;case "endCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+
a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",!0);(!h||h&&Array.isArray(h)&&-1!=h.indexOf("endCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_end_cap"+a.uniqueID).css("display","inline-block");break;case "startCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",!0);(!h||h&&Array.isArray(h)&&-1!=h.indexOf("startCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_start_cap"+
a.uniqueID).css("display","inline-block");break;case "measurementUnit":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option[value='"+q+"']").prop("selected",!0);if(!h||h&&Array.isArray(h)&&-1!=h.indexOf("measurementUnit"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit"+a.uniqueID).css("display",
"inline-block");break;case "scale":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val(Number(q.toFixed(2).replace(".00","")));(!h||h&&Array.isArray(h)&&-1!=h.indexOf("scale"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_scale"+a.uniqueID).css("display","inline-block");break;case "autoCreate":d||(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").prop("checked",q).trigger("change"),h||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","inline-block"));break;case "title":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val(q),(!h||h&&Array.isArray(h)&&-1!=h.indexOf("title"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_title"+a.uniqueID).css("display","inline-block")}});a.DisplayDialogForm(dvJQuery(a.dom.annotationDialogForm),a.Internal.Annotations.getAnnotationTitleFromType(b.type),
function(){dvJQuery("input[name='annotation_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationAlignmentPropertiesPreview()});dvJQuery("input[name='annotation_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationLineAlignmentPropertiesPreview()});dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height",dvJQuery(a.dom.annotationDialogFormTextInput).height())},null,null,[{text:a.Localize("_label_button_annotation_cancel"),
click:function(){a.ExitAnnotationDrawingMode();dvJQuery(a.dom.annotationDialogForm).dvDialog("close")}},{text:d?a.Localize("_label_button_annotation_edit"):a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){dvJQuery.each(b,function(k,q){switch(k){case "fill":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+"']").is(":checked");break;case "fillColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']")).minicolors("rgbaString");break;case "dashCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"']:checked").val());break;case "dashStyle":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "stroke":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").is(":checked");break;
case "strokeColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "borderWidth":b[k]=parseFloat(100*dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val())/96/100||0;break;case "opacity":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val()/100);break;case "link":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+
a.uniqueID+"']").val();break;case "radiusFactor":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val()/100);break;case "rotation":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val())||0;break;case "squaredBox":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").is(":checked");break;case "text":b[k]=dvJQuery(a.dom.annotationDialogForm).find("textarea[name='annotation_text_input"+
a.uniqueID+"']").val();break;case "fontName":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option:selected").val();break;case "fontStyle":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val());break;case "foreColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']")).minicolors("rgbaString");
break;case "alignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"']:checked").val());break;case "autoSize":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").is(":checked");break;case "fontSize":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val())||parseFloat(b[k]);break;case "lineAlignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+
a.uniqueID+"']:checked").val());break;case "arrowFilled":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").is(":checked");break;case "arrowHeight":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+"']").val())||0;break;case "arrowWidth":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val())||0;break;case "endCap":b[k]=
parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "startCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "measurementUnit":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option:selected").val();break;case "scale":b[k]=
parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val())||1;break;case "autoCreate":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").is(":checked");break;case "title":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val()}});dvJQuery(a.dom.annotationDialogForm).dvDialog("close");return d?a.Internal.Annotations.annotEdit.updateAnnotation(!1,
b,!1):a.Internal.Annotations.beginAddAnnotInteractive(b)}}]);return DocuViewareAPI.Status.GenericError}},Magnifier:{isMagnifying:!1,zoomContext:1,currentMagnifyingContext:{pageNo:-1,pageState:null,zoom:-1,magnifyZoom:-1,pixelRatio:-1,magnifierClientRect:null,img:null,cursorX:-1,cursorY:-1},hasContextChanged:function(){var b=a.GetCurrentPage();if(b!==a.Internal.Magnifier.currentMagnifyingContext.pageNo)return!0;b=a.Internal.Pages.getRenderingState(b);return b.pageWidth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageWidth||
b.pageHeigth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageHeigth||a.Internal.Magnifier.zoomContext*b.zoom!==a.Internal.Magnifier.currentMagnifyingContext.zoom?!0:!1},resetPosition:function(){a.dom.magnifierDiv.style.left="-999px";a.dom.magnifierDiv.style.top="-999px";a.dom.magnifierDiv.style.display="none"},enable:function(){if(a.isIE)return DocuViewareAPI.Status.GenericError;var b=a.dom.magnifierTemplateDiv.cloneNode(!0);b.id="magnifierDiv"+a.uniqueID;a.dom.magnifierDiv=a.dom.viewerArea.appendChild(b);
a.dom.magnifierDiv.style.display="block";a.dom.magnifierDiv.style.zIndex=a.dom.zindexManager.getMagnifierZindex();a.SetMouseMode(5);this.updateContext();b=a.dom.getViewerContainer();b.addEventListener("mousemove",this.magnify);a.dom.magnifierDiv.addEventListener("mousemove",this.magnify,!1);b.addEventListener("mouseout",this.resetPosition);window.addEventListener("resize",this.changeMagnifierPageContext);a.Internal.Magnifier.isMagnifying=!0;return DocuViewareAPI.Status.OK},disable:function(){var b=
a.dom.getViewerContainer();b.removeEventListener("mousemove",this.magnify);b.removeEventListener("mouseout",this.resetPosition);window.removeEventListener("resize",this.changeMagnifierPageContext);a.dom.magnifierDiv.remove();a.Internal.Magnifier.isMagnifying=!1;return DocuViewareAPI.Status.OK},toggle:function(){this.isMagnifying?this.disable():this.enable()},updateContext:function(){var b=a.GetCurrentPage(),d=a.Internal.Pages.getRenderingState(b),e=a.Internal.Magnifier.zoomContext*d.zoom,h=a.cache.getPageObject(b).bitmap,
k=a.getConfig(),q=a.dom.magnifierDiv.getBoundingClientRect();a.Internal.Magnifier.currentMagnifyingContext={pageNo:b,pageState:d,zoom:e,pixelRatio:k.devicePixelRatio,img:h,magnifierClientRect:q,magnifyZoom:a.Internal.Magnifier.zoomContext};k=d.pageWidth*e;d=d.pageHeight*e;a.dom.magnifierDiv.style.backgroundImage="url('"+h.src+"')";a.dom.magnifierDiv.style.backgroundSize=k+"px "+d+"px";switch(a.Internal.Pages.getRenderRotation(b)){case DocuViewareAPI.RotateFlipType.Rotate90FlipNone:a.dom.magnifierDiv.style.transform=
"rotate(90deg)";a.dom.magnifierDiv.style.backgroundSize=d+"px "+k+"px";break;case DocuViewareAPI.RotateFlipType.Rotate180FlipNone:a.dom.magnifierDiv.style.transform="rotate(180deg)";break;case DocuViewareAPI.RotateFlipType.Rotate270FlipNone:a.dom.magnifierDiv.style.transform="rotate(270deg)",a.dom.magnifierDiv.style.backgroundSize=d+"px "+k+"px"}},magnify:function(b){var d=a.dom.viewerArea.getBoundingClientRect();if(d.top>b.clientY||d.left>b.clientX)a.Internal.Magnifier.resetPosition();else{a.dom.magnifierDiv.style.display=
"block";a.Internal.Magnifier.hasContextChanged()&&a.Internal.Magnifier.updateContext();"mousemove"===b.type&&(a.Internal.Magnifier.currentMagnifyingContext.cursorX=b.clientX,a.Internal.Magnifier.currentMagnifyingContext.cursorY=b.clientY);var e=a.Internal.Magnifier.currentMagnifyingContextPostAjaxRequestForCrossDomainApp,h=a.Internal.Coordinates.clienttodocument(a.GetCurrentPage(),b.clientX,b.clientY,0,!1);a.dom.magnifierDiv.style.backgroundPosition="-"+(h.x*e.magnifyZoom-e.magnifierClientRect.width/
2)+"px -"+(h.y*e.magnifyZoom-e.magnifierClientRect.height/2)+"px";a.dom.magnifierDiv.style.left=b.clientX-d.left-e.magnifierClientRect.width/2+"px";a.dom.magnifierDiv.style.top=b.clientY-d.top-e.magnifierClientRect.height/2+"px"}}},Destinations:{followLink:function(b){if(15<b.length&&"fileattachment:"===b.substring(0,15)){var d=b.split(":")[1];b.split(":");isNaN(d)||isNaN(parseInt(d,10))||a.Save(b,".","*",!1,!1)}else DocuViewareUtilities.isValidURL(b)?window.open(b,"_blank"):5<b.length&&"page:"===
b.substring(0,5)&&(b=b.split(":")[1],isNaN(b)||isNaN(parseInt(b,10))||b<=a.serverCtx.pageCount&&a.SelectPage(b))}}},getConfig:function(){var b=a.dom.getViewerContainer();return{devicePixelRatio:DocuViewareUtilities.getDevicePixelRatio(),viewerWidth:null!=b?b.offsetWidth:0,viewerHeight:null!=b?b.offsetHeight:0,scrollBarWidth:this.dom.sbWidth,hasWebPSupport:this.Internal.Capabilities.hasWebPSupport(),hasTiffSupport:this.Internal.Capabilities.hasTiffSupport()}},hasPendingResize:function(){return null!=
a.NewViewerSizeTimeout},checkDocumentLoaded:function(b){return this.serverCtx&&0==this.serverCtx.documentLoaded?(b||this.DisplayError(this.Localize("error__no_document_loaded")),!1):!0},hasPendingAction:function(b,d,e,h){if(b&&!this.checkDocumentLoaded(e))return!0;if(1==this.Internal.Files.uploading)return e||this.DisplayError(this.Localize("label__uploading_document")),!0;if(1==this.ajax.downloading)return e||this.DisplayError(this.Localize("label__downloading_document")),!0;if(0<this.ajax.pendingRequests)return h&&
this.DisplayError(this.Localize("transferring_data")),!0;if(this.waitForInit)return e||this.DisplayError(this.Localize("label__initializing")),!0;if(!d&&null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)if(a.cache.Annots[b].hasPendingUpdate())return e||this.DisplayError(this.Localize("transferring_annotation_data")),!0;return!1},Localize:function(b){var d=JSON.parse(this.localization);if(d&&0<d.length)for(var e=0;e<d.length;e++)if(b==d[e].id)return d[e].message;return b},DisplayError:function(b){this.ShowMessage({text:b,
backgroundColor:a.dom.UIconfig.headerColor,icon:16,delay:5E3})},ShowMessage:function(b){var d=dvJQuery(this.dom.infoDiv);d.css("background-color",b.backgroundColor?b.backgroundColor:a.dom.UIconfig.headerColor);var e=dvJQuery(this.dom.infoMessage);e.css("font-size",b.fontSize?b.fontSize:"130%");e.css("font-weight",b.fontWeight?b.fontWeight:"normal");e.css("color",b.fontColor?b.fontColor:"#FFFFFF");e.css("text-decoration",b.textDecoration?b.textDecoration:"none");e.css("text-transform",b.textTransform?
b.textTransform:"none");e.css("height",b.messageBoxHeight?b.messageBoxHeight:a.dom.UIconfig.defaultMessageBoxHeight);b.isHtmlText?e.html(b.text):e.text(b.text);d.find(".message_icon").hide();switch(b.icon){case 0:b.customIcon&&d.find(".message_icon_custom").html(b.customIcon).css("display","inline-block");break;case 16:d.find(".message_icon_error").css("display","inline-block");break;case 32:d.find(".message_icon_question").css("display","inline-block");break;case 48:d.find(".message_icon_warning").css("display",
"inline-block");break;case 64:d.find(".message_icon_info").css("display","inline-block");break;case 128:d.find(".message_icon_ok").css("display","inline-block")}d.finish().slideDown(b.slideDown?b.slideDown:300).delay(b.delay?b.delay:2500).slideUp(b.slideUp?b.slideUp:300)},DisplayPendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator++;1==a.ajax.pendingRequestsWithIndicator&&dvJQuery(this.dom.pendingActionDiv).show()},HidePendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator--;
0>=a.ajax.pendingRequestsWithIndicator&&(dvJQuery(this.dom.pendingActionDiv).hide(),a.ajax.pendingRequestsWithIndicator=0)},DisplayDialogForm:function(b,d,e,h,k,q){b.dvDialog({dialogClass:"dv-main",appendTo:dvJQuery(a.dom.mainArea),minWidth:510+a.dom.sbWidth,maxHeight:dvJQuery(a.dom.controlArea).height(),position:{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)},title:d,resizable:!1,draggable:!0,create:function(n,y){null!=e&&"function"==typeof e&&e();dvJQuery(this).css("overflow-x","hidden");
dvJQuery(this).css("overflow-y","auto");dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().css("border","1px solid "+a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.strokeColor);
dvJQuery(this).parent().find('input[type="text"]').css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("border-color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.headerColor);dvJQuery(this).parent().find(".dvUi-widget-header a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor)},open:function(n,y){var x=this,K=-1;dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function(){K++});if(-1<K)for(n=0;n<=K;n++)n===K?dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+
n+")").focus():dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+n+")").blur();null!=h&&"function"==typeof h&&h();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(F){dvJQuery(this).dvSelectmenu({change:function(){dvJQuery(this).trigger("change")}});dvJQuery(this).hasClass("dv-jquerySelectOverflow")&&dvJQuery(this).dvSelectmenu("menuWidget").addClass("overflow")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(F){dvJQuery(this).dvButtonset({setActive:function(){dvJQuery(x).parent().find(".dvUi-button").css("border",
"1px solid transparent");dvJQuery(x).parent().find(".dvUi-state-active").css("border","1px solid "+a.dom.UIconfig.miscBorderColor)}})});dvJQuery(this).parent().find(".dvUi-selectmenu-button").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors({control:"hue",defaultValue:dvJQuery(this).val(),
inline:!1,letterCase:"uppercase",opacity:!0,position:"bottom left"})});dvJQuery(this).parent().find(".minicolors-swatch").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColorHover)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColor)});
dvJQuery(a.dom.modalOverlayArea).show()},close:function(n,y){null!=k&&"function"==typeof k&&k();dvJQuery(a.dom.modalOverlayArea).hide();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(){dvJQuery(this).dvSelectmenu("destroy")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(){dvJQuery(this).dvButtonset("destroy")});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors("destroy")})},buttons:q}).parent().draggable("option","containment",dvJQuery(a.dom.mainArea))},
l10n:null,cache:{Annots:null,AnnotsComments:null,AnnotsRedactionReferences:null,Pages:null,canvas:null,pageCanvasSize:null,pageCanvasZoom:0,viewRotation:0,addedSelectedTextContextMenuItem:[],emptyCanvas:function(){a.dom.SelectedTextRegions.clear();if(a.dom.viewerArea.hasChildNodes())for(var b=a.dom.viewerArea.children.length-1;0<=b;b--){var d=a.dom.viewerArea.children[b];d!=a.dom.panDiv&&a.dom.viewerArea.removeChild(d)}if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=
!1},getPageCanvas:function(b){if(null!=this.canvas)for(var d=0;d<this.canvas.length;d++)if(this.canvas[d].pageNo==b)return this.canvas[d];return null},getPageObject:function(b){if(null!=this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo==b)return this.Pages[d];return null},clearCachedPages:function(){this.Pages=null;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearCachedBitmap:function(){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)this.Pages[b].bitmap=
null,this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=!1;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearBitmap:function(b){if(null!==this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo===b){this.Pages[d].bitmap=null;break}},clearPage:function(b){if(null!==this.Pages)for(var d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo===b){this.Pages[d].bitmap=null;this.Pages[d].drawn=!1;this.Pages[d].drawnPreview=!1;break}d=this.getPageCanvas(b);
if(null!=d)for(var e=0;e<d.canvas.length;e++){var h=d.canvas[e].tile;null!=h&&(h.style.backgroundColor="white",h.getContext("2d").clearRect(0,0,h.width,h.height))}a.Internal.Annotations.removePageAnnots(b);a.Internal.FormFields.removePageFormFields(b);a.dom.thumbnailArea&&(b=a.Internal.Thumbnails.getThumbnailFromPageNo(b),null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false")))},cachePage:function(b){null==this.Pages&&(this.Pages=[]);this.Pages.push(b)},cachePageBitmap:function(b,
d,e,h,k){var q=new Image;q.src="data:"+d+";base64,"+e;if(null!=this.Pages)for(d=0;d<this.Pages.length;d++)if(this.Pages[d].pageNo==b){this.Pages[d].drawn=!1;this.Pages[d].drawnPreview=!1;this.attachImageToPage(this.Pages[d],q,h,k);return}b={pageNo:b,drawn:!1,drawnPreview:!1};this.attachImageToPage(b,q,h,k);this.cachePage(b)},attachImageToPage:function(b,d,e,h){b.bitmap=d;b.scale=e;b.hasTransparency=h}},ajax:{sessionID:M,requestNo:0,pageViewRequestNo:0,thumbnailRequestNo:0,transferID:0,downloading:!1,
pendingRequests:0,pendingPageViewRequests:null,pendingRequestsWithIndicator:0,latestSelectedPage:0,contextID:u,customHeaders:eval(ka),AjaxRequestTimeout:ma,hasPendingPageViewRequests:function(){return null!=this.pendingPageViewRequests&&0<this.pendingPageViewRequests.length},SetNewServerCtx:function(b,d,e,h){var k=a.GetCurrentPage(),q=a.GetCurrentZoom(),n=a.ajax.contextID,y=a.serverCtx.documentLoaded,x=a.IsZoomSynchronized();null===b?(a.resetServerCtx(),a.ajax.contextID=""):(a.serverCtx=b,a.ajax.contextID=
b.contextID);var K=null!==b&&b.documentLoaded&&n!==a.ajax.contextID||null!==b&&b.reloadDocument,F=null!=b&&b.documentLoaded;q=q!=a.GetCurrentZoom();n=y&&a.ajax.contextID!==n;y=a.dom.selectedSnapin;var Y=!1;if(null===b||K||n||a.serverCtx.reloadDocument)Y=!0;Y&&(a.cache.emptyCanvas(),a.Internal.Thumbnails.removeAllThumbnails(),a.dom.bookmarksArea&&dvJQuery(a.dom.bookmarksTree).empty(),a.Internal.Text.clearSelection(),a.ClearSearch(),a.Internal.FormFields.removeAll(),a.Internal.Annotations.removeAll(),
a.refreshCommentsPanel(),a.cache.Pages=null);if(n&&(K||(null!=a.dom.pageNavBox&&(a.dom.pageNavBox.style.width="36px"),null!==a.dom.pageNavBoxMobile&&(a.dom.pageNavBoxMobile.style.width="36px"),a.dom.UIconfig.collapseSnapinOnDocumentClosed&&a.SetSnapinsPanelVisibility(!1)),a.callbacks.onDocumentClosed))a.callbacks.onDocumentClosed();q&&!1===x&&(a.serverCtx.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop(),a.serverCtx.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft());K&&(a.cache.pageCanvasSize=
null,a.dom.viewerContextMenuRemoveTextButton&&a.serverCtx.hasTextRemovalSupport?dvJQuery(a.dom.viewerContextMenuRemoveTextButton).show():a.dom.viewerContextMenuRemoveTextButton&&dvJQuery(a.dom.viewerContextMenuRemoveTextButton).hide(),a.dom.viewerContextMenuRedactButton&&a.serverCtx.hasRedactionSupport?dvJQuery(a.dom.viewerContextMenuRedactButton).show():a.dom.viewerContextMenuRedactButton&&dvJQuery(a.dom.viewerContextMenuRedactButton).hide());a.UpdateUI(K,e,null!==b,n,!1,!1,h);null!==b&&b.hasUserPassword&&
b.newDocument&&a.Internal.FilePassword.createAndShowDialog(function(aa){""==aa||null==aa?a.Internal.FilePassword.showError(a.Localize("dialog_password_missing")):a.Internal.FilePassword.setPassword(aa,!0)},function(){a.Internal.FilePassword.destroyDialog()});K&&a.IsSnapinsPanelVisible()&&(null===a.dom.selectedSnapin||a.SelectSnapIn(y,!0)!==DocuViewareAPI.Status.OK)&&a.SelectFirstAvailableSnapin(null);b=k!==a.GetCurrentPage();if(K||b)a.Internal.Annotations.unselectAll(),a.dom.pageCountBox&&a.dom.pageNavBox&&
(a.dom.pageCountBox.innerHTML=a.GetPageCount(),a.dom.pageNavBox.value=a.GetCurrentPage()),a.dom.pageCountBoxMobile&&a.dom.pageNavBoxMobile&&(a.dom.pageCountBoxMobile.innerHTML=a.GetPageCount(),a.dom.pageNavBoxMobile.value=a.GetCurrentPage()),a.Internal.Redaction.disableAddRedactionMarksMode();if(!d){if(K&&(a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()),a.callbacks.onNewDocumentLoaded))a.callbacks.onNewDocumentLoaded();if(b&&a.callbacks.onPageChanged)a.callbacks.onPageChanged();if(q&&(a.dom.zoomButtonValue&&
a.dom.updateZoomValue(a.GetCurrentZoom()),a.callbacks.onZoomChanged))a.callbacks.onZoomChanged()}null!=a.dom.previousPageButton&&(a.dom.previousPageButton.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.previousPageButtonMobile&&(a.dom.previousPageButtonMobile.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.nextPageButton&&(a.dom.nextPageButton.disabled=a.GetCurrentPage()>=a.GetPageCount()||!F);null!=a.dom.nextPageButtonMobile&&(a.dom.nextPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||
!F);null!=a.dom.firstPageButtonMobile&&(a.dom.firstPageButtonMobile.disabled=1>=a.GetCurrentPage()||!F);null!=a.dom.lastPageButtonMobile&&(a.dom.lastPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!F);null!=a.dom.rotateLeftButton&&(a.dom.rotateLeftButton.disable=!F);null!=a.dom.rotateRightButton&&(a.dom.rotateRightButton.disable=!F);null!=a.dom.rotateLeftButtonMobile&&(a.dom.rotateLeftButtonMobile.disable=!F);null!=a.dom.rotateRightButtonMobile&&(a.dom.rotateRightButtonMobile.disable=
!F);null!=a.dom.zoomInButton&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!F?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton),a.dom.zoomInButton.disabled=!0):(a.dom.zoomInButton.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButton)));null!=a.dom.zoomInButtonMobile&&(a.GetCurrentZoom()>=a.serverCtx.zoomMax||!F?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButtonMobile),a.dom.zoomInButtonMobile.disabled=!0):(a.dom.zoomInButtonMobile.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomInButtonMobile)));
null!=a.dom.zoomOutButton&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||!F?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton),a.dom.zoomOutButton.disabled=!0):(a.dom.zoomOutButton.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButton)));null!=a.dom.zoomOutButtonMobile&&(a.GetCurrentZoom()<=a.serverCtx.zoomMin||!F?(a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButtonMobile),a.dom.zoomOutButtonMobile.disabled=!0):(a.dom.zoomOutButtonMobile.disabled=!1,a.dom.updateHoverBordersOnDisableToggle(a.dom.zoomOutButtonMobile)))},
PostCustomServerAction:function(b,d,e,h,k){if(a.waitForInit)return setTimeout(function(){a.ajax.PostCustomServerAction(b,d,e,h,k)},100),DocuViewareAPI.Status.OK;if(a.hasPendingAction())return DocuViewareAPI.Status.GenericError;var q={data:{actionName:d,args:e,clientConfiguration:a.getConfig()},success:function(y){"string"===typeof y&&(y=eval("("+y+")"));a.ajax.HandleServerContextResponse(y,!1,!0);h&&h(y.result)},error:function(){k&&k()}},n={};n.customactionname=d;return a.ajax.PostBaseRequest("customaction",
q,!b,!0,n)},PostAjaxRequestForCrossDomainApp:function(b,d){b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(ka=this.customHeaders,dvJQuery.each(this.customHeaders,function(e,h){h&&""!=h||delete ka[e]}),dvJQuery.isEmptyObject(ka)||(b.headers=ka));null!=d&&(null==b.headers&&(b.headers={}),dvJQuery.extend(b.headers,d));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.contentType="application/json";b.dataType=
"json";dvJQuery.ajax(b)},PostAjaxRequestForDocuViewareAction:function(b,d){null===b.error&&alert("Please specify an error object!");b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(ka=this.customHeaders,dvJQuery.each(this.customHeaders,function(h,k){k&&""!=k||delete ka[h]}),dvJQuery.isEmptyObject(ka)||(b.headers=ka));null!=d&&(null==b.headers&&(b.headers={}),dvJQuery.extend(b.headers,d));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);
b.type="POST";b.dataType="json";var e=b.success;b.success=function(h){null!=e&&e(h)};dvJQuery.ajax(b)},PostBaseRequest:function(b,d,e,h,k){if(!h&&a.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;null!=d.beforeStart&&d.beforeStart();2==a.events.mouseMode&&a.events.isDrawingPath&&a.ExitAnnotationDrawingMode();this.pendingRequests+=1;this.requestNo+=1;null==d.data&&(d.data={});d.data.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop();d.data.vScrollbarMax=a.Internal.Coordinates.getViewerScrollTopMax();
d.data.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft();d.data.hScrollbarMax=a.Internal.Coordinates.getViewerScrollLeftMax();d.data.sessionID=this.sessionID;d.data.contextID=this.contextID;d.data.requestNo=this.requestNo;a.DisplayPendingActionNotification();null==k&&(k={});k.docuviewarerequest=b;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!e,data:JSON.stringify({requestName:b,requestData:d.data}),contentType:"application/json",
success:function(q){--a.ajax.pendingRequests;a.HidePendingActionNotification();d.success&&d.success(q)},error:function(q){a.ajax.HandleError(q);--a.ajax.pendingRequests;null!=d.error&&d.error(q)},complete:function(q){null!=d.complete&&d.complete(q)}},k);return DocuViewareAPI.Status.OK},HandleError:function(b){if(b){if(null!=b.responseType&&"DocuVieware"==b.responseType){var d="";null!=b.action&&""!=b.action&&(d+=b.action+": ");d+=b.message;console.log("DocuVieware: "+d);b.throwError&&a.DisplayError(d)}else null!=
b.readyState&&null!=b.statusText&&(d="DocuVieware XMLHttpRequest error.\nStatus: "+(b.status+"."),d+="\nReadyState: ",d=0==b.readyState?d+"uninitialized.":1==b.readyState?d+"loading.":2==b.readyState?d+"loaded.":3==b.readyState?d+"interactive.":4==b.readyState?d+"completed.":d+(b.readyState+"."),d+="\nDescription: "+b.statusText+".",null!=b.responseText&&""!=b.responseText&&(d+="\nResponse text: "+b.responseText),"timeout"!=b.statusText&&null!=b.status&&"0"==b.status&&null!=b.readyState&&0==b.readyState?
a.debug&&console.log(d):(console.log(d),a.debug&&alert(d))),dvJQuery(a.dom.mainSpinner).hide(),a.HidePendingActionNotification();b.resetClientUI&&a.ClearUI();if(1==b.reloadServerContext)a.events.onLoad(!0)}},HandleServerContextResponse:function(b,d,e,h){if(b&&b.status==DocuViewareAPI.Status.OK){var k=a.GetCurrentPage();b.message&&a.ShowMessage(b.message);if(b.contextID<a.ajax.contextID)return;a.ajax.SetNewServerCtx(b,h,d);!e||k==a.GetCurrentPage()&&a.GetCurrentPage()==a.GetLastPageNoRequest()||(a.ajax.latestSelectedPage=
a.GetCurrentPage(),a.EnsureCurrentPageVisibility());return!0}a.ajax.HandleError(b);return!1}},callbacks:{onFileOpenSuccess:null,onFileOpenError:null,onURIOpenSuccess:null,onURIOpenError:null,onPageChanged:null,onRotationChanged:null,onAnnotationSelectedStateChanged:null,onAnnotationAdded:null,onAnnotationEdited:null,onAnnotationDeleted:null,onAnnotationMouseEnter:null,onAnnotationMouseLeave:null,onAnnotationMoved:null,onCommentAdded:null,onCommentEdited:null,onCommentDeleted:null,onFormFieldChanged:null,
onZoomChanged:null,onNewDocumentLoaded:null,onDocumentClosed:null,onDocumentPrinted:null,onDocumentSaved:null,onDocumentSigned:null,onTwainAcquisitionDialogAcquireButtonClick:null,onTwainAcquisitionDialogCancelButtonClick:null,onThumbnailsOrderChanged:null,onTextSelected:null,onTextUnselected:null,onTextAnnotated:null,onAreaSelected:null,onFullscreenModeChanged:null,onThumbnailsSnapInSelected:null,onBookmarksSnapInSelected:null,onSearchSnapInSelected:null,onAnnotationsSnapInSelected:null,onCommentsSnapInSelected:null,
onSnapInPanelResized:null,onSnapInPanelToggle:null,onRedactionMarksApplied:null,onViewerScroll:null},serverCtx:{},dom:{getViewerContainer:function(){return document.getElementById("viewerContainer"+a.uniqueID)},zindexManager:{getFirstAnnotZindex:function(){return 65535},getFirstFormFieldZindex:function(){return 65535},getSelectionAreaZindex:function(){return 16777271},getFreehandDrawingCanvasZindex:function(){return 16777271},getMagnifierZindex:function(){return 16777271}},visibleToolbar:DocuViewareAPI.Toolbar.None,
enableAnnotEditionOnDblClick:!0,selectedAnnotation:null,selectedSnapin:null,isLoadFromUriDialogVisible:!1,sbWidth:DocuViewareUtilities.getScrollbarWidth(),toolbarLogo:document.getElementById("docuViewareLogo"+t),mobileToolbarArea:document.getElementById("mobileToolbar"+t),mobileToolbarTop:document.getElementById("mobileToolbarTop"+t),mobileToolbarContainer:document.getElementById("mobileToolbarContainer"+t),subMenuZoomModeMobile:document.getElementById("subMenuZoomModeMobile"+t),subMenuMouseModeMobile:document.getElementById("subMenuMouseModeMobile"+
t),pageNavBoxMobile:document.getElementById("pageNavBoxMobile"+t),pageCountBoxMobile:document.getElementById("pageCountBoxMobile"+t),openFromFileButtonMobile:document.getElementById("openFromFileButtonMobile"+t),twainAcquisitionButtonMobile:document.getElementById("twainAcquisitionButtonMobile"+t),fullscreenButtonMobile:document.getElementById("fullscreenButtonMobile"+t),singlePageModeButtonMobile:document.getElementById("singlePageModeButtonMobile"+t),panMouseModeButtonMobile:document.getElementById("panMouseModeButtonMobile"+
t),selectMouseModeButtonMobile:document.getElementById("selectMouseModeButtonMobile"+t),zoomAreaMouseModeButtonMobile:document.getElementById("zoomAreaMouseModeButtonMobile"+t),openfile:document.getElementById("openfile"+t),twainAcquisitionButton:document.getElementById("twainAcquisitionButton"+t),openFromFileButton:document.getElementById("openFromFileButton"+t),rotateLeftButton:document.getElementById("rotateLeftButton"+t),rotateRightButton:document.getElementById("rotateRightButton"+t),rotateLeftButtonMobile:document.getElementById("rotateLeftButtonMobile"+
t),rotateRightButtonMobile:document.getElementById("rotateRightButtonMobile"+t),zoomInButton:document.getElementById("zoomInButton"+t),zoomInButtonMobile:document.getElementById("zoomInButtonMobile"+t),zoomOutButton:document.getElementById("zoomOutButton"+t),zoomOutButtonMobile:document.getElementById("zoomOutButtonMobile"+t),zoomModeButton:document.getElementById("zoomModeButton"+t),zoomButtonValue:document.getElementById("zoomButtonValue"+t),mouseModeButton:document.getElementById("mouseModeButton"+
t),subMenuZoomMode:document.getElementById("subMenuZoomMode"+t),subMenuMouseMode:document.getElementById("subMenuMouseMode"+t),pendingActionDiv:document.getElementById("pendingActionDiv"+t),openFromUriArea:document.getElementById("openuri"+t),openFromUriButton:document.getElementById("openFromUriButton"+t),singlePageModeButton:document.getElementById("singlePageModeButton"+t),fullscreenButton:document.getElementById("fullscreenButton"+t),magnifierButton:document.getElementById("magnifierButton"+t),
magnifierTemplateDiv:document.getElementById("magnifierTemplateDiv"+t),panMouseModeButton:document.getElementById("panMouseModeButton"+t),selectMouseModeButton:document.getElementById("selectMouseModeButton"+t),zoomAreaMouseModeButton:document.getElementById("zoomAreaMouseModeButton"+t),infoDiv:document.getElementById("infoDiv"+t),infoMessage:document.getElementById("infoMessage"+t),addressBar:document.getElementById("openuriinput"+t),mainArea:document.getElementById("main"+t),containerArea:document.getElementById(t),
mainSpinner:document.getElementById("mainSpinner"+t),mainSpinnerContent:document.getElementById("mainSpinnerContent"+t),leftSideArea:document.getElementById("leftside"+t),leftSideResizeBar:document.getElementById("leftSideResizeBar"+t),snapinButtonStrip:document.getElementById("snapinButtonStrip"+t),leftsideContainer:document.getElementById("leftsideContainer"+t),leftSideContainerPanelsArea:document.getElementById("leftsideContainerPanels"+t),snapinsHeader:document.getElementById("snapinsHeader"+
t),snapinTabControl:document.getElementById("leftsidePanels"+t),snapinsHeaderLabel:document.getElementById("snapinsHeaderLabel"+t),thumbnailArea:document.getElementById("thumbnailsPanel"+t),commentsArea:document.getElementById("commentsPanel"+t),commentsAuthorInput:document.getElementById("commentAuthorInput"+t),commentsSearchArea:document.getElementById("commentsContainer"+t),commentsSearchValueInput:document.getElementById("commentsSearchValueInput"+t),commentsSearchClearResultsButton:document.getElementById("commentsSearchClearResultsButton"+
t),commentsSortBySelect:document.getElementById("commentsSortBySelect"+t),commentsSearchActionContainerOverlayDisable:document.getElementById("commentsSearchActionContainerOverlayDisable"+t),commentsSortBySelectContainer:document.getElementById("commentsSortBySelectContainer"+t),commentsContainer:document.getElementById("commentsContainer"+t),commentAnswerBox:document.getElementById("commentAnswerBox"+t),commentContentBox:document.getElementById("commentContentBox"+t),commentStatusBox:document.getElementById("commentStatusBox"+
t),commentMessageInput:document.getElementById("commentMessageInput"+t),commentAnswerInput:document.getElementById("commentAnswerInput"+t),commentStatusSelect:document.getElementById("commentStatusSelect"+t),commentsCollapseExpandAllButton:document.getElementById("commentsCollapseExpandAllButton"+t),bookmarksArea:document.getElementById("bookmarksPanel"+t),bookmarksTree:document.getElementById("bookmarksTree"+t),searchArea:document.getElementById("searchPanel"+t),searchPanelForm:document.getElementById("searchPanelForm"+
t),searchValueInput:document.getElementById("searchValueInput"+t),searchCaseSensitiveInput:document.getElementById("searchCaseSensitiveInput"+t),searchAnyWordInput:document.getElementById("searchAnyWordInput"+t),searchPageSelect:document.getElementsByName("searchPageSelect"+t),searchWholeWordInput:document.getElementById("searchWholeWordInput"+t),searchResultsContainer:document.getElementById("searchResultsContainer"+t),searchClearResultsButton:document.getElementById("searchClearResultsButton"+t),
annotationsArea:document.getElementById("annotationsPanel"+t),searchResults:document.getElementById("searchResults"+t),viewerArea:document.getElementById("viewer"+t),panDiv:null,controlArea:document.getElementById("control"+t),toolBarArea:document.getElementById("toolbar"+t),pageNavBox:document.getElementById("pageNavBox"+t),previousPageButton:document.getElementById("previousPageButton"+t),nextPageButton:document.getElementById("nextPageButton"+t),firstPageButtonMobile:document.getElementById("firstPageButtonMobile"+
t),previousPageButtonMobile:document.getElementById("previousPageButtonMobile"+t),nextPageButtonMobile:document.getElementById("nextPageButtonMobile"+t),lastPageButtonMobile:document.getElementById("lastPageButtonMobile"+t),pageCountBox:document.getElementById("pageCountBox"+t),dvpassword:document.getElementById("dvpassword"+t),dvpasswordInput:document.getElementById("dvpassword-input"+t),dvpasswordError:document.getElementById("dvpassword-error"+t),annotationsActionButtons:document.getElementById("annotationActionButtons"+
t),annotationDialogFormTextInput:document.getElementById("annotation_text_input"+t),annotationDialogFormFontSizeInput:document.getElementById("annotation_font_size_input"+t),annotationDialogFormForeColorInput:document.getElementById("annotation_fore_color_input"+t),annotationDialogFormFontNameSelect:document.querySelectorAll("select[name='annotation_font_name_select"+t+"']"),annotationDialogFormAlignmentSelect:document.querySelectorAll("input[name='annotation_alignment_select"+t+"']"),annotationDialogFormFontStyleSelect:document.querySelectorAll("select[name='annotation_font_style_select"+
t+"']"),annotationDialogFormContainer:document.getElementById("annotationDialogFormContainer"+t),annotationDialogForm:document.getElementById("annotationDialogForm"+t),annotationActionRemoveConfirm:document.getElementById("annotationActionRemoveConfirm"+t),annotationRemoveConfirmMessage:document.getElementById("annotationRemoveConfirmMessage"+t),redactionAddAreasButton:document.getElementById("redactionAddAreas"+t),redactionApplyButton:document.getElementById("redactionApply"+t),redactionsPanel:document.getElementById("redactionsPanel"+
t),redactionFill:document.getElementById("redaction_fill"+t),redactionAreaButtonsList:document.getElementById("redactionAreaButtonsList"+t),redactionAreaButtonModel:document.getElementById("redactionAreaButtonModel"+t),redactionAreaFoundText:document.getElementById("redactionAreaFoundText"+t),redactionRemoveAllButton:document.getElementById("redactionRemoveAllButton"+t),redactionRemoveAllSelectedButton:document.getElementById("redactionRemoveAllSelectedButton"+t),digisignAppearanceMenuToggle:document.getElementById("digisignAppearanceMenuToggle"+
t),digisignCertificateMenuToggle:document.getElementById("digisignCertificateMenuToggle"+t),digisignAppearanceMenuContent:document.getElementById("digisignAppearanceMenuContent"+t),digisignCertificateMenuContent:document.getElementById("digisignCertificateMenuContent"+t),digisignAppearanceButtonText:document.getElementById("digisignAppearanceButtonText"+t),digisignAppearanceButtonImg:document.getElementById("digisignAppearanceButtonImg"+t),digisignAppearanceButtonFreehand:document.getElementById("digisignAppearanceButtonFreehand"+
t),digisignAppearanceInputImg:document.getElementById("digisignAppearanceInputImg"+t),digisignAppearancePreview:document.getElementById("digisignAppearancePreview"+t),digisignAppearancePreviewText:document.getElementById("digisignAppearancePreviewText"+t),digisignAppearancePreviewDelete:document.getElementById("digisignAppearancePreviewDelete"+t),digisignCertificateButton:document.getElementById("digisignCertificateButton"+t),digisignCertificateIconValidate:document.getElementById("digisignCertificateIconValidate"+
t),digisignCertificateIconUnvalidate:document.getElementById("digisignCertificateIconUnvalidate"+t),digisignTimeStampButton:document.getElementById("digisignTimeStampButton"+t),digisignTimeStampIconValidate:document.getElementById("digisignTimeStampIconValidate"+t),digisignTimeStampIconUnvalidate:document.getElementById("digisignTimeStampIconUnvalidate"+t),digisignCertificateDialogForm:document.getElementById("digisignCertificateDialogForm"+t),digisignCertificateName:document.getElementById("digisignCertificateName"+
t),digisignInputCertificateFile:document.getElementById("digisign_input_certificate_file"+t),digisignTimeStampDialogForm:document.getElementById("digisignTimeStampDialogForm"+t),digisignCertificateNameContainer:document.getElementById("digisignCertificateNameContainer"+t),digisignCertificateInputContainer:document.getElementById("digisignCertificateInputContainer"+t),digisignCertificatePasswordContainer:document.getElementById("digisignCertificatePasswordContainer"+t),digisignButtonSubmit:document.getElementById("digisignSubmit"+
t),digisignCertificateButtonDelete:document.getElementById("digisignCertificateButtonDelete"+t),digisignTimeStampButtonDelete:document.getElementById("digisignTimeStampButtonDelete"+t),signatureTextDialogForm:document.getElementById("signatureTextDialogForm"+t),signatureDialogFormTextInput:document.getElementById("signature_text_input"+t),signatureDialogFormFontSizeInput:document.getElementById("signature_font_size_input"+t),signatureDialogFormForeColorInput:document.getElementById("signature_fore_color_input"+
t),signatureDialogFormFontNameSelect:document.querySelectorAll("select[name='signature_font_name_select"+t+"']"),signatureDialogFormAlignmentSelect:document.querySelectorAll("input[name='signature_alignment_select"+t+"']"),signatureDialogFormFontStyleSelect:document.querySelectorAll("select[name='signature_font_style_select"+t+"']"),signatureFreehandDialogForm:document.getElementById("signatureFreehandDialogForm"+t),signatureFreehandPad:document.getElementById("signatureFreehandPad"+t),digisignCertificatePasswordInput:document.getElementById("digisign_certificate_password"+
t),digisignCertificateCertificateLabel:document.getElementById("digisign_certificate_certificate_label"+t),digisignCertificatePasswordLabel:document.getElementById("digisign_certificate_password_label"+t),digisignTimestampServerInput:document.getElementById("digisign_timestamp_server"+t),digisignTimestampLoginInput:document.getElementById("digisign_timestamp_login"+t),digisignTimestampPasswordInput:document.getElementById("digisign_timestamp_password"+t),digisignTimestampServerLabel:document.getElementById("digisign_timestamp_server_label"+
t),signaturesContainer:document.getElementById("signaturesContainer"+t),drawingModeArea:document.getElementById("drawingMode"+t),modalOverlayArea:document.getElementById("modalOverlayDiv"+t),commentDialogModalOverlay:document.getElementById("commentDialogModalOverlayDiv"+t),saveDialog:document.getElementById("saveDialog"+t),twainAcquisitionDialog:document.getElementById("twainAcquisitionDialog"+t),twainAcquisitionDialogPanel:document.getElementById("twainAcquisitionDialogPanel"+t),twainAcquisitionDialogAcquireButton:document.getElementById("twainAcquisitionDialogAcquireButton"+
t),twainAcquisitionDestinationAppendDocBox:document.getElementById("twainAcquisitionDestinationAppendDocBox"+t),commentDialog:document.getElementById("commentDialog"+t),printDialog:document.getElementById("printDialog"+t),printPageRangeInput:document.getElementById("printPageRangeInput"+t),printProgressbarDiv:document.getElementById("printProgressbarDiv"+t),printDialogPrintButton:document.getElementById("printDialogPrintButton"+t),copyDialog:document.getElementById("copyDialog"+t),copyTextInput:document.getElementById("copy_text_input"+
t),viewerContextMenu:document.getElementById("viewerContextMenu"+t),viewerContextMenuRedactButton:document.getElementById("viewerContextMenuRedactButton"+t),viewerContextMenuRemoveTextButton:document.getElementById("viewerContextMenuRemoveTextButton"+t),faderArea:document.getElementById("label-fader__"+t),freehandAnnotButton:document.getElementById("annotButtonfreehand"+t),freehandhighlighterAnnotButton:document.getElementById("annotButtonfreehandhighlighter"+t),connectedLinesAnnotButton:document.getElementById("annotButtonconnectedline"+
t),polyRulerAnnotButton:document.getElementById("annotButtonpolyruler"+t),maxUploadSize:l,packetSize:p,UIconfig:eval("("+P+")"),singlePageView:null,thumbnailSelectBox:null,thumbnailSelectBoxOrigin:{left:0,top:0},checkLinkAt:function(b,d){if(0===a.Internal.Annotations.selected.length&&null===a.Internal.Annotations.hoveredAnnot){var e=a.Internal.Pages.getVisiblePageNumbers();if(null!=e)for(var h=0;h<e.length;h++){var k=e[h];if(a.Internal.Pages.isPageRendered(k)){var q=a.cache.getPageObject(k);if(null!=
q&&null!=q.links){k=a.Internal.Pages.getRenderingState(k);for(var n=0;n<q.links.length;n++){var y={left:96*q.links[n].x,top:96*q.links[n].y,width:96*q.links[n].width,height:96*q.links[n].height};a.Internal.Matrix.transformBBox(k.contentMatrix,0,y);y.left+=k.pageLeft;y.top+=k.pageTop;var x=a.dom.viewerArea.getBoundingClientRect(),K=b-x.left+a.Internal.Coordinates.getViewerScrollLeft();x=d-x.top+a.Internal.Coordinates.getViewerScrollTop();if(K>=y.left&&K<=y.left+y.width&&x>=y.top&&x<=y.top+y.height)return a.dom.rlink.style.height=
y.height+"px",a.dom.rlink.style.width=y.width+"px",a.dom.rlink.style.left=y.left+"px",a.dom.rlink.style.top=y.top+"px",a.events.overLink=q.links[n],!0}}}}}return!1},handleLinkRectVisibility:function(){a.dom.UIconfig.enableLinkRect&&a.events.overLink?"none"==a.dom.rlink.style.display&&a.IsZoomSynchronized()&&(a.dom.rlink.style.display="block",a.events.setCursor()):"block"==a.dom.rlink.style.display&&(a.dom.rlink.style.display="none",a.events.setCursor())},adjustPageNavBoxWidthForMaxPages:function(b){null!=
a.dom.pageNavBox&&(a.dom.pageNavBox.style.width=(12*b.toString().length).toString()+"px")},updateSelectedPageFader:function(b,d){if(0!=a.dom.viewerArea.offsetWidth&&0!=a.dom.viewerArea.offsetHeight){var e=dvJQuery(a.dom.faderArea),h=a.Localize("_label__fader_page");h=h.replace("#",d);h=h.replace("@",a.serverCtx.pageCount);e.find("div:first-child").text()!=h&&(e.find("div:first-child").text(h),d=100,h=h.length,15<h&&(d=100/15*h),e.width()!=d&&e.width(d),e.finish().animate({opacity:1},{duration:b,start:function(){e.css("z-index",
16777270)}}).delay(1E3).animate({opacity:0},{duration:800,complete:function(){e.css("z-index","")}}))}},ensureSelectedThumbnailVisibility:function(b){if(a.serverCtx.documentLoaded&&a.dom.thumbnailArea){var d=document.getElementById(a.FindSnapIn("thumbnails").snapInID),e=a.GetLastPageNoRequest();e=a.Internal.Thumbnails.getThumbnailFromPageNo(e);null!=e&&(e=d.scrollTop+Math.floor(e.position().top),e!=d.scrollTop?d.scrollTop=e:b&&a.showVisibleThumbnails())}},updateThumbsStyle:function(b,d){if(d){if(a.dom.thumbnailArea)for(a.Internal.Thumbnails.lastUpdatedPageThumbnail=
a.GetLastPageNoRequest(),d=0;d<a.dom.thumbnailArea.childElementCount;d++){var e=a.dom.thumbnailArea.children[d],h=dvJQuery(e);e=a.Internal.Thumbnails.getThumbnailPage(e);0!=e&&this.resetThumbStyle(h,e==a.GetLastPageNoRequest())}}else a.Internal.Thumbnails.lastUpdatedPageThumbnail!=a.GetLastPageNoRequest()&&(0<a.Internal.Thumbnails.lastUpdatedPageThumbnail&&a.dom.thumbnailArea&&this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail),0<a.GetLastPageNoRequest()&&a.dom.thumbnailArea&&this.updateThumbStyle(a.GetLastPageNoRequest()),
a.Internal.Thumbnails.lastUpdatedPageThumbnail=a.GetLastPageNoRequest());b&&this.ensureSelectedThumbnailVisibility(!1)},resetThumbStyle:function(b,d){b.css({display:"inline-block","border-style":d?"dotted":"solid","border-width":"1px",margin:"8px 8px 8px 8px",padding:"5px 5px 0px 5px","text-align":"center",position:"relative","border-color":d?a.dom.UIconfig.strokeColor:"transparent","background-color":"transparent"})},updateThumbStyle:function(b){if(a.dom.thumbnailArea){var d=a.Internal.Thumbnails.getThumbnailFromPageNo(b);
if(null!=d){var e=d[0].getAttribute("mouse-over");e=null!=e&&"true"===e;var h=a.Internal.Thumbnails.isThumbnailSelected(b);b=b==a.GetLastPageNoRequest();DocuViewareUtilities.isBetaEnabled("thumbnailMenu")&&(h?d.addClass("active"):d.removeClass("active"));d.css({"border-color":e?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.strokeColor:"transparent","border-style":e?"solid":"dotted","background-color":h?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"})}}},updateZoomValue:function(b){a.dom.zoomButtonValue&&
(b&&null!==b?(b*=100,b=1<b?b.toFixed(0):.1<b?b.toFixed(1):.01<b?b.toFixed(2):b.toFixed(3),a.dom.zoomButtonValue.textContent=b+" %"):a.dom.zoomButtonValue.textContent="- %")},updateHoverBordersOnDisableToggle:function(b){b.style.border="1px solid transparent"},updateSinglePageModeButton:function(){var b=a.dom.singlePageModeButton?dvJQuery(a.dom.singlePageModeButton):null,d=a.dom.singlePageModeButtonMobile?dvJQuery(a.dom.singlePageModeButtonMobile):null;this.singlePageView?(b&&b.removeClass("button_active"),
d&&d.removeClass("button_active")):(b&&b.addClass("button_active"),d&&d.addClass("button_active"));this.updateButtons()},udpateMouseModeButtons:function(b){var d=a.dom.panMouseModeButton?dvJQuery(a.dom.panMouseModeButton):null,e=a.dom.selectMouseModeButton?dvJQuery(a.dom.selectMouseModeButton):null,h=a.dom.zoomAreaMouseModeButton?dvJQuery(a.dom.zoomAreaMouseModeButton):null,k=a.dom.magnifierButton?dvJQuery(a.dom.magnifierButton):null,q=a.dom.panMouseModeButtonMobile?dvJQuery(a.dom.panMouseModeButtonMobile):
null,n=a.dom.selectMouseModeButtonMobile?dvJQuery(a.dom.selectMouseModeButtonMobile):null,y=a.dom.zoomAreaMouseModeButtonMobile?dvJQuery(a.dom.zoomAreaMouseModeButtonMobile):null;d&&d.removeClass("button_active");e&&e.removeClass("button_active");h&&h.removeClass("button_active");k&&k.removeClass("button_active");q&&q.removeClass("button_active");n&&n.removeClass("button_active");y&&y.removeClass("button_active");switch(b){case 0:case 1:d&&d.addClass("button_active");q&&q.addClass("button_active");
break;case 3:e&&e.addClass("button_active");n&&n.addClass("button_active");break;case 4:h&&h.addClass("button_active");y&&y.addClass("button_active");break;case 5:k&&k.addClass("button_active")}},updateButtons:function(){dvJQuery(a.dom.mainArea).find(".dv-button").each(function(b){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(b){dvJQuery(this).css("border",
"1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+" 0%,"+a.dom.UIconfig.buttonActiveGradientColorEnd+
" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)});dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(b){dvJQuery(this).css("border",
"1px solid");dvJQuery(this).css("-webkit-border-radius","2px");dvJQuery(this).css("-moz-border-radius","2px");dvJQuery(this).css("border-radius","2px");dvJQuery(this).css("border-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","none")})},autoSelectToolbar:function(){if(a.dom.mobileToolbarArea&&0!==dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length){var b=0;dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function(){b+=
dvJQuery(this).outerWidth()});var d=dvJQuery(a.dom.mainArea).width();a.dom.toolbarLogo&&(d-=dvJQuery(a.dom.toolbarLogo).width());b>d?(dvJQuery(a.dom.toolBarArea).css({position:"absolute",left:"-300%"}),dvJQuery(a.dom.mobileToolbarArea).css("display","block"),dvJQuery(a.dom.mobileToolbarTop).css("display","block"),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Mobile):(dvJQuery(a.dom.mobileToolbarArea).css("display","none"),dvJQuery(a.dom.mobileToolbarTop).css("display","none"),dvJQuery(a.dom.toolBarArea).css({position:"relative",
left:""}),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Standard)}else a.dom.visibleToolbar=a.dom.UIconfig.docuViewareLiteMode?DocuViewareAPI.Toolbar.Standard:DocuViewareAPI.Toolbar.None},resizeControlArea:function(){if(dvJQuery(a.dom.containerArea).is(":visible")){a.dom.autoSelectToolbar();var b=a.dom.mainArea.offsetHeight;a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Mobile?b-=dvJQuery(a.dom.mobileToolbarTop).height()+a.dom.mobileToolbarArea.clientHeight:a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard&&
(b-=a.dom.toolBarArea.offsetHeight);b!==a.dom.controlArea.offsetHeight&&(a.dom.controlArea.style.height=b+"px");a.dom.mobileToolbarContainer&&a.dom.resizeMobileToolbarMenu()}},resizeMobileToolbarMenu:function(){var b=0;dvJQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function(){b+=dvJQuery(this).height();b+=parseInt(dvJQuery(this).css("padding-top"),10);b+=parseInt(dvJQuery(this).css("padding-bottom"),10);b+=parseInt(dvJQuery(this).css("border-top"),10);b+=parseInt(dvJQuery(this).css("border-bottom"),
10);b+=parseInt(dvJQuery(this).css("margin-top"),10);b+=parseInt(dvJQuery(this).css("margin-bottom"),10)});b>=dvJQuery(a.dom.controlArea).height()?dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH):dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)},
SelectedTextRegions:{_cache:[],count:function(b){if(b){for(var d=0,e=0;e<this._cache.length;e++)this._cache[e].category==b&&d++;return d}return this._cache.length},addNew:function(b,d,e,h,k,q){var n=document.createElement("div"),y=document.createAttribute("data-dv-sel-type");1===k?y.value="us":2===k&&(y.value="tr");n.attributes.setNamedItem(y);n.coordinates={left:d.left,top:d.top,width:d.width,height:d.height};a.Internal.Coordinates.documentToViewerBox(b,d);n.category=k;n.pageNo=b;n.style.display=
"block";n.style.position="absolute";n.style.padding="0px";n.style.margin="0px";n.style.outline="0";n.style.left=d.left+"px";n.style.top=d.top+"px";n.style.width=d.width+"px";n.style.height=d.height+"px";n.style.backgroundColor=e;h&&(n.style.borderColor=h,n.style.borderWidth="1px",n.style.borderStyle="solid");a.events.forwardMouseEventsToViewer(n);q?q.appendChild(n):a.dom.viewerArea.appendChild(n);this._cache.push(n)},addNews:function(b,d,e,h,k,q){d.forEach(function(n){this.addNew(b,n,e,h,k,q)},this)},
clear:function(b,d){if(0<this._cache.length)if(b||d)for(var e=0;e<this._cache.length;e++)b&&this._cache[e].category!=b||d&&this._cache[e].pageNo!=d||(a.dom.viewerArea.removeChild(this._cache[e]),this._cache.splice(e--,1));else{for(e=0;e<this._cache.length;e++)a.dom.viewerArea.removeChild(this._cache[e]);this._cache=[]}},onPageBoundsChanged:function(){if(0<this._cache.length)for(var b=0;b<this._cache.length;b++){var d=this._cache[b],e={left:d.coordinates.left,top:d.coordinates.top,width:d.coordinates.width,
height:d.coordinates.height};a.Internal.Coordinates.documentToViewerBox(d.pageNo,e);d.style.left=e.left+"px";d.style.top=e.top+"px";d.style.width=e.width+"px";d.style.height=e.height+"px"}}},createBookmarkNode:function(b,d){if(d){var e=document.createElement("li");e.bookmarkID=d.bookmarkID;if(d.hasChildren){e.className="hasChildren";var h=document.createElement("div");h.className="hitarea collapsed";h.bookmarkID=d.bookmarkID;h.onclick=a.events.onBookmarkTogglerClickHandler;h.onmouseover=a.events.onBookmarkItemMouseOverHandler;
h.onmouseout=a.events.onBookmarkItemMouseOutHandler;dvJQuery(e).append(h)}h=document.createElement("span");h.action=d.action;h.onmouseover=a.events.onBookmarkItemMouseOverHandler;h.onmouseout=a.events.onBookmarkItemMouseOutHandler;d.action&&-1<d.action.indexOf("PdfPageDest")&&(h.className="internal");h.onclick=a.events.onBookmarkItemClickHandler;h.innerHTML=d.text;d.foreColor&&(h.style.color=d.foreColor);if(1==d.textAttribute||3==d.textAttribute)h.style.fontStyle="italic";if(2==d.textAttribute||3==
d.textAttribute)h.style.fontWeight="bold";dvJQuery(e).append(h);d.hasChildren&&dvJQuery(e).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');b.append(e)}},setBookmarkOverStyle:function(b,d){dvJQuery(b).parent().find("span:first").css("text-decoration",d?"underline":"none")},selectBookmark:function(b){this.resetBookmarkStyle();dvJQuery(b).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected")},resetBookmarkStyle:function(){a.dom.bookmarksTree&&dvJQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color",
"transparent")},createCommentItem:function(b,d,e){if(b&&b.annotApp.visible){var h=!1;e&&(h=e.find(".dvtoggle:first").hasClass("dvcolapsed"));var k=document.createElement("div");k.className="dvcomment";var q=document.createElement("div");q.className="dvcomment-wrapper";q.id="dvcomment-"+b.annotApp.id+"-"+a.uniqueID;var n=this.generateCommentHeaderMarkup(b,h);q.appendChild(n);b=this.generateCommentContentMarkup(b,h);if(null!=d)for(h=0;h<d.length;h++){var y=d[h],x="dvcomment-"+y.annotApp.id+"-"+a.uniqueID,
K=e.find("#"+x+" .dvtoggle").hasClass("dvcolapsed");y.annotApp.visible&&(n=document.createElement("div"),n.className="dvcomment-wrapper dvanswer",n.id=x,x=this.generateCommentHeaderMarkup(y,K),y=this.generateCommentContentMarkup(y,K),n.appendChild(x),n.appendChild(y),b.appendChild(n))}q.appendChild(b);k.appendChild(q);dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).append(k)}},generateCommentHeaderMarkup:function(b,d){var e=document.createElement("div");e.className="dvcomment-header";
e.addEventListener("click",function(q){q.stopPropagation();(q=document.getElementById(a.uniqueID))&&q.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&e.addEventListener("dblclick",function(q){q.stopPropagation();(q=document.getElementById(a.uniqueID))&&q.control.CommentProperties_Click(b.annotApp.id)});e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});switch(b.annotApp.properties.reviewStatus){case 0:e.className+=
" status-none";break;case 1:e.className+=" status-approved";break;case 2:e.className+=" status-canceled";break;case 3:e.className+=" status-finished";break;case 4:e.className+=" status-rejected"}var h=document.createElement("div");h.className="dvcomment-user";var k=document.createElement("span");k.className="dvtoggle";d&&(k.className+=" dvcolapsed");h.appendChild(k);d=document.createElement("span");d.innerText=b.annotApp.author;h.appendChild(d);d=document.createElement("div");d.className="dvcomment-date";
k=document.createElement("span");k.innerText=DocuViewareUtilities.getLocaleDateTimeFormat(b.annotApp.creationTime,a.dom.UIconfig.locale);d.appendChild(k);e.appendChild(h);e.appendChild(d);return e},generateCommentContentMarkup:function(b,d){var e=document.createElement("div");e.className="dvcomment-content";d&&(e.style="display: none;");e.addEventListener("click",function(n){n.stopPropagation();(n=document.getElementById(a.uniqueID))&&n.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&
e.addEventListener("dblclick",function(n){n.stopPropagation();(n=document.getElementById(a.uniqueID))&&n.control.CommentProperties_Click(b.annotApp.id)});e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});d=document.createElement("div");d.className="dvcomment-message";b.annotApp.properties.fill&&null!=b.annotApp.properties.fillColor&&(d.style.backgroundColor=b.annotApp.properties.fillColor);
var h=document.createElement("p");h.style.color=b.annotApp.properties.foreColor;h.style.fontFamily=b.annotApp.properties.fontName;switch(b.annotApp.properties.fontStyle){case 0:h.style.fontStyle="normal";h.style.fontWeight="normal";h.style.textDecoration="none";break;case 1:h.style.fontStyle="normal";h.style.fontWeight="bold";h.style.textDecoration="none";break;case 2:h.style.fontStyle="italic";h.style.fontWeight="normal";h.style.textDecoration="none";break;case 3:h.style.fontStyle="italic";h.style.fontWeight=
"bold";h.style.textDecoration="none";break;case 4:h.style.fontStyle="normal";h.style.fontWeight="normal";h.style.textDecoration="underline";break;case 5:h.style.fontStyle="normal";h.style.fontWeight="bold";h.style.textDecoration="underline";break;case 6:h.style.fontStyle="italic";h.style.fontWeight="normal";h.style.textDecoration="underline";break;case 7:h.style.fontStyle="italic";h.style.fontWeight="bold";h.style.textDecoration="underline";break;case 8:h.style.fontStyle="normal";h.style.fontWeight=
"normal";h.style.textDecoration="line-through";break;case 9:h.style.fontStyle="normal";h.style.fontWeight="bold";h.style.textDecoration="line-through";break;case 10:h.style.fontStyle="italic";h.style.fontWeight="normal";h.style.textDecoration="line-through";break;case 11:h.style.fontStyle="italic";h.style.fontWeight="bold";h.style.textDecoration="line-through";break;case 12:h.style.fontStyle="normal";h.style.fontWeight="normal";h.style.textDecoration="none";break;case 13:h.style.fontStyle="normal";
h.style.fontWeight="normal";h.style.textDecoration="none";break;case 14:h.style.fontStyle="normal";h.style.fontWeight="normal";h.style.textDecoration="none";break;case 15:h.style.fontStyle="normal",h.style.fontWeight="normal",h.style.textDecoration="none"}h.style.fontSize=b.annotApp.properties.fontSize+"pt";h.innerText=b.annotApp.properties.text;d.appendChild(h);h=document.createElement("div");h.className="dvcomment-options";h.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor;h.style.paddingTop=
"10px";h.style.height="20px";h.style.lineHeight="18px";h.style.display="inline-block";h.style.width="100%";h.style.fill=a.dom.UIconfig.strokeColor;var k=document.createElement("div");k.style.height="20px";k.style.width="16px";k.style.display="inline-block";k.style.float="left";k.style.marginRight="5px";switch(b.ownerAnnotType){case 0:k.title=a.Localize("annotation_rubberstamp");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M502.17,471.293C498.894,479.536,491.698,485,482.614,485H29.392c-9.074,0-16.275-5.452-19.557-13.681l-1.611,11.991C6.007,499.252,15.508,512,29.392,512h453.223c13.883,0,23.357-12.748,21.168-28.689L502.17,471.293z"></path><path d="M29.392,459h453.223c13.883,0,23.357-13.272,21.168-29.215L485.65,293.901C483.802,280.073,472.189,268,459.705,268H312.91c-9.316-21.166-19.587-46.501-19.587-78.786c0-65.296,33.704-94.909,33.704-124.417c0-34.522-30.432-62.552-71.975-64.558c-41.648,2.006-74.72,30.035-74.72,64.558c0,29.507,32.359,59.12,32.359,124.417c0,32.285-9.665,57.621-18.431,78.786H52.3c-12.484,0-24.07,12.073-25.918,25.901L8.224,429.785C6.007,445.728,15.508,459,29.392,459z"></path></g></svg>';
break;case 1:k.title=a.Localize("annotation_rectangle");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M500.984,475H12.015C5.58,475,1,470.943,1,464.485V45.368C1,38.955,5.58,32,12.015,32h488.97C507.42,32,512,38.955,512,45.368v419.117C512,470.943,507.42,475,500.984,475z M23,451h467V56H23V451z"></path></svg>';break;case 2:k.title=a.Localize("annotation_highlighter");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><rect y="460" width="511" height="22"></rect><path d="M171.273,360.939l66.635,66.652l31.584-31.587l38.585,37.878l147.65-50.41l-77.51-96.199l32.437-32.439l-66.608-66.643l22.511-22.507L253.862,29.357L236.748,43.5l99.789,120.753l-187.28,187.29L38.114,236.169L21,250.333l126.696,134.18L171.273,360.939z M379.246,254.834L237.909,396.184l-50.928-50.948l141.364-141.343L379.246,254.834z"></path></g></svg>';
break;case 3:k.title=a.Localize("annotation_line");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M18.027,508.886c-3.465,0-6.93-1.322-9.574-3.968c-5.29-5.289-5.29-13.858,0-19.147L484.646,9.604c5.289-5.29,13.858-5.29,19.147,0c5.289,5.289,5.289,13.858,0,19.148L27.601,504.918C24.956,507.563,21.491,508.886,18.027,508.886z"></path></svg>';break;case 4:k.title=a.Localize("annotation_arrow");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M505.772,5.964L274.419,56.371l74.596,85.702L6.272,484.867c-5.689,5.689-5.689,14.906,0,20.596c2.844,2.845,6.571,4.267,10.297,4.267c3.726,0,7.453-1.422,10.297-4.267l341.316-341.369l70.939,81.502L505.772,5.964z"></path></svg>';
break;case 5:k.title=a.Localize("annotation_connectedline");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><polygon points="423.454,318 239,85.713 239,1 145,1 145,95 162.2,95 67.761,414 17,414 17,509 112,509 112,414 100.812,414 195.267,95 208.079,95 398,337.304 398,414 494,414 494,318 "></polygon></svg>';break;case 6:k.title=a.Localize("annotation_ellipse");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M256,475C114.579,475-0.474,375.635-0.474,253.5S114.579,32,256,32c141.42,0,256.475,99.365,256.475,221.5S397.42,475,256,475z M256,55.315c-128.567,0-233.158,88.914-233.158,198.185c0,109.293,104.591,198.185,233.158,198.185c128.555,0,233.157-88.892,233.157-198.185C489.156,144.229,384.555,55.315,256,55.315z"></path></svg>';
break;case 7:k.title=a.Localize("annotation_image");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><g><path d="M2.1,16c-0.2,0-0.4-0.2-0.4-0.4V4c0-0.1,0-0.2,0.1-0.3l3.6-3.7C5.4,0,5.5,0,5.6,0h8.3 c0.2,0,0.4,0.2,0.4,0.4v15.2c0,0.2-0.2,0.4-0.4,0.4H2.1z M13.5,15.2V0.8H5.8L2.4,4.2l0,11H13.5z"/></g><g><path d="M2.3,4.4C2.1,4.4,2,4.3,2,4.1c0-0.2,0.2-0.4,0.4-0.4h3.1v-3c0-0.2,0.2-0.4,0.4-0.4s0.4,0.2,0.4,0.4v3.4\tc0,0.2-0.2,0.4-0.4,0.4H2.3z"/></g></g><g><path d="M11.8,13.8H4.2c-0.1,0-0.3-0.1-0.3-0.3V6.2C4,6,4.1,5.9,4.2,5.9h7.5C11.9,5.9,12,6,12,6.2v7.4\tC12,13.7,11.9,13.8,11.8,13.8z M4.5,13.3h7V6.4h-7V13.3z"/></g><g><path d="M10.6,12.2C10.6,12.2,10.6,12.2,10.6,12.2H5.3c-0.1,0-0.3-0.1-0.3-0.2c-0.1-0.1,0-0.3,0.1-0.4l1.4-1.5 C6.6,10,6.8,10,6.9,10l0.8,0.4L8.9,9C9,8.9,9.1,8.9,9.2,8.9c0.1,0,0.2,0.1,0.3,0.2l1.4,2.6c0,0.1,0.1,0.1,0.1,0.2 C10.9,12,10.8,12.2,10.6,12.2z M6.1,11.5H10L9.1,9.8L8.1,11c-0.1,0.1-0.3,0.1-0.4,0.1l-0.8-0.4L6.1,11.5z"/></g><g><path d="M6.4,9.7c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S7.1,9.7,6.4,9.7z M6.4,8 C6.1,8,5.9,8.2,5.9,8.5C5.9,8.8,6.1,9,6.4,9s0.5-0.2,0.5-0.5C6.9,8.2,6.7,8,6.4,8z"/></g></g></svg>';
break;case 8:k.title=a.Localize("annotation_text");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M43.419,109l-2.444,88h30.453l3.074-27.874c0.604-4.992,1.576-9.444,2.995-13.384c1.394-3.995,3.521-7.271,6.385-10.003c2.864-2.732,6.595-4.948,11.14-6.418c4.573-1.472,10.221-2.32,17-2.32H149v241.824c0,6.463-0.991,11.612-2.174,15.448c-1.182,3.836-2.992,6.727-5.041,8.829c-2.075,2.049-4.596,3.343-7.38,3.973c-2.811,0.683-5.99,0.926-9.378,0.926H107v24h155v-24h-18.951c-3.258,0-6.252-0.243-9.063-0.926c-2.785-0.63-5.256-1.961-7.384-4.009c-2.128-2.103-3.721-4.976-4.903-8.812c-1.182-3.836-1.698-8.967-1.698-15.43V137h36.056c6.751,0,12.428,0.865,16.973,2.337c4.572,1.471,8.275,3.638,11.142,6.371c2.889,2.733,5.018,6.075,6.41,10.069c1.392,3.94,2.391,8.342,2.968,13.333L296.86,197h30.215l-2.208-88H43.419z"></path><polygon points="471,28 471,0 416.925,0 389.875,0 336,0 336,28 390,28 390,485 336,485 336,512 471,512 471,485 417,485 417,28 \t"></polygon></g></svg>';
break;case 9:k.title=a.Localize("annotation_stickynote");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><g><path d="M469.819,482.76c-0.163-0.056-0.352,0-0.541,0H43.514c-4.457,0-8.656-2.167-11.256-5.8c-55.361-76.884-28.135-152.522-1.788-225.654c24.992-69.462,48.614-135.05,1.788-200.095c-3.047-4.227-3.468-9.78-1.084-14.413c2.371-4.633,7.138-7.558,12.34-7.558h425.765c4.444,0,8.668,2.14,11.269,5.77c55.348,76.884,28.121,152.523,1.787,225.669c-24.706,68.581-48.004,133.383-3.573,197.589c3.033,2.547,4.931,6.339,4.931,10.619C483.691,476.529,477.487,482.76,469.819,482.76z M50.801,455.018h393.552c-36.519-69.354-11.947-137.568,11.867-203.711c24.272-67.403,47.245-131.176,5.771-194.326H68.438c36.505,69.327,11.948,137.542-11.88,203.699C32.298,328.068,9.338,391.842,50.801,455.018z"></path></g></g><g><path d="M156.769,256.182c-6.678,0-12.571-4.821-13.681-11.649c-1.232-7.559,3.901-14.684,11.459-15.903c43.698-7.125,109.436-5.336,162.288-3.901c28.148,0.732,59.953,1.653,68.245-0.027c5.038-3.007,11.593-2.574,16.253,1.49c5.744,5.065,6.338,13.817,1.247,19.587c-7.206,8.208-18.587,8.534-86.503,6.664c-51.635-1.408-115.963-3.115-157.061,3.55C158.258,256.128,157.513,256.182,156.769,256.182z"></path></g><g><path d="M156.769,187.371c-6.678,0-12.557-4.823-13.681-11.623c-1.232-7.558,3.901-14.71,11.459-15.93c43.711-7.152,109.504-5.363,162.343-3.927c28.147,0.758,59.926,1.652,68.19-0.027c5.038-3.008,11.593-2.575,16.253,1.49c5.744,5.066,6.338,13.815,1.247,19.587c-7.206,8.236-18.531,8.561-86.449,6.664c-51.675-1.354-115.977-3.142-157.114,3.576C158.258,187.316,157.513,187.371,156.769,187.371z"></path></g><g><path d="M121.306,334.896c-6.678,0-12.557-4.822-13.681-11.65c-1.233-7.531,3.901-14.683,11.459-15.93c43.752-7.152,109.583-5.31,162.452-3.9c28.119,0.812,59.816,1.625,68.054,0c5.039-3.034,11.648-2.602,16.254,1.516c5.742,5.039,6.312,13.817,1.246,19.561c-7.205,8.181-18.638,8.398-86.312,6.665c-51.703-1.409-116.044-3.197-157.223,3.521C122.795,334.842,122.051,334.896,121.306,334.896z"></path></g></svg>';
break;case 10:k.title=a.Localize("annotation_freehand");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M499.492,181.467c-11.96,44.414-34.563,117.339-89.42,65.275c-34.057-32.322-42.199-91.157-80.909-117.183c-73.542-49.445-91.639,63.943-102.845,115.369c-3.438,16.144-8.056,72.668-23.494,85.512c-25.722,21.399-39.179-22.3-49.779-43.835c-17.208-34.958-52.154-79.916-97.267-55.696C-6.626,264.413,16.887,361.838,0.465,415.423C17.113,386.214,22.62,255.181,75.526,255.69c33.803-3.687,41.408,45.87,50.069,68.527c20.406,53.379,83.937,75.822,116.963,24.443c34.052-52.975,24.004-126.769,51.01-182.784c11.182-23.193,70.538,81.331,79.993,90.828c23.427,22.811,63.715,51.87,96.841,28.584c42.556-29.914,32.615-97.03,42.144-140.822C507.233,156.46,502.883,168.794,499.492,181.467C496.096,194.08,502.778,168.854,499.492,181.467z M203.761,328.545l-0.014,0.027C203.998,328.008,204.119,327.738,203.761,328.545zM202.883,330.527l-0.015,0.046C202.837,330.637,202.848,330.609,202.883,330.527z M297.399,158.402C298.163,158.724,296.701,158.864,297.399,158.402C297.498,158.444,297.2,158.534,297.399,158.402z M297.736,158.915C297.252,159.131,297.667,158.945,297.736,158.915C297.662,158.948,297.688,158.936,297.736,158.915z M299.317,158.358C298.857,158.425,300.358,157.938,299.317,158.358C299.294,158.361,300.867,157.733,299.317,158.358z M301.544,160.298l0.002,0.002C301.514,160.271,301.506,160.264,301.544,160.298z"></path></svg>';
break;case 11:k.title=a.Localize("annotation_freehandhighlighter");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><g><path d="M472.685,400.812c-2.421,2.721-6.351,6.44-11.314,10.836c-9.825,9.039-25.58,20.031-45.521,30.845c-39.815,21.707-98.25,41.07-158.094,46.855c-29.812,3.23-59.989,2.698-87.392-1.899c-27.469-4.519-51.906-13.823-70.315-26.18c-18.498-12.204-31.01-26.869-37.717-38.372c-3.786-5.53-5.918-10.382-7.65-13.591c-1.676-3.243-2.576-4.974-2.576-4.974s0.488,1.876,1.41,5.407c1.088,3.464,1.832,8.971,4.874,15.178c2.443,6.506,6.473,13.911,11.714,22.193c5.596,7.995,12.602,16.811,22.039,24.539c18.375,16.099,44.756,28.923,74.279,35.44c29.5,6.973,61.921,7.815,93.607,4.862c63.566-6.306,124.054-30.643,162.682-58.424c9.838-6.662,18.12-13.855,25.037-20.573c6.983-6.64,12.602-12.846,16.876-18.331c4.485-5.318,7.173-9.925,9.038-13.068c1.898-3.108,2.909-4.773,2.909-4.773S475.217,398.181,472.685,400.812z"></path><path d="M181.89,338.128l68.226,68.226l31.801-31.802l40.035,38.241l151.154-51.584l-79.351-98.495l33.208-33.208l-67.064-69.36l21.908-21.905L266.448-1.324l-17.521,14.478l102.17,123.62L159.36,328.499L49.557,211.623l-17.521,14.5l125.726,136.129L181.89,338.128z M394.809,229.506L250.116,374.199l-52.148-52.146L342.692,177.35L394.809,229.506z"></path></g></svg>';
break;case 12:k.title=a.Localize("annotation_freehandpolygon");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><path d="M3.4,16c-0.2,0-0.3-0.1-0.4-0.2l-3-5.6C-0.1,10,0,9.7,0.2,9.6l4-2.8l0-6.4c0-0.2,0.1-0.3,0.2-0.4 C4.5,0,4.6,0,4.7,0c0.1,0,0.1,0,0.2,0.1l10.9,6.1C16,6.2,16,6.4,16,6.7l-2.9,9C13,15.9,12.8,16,12.7,16H3.4z M12.3,15.1L15,6.7l-10-5.5l0,5.9C5,7.2,5,7.4,4.9,7.4L1,10.1l2.7,5H12.3z"/></g></svg>';break;case 13:k.title=a.Localize("annotation_link");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><g><g><path d="M6,10.3c-0.1,0.1-0.4,0.1-0.5,0c-0.1-0.1-0.1-0.4,0-0.5l4-4c0.1-0.1,0.4-0.1,0.5,0c0.1,0.1,0.1,0.4,0,0.5 L6,10.3z"/></g><g><path d="M13,7.6c-1,1-2.4,1.2-3.6,0.6C9.3,8.2,9.2,8.1,9.2,8c0-0.1,0-0.2,0-0.3c0,0,0-0.1,0.1-0.1 c0.1-0.1,0.3-0.1,0.4-0.1c0.9,0.5,2.1,0.3,2.8-0.5l2.1-2.1c1-1,1-2.5,0-3.5l-0.2-0.2c-1-1-2.5-1-3.5,0L8.9,3.5 C8.2,4.2,8,5.2,8.3,6.2c0.1,0.1,0,0.3-0.1,0.4c0,0-0.1,0.1-0.1,0.1C8,6.7,7.8,6.6,7.7,6.4C7.2,5.3,7.5,3.9,8.4,3l2.1-2.1 c1.2-1.2,3.2-1.2,4.5,0l0.2,0.2c1.2,1.2,1.2,3.2,0,4.5L13,7.6z"/></g><g><path d="M5.6,15.1c-1.2,1.2-3.2,1.2-4.5,0l-0.2-0.2c-1.2-1.2-1.2-3.2,0-4.5L3,8.4c0.9-0.9,2.3-1.2,3.5-0.7 C6.6,7.8,6.7,8,6.6,8.2c0,0,0,0.1-0.1,0.1C6.5,8.4,6.3,8.4,6.2,8.3C5.2,8,4.2,8.2,3.5,8.9l-2.1,2.1c-1,1-1,2.5,0,3.5l0.2,0.2 c1,1,2.5,1,3.5,0l2.1-2.1c0.7-0.7,0.9-1.9,0.5-2.8c-0.1-0.1,0-0.3,0.1-0.4c0,0,0.1-0.1,0.1-0.1c0.1,0,0.2,0,0.3,0 c0.1,0,0.2,0.1,0.2,0.2c0.6,1.2,0.3,2.7-0.6,3.6L5.6,15.1z"/></g></g></svg>';
break;case 14:k.title=a.Localize("annotation_polygon");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%"><path d="M4.2,15.2c-0.2,0-0.3-0.1-0.3-0.2L0.1,8.2C0,8.1,0,7.9,0.1,7.8L3.9,1c0.1-0.1,0.2-0.2,0.3-0.2h7.6 c0.1,0,0.3,0.1,0.3,0.2l3.8,6.8c0.1,0.1,0.1,0.3,0,0.4L12.1,15c-0.1,0.1-0.2,0.2-0.3,0.2H4.2z M11.6,14.6L15.1,8l-3.6-6.6H4.4L0.9,8 l3.6,6.6H11.6z"/></svg>';break;case 15:k.title=a.Localize("annotation_ruler");k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M210.091,479.958 M499.701,177.36c4.492-4.675,4.693-12.183,0.004-16.689L344.134,11.188 c-4.69-4.506-15.696-7.381-20.188-2.708l-7.533,7.842L197.22,140.381L33.748,310.516l-21.75,22.641l-7.971,8.295l11.851,11.387 l147.033,141.279l8.538,8.202c4.689,4.508,11.782,4.424,16.305-0.285 M209.507,479.395 M180.333,157.957L99.611,241.97 L49.96,293.643 M179.123,477.244L40.627,344.169l13.848-14.415l15.874-16.52l16.169,15.536l17.576,16.888l16.874,16.212 l16.873,16.214l16.886-17.578l-16.872-16.213l-16.873-16.211l-17.577-16.888l-16.168-15.536l15.537-16.17l16.168,15.537 l17.578,16.888l16.873,16.212l16.888-17.577l-16.874-16.212l-17.577-16.887l-16.169-15.537l16.213-16.873l16.168,15.537 l17.577,16.888l16.873,16.212l16.212-16.873l-50.619-48.636l16.212-16.873l67.491,64.849l16.887-17.575l-67.491-64.85l15.535-16.169 l50.62,48.636l16.888-17.575l-50.618-48.637l16.211-16.874l50.618,48.637l16.213-16.873l-50.618-48.637l16.212-16.873l67.491,64.849 l16.888-17.575l-67.49-64.849l15.534-16.171l50.619,48.638l16.889-17.577l-50.619-48.637l20.903-21.766l138.499,133.077 L356.444,292.697l-16.889,17.576l-64.848,67.49l-65.525,68.195l-16.212,16.872L179.123,477.244z M356.089,326.837 M226.304,463.085"></path> path d="M798.922,450.447 M797.895,20.84c-0.002-6.649-5.19-12.344-11.861-12.34L568.746,8.593 c-6.672,0.003-12.854,5.703-12.851,12.351l0.005,11.154l0.084,176.454l0.104,242l0.017,32.201l0.005,11.799l12.856-0.007 l205.143-0.088l12.144-0.006c6.672-0.002,11.855-5.106,11.852-11.803 M798.089,450.447 M555.994,233.552l0.053,119.499l0.031,73.501  M774.099,470.458l-193,0.083l-0.011-20.501l-0.01-23.5l23-0.009l25-0.011l24-0.012l24.001-0.009l-0.013-25l-24,0.01l-23.999,0.011 l-25.001,0.012l-22.998,0.009l-0.01-23l22.999-0.009l25.001-0.012l23.999-0.011l-0.011-25.001l-24,0.012l-25,0.012l-23,0.009 l-0.01-24.001l22.999-0.008l25-0.012l24-0.011l-0.01-24l-72,0.031l-0.011-24l96-0.042l-0.011-25l-96,0.042l-0.01-23l72-0.031 l-0.011-25l-72,0.03l-0.012-24l72.001-0.031l-0.01-24l-72.001,0.031l-0.01-24l96-0.042l-0.01-25l-96,0.041l-0.011-23l72.001-0.03 l-0.013-25l-71.999,0.031l-0.021-30.953l193.001-0.084l0.083,175.454l0.011,25l0.041,96l0.041,97l0.011,24L774.099,470.458z  M797.995,233.448 M798.911,426.446"/&gt;</svg>';
break;case 16:k.title=a.Localize("annotation_polyruler"),k.innerHTML='<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M497.429,220H461V15.345C461,8.696,455.814,3,449.143,3H231.856C225.185,3,219,8.696,219,15.345V26.5V220H14.571C7.899,220,2,225.982,2,232.631V244.5v205.416V462h12.571H219v36.202V510h12.856H437h12.143c6.672,0,11.857-5.102,11.857-11.798V462h24h12.429c6.672,0,11.571-5.388,11.571-12.084V232.631C509,225.982,504.101,220,497.429,220z M195,438v-73h-24v73h-24v-97h-25v97H99v-73H74v73H26V245h193v119.5V438H195z M437,486H244v-24.5V438h23h25h24h24v-25h-24h-24h-25h-23v-23h23h25h24v-25h-24h-25h-23v-24h23h25h24v-24h-72v-24h96v-25h-96v-23h72v-25h-72v-24h72v-24h-72v-24h96v-25h-96v-23h72V75h-72V27h193v192.5v25v96v97v24V486zM485,438h-24V245h24V438z"></path></svg>'}h.appendChild(k);
k=document.createElement("div");k.style.fontSize="smaller";k.style.lineHeight="20px";k.style.display="inline-block";k.innerText=a.Localize("label_page")+" "+b.annotApp.pageNo;h.appendChild(k);b.annotApp.canEdit&&(k=document.createElement("div"),k.title=a.Localize("annotation_action_edit"),k.style.height="20px",k.style.width="16px",k.style.marginLeft="15px",k.style.display="inline-block",k.style.float="right",k.addEventListener("click",function(){var n=document.getElementById(a.uniqueID);n&&n.control.CommentProperties_Click(b.annotApp.id)}),
k.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),k.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),k.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z'></path></svg>",
h.appendChild(k));k=a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;var q=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;(k||q)&&b.annotApp.properties.allowAnswer&&(k=document.createElement("div"),k.title=a.Localize("label_comment_answer"),k.style.height="20px",k.style.width="16px",k.style.display="inline-block",k.style.float="right",k.addEventListener("click",function(){var n=document.getElementById(a.uniqueID);
n&&(q?n.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id):n.control.CommentAnswer_Click(b.annotApp.id))}),k.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)}),k.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),k.innerHTML="<svg viewBox='0 0 16 16' width='100%' height='100%'><path d='M7 12.119v3.881l-6-6 6-6v3.966c6.98 0.164 6.681-4.747 4.904-7.966 4.386 4.741 3.455 12.337-4.904 12.119z'></path></svg>",
h.appendChild(k));k=document.createElement("div");k.style.height="20px";k.style.width="16px";k.style.display="inline-block";k.style.marginRight="15px";k.style.float="right";if(0!==b.annotApp.properties.reviewStatus)switch(b.annotApp.properties.reviewStatus){case 1:k.title=a.Localize("label_comment_status_approved");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-approved"><path d="M8,16c4.4,0,8-3.6,8-8s-3.6-8-8-8S0,3.6,0,8S3.6,16,8,16z M8,1.5c3.6,0,6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S1.5,11.6,1.5,8\tS4.4,1.5,8,1.5z"/><path d="M6.8,11h3.6c0.3,0,0.6-0.2,0.7-0.5l1.2-2.8c0-0.1,0.1-0.2,0.1-0.3V6.6l0,0l0,0c0-0.4-0.4-0.8-0.8-0.8H9.1 L9.4,4l0-0.1c0-0.2-0.1-0.3-0.2-0.4L8.9,3L6.2,5.6C6.1,5.8,6,6,6,6.2v4C6,10.6,6.4,11,6.8,11z M5.2,11V6.2H3.6V11H5.2z"/></svg>';
break;case 2:k.title=a.Localize("label_comment_status_canceled");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-canceled"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><polygon points="10.6,4 8,6.6 5.4,4 4,5.4 6.6,8 4,10.6 5.4,12 8,9.4 10.6,12 12,10.6 9.4,8 12,5.4 "/></svg>';break;case 3:k.title=a.Localize("label_comment_status_finished");k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-finished"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><g transform="translate(256 352)"><path d="M-244.9-347.5l-4.2,4.2l-2-2l-1.4,1.4l3.4,3.4l5.7-5.7L-244.9-347.5z"/></g></svg>';
break;case 4:k.title=a.Localize("label_comment_status_rejected"),k.innerHTML='<svg viewBox="0 0 16 16" width="100%" height="100%" class="icon-rejected"><path d="M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0z M8,14.5c-3.6,0-6.5-2.9-6.5-6.5S4.4,1.5,8,1.5s6.5,2.9,6.5,6.5 S11.6,14.5,8,14.5z"/><path d="M9.2,5H5.6C5.3,5,5,5.2,4.9,5.5L3.7,8.3c0,0.1-0.1,0.2-0.1,0.3v0.8l0,0l0,0c0,0.4,0.4,0.8,0.8,0.8h2.5 L6.6,12l0,0.1c0,0.2,0.1,0.3,0.2,0.4L7.1,13l2.6-2.6C9.9,10.2,10,10,10,9.8v-4C10,5.4,9.6,5,9.2,5z M10.8,5v4.8h1.6V5H10.8z"/></svg>'}h.appendChild(k);
d.appendChild(h);e.appendChild(d);return e},sidePanelResized:function(){if(a.callbacks.onSnapInPanelResized)a.callbacks.onSnapInPanelResized(dvJQuery(a.dom.leftSideArea).width())},sidePanelToggled:function(b){if(a.callbacks.onSnapInPanelToggle)a.callbacks.onSnapInPanelToggle(b)},removeViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: auto;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: auto;","touch-action: none;")):-1!=!b.indexOf("touch-action:")&&
a.dom.viewerArea.setAttribute("style",b+"touch-action: none;")},addViewAreaTouchAction:function(){var b=a.dom.viewerArea.getAttribute("style");-1!=b.indexOf("touch-action: none;")?a.dom.viewerArea.setAttribute("style",b.replace("touch-action: none;","touch-action: auto;")):-1!=!b.indexOf("touch-action:")&&a.dom.viewerArea.setAttribute("style",b+"touch-action: auto;")}},events:{ownMouseEvents:!1,overLink:null,overPageText:null,overAnnotEditable:!1,mouseMode:0,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,
mouseDownViewerScrollLeft:0,mouseDownViewerScrollTop:0,mouseDownClientX:0,mouseDownClientY:0,isAddingRedactionMarksMode:!1,isDrawingPath:!1,isMouseDown:!1,pathPoints:null,isPanning:!1,isZoomingPreview:!1,canPan:function(){return!0},isResizingUI:!1,isSelectingText:!1,isDragMultipleSelecting:!1,UIStateVerifier:function(){if(null==a.NewViewerSizeTimeout){var b=a.dom.getViewerContainer();if(null!=b&&(a.viewerWidth!=b.offsetWidth||a.viewerHeight!=b.offsetHeight)&&!a.events.isResizingUI)a.events.onResize()}a.events.isZoomingPreview||
a.hasPendingAction(!0,!1,!0,!1)||a.IsZoomSynchronized()||a.SetCurrentZoom(a.cache.pageCanvasZoom);setTimeout(a.events.UIStateVerifier,300)},restartZoomPreviewAutoSubmitter:function(b){var d=function(){a.events.isZoomingPreview&&(a.events.isZoomingPreviewTouchMode=null,a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.events.disableSingleInputEvents=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom));clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout);a.EnableZoomPreviewAutoSubmitterTimeout=
null};if(b||null!=a.EnableZoomPreviewAutoSubmitterTimeout)null!=a.EnableZoomPreviewAutoSubmitterTimeout&&clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout),a.EnableZoomPreviewAutoSubmitterTimeout=setTimeout(d,2E3)},enableZoomPreviewAutoSubmitter:function(){a.events.restartZoomPreviewAutoSubmitter(!0)},onNewViewerSize:function(){a.NewViewerSizeTimeout&&(clearTimeout(a.NewViewerSizeTimeout),a.NewViewerSizeTimeout=null);a.dom.resizeControlArea();a.dom.searchArea&&dvJQuery(a.dom.searchArea.parentElement).hasClass("active")&&
(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");var b={sessionID:a.ajax.sessionID,reuseSessionContext:!0,clientConfiguration:a.getConfig(),newViewerSize:!0};a.viewerWidth==b.clientConfiguration.viewerWidth&&a.viewerHeight==b.clientConfiguration.viewerHeight||0===b.clientConfiguration.viewerWidth||0===b.clientConfiguration.viewerHeight||(a.NewViewerSizePreview(),a.NewViewerSizeTimeout=setTimeout(function(){if(a.hasPendingAction(!1,
!1,!0))a.events.onNewViewerSize();else{var d=a.getConfig();b.clientConfiguration.viewerWidth==d.viewerWidth&&b.clientConfiguration.viewerHeight==d.viewerHeight&&(a.viewerWidth=b.clientConfiguration.viewerWidth,a.viewerHeight=b.clientConfiguration.viewerHeight,a.ajax.PostBaseRequest("init",{data:b,success:function(e){var h="string"===typeof e?eval("("+e+")"):e;h&&h.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(h,!1,!1,!0),a.showVisibleThumbnails()):a.ajax.HandleError(e);a.NewViewerSizeTimeout=
null},error:function(){a.NewViewerSizeTimeout=null}},!1,!0))}},300),a.serverCtx.vScrollbarVisible?dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth-a.dom.sbWidth):dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth),dvJQuery(a.dom.mainArea).find(".dvUi-dialog:visible").not(".dvPassword-dialog").find(".dvUi-dialog-content").dvDialog("refresh",dvJQuery(a.dom.controlArea).height()))},onLoad:function(b){if(a.isSafari||a.isIOS||a.isIE10||a.isIE9)null!=a.dom.fullscreenButton&&dvJQuery(a.dom.fullscreenButton).remove(),
null!=a.dom.fullscreenButtonMobile&&dvJQuery(a.dom.fullscreenButtonMobile).remove();a.IsTwainSupportAvailable()||(null!=a.dom.twainAcquisitionButton&&dvJQuery(a.dom.twainAcquisitionButton).remove(),null!=a.dom.twainAcquisitionButtonMobile&&dvJQuery(a.dom.twainAcquisitionButtonMobile).remove());!a.isIE||a.isIE10||a.isIE11||(null!=a.dom.openFromFileButton&&dvJQuery(a.dom.openFromFileButton).remove(),null!=a.dom.openFromFileButtonMobile&&dvJQuery(a.dom.openFromFileButtonMobile).remove());a.isIE&&!a.isIE11&&
null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.position="static");a.isIE&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.display="block");a.SetMouseMode(0);1==b&&(a.waitForInit=!0);window.setTimeout(function(){a.dom.resizeControlArea();var d=a.dom.getViewerContainer();a.viewerWidth=d.offsetWidth;a.viewerHeight=d.offsetHeight;a.dom.mainArea.style.visibility="visible";1==b?(d={sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,clientConfiguration:a.getConfig(),reuseSessionContext:!1,
newViewerSize:!1},a.DisplayPendingActionNotification(),a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"init",requestData:d}),contentType:"application/json",success:function(e){a.waitForInit=!1;a.HidePendingActionNotification();var h="string"===typeof e?eval("("+e+")"):e;h&&h.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(h),h.documentLoaded&&!a.dom.singlePageView&&(e=a.GetCurrentPage(),
a.Internal.Pages.isPageVisible(e)||a.EnsureCurrentPageVisibility())):a.ajax.HandleError(e)},error:function(e){a.ajax.HandleError(e)}})):2==b&&a.LoadFromUri("","")},100)},onResize:function(){a.events.onNewViewerSize()},forwardMouseEventsToViewer:function(b){window.PointerEvent?(b.onpointerup=function(d){switch(d.pointerType){case "mouse":a.events.mouseup(d);break;case "pen":a.events.mouseup(d);d.preventDefault();break;case "touch":a.events.mouseup(d);d.preventDefault();break;default:a.events.mouseup(d)}},
b.onpointerdown=function(d){switch(d.pointerType){case "mouse":a.events.mousedown(d);break;case "pen":a.events.mousedown(d,!0);case "touch":a.events.mousedown(d,!0);break;default:a.events.mousedown(d)}},b.onpointermove=function(d){switch(d.pointerType){case "mouse":a.events.mousemove(d);break;case "pen":a.events.mousemove(d,!0);d.preventDefault();break;case "touch":a.events.mousemove(d,!0)&&d.preventDefault();break;default:a.events.mousemove(d)}},b.onpointerleave=function(d){switch(d.pointerType){case "mouse":a.events.mouseleave(d);
break;case "pen":a.events.mouseleave(d);break;default:a.events.mouseleave(d)}},b.onpointerenter=function(d){switch(d.pointerType){case "mouse":a.events.mouseenter(d);break;case "pen":a.events.mouseenter(d);break;default:a.events.mouseenter(d)}}):(b.onmouseup=function(d){a.events.mouseup(d)},b.onmousedown=function(d){a.events.mousedown(d)},b.onmousemove=function(d){a.events.mousemove(d)},b.onmouseleave=function(d){a.events.mouseleave(d)},b.onmouseenter=function(d){a.events.mouseenter(d)},b.ontouchstart=
function(d){1==d.changedTouches.length&&a.events.mousedown(d.changedTouches[0],!0)},b.ontouchmove=function(d){1==d.changedTouches.length&&a.events.mousemove(d.changedTouches[0],!0)&&d.preventDefault()},b.ontouchend=function(d){1==d.changedTouches.length&&(a.events.mouseup(d.changedTouches[0]),d.preventDefault())});b.ondblclick=function(d){a.events.dblclick(d)}},dblclick:function(b){if(null==a.dom.drawingModeArea||"block"!=a.dom.drawingModeArea.style.display)a.ExitAnnotationDrawingMode(),this.overPageText&&
0==a.dom.SelectedTextRegions.count(1)&&a.Internal.Text.captureAndHighlightSelectedText(this.mouseDownClientX,this.mouseDownClientY,this.mouseDownClientX,this.mouseDownClientY,!0,!1)},mousedown:function(b,d,e){if(!a.events.disableSingleInputEvents&&3!=b.which){this.isMouseDown=!0;this.mouseX=b.clientX;this.mouseY=b.clientY;this.mouseDownViewerScrollLeft=a.Internal.Coordinates.getViewerScrollLeft();this.mouseDownViewerScrollTop=a.Internal.Coordinates.getViewerScrollTop();this.mouseDownX=b.clientX+this.mouseDownViewerScrollLeft;
this.mouseDownY=b.clientY+this.mouseDownViewerScrollTop;this.mouseDownClientX=b.clientX;this.mouseDownClientY=b.clientY;var h=a.dom.viewerArea.getBoundingClientRect(),k=this.mouseDownX-h.left,q=this.mouseDownY-h.top;e=-1;for(var n=1;n<=a.GetPageCount();n++){var y=a.Internal.Pages.getRenderingState(n),x=y.pageLeft+y.pageWidth,K=y.pageTop+y.pageHeight;if(k>=y.pageLeft&&k<=x&&q>=y.pageTop&&q<=K){e=n;break}}if(1==this.mouseMode)null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?
a.Internal.Redaction.disableAddRedactionMarksMode():(a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX-h.left,this.mouseDownY-h.top));else if(2==this.mouseMode)b={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-h.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-h.top},a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,(5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||
16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentInteractiveAnnotProperties.type)&&!a.dom.UIconfig.disableAnnotationDrawingModePanel&&(a.dom.drawingModeArea.style.display="block",a.dom.modalOverlayArea.style.display="block"),null==this.pathPoints?(e=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),a.dom.freehandCan.style.left=e.pageLeft+"px",a.dom.freehandCan.style.top=e.pageTop+"px",a.dom.freehandCan.width=
e.pageWidth,a.dom.freehandCan.height=e.pageHeight,a.dom.freehandCan.getContext("2d").clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height),a.dom.freehandCan.style.display="block",this.pathPoints=[b]):(5!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&this.pathPoints.push({x:131072,y:131072}),this.pathPoints.push(b)),d&&a.Internal.Annotations.prerenderPendingFreenhandAnnot(b),this.isDrawingPath=!0;else if(3==
this.mouseMode||4==this.mouseMode)a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX-h.left,this.mouseDownY-h.top);else{a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);if(!d&&(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5),null!=this.overPageText)){this.isSelectingText=!0;this.setCursor();return}this.overLink||(1==this.canPan()&&(this.isPanning=!0,a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")),
d&&(this.overLink=!1,a.dom.checkLinkAt(b.clientX,b.clientY)),a.dom.handleLinkRectVisibility())}}},mouseup:function(b){if(!a.events.disableSingleInputEvents){var d=this.isSelectingText;this.isPanning=this.isSelectingText=this.isMouseDown=!1;if(d&&0<a.dom.SelectedTextRegions.count(1))this.setCursor(),a.callbacks.onTextSelected&&(d=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(d)),b=dvJQuery.Event("contextmenu.dv-context-menu-viewerContextMenu"+a.uniqueID,{clientX:b.clientX,clientY:b.clientY,
skipNextCloseEvent:!0}),dvJQuery(a.dom.viewerArea).trigger(b);else if(this.overLink)3!=b.which&&a.IsZoomSynchronized()&&(b=this.overLink.destPage,d=this.overLink.destUri,this.overLink=null,a.dom.handleLinkRectVisibility(),"unknown"!==d&&0===b?a.Internal.Destinations.followLink(d):a.SelectPageEx(b,!0,!0,!0,!1),this.setCursor());else if(1!=this.mouseMode&&3!=this.mouseMode&&4!=this.mouseMode||!a.Internal.Selection.selectionArea.mouseUp(b))if(2==this.mouseMode&&this.isDrawingPath)a.dom.UIconfig.freeHandContinuousDrawingMode&&
10==a.Internal.Annotations.currentInteractiveAnnotProperties.type||5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||(a.dom.freehandCan.style.display="none",this.isDrawingPath=!1,a.Internal.Annotations.addAnnotInteractive());else if(0<a.Internal.Annotations.selected.length)for(b=a.Internal.Annotations.selected.length-1;0<=b;b--)a.Internal.Annotations.selected[b].stopEditing(),a.Internal.Annotations.selected[b].updateCursor();
else this.overPageText||0==this.mouseMode&&1==this.canPan()&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")}},mousemove:function(b,d){if(!a.events.disableSingleInputEvents)if(this.isSelectingText){a.dom.SelectedTextRegions.clear(1);var e=this.mouseDownViewerScrollLeft-a.Internal.Coordinates.getViewerScrollLeft(),h=this.mouseDownViewerScrollTop-a.Internal.Coordinates.getViewerScrollTop();if((this.mouseDownClientX+e!=b.clientX||this.mouseDownClientY+h!=b.clientY)&&(b=a.Internal.Text.captureSelectedText(this.mouseDownClientX+
e,this.mouseDownClientY+h,b.clientX,b.clientY,!1,b.altKey))&&0<b.length){d=document.createDocumentFragment();for(var k=0;k<b.length;k++)for(var q=0;q<b[k].regions.length;q++)a.dom.SelectedTextRegions.addNew(b[k].pageNo,{left:b[k].regions[q].Left/b[k].scale,top:b[k].regions[q].Top/b[k].scale,width:b[k].regions[q].Width/b[k].scale,height:b[k].regions[q].Height/b[k].scale},"rgba(0,0,201,0.3)",null,1,d);a.dom.viewerArea.appendChild(d)}}else{k=!1;this.overPageText=null;q=!1;1==this.mouseMode&&null!=a.Internal.Annotations.hoveredAnnot&&
17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type&&(q=!0);if(1==this.mouseMode&&!q||3==this.mouseMode||4==this.mouseMode)k=a.Internal.Selection.selectionArea.mouseMove(b,d);2===this.mouseMode&&this.isDrawingPath&&(q=a.dom.viewerArea.getBoundingClientRect(),k=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,q={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-q.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-
q.top},this.isMouseDown&&!k&&(e=!0,k=this.pathPoints.length,1<k&&(e=this.pathPoints[k-2],h=this.pathPoints[k-1],e=1.5<=Math.sqrt(Math.abs((e.y-h.y)*(e.x-q.x)-(e.y-q.y)*(e.x-h.x)))),e?this.pathPoints.push(q):this.pathPoints[k-1]=q),a.Internal.Annotations.prerenderPendingFreenhandAnnot(q),k=!0);if(!k&&0<a.Internal.Annotations.selected.length)for(e=b.clientX-this.mouseX,h=b.clientY-this.mouseY,q=a.Internal.Annotations.selected.length-1;0<=q;q--){var n=a.Internal.Annotations.selected[q];k|=n.isEditing();
if(n.isMoving){n.annotrectNew.left+=e;n.annotrectNew.top+=h;n.render(!0);if(a.callbacks.onAnnotationMoved)a.callbacks.onAnnotationMoved({id:n.annotApp.id});if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(var y=a.Internal.Annotations.selected.length-1;0<=y;y--){var x=a.Internal.Annotations.selected[y];if(x!=n&&(x.annotrectNew.left+=e,x.annotrectNew.top+=h,x.render(!0),a.callbacks.onAnnotationMoved))a.callbacks.onAnnotationMoved({id:x.annotApp.id})}}else if(n.isRotating){if(n.annotApp.properties.rotation=
a.Internal.Utilities.normalizeRotation(n.annotApp.properties.rotation+e),n.render(!1),a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(y=a.Internal.Annotations.selected.length-1;0<=y;y--)x=a.Internal.Annotations.selected[y],x!=n&&(x.annotApp.properties.rotation=a.Internal.Utilities.normalizeRotation(x.annotApp.properties.rotation+e),x.render(!1))}else if(-1!=n.resizingMode){x=-n.annotApp.properties.rotation*Math.PI/180;y=Math.cos(x);x=Math.sin(x);var K=e;
e=e*y-h*x;h=K*x+h*y;K=function(F,Y,aa,fa){switch(Y){case 0:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa));F.render(!1);break;case 1:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa));0<F.annotrectNew.height-fa&&(F.annotrectNew.top+=fa,F.addHeight(-fa));F.render(!1);break;case 2:0<F.annotrectNew.height-fa&&(F.annotrectNew.top+=fa,F.addHeight(-fa));F.render(!1);break;case 3:0<F.annotrectNew.width+aa&&F.addWidth(aa);0<F.annotrectNew.height-fa&&(F.annotrectNew.top+=
fa,F.addHeight(-fa));F.render(!1);break;case 4:0<F.annotrectNew.width+aa&&F.addWidth(aa);F.render(!1);break;case 5:0<F.annotrectNew.width+aa&&F.addWidth(aa);0<F.annotrectNew.height+fa&&F.addHeight(fa);F.render(!1);break;case 6:0<F.annotrectNew.height+fa&&F.addHeight(fa);F.render(!1);break;case 7:0<F.annotrectNew.width-aa&&(F.annotrectNew.left+=aa,F.addWidth(-aa)),0<F.annotrectNew.height+fa&&F.addHeight(fa),F.render(!1)}};K(n,n.resizingMode,e,h);if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(y=
a.Internal.Annotations.selected.length-1;0<=y;y--)x=a.Internal.Annotations.selected[y],x!=n&&K(x,n.resizingMode,e,h)}n.updateCursor()}k||0!=this.mouseMode||d||1!=this.canPan()||1!=this.isPanning||(k=!0,dvJQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft-(b.clientX-this.mouseDownClientX)),dvJQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop-(b.clientY-this.mouseDownClientY)));this.overLink=!1;3!=this.mouseMode&&4!=this.mouseMode&&(k||(a.dom.checkLinkAt(b.clientX,b.clientY)||
(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5)),this.setCursor()),a.dom.handleLinkRectVisibility());this.mouseX=b.clientX;this.mouseY=b.clientY;return k}},mouseleave:function(b){a.events.disableSingleInputEvents||this.isResizingUI||this.isSelectingText||(this.isPanning=!1,0==this.mouseMode&&a.dom.viewerArea.cursorMgr.setStdCursor("default"),this.overLink=null,a.dom.handleLinkRectVisibility())},mouseenter:function(b){this.isResizingUI||this.isSelectingText||this.setCursor()},
setCursor:function(){if(this.isResizingUI)a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");else switch(this.mouseMode){case 0:if(null!=this.overPageText){var b=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),d=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getPageRotation(this.overPageText.page)),e=a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate);b=b+e-d;360<b?b-=360:0>b&&(b+=360);90==b||270==b?a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text"):
a.dom.viewerArea.cursorMgr.setStdCursor("text");break}if(this.overLink){a.dom.viewerArea.cursorMgr.setStdCursor("pointer");break}1==this.canPan()?1==!this.isPanning&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor"):a.dom.viewerArea.cursorMgr.setStdCursor("default");break;case 1:null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?a.dom.viewerArea.cursorMgr.setStdCursor("default"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");
break;case 2:a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");break;case 3:case 4:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("none")}},onSnapInButtonMouseEnter:function(b){dvJQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.cursor="pointer")},onSnapInButtonMouseLeave:function(b){dvJQuery(b).hasClass("active")||
(b.style.backgroundColor=a.dom.UIconfig.headerColor,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderTop,b.style.cursor="default")},onThumbnailAreaMouseDownHandler:function(b){if(b.target==document.getElementById(a.FindSnapIn("thumbnails").snapInID)||b.target==a.dom.thumbnailArea){var d=document.getElementById(a.FindSnapIn("thumbnails").snapInID);d=dvJQuery(d).offset().left+dvJQuery(d).width()-a.dom.sbWidth;b.pageX>d||(b.ctrlKey||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.dom.updateThumbsStyle(!1,
!0)),a.dom.thumbnailSelectBox&&(a.dom.thumbnailSelectBoxOrigin.left=b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,a.dom.thumbnailSelectBoxOrigin.top=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,b={display:"block",left:a.dom.thumbnailSelectBoxOrigin.left+"px",top:a.dom.thumbnailSelectBoxOrigin.top+"px",width:"1px",height:"1px"},a.dom.thumbnailSelectBox.addClass("active").css(b),a.events.isDragMultipleSelecting=!0))}},onThumbnailAreaMouseMoveHandler:function(b){if(a.dom.thumbnailSelectBox.is(".active")){var d=
b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,e=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,h=d,k=e,q=a.dom.thumbnailSelectBoxOrigin.left-h,n=a.dom.thumbnailSelectBoxOrigin.top-k;d>a.dom.thumbnailSelectBoxOrigin.left&&(h=a.dom.thumbnailSelectBoxOrigin.left,q=d-a.dom.thumbnailSelectBoxOrigin.left);e>a.dom.thumbnailSelectBoxOrigin.top&&(k=a.dom.thumbnailSelectBoxOrigin.top,n=e-a.dom.thumbnailSelectBoxOrigin.top);a.dom.thumbnailSelectBox.css({left:h+
"px",top:k+"px",width:q+"px",height:n+"px"});d=a.getVisibleThumbnails(!1);q=dvJQuery(a.dom.thumbnailSelectBox).position();e=q.left;h=q.top;k=q.left+dvJQuery(a.dom.thumbnailSelectBox).width();q=q.top+dvJQuery(a.dom.thumbnailSelectBox).height();for(n=0;n<d.length;n++){var y=dvJQuery(a.dom.thumbnailArea.children[d[n]-1]),x=y.position(),K=x.left,F=x.top,Y=x.left+y.width();x=x.top+y.height();(y=a.Internal.Thumbnails.getThumbnailPage(y.get(0)))&&(a.Internal.Coordinates.hasIntersection(e,h,k,q,K,F,Y,x)?
a.Internal.Thumbnails.selectThumbnail(y):b.ctrlKey||a.Internal.Thumbnails.unselectThumbnail(y))}d=document.getElementById(a.FindSnapIn("thumbnails").snapInID);b.pageY+20>dvJQuery(d).offset().top+dvJQuery(d).height()&&(d.scrollTop+=20);b.pageY-20<dvJQuery(d).offset().top&&(d.scrollTop-=20);b.preventDefault()}},onThumbnailAreaMouseUpHandler:function(b){a.dom.thumbnailSelectBox.is(".active")&&(a.dom.thumbnailSelectBox.removeClass("active").css("display","none"),a.events.isDragMultipleSelecting=!1);b.preventDefault()},
onThumbnailItemClickHandler:function(b){if(!a.events.isResizingUI&&(b.stopImmediatePropagation(),b&&b.target)){var d=a.Internal.Thumbnails.getThumbnailPage(b.target);d&&a.serverCtx.documentLoaded&&0<d&&d<=a.serverCtx.pageCount&&(a.dom.UIconfig.enableMultipleThumbnailSelection&&b.ctrlKey?a.Internal.Thumbnails.toggleThumbnailSelection(d):0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight?(a.ajax.latestSelectedPage=d,a.dom.updateThumbsStyle(!1,!1)):a.SelectPageEx(d,!1,!0,!0,!0))}},onThumbnailItemMouseOverHandler:function(b){!a.events.isResizingUI&&
!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","true"),a.dom.updateThumbStyle(b))},onThumbnailItemMouseOutHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","false"),a.dom.updateThumbStyle(b))},onBookmarkItemClickHandler:function(b){!a.events.isResizingUI&&
b&&b.target&&(a.dom.selectBookmark(b.target),b.target.action&&(-1<b.target.action.indexOf("PdfPageDest")?a.Internal.Pages.selectByDestination(b.target.action):-1<b.target.action.indexOf("uri")&&window.open(b.target.action.replace("uri:","").trim(),"_blank")))},onBookmarkItemMouseOverHandler:function(b){a.events.isResizingUI||(b.stopPropagation(),b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!0))},onBookmarkItemMouseOutHandler:function(b){a.events.isResizingUI||b&&b.currentTarget&&
a.dom.setBookmarkOverStyle(b.currentTarget,!1)},onBookmarkTogglerClickHandler:function(b){if(!a.events.isResizingUI&&b&&b.target){var d=dvJQuery(b.target).parent().find("ul");dvJQuery(b.target).hasClass("collapsed")?(dvJQuery(b.target).removeClass("collapsed").addClass("expanded"),d.show(),0!=dvJQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length&&b.target.bookmarkID&&(b={url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),data:JSON.stringify({requestName:"bookmarks",
requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,bookmarkID:b.target.bookmarkID}}),contentType:"application/json",success:function(e){var h="string"===typeof e?eval("("+e+")"):e;if(h&&h.status===DocuViewareAPI.Status.OK){if(d.empty(),h.bookmarks)for(e=0;e<h.bookmarks.length;e++)a.dom.createBookmarkNode(d,h.bookmarks[e])}else a.ajax.HandleError(e)},error:function(e){a.ajax.HandleError(e)}},a.ajax.PostAjaxRequestForDocuViewareAction(b,!1,!0))):(dvJQuery(b.target).removeClass("expanded").addClass("collapsed"),
d.hide())}}},doNextPageViewProcess:function(){if(!this.serverCtx.documentLoaded||!this.cache.canvas)return DocuViewareAPI.Status.GenericError;if(!a.IsZoomSynchronized())return 0;var b=0;this.serverCtx.singlePageView||(b=this.showVisiblePages(a.GetCurrentPage()));if(!(0==this.serverCtx.pagePreload||this.serverCtx.hasVariableZoomRange&&this.serverCtx.singlePageView)){var d=this.serverCtx.minPagesPreloadPerRequest,e=this.serverCtx.maxPagesForAllPagesPreloadingMode,h=[];if(0==b&&1==(this.serverCtx.pagePreload&
1)){var k=this.Internal.Pages.getVisiblePageNumbers();if(0<k.length){var q=k[k.length-1]+1;k=k[0]-1;var n=0==k,y=q==this.serverCtx.pageCount+1;if(null!=a.cache.Pages)for(var x=0;x<a.cache.Pages.length&&(0==n&&a.cache.Pages[x].pageNo==k?(a.cache.Pages[x].bitmap||a.cache.Pages[x].renderStatus==DocuViewareAPI.Status.OK&&h.push(k),n=!0):a.cache.Pages[x].pageNo==q&&(a.cache.Pages[x].bitmap||a.cache.Pages[x].renderStatus==DocuViewareAPI.Status.OK&&h.push(q),y=!0),!n||!y);x++);n||h.push(k);y||h.push(q)}}if(h.length<
d&&2==(this.serverCtx.pagePreload&2)&&e>=this.serverCtx.pageCount)for(e=1;e<=this.serverCtx.pageCount&&(q=!1,(k=a.Internal.Pages.getPage(e))&&(k.bitmap||k.renderStatus!=DocuViewareAPI.Status.OK)&&(q=!0),q||(h.push(e),h.length!=d));e++);0<h.length&&(b=this.Internal.Pages.pageView(h,!1,!1))}return b},showVisiblePages:function(b){var d=this.Internal.Pages.getVisiblePageNumbers();if(null!=b)for(var e=0;e<d.length;e++)if(d[e]==b){d.splice(e,1);break}return this.Internal.Pages.pageView(d,!0,!1)},previewVisiblePages:function(){for(var b=
this.Internal.Pages.getVisiblePageNumbers(),d=0;d<b.length;d++){var e=a.Internal.Pages.getPage(b[d]);e&&(!e.bitmap||e.drawing||e.drawn||e.drawnPreview||a.DrawPage(e,!0))}},showVisibleThumbnails:function(){this.Internal.Files.uploading||this.ajax.downloading||a.events.isResizingUI||this.dom.thumbnailArea&&1==this.serverCtx.documentLoaded&&this.updateThumbnails(a.getVisibleThumbnails(!0))},getVisibleThumbnails:function(b){var d=this.dom.thumbnailArea,e=this.dom.thumbnailArea.scrollLeft,h=this.dom.thumbnailArea.scrollTop,
k=e+dvJQuery(d).innerWidth();d=h+dvJQuery(d).innerHeight();for(var q=this.dom.thumbnailArea.childElementCount,n=[],y=!1,x=0;x<q;x++){var K=this.dom.thumbnailArea.children[x];if(0!=a.Internal.Thumbnails.getThumbnailPage(K)){var F=dvJQuery(K).position().left,Y=dvJQuery(K).position().top,aa=F+dvJQuery(K).innerWidth(),fa=Y+dvJQuery(K).innerHeight();if(a.Internal.Coordinates.hasIntersection(e,h,k,d,F,Y,aa,fa))b?"false"==K.getAttribute("data-moving")&&"false"==K.getAttribute("data-loaded")&&"false"==K.getAttribute("data-loading")&&
n.push(x+1):n.push(x+1),y=!0;else if(y)break}}return n},sortCommentsBy:function(b){var d=function(e,h,k,q){var n=function(x,K){if(K){K=K.split(".");for(var F=0,Y=K.length-1;F<Y;F++)x=x[K[F]];return x[K[Y]]}return x},y=function(x){return k?k(n(x,e)):n(x,e)};return function(x,K){var F=y(x),Y=y(K);return(F<Y?-1:F>Y?1:"function"===typeof q?q(x,K):0)*[1,-1][+!!h]}};switch(dvJQuery(a.dom.commentsSortBySelect).find("option:selected").val()){case "page":b.sort(d("comment.annotApp.pageNo",!1,null,d("comment.annotApp.zorder",
!1,parseFloat)));break;case "author":b.sort(d("comment.annotApp.author",!1,function(e){return e.toUpperCase()}));break;case "date":b.sort(d("comment.annotApp.creationTime",!1,function(e){return new Date(e)}))}},refreshCommentsPanel:function(){null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length?(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","none"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","1")):(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display",
"block"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","0.5"));var b=dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID),d=b.clone();b.empty();b=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy);for(var e=0;e<b.length;e++)for(var h=a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[e].comment.annotApp.id);null!=h;)null==b[e].answers?b[e].answers=[h]:b[e].answers.push(h),h=a.Internal.Annotations.getAnnotationCommentFromId(h.annotApp.properties.nextGuid);
for(e=0;e<b.length;e++)a.dom.createCommentItem(b[e].comment,b[e].answers,d.find("#dvcomment-"+b[e].comment.annotApp.id+"-"+a.uniqueID));dvJQuery(function(){dvJQuery(".dvtoggle").off();dvJQuery(".dvtoggle").click(function(k){k.stopPropagation();dvJQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();dvJQuery(this).toggleClass("dvcolapsed")})});a.SetSnapInVisibility("comments",!0)},updateThumbnails:function(b,d){if(0!=b.length&&a.dom.thumbnailArea&&a.dom.thumbnailArea.children){if(d){for(var e=
0;e<b.length;e++){var h=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);if(null==h||null!=h&&("false"==h.attr("data-loaded")||"true"==h.attr("data-loading")))b.splice(e,1),e--}if(0==b.length)return}for(e=0;e<b.length;e++)h=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]),null!=h&&h.attr("data-loading","true");var k=function(){if(a.dom.thumbnailArea&&a.dom.thumbnailArea.children)for(var q=0;q<b.length;q++){var n=a.Internal.Thumbnails.getThumbnailFromPageNo(b[q]);null!=n&&(n.attr("data-loaded",
"false"),n.attr("data-loading","false"))}};a.debug&&console.log("DocuVieware: showing visible thumbnails: "+JSON.stringify(b)+"onlyIfLoaded "+(d?"true":"false"));this.ajax.thumbnailRequestNo+=1;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"thumbnails",requestData:{sessionID:this.ajax.sessionID,contextID:this.ajax.contextID,entries:b,requestNo:this.ajax.thumbnailRequestNo}}),contentType:"application/json",
success:function(q){if((q="string"===typeof q?eval("("+q+")"):q)&&q.status==DocuViewareAPI.Status.OK){if(q.contextID==a.ajax.contextID&&a.dom.thumbnailArea&&(q=q.images)&&0<q.length){for(var n=0;n<q.length;n++){var y=a.Internal.Thumbnails.getThumbnailFromPageNo(q[n].pageNo);if(null!=y){y.attr("data-loaded","true");y.attr("data-loading","false");y=y.children("canvas");y.removeClass("spinner-thumb");y.css("backgroundColor","rgba(0,0,0,0)");var x=new Image;x.owner=y.get(0);x.setAttribute("data-pageNo",
q[n].pageNo);x.src="data:"+q[n].mime+";base64,"+q[n].data;var K=q[n].scale;x.onload=function(){var F=this.owner.getContext("2d");F.clearRect(0,0,this.owner.width,this.owner.height);F.save();1==K?(F.mozImageSmoothingEnabled=!1,F.msImageSmoothingEnabled=!1,F.imageSmoothingEnabled=!1):F.transform(1/K,0,0,1/K,0,0);F.shadowColor=a.Internal.Thumbnails.THUMBNAIL_SHADOW_COLOR;F.shadowBlur=a.Internal.Thumbnails.THUMBNAIL_SHADOW_BLUR;F.shadowOffsetX=a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;F.shadowOffsetY=
a.Internal.Thumbnails.THUMBNAIL_SHADOW_OFFSET;if(a.isIE9){var Y=this;window.setTimeout(function(){F.drawImage(Y,0,0);F.restore();F=null},100)}else F.drawImage(this,0,0),F.restore(),F=null}}}a.dom.updateThumbsStyle(!1,!1)}}else k()},error:function(q){a.ajax.HandleError(q);k()}})}},ResetScrollConfig:function(b){a.isIOS?a.dom.viewerArea.style.overflow="auto":a.serverCtx.scrollBars?a.dom.viewerArea.style.overflow="auto":(a.dom.viewerArea.style.overflowY="hidden",a.dom.viewerArea.style.overflowX="hidden")},
ClearUI:function(){a.ajax.SetNewServerCtx(null)},IsZoomSynchronized:function(){return Math.round(1E3*a.serverCtx.zoom)===Math.round(1E3*a.cache.pageCanvasZoom)},SetupViewerArea:function(b,d,e,h){var k=Math.round(1E3*a.serverCtx.zoom)!=Math.round(1E3*d);k||h||(a.cache.pageCanvasSizeNoPreview=DocuViewareUtilities.clonePageCanvasSizes(b));var q=!0;if(Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d)&&null!=b&&null!=a.cache.pageCanvasSize&&a.cache.pageCanvasSize.length==b.length){q=!1;h=!0;for(var n=
0;n<b.length;n++){var y=b[n].PageNo==a.cache.pageCanvasSize[n].PageNo&&1>=Math.abs(b[n].Width-a.cache.pageCanvasSize[n].Width)&&1>=Math.abs(b[n].Height-a.cache.pageCanvasSize[n].Height);y||(q=!0);if(!y||1<Math.abs(b[n].OffsetX-a.cache.pageCanvasSize[n].OffsetX)||1<Math.abs(b[n].OffsetY-a.cache.pageCanvasSize[n].OffsetY))h=!1}if(h)return}h=a.isIOS?1024:2048;e=!q||e&&Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*d);e||(a.cache.emptyCanvas(),a.cache.canvas=[],a.cache.pageCanvasZoom=d);a.cache.pageCanvasSize=
b;n=DocuViewareUtilities.getPageCanvasSize(a.cache.pageCanvasSize);d=a.dom.viewerArea.clientWidth;q=a.dom.viewerArea.clientHeight;y=d<n.width;q<n.height&&(d-=a.dom.sbWidth);y&&(q-=a.dom.sbWidth);a.dom.panDiv.style.width=Math.round(Math.max(n.width,d)-2).toString()+"px";a.dom.panDiv.style.height=Math.round(Math.max(n.height,q)-2).toString()+"px";d=e?null:document.createDocumentFragment();for(n=0;n<b.length;n++){q=b[n].OffsetX;y=b[n].OffsetY;var x=b[n].Width+q,K=b[n].Height+y,F=e?a.cache.canvas[n]:
[],Y=Math.ceil(b[n].Width/h),aa=Math.ceil(b[n].Height/h),fa=b[n].Width*b[n].Height>h*h,ca=DocuViewareUtilities.getDevicePixelRatio();if(fa&&(1<Y||1<aa))for(var la=fa=0,Ga=0;Ga<aa;Ga++){la+=h;la-1>b[n].Height&&(la=b[n].Height-1);var ya=la-fa;if(0>=ya)break;for(var xa=0,wa=0,Da=0;Da<Y;Da++){wa+=h;wa-1>b[n].Width&&(wa=b[n].Width-1);var Ta=wa-xa,Ja=e?F.canvas[Ga*Y+Da].tile:document.createElement("canvas");e||(Ja.width=Ta*ca,Ja.height=ya*ca,Ja.style.width=Ta+"px",Ja.style.height=ya+"px",Ja.style.display=
"block",Ja.style.position="absolute",Ja.style.padding="0px",Ja.style.margin="0px",Ja.style.backgroundColor="white");Ja.style.left=q+xa+"px";Ja.style.top=y+fa+"px";e?(F.canvas[Ga*Y+Da].tx=-(xa*ca),F.canvas[Ga*Y+Da].ty=-(fa*ca)):(d.appendChild(Ja),F.push({tile:Ja,tx:-(xa*ca),ty:-(fa*ca)}));xa+=Ta}fa+=ya}else Ja=e?F.canvas[0].tile:document.createElement("canvas"),e||(Ja.width=Math.ceil(b[n].Width*ca),Ja.height=Math.ceil(b[n].Height*ca),Ja.style.width=Math.ceil(b[n].Width)+"px",Ja.style.height=Math.ceil(b[n].Height)+
"px",Ja.style.display="block",Ja.style.position="absolute",Ja.style.padding="0px",Ja.style.margin="0px",Ja.style.backgroundColor="white",d.appendChild(Ja),F.push({tile:Ja,tx:0,ty:0})),Ja.style.left=q+"px",Ja.style.top=y+"px";e?(a.cache.canvas[n].top=y,a.cache.canvas[n].left=q,a.cache.canvas[n].right=x,a.cache.canvas[n].bottom=K):a.cache.canvas.push({canvas:F,top:y,left:q,right:x,bottom:K,pageNo:b[n].PageNo})}e||(a.SetMouseMode(a.events.mouseMode),a.dom.viewerArea.insertBefore(d,a.dom.panDiv),a.dom.freehandCan||
(a.dom.freehandCan=document.createElement("canvas")),a.dom.freehandCan.style.position="absolute",a.dom.freehandCan.style.padding="0px",a.dom.freehandCan.style.margin="0px",a.dom.freehandCan.style.display="none",a.dom.freehandCan.style.zIndex=a.dom.zindexManager.getFreehandDrawingCanvasZindex(),window.PointerEvent?(dvJQuery(a.dom.freehandCan).css("touch-action","none"),a.dom.freehandCan.onpointerup=function(ta){switch(ta.pointerType){case "mouse":a.events.mouseup(ta);break;case "pen":a.events.mouseup(ta);
break;case "touch":a.events.mouseup(ta);break;default:a.events.mouseup(ta)}},a.dom.freehandCan.onpointerdown=function(ta){switch(ta.pointerType){case "mouse":a.events.mousedown(ta,!1,!1);break;case "pen":a.events.mousedown(ta,!1,!0);break;case "touch":a.events.mousedown(ta,!0,!1);break;default:a.events.mousedown(ta,!1,!1)}},a.dom.freehandCan.onpointermove=function(ta){switch(ta.pointerType){case "mouse":a.events.mousemove(ta,!1);break;case "pen":ta.preventDefault();a.events.mousemove(ta,!0);break;
case "touch":ta.preventDefault();a.events.mousemove(ta,!0);break;default:a.events.mousemove(ta,!1)}},a.dom.freehandCan.onpointerleave=function(ta){switch(ta.pointerType){case "mouse":a.events.mouseleave(ta);break;case "pen":a.events.mouseleave(ta);break;default:a.events.mouseleave(ta)}},a.dom.freehandCan.onpointerenter=function(ta){switch(ta.pointerType){case "mouse":a.events.mouseenter(ta);break;case "pen":a.events.mouseenter(ta);break;default:a.events.mouseenter(ta)}}):(a.dom.freehandCan.onmouseup=
function(ta){a.events.mouseup(ta)},a.dom.freehandCan.onmousedown=function(ta){a.events.mousedown(ta)},a.dom.freehandCan.onmousemove=function(ta){a.events.mousemove(ta)},a.dom.freehandCan.onmouseleave=function(ta){a.events.mouseleave(ta)},a.dom.freehandCan.onmouseenter=function(ta){a.events.mouseenter(ta)},a.dom.freehandCan.ontouchstart=function(ta){1==ta.changedTouches.length&&a.events.mousedown(ta.changedTouches[0])},a.dom.freehandCan.ontouchmove=function(ta){1==ta.changedTouches.length&&(ta.preventDefault(),
a.events.mousemove(ta.changedTouches[0],!0))},a.dom.freehandCan.ontouchend=function(ta){1==ta.changedTouches.length&&a.events.mouseup(ta.changedTouches[0])}),a.dom.freehandCan.ondblclick=function(ta){a.events.dblclick(ta)},a.dom.viewerArea.appendChild(a.dom.freehandCan),null!=a.dom.annotationsActionButtons&&a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons));a.Internal.Selection.clearSelectionArea();a.UpdatePageBoundsDiv(a.GetCurrentPage());a.dom.SelectedTextRegions.onPageBoundsChanged();
a.dom.handleLinkRectVisibility();if(k)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();else if(null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)k=a.cache.Annots[b],k.annotApp.visible&&(h=a.cache.getPageCanvas(k.annotApp.pageNo),null!=h&&(k.updatePageInfo(h.left,h.top,null),k.render()));if(null!=a.cache.FormFields)for(b=0;b<a.cache.FormFields.length;b++)a.cache.FormFields[b].render()},UpdateUI:function(b,d,e,h,k,q,n){a.Internal.Annotations.hoveredAnnot=
null;var y=null!=a.serverCtx&&a.serverCtx.documentLoaded;b&&(this.ajax.latestSelectedPage=this.serverCtx.selectedPage);this.dom.singlePageView!=this.serverCtx.singlePageView&&(this.dom.singlePageView=this.serverCtx.singlePageView,this.dom.updateSinglePageModeButton());k||!a.serverCtx.clearCachedBitmap&&!a.serverCtx.clearCachedPages||(a.serverCtx.clearCachedPages?(a.debug&&console.log("DocuVieware: Cached pages removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedPages()):a.serverCtx.clearCachedBitmap&&
(a.debug&&console.log("DocuVieware: Cached bitmap removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedBitmap()),a.serverCtx.clearCachedBitmap=!1,a.serverCtx.clearCachedPages=!1);this.ResetScrollConfig(!1);if(y){var x=[];if(null!=a.serverCtx.pageCanvasSize){a.SetupViewerArea(a.serverCtx.pageCanvasSize,a.serverCtx.zoom,n);a.serverCtx.pageCanvasSize=null;if(a.cache.viewRotation!=a.serverCtx.viewRotation&&a.serverCtx.applyViewRotationToThumbnails)for(n=1;n<=a.serverCtx.pageCount;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(n);
if(a.serverCtx.thumbnailsReset){for(n=0;n<a.serverCtx.thumbnailsReset.length;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(a.serverCtx.thumbnailsReset[n]);a.serverCtx.thumbnailsReset=null}a.cache.viewRotation=a.serverCtx.viewRotation}if(a.serverCtx.pagesReset){for(n=0;n<a.serverCtx.pagesReset.length;n++)a.cache.clearPage(a.serverCtx.pagesReset[n]);a.serverCtx.pagesReset=null}d||(a.debug&&console.log("DocuVieware: Setting scrollbar values of page: "+a.GetCurrentPage()+" / "+a.GetLastPageNoRequest()+
" v: "+a.serverCtx.vScrollbarVal.toString()),a.serverCtx.vScrollbarVisible&&a.serverCtx.hScrollbarVisible?(a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2),a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2)):a.serverCtx.vScrollbarVisible?a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2):a.serverCtx.hScrollbarVisible&&a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2));null!=a.serverCtx.annotsComments&&a.dom.commentsArea&&
(a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments),a.refreshCommentsPanel());null!=a.serverCtx.annotsRedactionReferences&&a.dom.redactionsPanel&&(a.Internal.Annotations.setAnnotsRedactionReferences(a.serverCtx.annotsRedactionReferences),a.Internal.Redaction.refreshRedactionPanel(!1));if(null!=a.serverCtx.page)for(n=0;n<a.serverCtx.page.length;n++){var K=!1;d=a.serverCtx.page[n].pageNo;var F=a.Internal.Pages.getPage(d);F&&(K=!0,!k&&a.serverCtx.page[n].data&&(F.bitmap=null));
K||(F={pageNo:d,drawn:!1,drawnPreview:!1,drawing:!1},a.cache.cachePage(F));F.renderStatus=a.serverCtx.page[n].renderStatus;k||(q||(F.renderRotation=a.serverCtx.page[n].renderRotation,F.pageRotation=a.serverCtx.page[n].pageRotation,F.viewRotation=a.serverCtx.page[n].viewRotation,F.drawn&&!a.Internal.Matrix.equal(F.matrix,a.serverCtx.page[n].matrix)&&(F.drawn=!1),F.matrix=a.serverCtx.page[n].matrix,F.contentMatrix=a.serverCtx.page[n].contentMatrix,F.zoom=a.serverCtx.page[n].zoom,F.viewRotation=a.serverCtx.page[n].viewRotation),
F.width=a.serverCtx.page[n].width,F.height=a.serverCtx.page[n].height);if(a.serverCtx.page[n].formFields&&(K=a.serverCtx.page[n].formFields,K.firstAccess&&(a.Internal.FormFields.removePageFormFields(F.pageNo),F.drawn&&(F.drawn=!1)),K.formFieldsApp)){for(var Y=0;Y<K.formFieldsApp.length;Y++)a.Internal.FormFields.newController(K.formFieldsApp[Y]);F.drawn&&(F.drawn=!1)}if(a.serverCtx.page[n].annots&&(K=a.serverCtx.page[n].annots,K.firstAccess&&(a.Internal.Annotations.removePageAnnots(F.pageNo),F.drawn&&
(F.drawn=!1)),K.annotsApp)){Y=a.cache.getPageCanvas(F.pageNo);for(var aa=0;aa<K.annotsApp.length;aa++)a.Internal.Annotations.newController(K.annotsApp[aa],null!=Y?Y.left:0,null!=Y?Y.top:0,F.contentMatrix);F.drawn&&(F.drawn=!1)}a.serverCtx.page[n].text&&(F.text=a.serverCtx.page[n].text);a.serverCtx.page[n].links&&(F.links=a.serverCtx.page[n].links);a.GetCurrentPage()===F.pageNo&&a.UpdatePageBoundsDiv(F.pageNo);k||(a.serverCtx.page[n].data?(K=new Image,K.src="data:"+a.serverCtx.page[n].mime+";base64,"+
a.serverCtx.page[n].data,a.cache.attachImageToPage(F,K,a.serverCtx.page[n].scale,a.serverCtx.page[n].hasTransparency),F.drawn=!1,K.setAttribute("data-pageNo",d),e&&(F.drawing=!0,K.onload=function(fa){fa=parseInt(this.getAttribute("data-pageNo"));a.DrawPage(a.cache.getPageObject(fa),!1)})):e&&(null!=F.bitmap?a.Internal.Pages.isPageVisible(F.pageNo)&&(F.drawing=!0,a.DrawPage(F,!1)):(a.debug&&console.log("DocuVieware: draw page request without attached bitmap "+d+". render status: "+F.renderStatus),
F.renderStatus==DocuViewareAPI.Status.OK&&(F.renderStatus=DocuViewareAPI.Status.GenericError))),a.serverCtx.page[n].updateThumbnail&&x.push(d));a.serverCtx.page[n]=null;null==F.bitmap&&(F.TransferRetries||(F.TransferRetries=0),F.TransferRetries++<DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES&&(a.debug&&console.log("DocuVieware: new page content received without attached bitmap "+d+". Total retries: "+parseFloat(F.TransferRetries)),a.Internal.Pages.pageView([F.pageNo],!1,!0)))}a.updateThumbnails(x,
!0)}if(b){if(0<a.serverCtx.pageCount&&a.dom.thumbnailArea){e=document.createDocumentFragment();for(k=0;k<a.serverCtx.pageCount;k++)e.appendChild(a.Internal.Thumbnails.createThumbnail(k+1));a.dom.thumbnailArea.appendChild(e);a.dom.updateThumbsStyle(!0,!0)}if(null!=a.serverCtx.bookmarks&&a.dom.bookmarksArea){for(n=0;n<a.serverCtx.bookmarks.length;n++)e=a.serverCtx.bookmarks[n],a.dom.createBookmarkNode(dvJQuery(a.dom.bookmarksTree),e);a.SetSnapInVisibility("bookmarks",!0)}}if(!y||b||h)a.SetSnapInVisibility("annotations",
y&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("comments",y&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("thumbnails",y),a.SetSnapInVisibility("bookmarks",y&&0<dvJQuery(a.dom.bookmarksTree).children().length),a.SetSnapInVisibility("search",y&&a.serverCtx.enableTextSearch),a.SetSnapInVisibility("redaction",y&&a.serverCtx.hasRedactionSupport),a.SetSnapInVisibility("digisign",y&&a.serverCtx.enableDigiSign&&3===a.serverCtx.documentType);a.dom.leftSideArea&&(a.isIE9||a.isIE10)&&
dvJQuery(a.dom.leftSideContainerPanelsArea).height(dvJQuery(a.dom.controlArea).height()-dvJQuery(a.dom.snapinsHeader).height());y&&(a.isIEorEdge&&!a.serverCtx.singlePageView&&a.serverCtx.vScrollbarMax>DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT?a.ToggleSinglePageViewMode():(a.showVisibleThumbnails(),a.doNextPageViewProcess()))},UpdatePageBoundsDiv:function(b){if(!a.dom.singlePageView&&1<a.GetPageCount()){var d=parseFloat(a.dom.pageBoundsDiv.style.borderWidth);b=a.Internal.Pages.getRenderingState(b);
a.dom.pageBoundsDiv.style.left=b.pageLeft+"px";a.dom.pageBoundsDiv.style.top=b.pageTop+"px";a.dom.pageBoundsDiv.style.width=b.pageWidth-2*d+"px";a.dom.pageBoundsDiv.style.height=b.pageHeight-2*d+"px";a.dom.pageBoundsDiv.style.display="block"}else a.dom.pageBoundsDiv.style.display="none"},DrawPage:function(b,d){if(null!==b&&null!==b.matrix&&null!=b.bitmap){var e=a.cache.getPageCanvas(b.pageNo);b.drawing=!1;if(null!==e){var h=b.zoom,k=Math.round(1E3*h)!==Math.round(1E3*a.cache.pageCanvasZoom),q;(q=
d?!b.drawnPreview:!b.drawn)&&b.viewRotation!==a.cache.viewRotation&&(q=!1);if(q){var n=null;q=b.matrix;var y=DocuViewareUtilities.getDevicePixelRatio(),x=a.serverCtx.enableSmoothing,K=!(a.isIE||a.isFirefox),F="high";k&&(x=!0,1!==y&&(F="medium"),h=a.cache.pageCanvasZoom/h,q=a.Internal.Matrix.combine(q,{a:h,b:0,c:0,d:h,e:0,f:0}));1!==y&&a.Internal.Matrix.isRotatedOrFlipped(q)&&(q=a.Internal.Matrix.combine({a:1/y,b:0,c:0,d:1/y,e:0,f:0},q),q=a.Internal.Matrix.combine(q,{a:y,b:0,c:0,d:y,e:0,f:0}));h=b.scale;
1!==h&&(q=a.Internal.Matrix.combine({a:1/h,b:0,c:0,d:1/h,e:0,f:0},q));a.debug&&console.log("DocuVieware: drawing page: "+b.pageNo+". mat: "+JSON.stringify(q)+" previewmode: "+(d?"true":"false"));var Y=Math.abs(q.a)+Math.abs(q.c),aa=Math.abs(q.b)+Math.abs(q.d);try{var fa=x&&!K?.15>=Math.min(Y,aa)?3:.5>=Math.min(Y,aa)?2:1:1;if(1!==fa){var ca=b.bitmap.width,la=b.bitmap.height;if(a.attachedDebugger&&a.isIE)if(9437184>b.bitmap.width*b.bitmap.height)if(q={a:q.a*Math.pow(2,fa-1),b:q.b*Math.pow(2,fa-1),c:q.c*
Math.pow(2,fa-1),d:q.d*Math.pow(2,fa-1),e:q.e,f:q.f},b.hasTransparency)if(2==fa)xa=document.createElement("canvas"),xa.width=ca/2,xa.height=la/2,wa=xa.getContext("2d"),wa.drawImage(b.bitmap,0,0,ca/2,la/2),wa=null,n=xa;else{xa=document.createElement("canvas");xa.width=ca/2;xa.height=la/2;wa=xa.getContext("2d");wa.drawImage(b.bitmap,0,0,ca/2,la/2);wa=null;var Ga=document.createElement("canvas");Ga.width=ca/4;Ga.height=la/4;var ya=Ga.getContext("2d");ya.drawImage(xa,0,0,ca/4,la/4);ya=null;n=Ga}else{var xa=
document.createElement("canvas");xa.width=ca/2;xa.height=la/2;for(var wa=xa.getContext("2d"),Da=0;Da<fa-1;Da++)wa.drawImage(0==Da?b.bitmap:xa,0,0,ca/Math.pow(2,Da+1),la/Math.pow(2,Da+1));n=xa}else n=b.bitmap;else{var Ta=document.createElement("canvas");Ta.width=ca;Ta.height=la;var Ja=Ta.getContext("2d");Ja.mozImageSmoothingEnabled=!1;Ja.msImageSmoothingEnabled=!1;Ja.imageSmoothingEnabled=!1;Ja.drawImage(b.bitmap,0,0,ca,la);var ta=document.createElement("canvas");ta.width=Math.ceil(ca*Y);ta.height=
Math.ceil(la*aa);var ra=ta.getContext("2d"),rb=ra.getImageData(0,0,ta.width,ta.height);q=a.Internal.Matrix.combine({a:1/Y,b:0,c:0,d:1/aa,e:0,f:0},q);var jb=Ja.getImageData(0,0,Ta.width,Ta.height).data;Ja=null;a.Internal.Libs.pica.resize({src:jb,dest:rb.data,width:Ta.width,height:Ta.height,toWidth:ta.width,toHeight:ta.height,alpha:b.hasTransparency,quality:fa-2});ra.putImageData(rb,0,0);jb=Ta=ra=rb=null;n=ta}}else n=b.bitmap;if(n){for(Da=0;Da<e.canvas.length;Da++){var ob=e.canvas[Da].tile;if(null!==
ob){ob.style.backgroundColor="transparent";var Va=ob.getContext("2d");if(null===Va)console.log("Can not obtain 2d context for the tile "+(Da+1).toString()+"\r\nTile count: "+e.canvas.length.toString());else if(Va.save(),Va.clearRect(0,0,ob.width,ob.height),Va.mozImageSmoothingEnabled=x,Va.msImageSmoothingEnabled=x,(Va.imageSmoothingEnabled=x)&&K&&(Va.imageSmoothingQuality=F),1===q.a&&0===q.b&&0===q.c&&1===q.d&&0===q.e+e.canvas[Da].tx&&0===q.f+e.canvas[Da].ty||Va.transform(q.a,q.b,q.c,q.d,q.e+e.canvas[Da].tx,
q.f+e.canvas[Da].ty),a.isIE9)window.setTimeout(function(){if(9437184<n.width*n.height){var La=Math.round(n.width/2),hb=Math.round(n.height/2),Db=1/Y,ha=1/aa;Va.drawImage(n,0,0,La,hb,0,0,La,hb);Va.drawImage(n,La,0,La,hb,La-Db,0,La,hb);Va.drawImage(n,0,hb,La,hb,0,hb-ha,La,hb);Va.drawImage(n,La,hb,La,hb,La-Db,hb-ha,La,hb)}else Va.drawImage(n,0,0);Va.restore();Va=null},100);else{if(9437184<=n.width*n.height){var Xa=Math.round(n.width/2),gb=Math.round(n.height/2);ca=1/Y;la=1/aa;Va.drawImage(n,0,0,Xa,gb,
0,0,Xa,gb);Va.drawImage(n,Xa,0,Xa,gb,Xa-ca,0,Xa,gb);Va.drawImage(n,0,gb,Xa,gb,0,gb-la,Xa,gb);Va.drawImage(n,Xa,gb,Xa,gb,Xa-ca,gb-la,Xa,gb)}else Va.drawImage(n,0,0);Va.restore();Va=null}}}d?b.drawnPreview=!0:b.drawn=!0}}catch(La){Da="DocuVieware page drawing exception: "+La.message+"\r\nDownscales: "+fa.toString(),a.debug?alert(Da):console.log(Da)}}if(!k){if(null!=a.cache.FormFields)for(Da=0;Da<a.cache.FormFields.length;Da++)k=a.cache.FormFields[Da],k.control&&k.formFieldApp.pageNo==b.pageNo&&(a.Internal.FormFields.existFormField(k)||
a.dom.viewerArea.appendChild(k.control),k.render());if(null!=a.cache.Annots)for(Da=0;Da<a.cache.Annots.length;Da++)if(k=a.cache.Annots[Da],k.annotApp.pageNo==b.pageNo&&(k.updatePageInfo(e.left,e.top,b.contentMatrix),k.annotApp.visible)){d=!0;if(a.dom.viewerArea.hasChildNodes())for(fa=a.dom.viewerArea.children.length-1;0<=fa;fa--)if(a.dom.viewerArea.children[fa]===k.canvas){d=!1;break}d&&a.dom.viewerArea.appendChild(k.canvas);k.render()}a.Internal.Search.highlightResults(b.pageNo)}}}},resetServerCtx:function(){this.serverCtx=
{zoomMode:0,zoom:0,documentLoaded:!1,pageCount:0,selectedPage:0,imageCanvasSize:null,enableSmoothing:!1,hScrollbarVal:0,hScrollbarMax:0,hScrollbarVisible:!1,vScrollbarVal:0,vScrollbarMax:0,vScrollbarVisible:!1,image:null}},setDialogAnnotationFontNamePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family",dvJQuery(a.dom.annotationDialogFormFontNameSelect).find("option:selected").val());this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontSizePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size",
dvJQuery(a.dom.annotationDialogFormFontSizeInput).val()+"px");this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontColorPropertiesPreview:function(){},setDialogAnnotationFontStylePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","none");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.annotationDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
"none");break;case 1:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","italic");break;case 4:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","line-through")}},setDialogAnnotationAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.annotationDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b=
"left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align",b)},setDialogAnnotationLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.annotationDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight"));
b.css("text-decoration",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align"));b.css("display","none");var d=dvJQuery(a.dom.annotationDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.annotationDialogForm).append(b);switch(parseInt(dvJQuery("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=
Math.max(0,(dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height())/2);break;case 2:d=Math.max(0,dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:d=0}dvJQuery(a.dom.annotationDialogFormTextInput).css("height",dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height")-d+"px");dvJQuery(a.dom.annotationDialogFormTextInput).css("padding-top",d+"px");b.remove()},setDialogSignatureFontNamePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family",
dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val());this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontSizePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size",dvJQuery(a.dom.signatureDialogFormFontSizeInput).val()+"px");this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontColorPropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("color",dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString"))},
setDialogSignatureFontStylePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","normal");switch(parseInt(dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val())){case 0:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight",
"bold");break;case 2:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","italic");break;case 4:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","line-through")}},setDialogSignatureAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";
break;default:b="left"}dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align",b)},setDialogSignatureLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.signatureDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight"));b.css("text-decoration",
dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align"));b.css("display","none");var d=dvJQuery(a.dom.signatureDialogFormTextInput).val();b.html((d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.signatureTextDialogForm).append(b);switch(parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:d=0;break;case 1:d=Math.max(0,(dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-
b.height())/2);break;case 2:d=Math.max(0,dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:d=0}dvJQuery(a.dom.signatureDialogFormTextInput).css("height",dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-d+"px");dvJQuery(a.dom.signatureDialogFormTextInput).css("padding-top",d+"px");b.remove()},inputControl:function(b,d,e,h){var k=b.val().split(""),q="",n="";if("int"==d)y=/^([0-9])$/,x=/^([0-9][0-9]*)$/;else if("float"==d)var y=
/(^\d+$)|(^\d+\.\d+$)|[,\.]/,x=/^([0-9][0-9]*[,\.]?\d{0,3})$/;for(var K in k)1==y.test(k[K])&&""!=k[K]&&(n+=""+k[K].replace(",","."),1==x.test(n)&&(q+=""+k[K].replace(",",".")));"undefined"!==typeof e&&null!==e&&q<e&&(q=e);"undefined"!==typeof h&&null!==h&&q>h&&(q=h);b.val(q)},inputPageRangeControl:function(b){var d=b.value.split(""),e=/^([0-9|;-])$/,h="",k;for(k in d)1==e.test(d[k])&&(h+=d[k]);b.value=h},ToggleSinglePageViewMode_Click:function(){this.ToggleSinglePageViewMode()},pageRangeSelection:function(b,
d){switch(parseInt(b)){case 0:d.value="1-"+a.GetPageCount();d.disabled=!0;break;case 1:d.value=a.GetCurrentPage();d.disabled=!0;break;case 2:d.disabled=!1}},SelectFirstPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,1),this.EnsurePageVisibility(1),a.SelectPage(1))},SelectNextPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectNextPageTimeout&&(clearTimeout(this.selectNextPageTimeout),this.selectNextPageTimeout=null);this.selectNextPageActions?
this.selectNextPageActions++:this.selectNextPageActions=1;var b=Math.min(this.GetLastPageNoRequest()+this.selectNextPageActions,this.serverCtx.pageCount);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectNextPageTimeout=setTimeout(function(){a.GetLastPageNoRequest()+1<=a.serverCtx.pageCount&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectNextPageActions=0},300)}},SelectPreviousPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectPreviousPageTimeout&&(clearTimeout(this.selectPreviousPageTimeout),
this.selectPreviousPageTimeout=null);this.selectPreviousPageActions?this.selectPreviousPageActions++:this.selectPreviousPageActions=1;var b=Math.max(this.GetLastPageNoRequest()-this.selectPreviousPageActions,1);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectPreviousPageTimeout=setTimeout(function(){1<a.GetLastPageNoRequest()&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectPreviousPageActions=0},300)}},SelectLastPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,
a.serverCtx.pageCount),this.EnsurePageVisibility(a.serverCtx.pageCount),a.SelectPage(a.serverCtx.pageCount))},ToggleMobileToolbar_Click:function(){a.dom.mobileToolbarContainer&&dvJQuery(a.dom.mobileToolbarContainer).slideToggle("fast")},ZoomMode_Click:function(){a.dom.subMenuZoomMode&&(a.dom.subMenuMouseMode&&dvJQuery(a.dom.subMenuMouseMode).hide(),dvJQuery(a.dom.subMenuZoomMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.zoomModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuZoomMode).hide()}));
a.dom.mobileToolbarContainer&&a.dom.subMenuZoomModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==
dvJQuery(a.dom.subMenuZoomModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide()),
a.dom.updateButtons())},MouseMode_Click:function(){a.dom.subMenuMouseMode&&(a.dom.subMenuZoomMode&&dvJQuery(a.dom.subMenuZoomMode).hide(),dvJQuery(a.dom.subMenuMouseMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.mouseModeButton)}),dvJQuery(document).on("click",function(){dvJQuery(a.dom.subMenuMouseMode).hide()}));a.dom.mobileToolbarContainer&&a.dom.subMenuMouseModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).addClass("button_active"),
dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuMouseModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),
dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide()),a.dom.updateButtons())},restartZoomInTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomInActions=1,a.ZoomINPreview(1));a.zoomInTimeout&&
(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null);a.events.isZoomingPreview&&(a.zoomInTimeout=setTimeout(function(){a.zoomInActions++;a.ZoomINPreview(a.zoomInActions);a.restartZoomInTimeout(!1)},250))},ZoomIN_MouseUp:function(){a.ZoomINMouseDown=!1;null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.events.isZoomingPreview=!1)},ZoomIN_MouseLeave:function(){null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.ZoomINMouseDown&&(a.ZoomINMouseDown=!1,
a.events.isZoomingPreview=!1,a.ZoomIN_Click()))},ZoomIN_MouseDown:function(){a.ZoomINMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomInTimeout(!0)},ZoomIN_Click:function(){a.ZoomIN(null!=a.zoomInActions?a.zoomInActions:1,!0,!0,null,null)},ZoomOUT_MouseUp:function(){a.ZoomOUTMouseDown=!1;null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.events.isZoomingPreview=!1)},ZoomOUT_MouseLeave:function(){null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=
null,a.ZoomOUTMouseDown&&(a.ZoomOUTMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomOUT_Click()))},restartZoomOutTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomOutActions=1,a.ZoomOUTPreview(1));a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null);a.events.isZoomingPreview&&(a.zoomOutTimeout=setTimeout(function(){a.zoomOutActions++;a.ZoomOUTPreview(a.zoomOutActions);a.restartZoomOutTimeout(!1)},250))},ZoomOUT_MouseDown:function(){a.ZoomOUTMouseDown=!0;a.events.isZoomingPreview=
!0;a.restartZoomOutTimeout(!0)},ZoomOUT_Click:function(){a.ZoomOUT(null!=a.zoomOutActions?a.zoomOutActions:1,!0,!0,null,null)},Rotate90_Click:function(){this.rotate90Timeout&&(clearTimeout(this.rotate90Timeout),this.rotate90Timeout=null);this.rotate90Actions?this.rotate90Actions++:this.rotate90Actions=1;this.rotate90Timeout=setTimeout(function(){var b=a.rotate90Actions%4;0!=b%4&&a.Rotate(b%4,-1);a.rotate90Actions=0},300)},Rotate270_Click:function(){this.rotate270Timeout&&(clearTimeout(this.rotate270Timeout),
this.rotate270Timeout=null);this.rotate270Actions?this.rotate270Actions++:this.rotate270Actions=1;this.rotate270Timeout=setTimeout(function(){var b=a.rotate270Actions%4;0!=b%4&&a.Rotate(4-b%4,-1);a.rotate270Actions=0},300)},Print_Click:function(){this.TogglePrintDialog(null,null)},LoadFromFile_Click:function(){this.LoadFromFile(null,null)},LoadFromUriDialog_Click:function(){this.ToggleLoadFromUriDialog()},SaveDialog_Click:function(){this.ToggleSaveDialog(null,null)},TwainAcquisitionDialog_Click:function(){this.TwainToggleAcquisitionDialog(null,
null)},CopyDialog_Click:function(b){b.preventDefault();this.CopySelectedTextToClipboard()},HighlightContextMenu_Click:function(b){b.preventDefault();this.HighlightSelectedText()},StrikeoutContextMenu_Click:function(b){b.preventDefault();this.StrikeoutSelectedText()},UnderlineContextMenu_Click:function(b){b.preventDefault();this.UnderlineSelectedText()},RedactionMarkContextMenu_Click:function(b){b.preventDefault();b=a.dom.redactionFill?dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+
a.uniqueID+"']")).minicolors("value"):null;this.RedactSelectedText(b)},RemoveTextContextMenu_Click:function(b){b.preventDefault();this.Internal.Text.removeSelectedText()},LoadFromUri_Click:function(){this.LoadFromUri(dvJQuery(this.dom.addressBar).val(),"",null,null,null,!0)},ExitDrawingMode_Click:function(){this.ExitAnnotationDrawingMode()},UndoDrawing_Click:function(){this.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath()},AnnotationActionEditButton_Click:function(){this.Internal.Annotations.editSelectedAnnotation()},
AnnotationActionRemoveButton_Click:function(){this.Internal.Annotations.removeSelectedAnnotations()},AnnotationActionCommentButton_Click:function(){this.ToggleCommentDialog("comment")},CommentAnswer_Click:function(b){this.ToggleCommentDialog("answer",b)},CommentProperties_Click:function(b){this.ToggleCommentDialog("edit",b)},ZoomWidth_Click:function(){this.SetZoomMode(3)},ZoomFit_Click:function(){this.SetZoomMode(2)},Fullscreen_Click:function(){this.ToggleFullscreen()},MagnifierMouseMode_Click:function(){this.EnableMagnifier()},
PanMouseMode_Click:function(){this.SetMouseMode(0)},SelectMouseMode_Click:function(){this.SetMouseMode(3)},MarqueeZoomMouseMode_Click:function(){this.SetMouseMode(4)},AddRubberStampAnnot_Click:function(){this.AddAnnotInteractive(0)},AddRectangleAnnot_Click:function(){this.AddAnnotInteractive(1)},AddRectangleHighlighterAnnot_Click:function(){this.AddAnnotInteractive(2)},AddLineAnnot_Click:function(){this.AddAnnotInteractive(3)},AddConnectedLineAnnot_Click:function(){null!=a.dom.connectedLinesAnnotButton&&
dvJQuery(a.dom.connectedLinesAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(5)},AddLineArrowAnnot_Click:function(){this.AddAnnotInteractive(4)},AddEllipseAnnot_Click:function(){this.AddAnnotInteractive(6)},AddTextAnnot_Click:function(){this.AddAnnotInteractive(8)},AddStickyNoteAnnot_Click:function(){this.AddAnnotInteractive(9)},AddFreeHandAnnot_Click:function(){null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).hasClass("button_active")?
a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(10)},AddFreeHandHighlighterAnnot_Click:function(){null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(11)},AddLinkAnnot_Click:function(){this.AddAnnotInteractive(13)},AddRulerAnnot_Click:function(){this.AddAnnotInteractive(15)},AddPolyRulerAnnot_Click:function(){null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).hasClass("button_active")?
a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(16)},ClosePanelButton_Click:function(){this.SetSnapinsPanelVisibility(!1)},SearchSubmit_Click:function(){var b=this.dom.searchValueInput.value,d=this.dom.searchWholeWordInput.checked,e=this.dom.searchCaseSensitiveInput.checked,h=this.dom.searchAnyWordInput.checked,k=dvJQuery(this.dom.searchPageSelect).filter(":checked").val();this.SubmitSearch(b,d,e,h,k)},TwainAcquisitionSubmit_Click:function(){if(a.callbacks.onTwainAcquisitionDialogAcquireButtonClick)a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();
var b=dvJQuery(this.dom.twainAcquisitionSourceNameSelect).find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionPanelForm).find("input[name='twainAcquisitionDestinationInput"+a.uniqueID+"']:checked").val()?this.TwainAcquireToNewDocument(b):this.TwainAcquireToCurrentDocument(b,dvJQuery(a.dom.twainAcquisitionPanelForm).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())},DownloadTwainServiceSetup_Click:function(){this.DownloadTwainServiceSetup();
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},SearchClearResult_Click:function(){this.ClearSearch()},CommentHeader_Click:function(b){a.Internal.Annotations.selectAnnotationCommentById(b,!1,!1);if(null!=a.cache.AnnotsComments)for(var d=0;d<a.cache.AnnotsComments.length;d++){var e=a.cache.AnnotsComments[d];if(e.annotApp.id===b){var h=e.annotApp.pageNo;a.SelectPage(h,function(){var k=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(e.annotApp,!0);null!=k&&(k.visible&&(a.Internal.Annotations.unselectAll(),
a.Internal.Annotations.selectById(k.id)),a.EnsurePageRegionVisibility(h,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},CommentsSearchClearResult_Click:function(){this.CommentsClearSearch()},CommentsSearchSubmit_Click:function(){this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)},CommentsExpandCollapseAll_Click:function(){this.CommentsExpandCollapseAll()},CommentsSortBySelect_Change:function(){this.refreshCommentsPanel()},RedactionAddAreas_Click:function(){a.events.isAddingRedactionMarksMode?
a.Internal.Redaction.disableAddRedactionMarksMode():a.Internal.Redaction.enableAddRedactionMarksMode()},RedactionApply_Click:function(){var b=this;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_apply_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_apply_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),
"class":"btn-valid",click:function(){b.ApplyAllRedactions();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveSelectedRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_selected_redactions_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){for(var b=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea"),d=[],e=0;e<b.length;e++)d.push(b[e].id.split("_").pop());for(e=0;e<d.length;e++)a.Internal.Redaction.deleteRedactionMarkById(d[e]);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveAllRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redactions_warning"),null,
function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.removeAllRedactionMarks();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},DigiSignAppearanceMenu_Click:function(){var b=a.dom.digisignAppearanceMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];
b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="none")},DigiSignCertificateMenu_Click:function(){var b=a.dom.digisignCertificateMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),
a.dom.digisignCertificateMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignCertificateMenuContent.style.display="none")},DigiSignAppearanceText_Click:function(){a.Internal.DigiSign.setSignatureAppearanceTextInteractive()},DigiSignAppearanceImg_Click:function(){a.Internal.DigiSign.setSignatureAppearanceImgInteractive()},DigiSignAppearanceFreehand_Click:function(){a.Internal.DigiSign.setSignatureAppearanceFreehandInteractive()},DigiSignAppearanceDeleteSignatureAppearance_Click:function(){a.Internal.DigiSign.resetSignatureConfiguration()},
DigiSignAddTimeStamp_Click:function(){a.Internal.DigiSign.setTimeStampInteractive()},DigiSignAddCertificate_Click:function(){a.Internal.DigiSign.setCertificateInteractive()},DigiSignPlaceSignature_Click:function(){a.Internal.DigiSign.beginAddSignatureInteractive()},DigiSignDeleteCertificate_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setCertificate(null,null,null)},DigiSignDeleteTimeStamp_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setTimeStamp(null,
null,null)},SnapInButton_Click:function(b){this.SelectSnapIn(b,!1)},IsTwainSupportAvailable:function(){return this.isWindows&&5.1<this.windowsVersion},ToggleSinglePageViewMode:function(){return this.ajax.PostBaseRequest("singlepageviewmode",{data:{enabled:this.serverCtx.singlePageView},success:function(b){a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}},!0)},RegisterOnViewerScroll:function(b){this.callbacks.onViewerScroll=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationSelectedStateChanged:function(b){this.callbacks.onAnnotationSelectedStateChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationAdded:function(b){this.callbacks.onAnnotationAdded=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationEdited:function(b){this.callbacks.onAnnotationEdited=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMoved:function(b){this.callbacks.onAnnotationMoved=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationDeleted:function(b){this.callbacks.onAnnotationDeleted=b;return DocuViewareAPI.Status.OK},RegisterOnCommentAdded:function(b){this.callbacks.onCommentAdded=
b;return DocuViewareAPI.Status.OK},RegisterOnCommentEdited:function(b){this.callbacks.onCommentEdited=b;return DocuViewareAPI.Status.OK},RegisterOnCommentDeleted:function(b){this.callbacks.onCommentDeleted=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSigned:function(b){this.callbacks.onDocumentSigned=b;return DocuViewareAPI.Status.OK},RegisterOnFormFieldChanged:function(b){this.callbacks.onFormFieldChanged=b;return DocuViewareAPI.Status.OK},RegisterOnPageChanged:function(b){this.callbacks.onPageChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnZoomChanged:function(b){this.callbacks.onZoomChanged=b;return DocuViewareAPI.Status.OK},RegisterOnRotationChanged:function(b){this.callbacks.onRotationChanged=b;return DocuViewareAPI.Status.OK},RegisterOnNewDocumentLoaded:function(b){this.callbacks.onNewDocumentLoaded=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentClosed:function(b){this.callbacks.onDocumentClosed=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentPrinted:function(b){this.callbacks.onDocumentPrinted=
b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSaved:function(b){this.callbacks.onDocumentSaved=b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogAcquireButtonClick=b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogCancelButtonClick=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsOrderChanged:function(b){this.callbacks.onThumbnailsOrderChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnTextSelected:function(b){this.callbacks.onTextSelected=b;return DocuViewareAPI.Status.OK},RegisterOnTextUnselected:function(b){this.callbacks.onTextUnselected=b;return DocuViewareAPI.Status.OK},RegisterOnTextAnnotated:function(b){this.callbacks.onTextAnnotated=b;return DocuViewareAPI.Status.OK},RegisterOnAreaSelected:function(b){this.callbacks.onAreaSelected=b;return DocuViewareAPI.Status.OK},RegisterOnFullscreenModeChanged:function(b){this.callbacks.onFullscreenModeChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnSearchInvoked:function(b){this.callbacks.onSearchInvoked=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseEnter:function(b){this.callbacks.onAnnotationMouseEnter=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseLeave:function(b){this.callbacks.onAnnotationMouseLeave=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsSnapInSelected:function(b){this.callbacks.onThumbnailsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnBookmarksSnapInSelected:function(b){this.callbacks.onBookmarksSnapInSelected=
b;return DocuViewareAPI.Status.OK},RegisterOnSearchSnapInSelected:function(b){this.callbacks.onSearchSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationsSnapInSelected:function(b){this.callbacks.onAnnotationsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnCommentsSnapInSelected:function(b){this.callbacks.onCommentsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelResized:function(b){this.callbacks.onSnapInPanelResized=b;return DocuViewareAPI.Status.OK},
RegisterOnSnapInPanelToggle:function(b){this.callbacks.onSnapInPanelToggle=b;return DocuViewareAPI.Status.OK},RegisterOnRedactionMarksApplied:function(b){this.callbacks.onRedactionMarksApplied=b;return DocuViewareAPI.Status.OK},DisplayMessageBox:function(b){return"object"===typeof b&&null!==b&&b.hasOwnProperty("text")&&b.hasOwnProperty("icon")?(this.ShowMessage(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},PostCustomServerAction:function(b,d,e,h,k){return this.ajax.PostCustomServerAction(b,
d,e,h,k)},SetMaxUploadThreads:function(b){return 0<b&&16>=b?(a.Internal.Files.MAX_UPLOAD_THREADS=b,DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(b,d,e,h,k){return this.LoadFromByteArray(DocuViewareEncodingUtilities.base64.base64toArrayBuffer(b),d,e,h,k)},LoadFromByteArray:function(b,d,e,h,k){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onFileOpenError=k;this.callbacks.onFileOpenSuccess=h;a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b,
d,e),0);return DocuViewareAPI.Status.OK},LoadFromFile:function(b,d){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!1);this.callbacks.onFileOpenError=d;this.callbacks.onFileOpenSuccess=b;dvJQuery(this.dom.openfile).click();return DocuViewareAPI.Status.OK},GetDocumentType:function(){return this.serverCtx?this.serverCtx.documentType:0},GetDocumentFormat:function(){return this.serverCtx?this.serverCtx.documentFormat:0},GetDocumentName:function(){return this.serverCtx?
this.serverCtx.fileName:""},GetPageCount:function(){return this.serverCtx?this.serverCtx.pageCount:0},GetCurrentPage:function(){return this.serverCtx?this.serverCtx.selectedPage:0},GetPageWidth:function(b){return this.serverCtx?this.Internal.Pages.getPageWidth(b):0},GetPageHeight:function(b){return this.serverCtx?this.Internal.Pages.getPageHeight(b):0},GetSelectedTextArea:function(){return this.serverCtx?this.Internal.Text.getSelectedTextAreas():0},GetLastPageNoRequest:function(){return this.ajax.latestSelectedPage},
GetDisplayedArea:function(){if(this.serverCtx){var b=a.dom.viewerArea.getBoundingClientRect(),d=this.GetCurrentPage(),e=a.Internal.Pages.getPageWidth(d),h=a.Internal.Pages.getPageHeight(d),k=this.Internal.Coordinates.clienttodocument(d,b.left,b.top,1),q=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top,1),n=this.Internal.Coordinates.clienttodocument(d,b.left+b.width,b.top+b.height,1);b=this.Internal.Coordinates.clienttodocument(d,b.left,b.top+b.height,1);d=Math.max(Math.min(k.x,Math.min(q.x,
Math.min(n.x,b.x))),0);var y=Math.max(Math.min(k.y,Math.min(q.y,Math.min(n.y,b.y))),0);return{left:d,top:y,width:Math.min(Math.max(k.x,Math.max(q.x,Math.max(n.x,b.x))),e)-d,height:Math.min(Math.max(k.y,Math.max(q.y,Math.max(n.y,b.y))),h)-y}}return{left:0,top:0,width:0,height:0}},GetSelectionAreaCoordinates:function(){return this.serverCtx?this.Internal.Selection.getSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(b){return this.serverCtx?this.Internal.Selection.setSelectionAreaCoordinates(b):
DocuViewareAPI.Status.GenericError},GetViewerScrollLeft:function(){return this.Internal.Coordinates.getViewerScrollLeft()},GetViewerScrollTop:function(){return this.Internal.Coordinates.getViewerScrollTop()},SetViewerScrollLeft:function(b){return this.Internal.Coordinates.setViewerScrollLeft(b)},SetViewerScrollTop:function(b){return this.Internal.Coordinates.setViewerScrollTop(b)},ClearSelectionArea:function(){return this.serverCtx?(this.Internal.Selection.clearSelectionArea(),DocuViewareAPI.Status.OK):
DocuViewareAPI.Status.GenericError},GetSelectedThumbnailItems:function(){return this.serverCtx?this.Internal.Thumbnails.getSelectedThumbnails(!0):null},SetThumbnailSelected:function(b,d){return this.serverCtx?this.Internal.Thumbnails.setThumbnailSelected(b,d):DocuViewareAPI.Status.GenericError},GetCurrentZoom:function(){return this.serverCtx?this.serverCtx.zoom:0},SetCurrentZoom:function(b){return Math.round(1E3*b)===Math.round(1E3*a.serverCtx.zoom)?DocuViewareAPI.Status.OK:a.ajax.PostBaseRequest("zoomset",
{data:{zoom:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!1)}},!1)},GetCurrentViewRotation:function(){return this.serverCtx?this.serverCtx.viewRotation:0},GetCurrentPageRotation:function(){return this.serverCtx?this.serverCtx.pageRotation:0},GetCurrentPageRenderRotation:function(){return this.serverCtx?this.serverCtx.renderRotation:0},ToggleLoadFromUriDialog:function(b){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible,
b);return DocuViewareAPI.Status.OK},DirectSave:function(b,d,e){var h="*"===a.serverCtx.allowedExportFormats?"pdf":a.serverCtx.allowedExportFormats.split(",")[0];if(null==b)b={fileName:a.serverCtx.fileName,format:h,range:"*",dropAnnotations:!1,flattenAnnotations:!1};else{if(null==b.format)b.format=h;else if(null!=b.format&&"*"!==a.serverCtx.allowedExportFormats){h=a.serverCtx.allowedExportFormats.split(",");for(var k=!1,q=0;q<h.length;q++)b.format.toLowerCase()===h[q].toLowerCase()&&(k=!0);if(!1===
k)return DocuViewareAPI.Status.GenericError}null==b.range&&(b.range="*");null==b.fileName&&(b.fileName=a.serverCtx.fileName);null==b.dropAnnotations&&(b.dropAnnotations=!1);null==b.flattenAnnotations&&(b.flattenAnnotations=!1)}return a.Save(b.fileName,b.format,b.range,b.dropAnnotations,b.flattenAnnotations,d,e)},ToggleSaveDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.saveDialog),a.Localize("_title_save_dialog"),null,
function(){dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val("");var e=a.GetSelectedThumbnailItems();1==e.length&&e[0]===a.GetCurrentPage()?dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<e.length?(dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val(e.join())):dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",
!0).trigger("change");dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(a.serverCtx.fileName)},null,[{text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.saveDialog).dvDialog("close")}},{text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(),h=dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").find("option:selected").val(),
k=dvJQuery(a.dom.saveDialog).find("input[name='savePageRangeInput"+a.uniqueID+"']").val(),q=1===parseInt(dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").find("option:selected").val())?!0:!1,n=dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").is(":checked");1==n&&(q=!0);a.Save(e,h,k,q,n,b,d)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.saveDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainToggleAcquisitionDialog:function(b,
d){if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.twainAcquisitionDialog),a.Localize("button__twain_acquisition"),null,function(){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",.3).hide();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");
var e=function(h){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(h.twainStatus,h.message);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")};a.GetTwainAcquisitionServiceInfo(function(h){parseInt(h.ServiceVersionResult)>=
a.twainServiceSupportedVersion?a.GetTwainAcquisitionSources(function(k){if(k.GetTwainSourcesResult&&k.GetTwainSourcesResult.sources.length){dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!1);dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",1);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).find("option").remove().end();if(k.GetTwainSourcesResult.sources&&
0<k.GetTwainSourcesResult.sources.length){for(var q=0;q<k.GetTwainSourcesResult.sources.length;q++){var n=dvJQuery("<option>"),y=k.GetTwainSourcesResult.sources[q];n.attr("value",y.sourceName);n.html(y.sourceName);(!k.GetTwainSourcesResult.defaultSource&&1==q||k.GetTwainSourcesResult.defaultSource&&(k.GetTwainSourcesResult.defaultSource==y.sourceName||k.GetTwainSourcesResult.defaultSource+" (64-bit)"==y.sourceName))&&n.prop("selected",!0);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+
a.uniqueID).append(n)}dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu&&dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu("destroy");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu()}a.serverCtx.enablePageAppending?dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):(dvJQuery("[name='inputTwainAcquisitionDestination"+
a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change"),dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("*").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3));dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).hide();dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")}else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING,
a.Localize("_twain_connector_no_sources")),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")},e):(h=a.Localize("_twain_connector_bad_version"),a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION,h),dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",
!0),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))},e)!=DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},null,[{text:a.Localize("_label_cancel"),click:function(){if(a.callbacks.onTwainAcquisitionDialogCancelButtonClick)a.callbacks.onTwainAcquisitionDialogCancelButtonClick();
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}},{id:"twainAcquisitionDialogAcquireButton"+a.uniqueID,text:a.Localize("button__twain_acquire"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect"+a.uniqueID+"']").find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination"+a.uniqueID+"']:checked").val()?a.TwainAcquireToNewDocument(e)==DocuViewareAPI.Status.OK&&
dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close"):a.TwainAcquireToCurrentDocument(e,dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect"+a.uniqueID+"']").find("option:selected").val())==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainAcquireToNewDocument:function(b,d,e){return a.Internal.Twain.acquire(b,function(h){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(h.fileData,
"image/tiff",h.fileName),0,"",h.fileContentEncoding);d&&"function"===typeof d&&d()},function(h){e&&"function"===typeof e&&e(h)})},TwainAcquireToCurrentDocument:function(b,d,e,h){return!d||0>d||3<d||!a.serverCtx.enablePageAppending?DocuViewareAPI.Status.GenericError:a.Internal.Twain.acquire(b,function(k){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(k.fileData,"image/tiff",k.fileName),d,"",k.fileContentEncoding);e&&"function"===typeof e&&e()},function(k){h&&"function"===typeof h&&
h(k)})},TwainSetConfig:function(b,d,e,h,k,q,n){"boolean"===typeof b&&(a.twainSourceConfig.enableCustomConfiguration=b);"boolean"===typeof d&&(a.twainSourceConfig.selectFeeder=d);Number.isInteger(e)&&(a.twainSourceConfig.resolution=e);Number.isInteger(h)&&(a.twainSourceConfig.bitDepth=h);"boolean"===typeof k&&(a.twainSourceConfig.enableDuplex=k);"boolean"===typeof q&&(a.twainSourceConfig.hideUI=q);if(n)if(Array.isArray(n)){b=[];for(d=0;d<n.length;d++)n[d].hasOwnProperty("capability")&&n[d].hasOwnProperty("value")&&
Number.isInteger(n[d].capability)&&"string"===typeof n[d].value&&b.push(n[d]);a.twainSourceConfig.extConfig=0!==b.length?b:null}else a.twainSourceConfig.extConfig=null;else a.twainSourceConfig.extConfig=null;return DocuViewareAPI.Status.OK},ToggleCommentDialog:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;"comment"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog"),null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?
a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentMessageInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),
"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.commentsAuthorInput).val(),h=a.Internal.Annotations.defaultProperties[2048];h.previousGuid=a.dom.selectedAnnotation.annotApp.id;h.text=dvJQuery(a.dom.commentMessageInput).val();a.ajax.PostBaseRequest("newannotationcomment",{data:{annots:[{extProperties:{author:e},properties:h,ownerAnnotType:a.dom.selectedAnnotation.annotApp.properties.type,pageNo:a.dom.selectedAnnotation.annotApp.pageNo}]},success:function(k){if((k="string"===typeof k?eval("("+
k+")"):k)&&null!=k.annotApp&&k.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(k),a.refreshCommentsPanel(),a.SelectSnapIn("comments",!0),a.Internal.Annotations.selectAnnotationCommentById(k.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:k.annotApp.id,pageNo:k.annotApp.pageNo})}else a.ajax.HandleError(k)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"edit"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_edit"),
null,function(){dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).show();for(var e=0;e<a.cache.AnnotsComments.length;e++){var h=a.cache.AnnotsComments[e];if(h.annotApp.id===d){dvJQuery(a.dom.commentMessageInput).val(h.annotApp.properties.text);dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option[value='"+h.annotApp.properties.reviewStatus+"']").prop("selected",!0);dvJQuery(a.dom.commentsAuthorInput).val(h.annotApp.author);
h.annotApp.properties.allowReview?dvJQuery(a.dom.commentStatusSelect).attr("disabled",!1):dvJQuery(a.dom.commentStatusSelect).attr("disabled",!0);h.annotApp.canDelete?dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!1).removeClass("ui-state-disabled"):dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!0).addClass("ui-state-disabled");break}}dvJQuery(a.dom.commentMessageInput).focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),
click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogDeleteButton"+a.uniqueID,text:a.Localize("_label_delete"),click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_comment_removal"),null,function(){dvJQuery(a.dom.commentDialogModalOverlay).show();dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_comment_removal"))},function(){dvJQuery(a.dom.commentDialogModalOverlay).hide()},[{text:a.Localize("_label_no"),
click:function(){dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.modalOverlayArea).show()}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){if(null!=a.cache.AnnotsComments)for(var e=a.GetCurrentPage(),h=0;h<a.cache.AnnotsComments.length;h++)if(a.cache.AnnotsComments[h].annotApp.pageNo===e&&a.cache.AnnotsComments[h].annotApp.id===d){a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{properties:a.cache.AnnotsComments[h].annotApp.properties,"delete":!0,pageNo:a.cache.AnnotsComments[h].annotApp.pageNo,id:a.cache.AnnotsComments[h].annotApp.id}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(k){if((k="string"===typeof k?eval("("+k+")"):k)&&null!=k.annots)for(var q=0;q<k.annots.length;q++){if(null!=k.annots[q].deletedAnnotsCommentId)for(var n=0;n<k.annots[q].deletedAnnotsCommentId.length;n++)a.Internal.Annotations.deleteAnnotationComment(k.annots[q].deletedAnnotsCommentId[n],
!1);a.Internal.Annotations.deleteAnnotationComment(d,!0);if(a.callbacks.onCommentDeleted)a.callbacks.onCommentDeleted({id:k.annots[q].id,pageNo:k.annots[q].pageNo})}else a.ajax.HandleError(k)},error:function(k){a.ajax.HandleError(k)}});break}dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.commentDialog).dvDialog("close")}}])}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_save"),"class":"btn-valid",
click:function(){var e=dvJQuery(a.dom.commentMessageInput).val(),h=dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.commentsAuthorInput).val();if(null!=a.cache.AnnotsComments){for(var q=a.GetCurrentPage(),n=null,y=0;y<a.cache.AnnotsComments.length;y++)if(a.cache.AnnotsComments[y].annotApp.pageNo===q&&a.cache.AnnotsComments[y].annotApp.id===d){n=a.cache.AnnotsComments[y].annotApp.properties;n.text=e;n.reviewStatus=
parseInt(h);break}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{extProperties:{author:k},properties:n,pageNo:q,id:d,clientTag:a.cache.AnnotsComments[y].annotApp.clientTag}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(x){if((x="string"===typeof x?eval("("+x+")"):x)&&null!=x.annots)for(var K=0;K<x.annots.length;K++){for(var F=0;F<a.cache.AnnotsComments.length;F++)if(a.cache.AnnotsComments[F].annotApp.pageNo===
q&&a.cache.AnnotsComments[F].annotApp.id===d){a.cache.AnnotsComments[F].annotApp=x.annots[K].annotApp;break}a.refreshCommentsPanel();a.Internal.Annotations.selectAnnotationCommentById(x.annots[K].annotApp.id,!0,!1);if(a.callbacks.onCommentEdited)a.callbacks.onCommentEdited({id:x.annots[K].annotApp.id,pageNo:x.annots[K].annotApp.pageNo})}else a.ajax.HandleError(x)},error:function(x){a.ajax.HandleError(x)}})}dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"answer"===b&&a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),
a.Localize("_title_comment_dialog_answer"),null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentContentBox).hide();dvJQuery(a.dom.commentAnswerBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentAnswerInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},
{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){for(var e=1,h=-1,k=0;k<a.cache.AnnotsComments.length;k++)a.cache.AnnotsComments[k].annotApp.id===d&&(e=a.cache.AnnotsComments[k].annotApp.pageNo,h=a.cache.AnnotsComments[k].ownerAnnotType);k=dvJQuery(a.dom.commentsAuthorInput).val();var q=a.Internal.Annotations.defaultProperties[2048];q.text=dvJQuery(a.dom.commentAnswerInput).val();q.pageNo=e;q.previousGuid=d;a.ajax.PostBaseRequest("newannotationcomment",
{data:{annots:[{extProperties:{author:k},properties:q,ownerAnnotType:h,pageNo:e}]},success:function(n){if((n="string"===typeof n?eval("("+n+")"):n)&&null!=n.annotApp&&n.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(n),a.refreshCommentsPanel(),a.Internal.Annotations.selectAnnotationCommentById(n.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:n.annotApp.id,pageNo:n.annotApp.pageNo})}else a.ajax.HandleError(n)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]);
return DocuViewareAPI.Status.OK},TogglePrintDialog:function(b,d){if("undefined"===typeof e)var e=null;if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.DisplayDialogForm(dvJQuery(a.dom.printDialog),a.Localize("_title_print_dialog"),null,function(){dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val("");var h=a.GetSelectedThumbnailItems();1==h.length&&h[0]===a.GetCurrentPage()?dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):
0<h.length?(dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val(h.join())):dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")},null,[{id:"printDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){if(a.Internal.Print.isPrinting){a.Internal.Print.isPrinting=!1;dvJQuery(a.dom.printProgressbarDiv).remove();
var h=document.getElementById("printProgressionText"+a.uniqueID);h.parentNode.removeChild(h)}dvJQuery(a.dom.printDialog).dvDialog("close")}},{id:"printDialogPrintButton"+a.uniqueID,text:a.Localize("_label_print"),"class":"btn-valid",click:function(){null===a.dom.printDialogPrintButton&&(a.dom.printDialogPrintButton=dvJQuery("#printDialogPrintButton"+a.uniqueID));var h=dvJQuery(a.dom.printDialog).find("select[name='print_content_select"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.printDialog).find("select[name='print_destination_select"+
a.uniqueID+"']").find("option:selected").val(),q=a.dom.printPageRangeInput.value;dvJQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText"+a.uniqueID+"'></div>");dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var n=dvJQuery("<div>").css({width:"100%"}).attr("id","printProgressbarDiv"+a.uniqueID).append("<div>");n.insertBefore(a.dom.printDialog);var y=new DocuViewareProgressbar({bg:"#acf",target:n.get(0),
id:"printProgressbar"+a.uniqueID});y.go(0);a.Internal.Print.printPages(0==h,q,k,function(x,K){document.getElementById("printProgressionText"+a.uniqueID).innerHTML=a.Localize("label_printing_progess").replace("#",x).replace("@",K);y.go(100*x/K)},function(){n.remove();var x=document.getElementById("printProgressionText"+a.uniqueID);x.parentNode.removeChild(x);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");
b&&b()},function(){n.remove();var x=document.getElementById("printProgressionText"+a.uniqueID);x.parentNode.removeChild(x);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");d&&d()})!=DocuViewareAPI.Status.OK&&(n.remove(),h=document.getElementById("printProgressionText"+a.uniqueID),h.parentNode.removeChild(h),dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))}}]);
this.dom.updateButtons();return DocuViewareAPI.Status.OK},LaunchDirectPrint:function(b,d,e){"undefined"===typeof b&&(b={removeAnnontations:!1,range:"*",destination:0});var h=b.removeAnnontations||!1,k=b.range||"*";b=b.destination||0;a.DisplayPendingActionNotification();a.Internal.Print.printPages(!h,k,b,function(q,n){q===n&&a.HidePendingActionNotification()},d,e)},CopySelectedTextToClipboard:function(){var b=this.GetSelectedText();if(null!=b&&""!=b){var d=dvJQuery("<textarea>");d.css({position:"absolute",
left:"-1000px",top:"-1000px"});d.addClass("dvTemporaryTextToCopy"+a.uniqueID);d.text(b);dvJQuery(a.dom.mainArea).append(d);document.querySelector(".dvTemporaryTextToCopy"+a.uniqueID).select();try{var e=document.execCommand("copy");d.remove();if(!e)throw"failed";}catch(h){a.dom.copyTextInput.value=b,a.DisplayDialogForm(dvJQuery(a.dom.copyDialog),a.Localize("_title_copy_dialog"),null,function(){a.dom.copyTextInput.focus()},null,[{text:a.Localize("_label_close"),"class":"btn-valid",click:function(){dvJQuery(a.dom.copyDialog).dvDialog("close")}}])}this.dom.updateButtons();
return DocuViewareAPI.Status.OK}},HighlightSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],h=0;h<d.length;h++)e.push({type:2,pageNo:d[h].pageNo,coordinates:{left:d[h].left,top:d[h].top,height:d[h].height,width:d[h].width},appearance:{fillColor:null!=b?b:"#FFFF00",rotation:0,squaredBox:!1},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}});this.AddAnnot(e,!1,null,null,"highlight");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},StrikeoutSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<
d.length){for(var e=[],h=0;h<d.length;h++)e.push({type:3,pageNo:d[h].pageNo,coordinates:{left:d[h].left,top:d[h].top+d[h].height/2,height:.001,width:d[h].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
tag:"",publicTag:""}});this.AddAnnot(e,!1,null,null,"strikeout");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],h=0;h<d.length;h++)e.push({type:3,pageNo:d[h].pageNo,coordinates:{left:d[h].left,top:d[h].top+
d[h].height,height:.001,width:d[h].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(e,!1,null,null,"underline");this.Internal.Text.clearSelection();
this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},RedactSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var d=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<d.length){for(var e=[],h=0;h<d.length;h++){var k={type:17,pageNo:d[h].pageNo,coordinates:{left:d[h].left,top:d[h].top,height:d[h].height,width:d[h].width},appearance:null,common:{canResize:!1,canMove:!1,canRotate:!1,
canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}};k.appearance=a.Internal.Annotations.getAnnotPropertiesValues(17);b&&(k.appearance.fillColor=b);e.push(k)}this.AddAnnot(e,!1,null,null,"redaction mark");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},GetSelectedText:function(){return a.Internal.Text.getSelectedText()},
AddSelectedTextContextMenuItem:function(b,d,e){if(b&&"function"===typeof d&&this.dom.viewerContextMenu){var h=document.createElement("a");h.href="#";h.className="dv-list-group-item";h.title=b;h.style.color=this.dom.UIconfig.strokeColor;var k=document.createElement("span");k.className="context-menu-icon";e&&e.nodeName&&"svg"===e.nodeName?(e.setAttribute("width","100%"),e.setAttribute("height","100%"),k.appendChild(e)):k.innerHTML="string"===typeof e?e:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M71.6,110.7h60.3v76.1H71.6L71.6,110.7z M296.4,81.6h39.8v49.8h-39.8V81.6z M141.5,275.4h43.9v55.4h-43.9V275.4z\t M321.1,435.9H354v41.5h-32.9V435.9z M295.1,27.7h23.3v29.1h-23.3V27.7z M177.2,142.5h38.4v49.8h-38.4V142.5z M256.7,357h50.7v65\th-50.7V357z M78.5,345.9h23.3V375H78.5V345.9z M192.3,365.3h34.3v42.9h-34.3V365.3z M345.8,351.5h20.6v26.3h-20.6V351.5z\t M207.3,232.5h23.3v29.1h-23.3V232.5z M400.6,182.7h23.3v29.1h-23.3V182.7z M129.2,408.2h34.3v42.9h-34.3V408.2z M114.1,47h23.3\tv29.1h-23.3V47z M386.9,390.2h35.6v44.3h-35.6V390.2z M256.7,0h-60.3v92.7H269V11.1C269,11.1,256.7,0,256.7,0z M247.1,76.1h-38.4V72\th38.4V76.1z M256.7,59.5h-48V54h48V59.5z M256.7,41.5h-48V36h48C256.7,36,256.7,41.5,256.7,41.5z M256.7,23.5h-48V18h48V23.5z\t M256.7,11.1V2.8l9.6,8.3C266.3,11.1,256.7,11.1,256.7,11.1z M94.9,215.9H34.6v92.7h72.7v-81.6C107.3,226.9,94.9,215.9,94.9,215.9z\t M86.7,293.4H48.3v-5.5h38.4V293.4z M94.9,275.4h-48v-5.5h48V275.4z M94.9,257.4h-48v-5.5h48V257.4z M94.9,240.8h-48v-5.5h48\tC94.9,235.2,94.9,240.8,94.9,240.8z M94.9,226.9v-8.3l9.6,8.3H94.9z M374.6,177.1l-21.9-19.4H240.2v171.6h134.4\tC374.6,329.3,374.6,177.1,374.6,177.1z M336.2,296.1h-71.3v-5.5h71.3C336.2,290.6,336.2,296.1,336.2,296.1z M352.7,272.6h-87.7v-5.5\th87.7V272.6z M352.7,247.7h-87.7v-5.5h87.7V247.7z M352.7,222.8h-87.7v-5.5h87.7V222.8z M352.7,197.9h-87.7v-4.2h87.7\tC352.7,193.7,352.7,197.9,352.7,197.9z M352.7,177.1v-15.2l17.8,15.2H352.7z M465.1,244.9h-60.3v92.7h72.7V256\tC477.4,256,465.1,244.9,465.1,244.9z M455.5,322.4h-38.4v-5.5h38.4V322.4z M465.1,304.4h-48v-5.5h48V304.4z M465.1,286.4h-48v-5.5\th48V286.4z M465.1,268.5h-48v-5.5h48C465.1,262.9,465.1,268.5,465.1,268.5z M465.1,256v-8.3l9.6,8.3H465.1z M402,96.9h-35.6v54H413\tv-44.3C413,106.6,402,96.9,402,96.9z M393.8,139.8h-19.2v-5.5h19.2V139.8z M404.7,128.7h-30.2v-5.5h30.2V128.7z M404.7,116.2h-30.2\tv-5.5h30.2C404.7,110.7,404.7,116.2,404.7,116.2z M402,106.6v-8.3l9.6,8.3H402z M260.8,458h-35.6v54h46.6v-44.3\tC271.8,467.7,260.8,458,260.8,458z M252.6,500.9h-19.2v-5.5h19.2V500.9z M263.5,489.9h-30.2v-5.5h30.2 C263.5,484.3,263.5,489.9,263.5,489.9z M263.5,477.4h-30.2v-5.5h30.2V477.4z M259.4,467.7v-8.3l9.6,8.3H259.4z"/></svg>';
h.appendChild(k);e=document.createElement("span");e.className="context-menu-label";e.innerText=b;h.appendChild(e);h.addEventListener("click",function(){var q=a.Internal.Text.getSelectedTextAreas(1);d(q);a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1)});a.cache.addedSelectedTextContextMenuItem.push(h);this.dom.viewerContextMenu.firstChild.appendChild(h);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(){for(;0!=a.cache.addedSelectedTextContextMenuItem.length;)a.cache.addedSelectedTextContextMenuItem[0].parentNode.removeChild(a.cache.addedSelectedTextContextMenuItem[0]),
a.cache.addedSelectedTextContextMenuItem.splice(0,1);return DocuViewareAPI.Status.OK},AddAnnotationsActionButton:function(b,d,e){if(b&&d&&"function"===typeof e&&this.dom.annotationsActionButtons){var h=0,k=document.createElement("div"),q=dvJQuery("div[id^='annotationActionButtonsSplitter']").length+1;k.id="annotationActionButtonsSplitter"+q+this.uniqueID;k.style.fill=this.dom.UIconfig.strokeColor;k.style.height="16px";k.style.width="1px";k.style.marginLeft="8px";k.style.marginRight="8px";k.style.float=
"left";k.style.borderRight="solid";k.style.borderRightWidth="1px";k.style.borderRightColor=this.UIconfig.strokeColor;h+=dvJQuery(k).outerWidth()+2;this.dom.annotationsActionButtons.appendChild(k);h=document.createElement("div");q=dvJQuery("div[id^='annotationActionCustomButtons']").length+1;h.id="annotationActionCustom"+q+this.uniqueID;h.title=b;h.style.fill=this.dom.UIconfig.strokeColor;h.style.height="16px";h.style.width="16px";h.style.float="left";h.innerHTML=d;h.addEventListener("mouseenter",
function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)});h.addEventListener("mouseleave",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});h.addEventListener("click",function(){e({id:a.dom.selectedAnnotation.annotApp.id})});this.dom.annotationsActionButtons.appendChild(h);this.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ShowThumbnailsSnapIn:function(){return this.dom.thumbnailArea?
this.SelectSnapIn("thumbnails",!1):DocuViewareAPI.Status.GenericError},ShowBookmarksSnapIn:function(){return this.dom.bookmarksArea?this.SelectSnapIn("bookmarks",!1):DocuViewareAPI.Status.GenericError},ShowSearchSnapIn:function(){if(this.dom.searchArea){var b=this.SelectSnapIn("search",!1);b==DocuViewareAPI.Status.OK&&(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px",dvJQuery(this.dom.searchValueInput).focus());
return b}return DocuViewareAPI.Status.GenericError},ShowAnnotationsSnapIn:function(){return this.dom.annotationsArea?this.SelectSnapIn("annotations",!1):DocuViewareAPI.Status.GenericError},ShowCommentsSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("comments",!1):DocuViewareAPI.Status.GenericError},ShowRedactionSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("redaction",!1):DocuViewareAPI.Status.GenericError},IsSnapinsPanelVisible:function(){return this.dom.leftSideArea?
"none"!=this.dom.leftSideContainerPanelsArea.style.display:!1},SetSnapinsPanelVisibility:function(b,d,e){if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var h=this.dom.leftSideContainerPanelsArea.style.display;if(b){if(!this.IsSnapinsPanelVisible()||d)d&&(d=Math.max(d,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width())),dvJQuery(a.dom.leftSideArea).animate({width:d?d:a.dom.leftSideArea.oldWidth},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",
"");dvJQuery(a.dom.leftSideContainerPanelsArea).show(0,function(){if(h!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize(),a.dom.ensureSelectedThumbnailVisibility(!1)});dvJQuery(a.dom.leftSideArea).resizable("enable");d?a.dom.sidePanelResized():a.dom.sidePanelToggled(!1)})}else this.IsSnapinsPanelVisible()&&(this.UnselectSelectedSnapin(),a.dom.leftSideArea.oldWidth=d?d+"px":a.dom.leftSideArea.style.width,dvJQuery(a.dom.leftSideArea).animate({width:dvJQuery(a.dom.leftsideContainer).width()-
dvJQuery(a.dom.leftSideContainerPanelsArea).width()},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width());dvJQuery(a.dom.leftSideContainerPanelsArea).hide(0,function(){if(h!=a.dom.leftSideContainerPanelsArea.style.display||e)a.events.onNewViewerSize()});dvJQuery(a.dom.leftSideArea).resizable("disable");a.dom.sidePanelToggled(!0)}));return DocuViewareAPI.Status.OK},GetSnapInPanelWidth:function(){return this.IsSnapinsPanelVisible()?
parseInt(a.dom.leftSideArea.style.width.replace("px","")):0},SetSnapInPanelWidth:function(b){return this.dom.leftSideArea&&b===parseInt(b)?null==a.dom.selectedSnapin?(a.dom.leftSideArea.oldWidth=Math.max(b,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width()),this.SelectFirstAvailableSnapin()):this.SetSnapinsPanelVisibility(!0,b,!0):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(b,d,e,h,k,q){function n(x){return"object"===typeof HTMLElement?x instanceof
HTMLElement:x&&"object"===typeof x&&null!==x&&1===x.nodeType&&"string"===typeof x.nodeName}if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var y=document.createElement("div");y.id=a.uniqueID+"_snapin_button_"+b;y.className="leftsidebutton";y.title=d;y.style.display=!0===k?"block":"none";y.style.borderTop="1px solid "+a.dom.UIconfig.snapInButtonBorderTop;n(e)?y.innerHTML=e.outerHTML:y.innerHTML=e;y.addEventListener("click",function(){a.SnapInButton_Click(b)});y.addEventListener("mouseenter",
function(){a.events.onSnapInButtonMouseEnter(this)});y.addEventListener("mouseleave",function(){a.events.onSnapInButtonMouseLeave(this)});document.getElementById("snapinButtonStrip"+a.uniqueID).appendChild(y);e=document.createElement("div");e.id=a.uniqueID+"_snapin_panel_"+b;e.className="panel";n(h)?e.innerHTML=h.outerHTML:e.innerHTML=h;document.getElementById("leftsidePanels"+a.uniqueID).appendChild(e);a.snapIns.push({snapInID:a.uniqueID+"_snapin_panel_"+b,buttonID:a.uniqueID+"_snapin_button_"+b,
name:b,label:d,onSelection:null==q?null:q});return DocuViewareAPI.Status.OK},FindSnapIn:function(b){if(null!=a.snapIns)for(var d=0;d<a.snapIns.length;d++)if(a.snapIns[d].name==b)return a.snapIns[d];return null},IsSnapInAvailable:function(b){return(b=a.FindSnapIn(b))?dvJQuery("#"+b.buttonID).is(":visible"):!1},ToggleSnapIn:function(b,d){var e=a.FindSnapIn(b);if(e){d?dvJQuery("#"+e.buttonID).show():(dvJQuery("#"+e.buttonID).hide(),!0===a.IsSnapinsPanelVisible()&&0!==a.SelectFirstAvailableSnapin()&&
a.SetSnapinsPanelVisibility(!1));switch(b){case "comments":a.dom.selectedAnnotation&&(a.Internal.Annotations.unselectById(a.dom.selectedAnnotation.annotApp.id),a.Internal.Annotations.selectById(a.dom.selectedAnnotation.annotApp.id))}return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnselectSelectedSnapin:function(){if(this.dom.selectedSnapin){var b=this.FindSnapIn(this.dom.selectedSnapin);if(b){var d=document.getElementById(b.snapInID);b=document.getElementById(b.buttonID);
if(d&&b)return this.dom.selectedSnapin=null,null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=""),dvJQuery(d).removeClass("active"),dvJQuery(b).removeClass("active"),dvJQuery(b).attr("aria-selected","false"),b.style.fill="",b.style.backgroundColor="",b.style.borderBottomColor=this.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=this.dom.UIconfig.snapInButtonBorderTop,DocuViewareAPI.Status.OK}this.dom.selectedSnapin=null}return DocuViewareAPI.Status.GenericError},
SelectFirstAvailableSnapin:function(b){if(null!=a.snapIns)for(b=0;b<a.snapIns.length;b++){var d=document.getElementById(a.snapIns[b].snapInID),e=document.getElementById(a.snapIns[b].buttonID);if(d&&e&&"none"!=e.style.display)return this.SelectSnapIn(a.snapIns[b].name,!0)}return DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,d){if(this.dom.selectedSnapin==b)return DocuViewareAPI.Status.OK;var e=this.SetSnapInVisibility(b,!0);if(e==DocuViewareAPI.Status.OK){if(e=this.FindSnapIn(b)){var h=
document.getElementById(e.buttonID),k=document.getElementById(e.snapInID);if(h&&k&&"none"!=h.style.display){this.UnselectSelectedSnapin();null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=e.label);dvJQuery(h).addClass("active");dvJQuery(h).attr("aria-selected","true");h.style.fill=this.dom.UIconfig.headerColor;h.style.backgroundColor=this.dom.UIconfig.panelBackColor;h.style.borderBottomColor=this.dom.UIconfig.panelBackColor;h.style.borderTopColor=this.dom.UIconfig.panelBackColor;
dvJQuery(k).addClass("active");if(e.onSelection)if("[object Function]"==={}.toString.call(e.onSelection))e.onSelection();else eval(e.onSelection);dvJQuery(k).focus();this.SetSnapinsPanelVisibility(!0);this.dom.selectedSnapin=b;if(!d)if("thumbnails"===b){if(a.callbacks.onThumbnailsSnapInSelected)a.callbacks.onThumbnailsSnapInSelected()}else if("bookmarks"===b){if(a.callbacks.onBookmarksSnapInSelected)a.callbacks.onBookmarksSnapInSelected()}else if("search"===b){if(a.callbacks.onSearchSnapInSelected)a.callbacks.onSearchSnapInSelected()}else if("annotations"===
b){if(a.callbacks.onAnnotationsSnapInSelected)a.callbacks.onAnnotationsSnapInSelected()}else if("comments"===b&&a.callbacks.onCommentsSnapInSelected)a.callbacks.onCommentsSnapInSelected();return DocuViewareAPI.Status.OK}}return DocuViewareAPI.Status.GenericError}return e},SetSnapInVisibility:function(b,d){if(d&&"annotations"==b&&0==this.serverCtx.annotationEditorMode)return DocuViewareAPI.Status.GenericError;var e=this.FindSnapIn(b);if(e){var h=this.dom.selectedSnapin;h!=b||d||this.UnselectSelectedSnapin();
"redaction"===h&&h!==b&&a.events.isAddingRedactionMarksMode&&a.Internal.Redaction.disableAddRedactionMarksMode();h=document.getElementById(e.buttonID);e=document.getElementById(e.snapInID);"redaction"==b&&d&&(dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors({defaultValue:"#000000",letterCase:"uppercase"}),dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(k){dvJQuery(k.target).parents().add(k.target).hasClass("minicolors")||
dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","0px")}),dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()}),dvJQuery(a.dom.redactionFill).find("#redaction_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill_color_control"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("display","inline-block"));if(h&&e)return"none"!=h.style.display!=d&&(h.style.display=d?"":"none",e.style.display=d?"":"none"),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},Search:function(b,d,e,h,k){this.ClearSearch();this.SubmitSearch(b,d,e,h,k);this.dom.searchArea&&(this.dom.searchValueInput.value=b,this.dom.searchWholeWordInput.checked=d,this.dom.searchCaseSensitiveInput.checked=
e,this.dom.searchAnyWordInput.checked=h,dvJQuery(this.dom.searchPageSelect).filter("[value='"+k+"']").prop("checked",!0),dvJQuery(this.dom.searchPageSelect).dvButton("refresh"));return DocuViewareAPI.Status.OK},SetSearchSettings:function(b,d,e,h){this.dom.searchWholeWordInput.checked=b;this.dom.searchCaseSensitiveInput.checked=d;this.dom.searchAnyWordInput.checked=e;dvJQuery(this.dom.searchPageSelect).filter("[value='"+h+"']").prop("checked",!0);dvJQuery(this.dom.searchPageSelect).dvButton("refresh");
return DocuViewareAPI.Status.OK},SearchNavigateToOccurrence:function(b){return a.Internal.Search.occurences[b]&&(b=document.getElementById(a.uniqueID+"searchResultItem"+b))?(a.Internal.Search.navigateToResult(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSearchResultsCount:function(){return a.Internal.Search._occurences?a.Internal.Search._occurences.length:0},GetCurrentSearchOccurrenceIdx:function(){return a.Internal.Search._currentOccurence?parseInt(a.Internal.Search._currentOccurence.dataset.idx):
-1},SubmitSearch:function(b,d,e,h,k){this.ShowSearchSnapIn();if(b){var q=[];q.push(0==k?a.GetCurrentPage():-1);return this.ajax.PostBaseRequest("textsearch",{data:{text:b,pages:q,wholeWord:d,caseSensitive:e,anyWord:h},success:function(n){n="string"===typeof n?eval("("+n+")"):n;var y=0;n&&n.status==DocuViewareAPI.Status.OK?(a.Internal.Search.addResults(b,n.occurences),0==n.occurences.length?a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,
icon:64,delay:5E3}):(y=n.occurences.length,a.Internal.Search.navigateToFirstResult(),a.dom.searchArea&&(a.dom.searchClearResultsButton.style.display="block"))):(a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}),a.Internal.Search.addResults(null,null),a.ajax.HandleError(n));if(a.callbacks.onSearchInvoked)a.callbacks.onSearchInvoked({occurrences:y})}},!1)}return DocuViewareAPI.Status.GenericError},UpdateLayout:function(){this.events.onResize();
return DocuViewareAPI.Status.OK},ClearSearch:function(){this.Internal.Search.clearResults();this.dom.searchArea&&(this.dom.searchValueInput.value="",this.dom.searchClearResultsButton.style.display="none");return DocuViewareAPI.Status.OK},CommentsClearSearch:function(){this.dom.commentsSearchArea&&(this.dom.commentsSearchValueInput.value="",this.dom.commentsSearchClearResultsButton.style.display="none");a.refreshCommentsPanel();return DocuViewareAPI.Status.OK},SubmitCommentsSearch:function(b){this.ShowCommentsSnapIn();
if(!b)return DocuViewareAPI.Status.GenericError},CommentsExpandCollapseAll:function(){dvJQuery(a.dom.commentsCollapseExpandAllButton).hasClass("dvcolapsed")?(dvJQuery(a.dom.commentsCollapseExpandAllButton).removeClass("dvcolapsed"),dvJQuery(".dvcomment-user .dvtoggle").removeClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideDown(),dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M16,16H0V0h16V16z M0.9,15.1h14.1V0.9H0.9V15.1z"/><polygon points="6.1,10.8 6.6,11.3 9.9,8 6.6,4.7 6.1,5.2 8.8,8 "/></svg>')):
(dvJQuery(a.dom.commentsCollapseExpandAllButton).addClass("dvcolapsed"),dvJQuery(".dvcomment-user .dvtoggle").addClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideUp(),dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg viewBox="0 0 16 16" width="100%" height="100%" style="height:16px;width:16px;"><path d="M0,4v12h12V4H0z M11,15H1V5h10V15z"/><polygon points="13,3 13,13.5 14,14.5 14,2 1.5,2 2.5,3 "/><polygon points="15,1 15,11.5 16,12.5 16,0 3.5,0 4.5,1 "/><polygon points="3.2,8.5 2.7,9 6,12.4 9.3,9 8.7,8.5 6,11.3 "/></svg>'))},
SetLoadFromUriDialogVisibility:function(b,d){this.dom.isLoadFromUriDialogVisible!=b&&(b?(dvJQuery(this.dom.openFromUriArea).slideDown({complete:function(){dvJQuery(document).on("mousedown.toggleOpenUriEvent",function(e){dvJQuery(a.dom.openFromUriArea).is(dvJQuery(e.target))||0!=dvJQuery(a.dom.openFromUriArea).has(dvJQuery(e.target)).length||a.ToggleLoadFromUriDialog()});a.dom.isLoadFromUriDialogVisible=b;"undefined"!==typeof d&&!0!==d||dvJQuery(a.dom.addressBar).focus()}}),dvJQuery(this.dom.openFromUriButton).addClass("button_active")):
(dvJQuery(document).unbind("mousedown.toggleOpenUriEvent"),dvJQuery(this.dom.openFromUriArea).slideUp({complete:function(){a.dom.isLoadFromUriDialogVisible=b}}),dvJQuery(this.dom.openFromUriButton).removeClass("button_active")),this.dom.updateButtons())},LoadFromUri:function(b,d,e,h,k,q){function n(K){a.ajax.downloading=!1;0!=a.dom.progressbar.value()&&(a.dom.progressbar.go(100),a.dom.progressbar.value100=100);dvJQuery(a.dom.mainSpinner).hide();a.SetLoadFromUriDialogVisibility(!1);if(K){if(a.callbacks.onURIOpenSuccess)a.callbacks.onURIOpenSuccess()}else if(a.callbacks.onURIOpenError)a.callbacks.onURIOpenError()}
function y(K){a.ajax.HandleError(K);n(!1)}function x(K){if(a.ajax.downloading&&(K="string"===typeof K?eval("("+K+")"):K,!K||!K.ignoreResponse))if(K&&K.status==DocuViewareAPI.Status.OK)if(K.isTransfering){if(0<K.progress&&100>=K.progress){100!=K.progress&&(a.dom.progressbar.go(K.progress),a.dom.progressbar.value100=K.progress);var F=dvJQuery(a.dom.mainSpinnerContent);F.children(F.children.length-1).text(a.Localize("label__downloading_document")+" ("+K.progress+"%)")}a.ajax.PostBaseRequest("loadfromuri",
{data:{transferID:a.ajax.transferID,progressRequest:!0,URI:b,fileName:d,password:k,ignoreFileHostingURI:null!=q?q:!1},success:x,error:y},!1,!0)}else n(!0),a.ajax.SetNewServerCtx(K);else n(!1),a.ajax.HandleError(K)}if(this.hasPendingAction())return DocuViewareAPI.Status.GenericError;this.callbacks.onURIOpenError=h;this.callbacks.onURIOpenSuccess=e;this.ajax.downloading=!0;this.ajax.transferID=Date.now();e=dvJQuery(this.dom.mainSpinnerContent);e.children(e.children.length-1).text(this.Localize("label__loading_progress"));
a.SetLoadFromUriDialogVisibility(!1);dvJQuery(this.dom.mainSpinner).show();a.ajax.PostBaseRequest("loadfromuri",{data:{transferID:a.ajax.transferID,progressRequest:!1,URI:b,fileName:d,clientConfiguration:a.getConfig(),password:k,ignoreFileHostingURI:null!=q?q:!1},success:x,error:y},!1,!0);return DocuViewareAPI.Status.OK},ExitAnnotationDrawingMode:function(){2==this.events.mouseMode&&this.events.isDrawingPath&&(this.ResetScrollConfig(!1),this.dom.freehandCan.style.display="none",this.events.isDrawingPath=
!1,this.Internal.Annotations.addAnnotInteractive(),this.dom.drawingModeArea.style.display="none",this.dom.modalOverlayArea.style.display="none");a.dom.UIconfig.disableAnnotationDrawingModePanel&&(null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).removeClass("button_active"),null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).removeClass("button_active"),null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).removeClass("button_active"),
null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).removeClass("button_active"));this.dom.addViewAreaTouchAction();this.Internal.Annotations.stopAnnotInteractiveAdd();return DocuViewareAPI.Status.OK},IsFullScreenMode:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},ToggleFullscreen:function(){if(a.isSafari||a.isIOS||a.isIE9||a.isIE10||this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;
var b=this.IsFullScreenMode();if(b)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{dvJQuery(a.dom.fullscreenButton).addClass("button_active");var d=a.dom.mainArea;d.requestFullscreen?(DocuViewareUtilities.addEvent(document,"fullscreenchange",function k(h){document.fullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,
"fullscreenchange",k,!1))},!1),d.requestFullscreen()):d.msRequestFullscreen?(DocuViewareUtilities.addEvent(document,"MSFullscreenChange",function k(h){document.msFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"MSFullscreenChange",k,!1))},!1),d.msRequestFullscreen()):d.mozRequestFullScreen?(DocuViewareUtilities.addEvent(document,"mozfullscreenchange",function k(h){document.mozFullScreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"mozfullscreenchange",
k,!1))},!1),d.mozRequestFullScreen()):d.webkitRequestFullScreen&&(DocuViewareUtilities.addEvent(document,"webkitfullscreenchange",function k(h){document.webkitFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"webkitfullscreenchange",k,!1))},!1),d.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT));if(a.callbacks.onFullscreenModeChanged){if(!b)a.callbacks.onFullscreenModeChanged({newMode:!0})}else return DocuViewareAPI.Status.GenericError;a.dom.UIconfig.old_viewer_width=
a.width;a.dom.UIconfig.old_viewer_height=a.height;a.dom.leftSideArea&&"none"!=a.dom.leftSideContainerPanelsArea.style.display&&(b=window.screen.width/a.width,a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px");a.events.onNewViewerSize();a.dom.updateButtons()}return DocuViewareAPI.Status.OK},ExitFullscreen:function(){if(this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.GenericError;dvJQuery(a.dom.fullscreenButton).removeClass("button_active");
a.dom.updateButtons();var b=a.dom.UIconfig.old_viewer_width/a.width;a.dom.leftSideArea&&("none"!=a.dom.leftSideContainerPanelsArea.style.display?a.dom.leftSideArea.style.width=Math.round((a.dom.leftSideArea.style.width.replace("px","")||a.dom.leftSideArea.offsetWidth)*b)+"px":a.dom.leftSideContainerPanelsArea.style.width=Math.round(parseFloat(a.dom.leftSideContainerPanelsArea.style.width.replace("px",""))*b)+"px");a.events.onNewViewerSize();if(a.callbacks.onFullscreenModeChanged)a.callbacks.onFullscreenModeChanged({newMode:!1})},
SetZoomMode:function(b){return a.ajax.PostBaseRequest("zoommode",{data:{zoomMode:b},success:function(d){a.ajax.HandleServerContextResponse("string"===typeof d?eval("("+d+")"):d,!1)}},!1)},IsMagnifierEnabled:function(){return a.Internal.Magnifier.isMagnifying},ToggleMagnifier:function(){return a.Internal.Magnifier.toggle()},EnableMagnifier:function(){return a.Internal.Magnifier.enable()},DisableMagnifier:function(){return a.Internal.Magnifier.disable()},SetMouseMode:function(b){a.events.mouseMode=
b;var d=DocuViewareAPI.Status.OK;a.events.setCursor();a.Internal.Selection.selectionArea.hide();this.IsMagnifierEnabled()&&this.DisableMagnifier();switch(b){case 0:this.dom.addViewAreaTouchAction();case 1:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);a.events.ownMouseEvents=!1;break;case 3:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();
a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 4:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 5:this.dom.removeViewAreaTouchAction(),a.events.ownMouseEvents=!0;default:d=DocuViewareAPI.Status.GenericError}a.dom.udpateMouseModeButtons(b);
a.dom.updateButtons();return d},GetMouseMode:function(){return a.events.mouseMode},NewViewerSizePreview:function(){if(!this.serverCtx.singlePageView||2==this.serverCtx.documentPosition){var b=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSize);if(null!=b){var d=a.dom.getViewerContainer(),e=d.offsetWidth;d=d.offsetHeight;a.serverCtx.vScrollbarVisible&&(e-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(d-=a.dom.sbWidth);for(var h=b.length,k=!0,q=0,n=0;n<h;n++){n+1<h&&(q+=a.serverCtx.itemsVerticalSpacing);
var y=b[n].Width,x=b[n].Height;k&&y>e&&(k=!1);q+=x}var K=q<d;if(K||k){var F=0;for(n=0;n<h;n++)y=b[n].Width,x=b[n].Height,k&&(b[n].OffsetX=(e-y)/2),K&&(b[n].OffsetY=F+(d-q)/2),F+=x+a.serverCtx.itemsVerticalSpacing}a.SetupViewerArea(b,a.cache.pageCanvasZoom,!0,!0)}}},CanChangeZoom:function(){return!a.hasPendingAction(!0,!0,!0,!1)},ZoomPreview:function(b){b>a.serverCtx.zoomMax?b=a.serverCtx.zoomMax:b<a.serverCtx.zoomMin&&(b=a.serverCtx.zoomMin);if(Math.round(1E3*b)!==Math.round(1E3*a.cache.pageCanvasZoom)){a.events.restartZoomPreviewAutoSubmitter();
var d=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSizeNoPreview);if(null!=d){var e=a.dom.getViewerContainer(),h=e.offsetWidth,k=e.offsetHeight;a.serverCtx.vScrollbarVisible&&(h-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(k-=a.dom.sbWidth);e=d.length;for(var q=b/a.serverCtx.zoom,n=0,y=0,x=0;x<e;x++)d[x].Width>y&&(y=d[x].Width);var K=y=0;for(x=0;x<e;x++){var F=d[x].Width*q,Y=d[x].Height*q;F>y&&(y=F);d[x].OffsetY=n;d[x].OffsetX=0;d[x].Width=F;d[x].Height=Y;x==e-1&&(K=n+Y);n+=Y+a.serverCtx.itemsVerticalSpacing}switch(a.serverCtx.documentPosition){case 0:q=
0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;case 1:q=h>y?h-y:0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;default:q=h>y?(h-y)/2:0;n=k>K&&0==d[0].OffsetY?(k-K)/2:0;break;case 4:n=q=0;break;case 5:q=h>y?h-y:0;n=0;break;case 6:q=h>y?(h-y)/2:0;n=0;break;case 7:q=0;n=k>K&&0==d[0].OffsetY?k-K:0;break;case 8:q=h>y?h-y:0;n=k>K&&0==d[0].OffsetY?k-K:0;break;case 9:q=h>y?(h-y)/2:0,n=k>K&&0==d[0].OffsetY?k-K:0}x=a.serverCtx.forceScrollBars||a.viewerHeight<K||!a.serverCtx.singlePageView&&1<a.serverCtx.pageCount;Math.round(y)<
Math.round(h)&&(x?a.serverCtx.vScrollbarVisible||(q-=a.dom.sbWidth/2):a.serverCtx.vScrollbarVisible&&(q+=a.dom.sbWidth/2));h=a.serverCtx.forceScrollBars||Math.round(a.viewerWidth)<Math.round(y);Math.round(K)<Math.round(k)&&(h?a.serverCtx.hScrollbarVisible||(n-=a.dom.sbWidth/2):a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth/2));for(x=0;x<e;x++)h=q,d[x].Width<y&&(h+=(y-d[x].Width)/2),0!=h&&(d[x].OffsetX+=h),0!=n&&(d[x].OffsetY+=n);e=a.Internal.Coordinates.getViewerScrollTop();y=a.Internal.Coordinates.getViewerScrollTopMax();
h=a.Internal.Coordinates.getViewerScrollLeft();k=a.Internal.Coordinates.getViewerScrollLeftMax();a.SetupViewerArea(d,b);a.dom.viewerArea.scrollLeft=a.Internal.Coordinates.getViewerScrollLeftMax()*(h/k);a.dom.viewerArea.scrollTop=a.Internal.Coordinates.getViewerScrollTopMax()*(e/y);d=this.Internal.Pages.getVisiblePageNumbers();if(null!=d)for(e=0;e<d.length;e++)a.DrawPage(a.cache.getPageObject(d[e]),b!==a.serverCtx.zoom)}}},ComputeNextZoom:function(b,d){for(var e=a.serverCtx.zoom,h=0;h<b;h++)e=d?e+
a.serverCtx.zoomStep/100*e:e/(a.serverCtx.zoomStep/100+1);return e},ZoomINPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!0);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomIN:function(b,d,e,h,k){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;d&&a.ZoomINPreview(b);if(e)return this.zoomInTimeout&&(clearTimeout(this.zoomInTimeout),this.zoomInTimeout=null),this.zoomInTimeout=setTimeout(function(){a.ZoomIN(b,!1,!1,h,k)},
0),DocuViewareAPI.Status.OK;d=a.ComputeNextZoom(b,!0);return this.SetCurrentZoom(d)},ZoomOUTPreview:function(b){if(!a.CanChangeZoom())return DocuViewareAPI.Status.GenericError;b=a.ComputeNextZoom(b,!1);a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomOUT:function(b,d,e,h,k){if(a.CanChangeZoom()){d&&a.ZoomOUTPreview(b);if(e)return this.zoomOutTimeout&&(clearTimeout(this.zoomOutTimeout),this.zoomOutTimeout=null),this.zoomOutTimeout=setTimeout(function(){a.ZoomOUT(b,!1,!1,h,k)},0),DocuViewareAPI.Status.OK;
d=a.ComputeNextZoom(b,!1);return this.SetCurrentZoom(d)}},ZoomRect:function(b,d,e){if(a.CanChangeZoom())return b&&b.left&&b.top&&b.width&&b.height?(b={data:{pageNo:this.GetCurrentPage(),left:b.left,top:b.top,width:b.width,height:b.height},success:function(h){a.ajax.HandleServerContextResponse("string"===typeof h?eval("("+h+")"):h,!1);d&&d()},error:function(){e&&e()}},this.ajax.PostBaseRequest("zoomrect",b,!1)):DocuViewareAPI.Status.GenericError},Rotate:function(b,d){return this.ajax.PostBaseRequest("rotate",
{data:{rotation:b,mode:d},success:function(e){a.ajax.HandleServerContextResponse("string"===typeof e?eval("("+e+")"):e,!1);if(a.callbacks.onRotationChanged)a.callbacks.onRotationChanged(a.serverCtx.renderRotation)}})},RotatePage:function(b,d,e,h){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("rotate",{data:{rotation:d,pages:b,mode:2},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?eval("("+k+")"):k,!1);e&&e()},error:function(){h&&h()}})},DeletePage:function(b,
d,e){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("deletepage",{data:{pages:b},success:function(h){a.ajax.HandleServerContextResponse("string"===typeof h?eval("("+h+")"):h,!1,!0,!0);d&&d()},error:function(){e&&e()}})},SwapPages:function(b,d,e,h){return"number"==typeof b&&"number"==typeof d?this.ajax.PostBaseRequest("swappages",{data:{page1:b,page2:d},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?eval("("+k+")"):k,!1);e&&e()},error:function(){h&&h()}}):
DocuViewareAPI.Status.GenericError},SelectPage:function(b,d){if(!(this.serverCtx.documentLoaded&&0<b&&b<=this.serverCtx.pageCount))return DocuViewareAPI.Status.GenericError;b!=this.GetLastPageNoRequest()?this.SelectPageEx(b,!0,!0,!0,!1,!1,d):d&&d();return DocuViewareAPI.Status.OK},EnsurePageVisibility:function(b){if(!this.serverCtx.singlePageView&&null!=this.cache.canvas)for(var d=0;d<this.cache.canvas.length;d++)if(this.cache.canvas[d].pageNo==b){var e=this.cache.canvas[d].top;d=this.cache.canvas[d].bottom-
e;var h=this.dom.viewerArea.offsetHeight;e=h<d?Math.round(e):Math.round(e+(d-h)/2);a.Internal.Coordinates.getViewerScrollTop()!=e&&(this.dom.viewerArea.ignoreScrollAt=e,a.Internal.Coordinates.setViewerScrollTop(e),a.showVisiblePages(b));break}},EnsurePageRegionVisibility:function(b,d,e,h,k){if((!this.serverCtx.singlePageView||b==a.GetCurrentPage())&&null!=this.cache.canvas)for(var q=0;q<this.cache.canvas.length;q++)if(this.cache.canvas[q].pageNo==b){var n=this.cache.canvas[q].top,y=this.cache.canvas[q].bottom-
n,x=this.dom.viewerArea.offsetHeight,K=this.dom.viewerArea.offsetWidth;q=0;x<y?(y=a.Internal.Pages.getRenderingState(b),d={left:d,top:e,width:h,height:k},e=a.Internal.Matrix.scale(y.contentMatrix,96,96,!1),a.Internal.Matrix.transformBBox(e,0,d),e=d.top+d.height,e>x&&(n+=e-x+2,a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth)),x=d.left+d.width,x>K&&(q=x-K+2,a.serverCtx.vScrollbarVisible&&(q+=a.dom.sbWidth)),n=Math.round(n)):n=Math.round(n+(y-x)/2);a.Internal.Coordinates.getViewerScrollTop()!=n&&(this.dom.viewerArea.ignoreScrollAt=
n,a.Internal.Coordinates.setViewerScrollTop(n),0!=q&&a.Internal.Coordinates.setViewerScrollLeft(q),a.showVisiblePages(b));break}},EnsureCurrentPageVisibility:function(){this.EnsurePageVisibility(this.GetLastPageNoRequest())},SelectPageEx:function(b,d,e,h,k,q,n){a.debug&&console.log("DocuVieware: Select page: "+b);a.Internal.Thumbnails.reinitThumbnailsSelection();if(b!=a.GetLastPageNoRequest())return h&&this.dom.updateSelectedPageFader(500,b),e&&!a.serverCtx.singlePageView&&a.EnsurePageVisibility(b),
k&&a.serverCtx.singlePageView&&(k=!1),e=this.ajax.latestSelectedPage,this.ajax.latestSelectedPage=b,b=this.ajax.PostBaseRequest("selectpage",{data:{page:b},success:function(y){a.ajax.HandleServerContextResponse("string"===typeof y?eval("("+y+")"):y,k)&&a.dom.updateThumbsStyle(d,!1);n&&n()},error:function(){}},!1,!0),b!=DocuViewareAPI.Status.OK&&(this.ajax.latestSelectedPage=e),b;a.Internal.Thumbnails.toggleThumbnailSelection(b);q&&a.DrawPage(a.cache.getPageObject(b),!1);n&&n();return DocuViewareAPI.Status.OK},
Save:function(b,d,e,h,k,q,n){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;if(""==b)return a.DisplayError(a.Localize("error__saving_filename")),DocuViewareAPI.Status.GenericError;if(""==d)return a.DisplayError(a.Localize("error__saving_file_format")),DocuViewareAPI.Status.GenericError;window.location=a.appControllerPath+"/save"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID+"&fileName="+encodeURIComponent(b)+"&format="+d+"&pageRange="+(e?e:"*")+"&dropAnnotations="+
h+"&flattenAnnotations="+k;q&&q();if(a.callbacks.onDocumentSaved)a.callbacks.onDocumentSaved();return DocuViewareAPI.Status.OK},CloseDocument:function(){return this.serverCtx.documentLoaded?this.ajax.PostBaseRequest("close",{data:{},success:function(b){a.ajax.SetNewServerCtx(null)}},!0):DocuViewareAPI.Status.GenericError},AddAnnot:function(b,d,e,h,k){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;var q=[],n=null;null!=this.Internal.Annotations.defaultAuthor&&(n={},n.author=
this.Internal.Annotations.defaultAuthor);for(var y=0;y<b.length;y++){var x=this.Internal.Annotations.mergeAnnotationProperties(b[y].type,b[y].appearance);x.left=b[y].coordinates.left;x.top=b[y].coordinates.top;x.height=b[y].coordinates.height;x.width=b[y].coordinates.width;null!=b[y].appearance.flipX&&(x.flipX=b[y].appearance.flipX,x.useClientFlipX=!0);null!=b[y].appearance.flipY&&(x.flipY=b[y].appearance.flipY,x.useClientFlipY=!0);for(var K in b[y].common)b[y].common.hasOwnProperty(K)&&(null==n&&
(n={}),n[K]=b[y].common[K]);q.push({extProperties:n,properties:x,pageNo:b[y].pageNo})}this.ajax.PostBaseRequest("newannotation",{data:{annots:q},success:function(F){if((F="string"===typeof F?eval("("+F+")"):F)&&null!=F.annots){for(var Y=[],aa=[],fa=0;fa<F.annots.length;fa++){var ca=a.Internal.Pages.getRenderingState(F.annots[fa].annotApp.pageNo);ca=a.Internal.Annotations.newController(F.annots[fa].annotApp,ca.pageLeft,ca.pageTop,ca.contentMatrix);aa.push(F.annots[fa].annotApp.pageNo);a.dom.singlePageView&&
F.annots[fa].annotApp.pageNo!==a.GetCurrentPage()||a.Internal.Pages.isPageRendered(F.annots[fa].annotApp.pageNo)&&ca.render();if(!d&&a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:F.annots[fa].annotApp.id,pageNo:F.annots[fa].annotApp.pageNo});Y.push({id:F.annots[fa].annotApp.id,pageNo:F.annots[fa].annotApp.pageNo});17==F.annots[fa].annotApp.properties.type&&(ca=F.annots[fa].annotApp,a.Internal.Annotations.addAnnotsRedactionReferences({id:ca.id,pageNo:ca.pageNo,title:ca.properties.title,
fillColor:ca.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}a.updateThumbnails(aa,!0);if(a.callbacks.onTextAnnotated&&k)a.callbacks.onTextAnnotated({userAction:k,resultAnnots:Y})}else a.ajax.HandleError(F);e&&e()},error:function(){h&&h()}},!1);return DocuViewareAPI.Status.OK},GetPageFormFields:function(b){if(b){var d=[];if(null!=a.cache.FormFields){for(var e=0;e<a.cache.FormFields.length;e++)a.cache.FormFields[e].formFieldApp.pageNo!==b&&"*"!==b||d.push({id:a.cache.FormFields[e].formFieldApp.id,
pageNo:a.cache.FormFields[e].formFieldApp.pageNo,properties:a.cache.FormFields[e].formFieldApp.properties});return d}}return DocuViewareAPI.Status.GenericError},UpdateFormFields:function(b,d,e){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;for(var h=[],k=0;k<b.length;k++)h.push({id:b[k].id,pageNo:b[k].pageNo,updateNo:k,properties:b[k].properties});this.ajax.PostBaseRequest("formfieldsdupdate",{data:{items:h},success:function(q){if(q="string"===typeof q?eval("("+q+")"):q){for(var n=
[],y=0;y<q.length;y++){a.Internal.FormFields.removeFormFieldFromCache(q[y].formFieldApp.id);var x=a.Internal.FormFields.newController(q[y].formFieldApp);a.dom.singlePageView&&q[y].formFieldApp.pageNo!==a.GetCurrentPage()||x.render();-1===n.indexOf(q[y].formFieldApp.pageNo)&&n.push(q[y].formFieldApp.pageNo);if(a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:q[y].formFieldApp.id,pageNo:q[y].formFieldApp.pageNo})}0<n.length&&a.updateThumbnails(n)}else a.ajax.HandleError(q);d&&d()},
error:function(){e&&e()}},!1);return DocuViewareAPI.Status.OK},SetAnnotationsInteractionState:function(b){b?a.Internal.Annotations.enableAll():a.Internal.Annotations.disableAll();return DocuViewareAPI.Status.OK},SetAnnotationsVisibility:function(b){return a.Internal.Annotations.setAnnotationsVisibility(b)},AddAnnotInteractive:function(b,d,e,h){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;a.ExitAnnotationDrawingMode();a.dom.UIconfig.disableAnnotationDrawingModePanel&&(5==
b?null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).addClass("button_active"):10==b?null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).addClass("button_active"):11==b?null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).addClass("button_active"):16==b&&null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).addClass("button_active"));d?(b=this.Internal.Annotations.mergeAnnotationProperties(b,d),e?
this.Internal.Annotations.showAnnotationPropertiesUI(b,null,null,h):this.Internal.Annotations.beginAddAnnotInteractive(b)):this.Internal.Annotations.defaultProperties[b].autoCreate?this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b]):this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],null);return DocuViewareAPI.Status.OK},EditAnnotInteractive:function(b,d){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.GenericError;
var e=dvJQuery.extend(!0,{},this.Internal.Annotations.defaultProperties[b.annotApp.properties.type]);dvJQuery.each(e,function(h,k){e[h]=b.annotApp.properties[h]});return this.Internal.Annotations.showAnnotationPropertiesUI(e,!0,b,d)},DeleteAnnotationById:function(b,d){d="undefined"===typeof d?!0:d;if(b&&null!=a.cache.Annots)for(var e=d?this.GetCurrentPage():-1,h=0;h<a.cache.Annots.length;h++){var k=a.cache.Annots[h];if((!d||k.annotApp.pageNo==e)&&k.annotApp.id==b)return this.DeleteAnnotations([k])}return DocuViewareAPI.Status.GenericError},
DeleteAnnotations:function(b){if(b&&0<b.length){for(var d=[],e=1;e<b.length;e++)d.push(b[e]);return b[0].updateAnnotation(!0,null,!1,d)}return DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(){a.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK},UpdateAnnotationById:function(b,d){if(b&&null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var h=a.cache.Annots[e];if(h.annotApp.id==b)return h.updateAnnotationDeferred(!1,d)}return DocuViewareAPI.Status.GenericError},
GetAnnotationProperties:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id==b)return e.annotApp.properties}return DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(b){var d=0;if(null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++)a.cache.Annots[e].annotApp.pageNo===b&&d++;return d},GetPageAnnotId:function(b,d){var e=0;if(null!=a.cache.Annots)for(var h=0;h<a.cache.Annots.length;h++){var k=a.cache.Annots[h];
if(k.annotApp.pageNo===b){if(e===d)return k.annotApp.id;e++}}return DocuViewareAPI.Status.GenericError},GetAnnotationClientTag:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id==b)return e.annotApp.clientTag}return DocuViewareAPI.Status.GenericError},SetAnnotationClientTag:function(b,d){if(b&&null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var h=a.cache.Annots[e];if(h.annotApp.id==b)return h.annotApp.clientTag=d,
h.updateAnnotationDeferred(!1,h.annotApp.properties)}return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(){a.Internal.Redaction.disableAddRedactionMarksMode();return a.ajax.PostBaseRequest("redact",{data:{},success:function(b){var d="string"===typeof b?eval("("+b+")"):b;if(d&&d.status===DocuViewareAPI.Status.OK){if(a.callbacks.onRedactionMarksApplied)a.callbacks.onRedactionMarksApplied();a.ajax.HandleServerContextResponse("string"===typeof b?eval("("+b+")"):b,!1)}else a.ajax.HandleError(b)},
error:function(b){a.ajax.HandleError(b)}},!1)},HasPendingRedactionMark:function(){return a.Internal.Redaction.hasPendingRedactionMark()},EnableAnnotEditionOnDblClick:function(b){if("boolean"==typeof b)this.dom.enableAnnotEditionOnDblClick=b;else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotAutoCreate:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultProperties[b[d]].autoCreate=!1;else for(d=0;d<Object.keys(this.Internal.Annotations.defaultProperties).length;d++)this.Internal.Annotations.defaultProperties[d].autoCreate=
!1;return DocuViewareAPI.Status.OK},ResetAnnotToDefault:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultProperties[b[d]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([b[d]]);else for(d=0;d<Object.keys(this.Internal.Annotations.defaultProperties).length;d++)this.Internal.Annotations.defaultProperties[d]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(d);return DocuViewareAPI.Status.OK},SetAnnotDefaultAuthor:function(b,d){this.Internal.Annotations.setDefaultAuthor(b);
this.dom.commentsAuthorInput.disabled=!0===d?!0:!1;return DocuViewareAPI.Status.OK},SetAnnotPropertiesValues:function(b,d){if(d)this.Internal.Annotations.setDefaultPropertiesValues(b,d);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},GetAnnotPropertiesValues:function(b){return null!=b&&0<=b&&17>=b?this.Internal.Annotations.getAnnotPropertiesValues(b):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(b,d){if(d)this.Internal.Annotations.setDefaultPropertiesToDisplay(b,
d);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotPropertiesToDisplayDefault:function(b){if(0<b.length)for(var d=0;d<b.length;d++)this.Internal.Annotations.defaultPropertiesDisplay[b[d]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([b[d]]);else for(d=0;d<Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length;d++)this.Internal.Annotations.defaultPropertiesDisplay[d]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(d);
return DocuViewareAPI.Status.OK},EnableAnnotMultiSelect:function(b){a.Internal.Annotations.multiSelectionEnabled=b},FocusAnnot:function(b,d,e){if(b&&null!=a.cache.Annots){if(null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length&&null!=a.cache.AnnotsComments)for(var h=0;h<a.cache.AnnotsComments.length;h++){var k=a.cache.AnnotsComments[h];if(k.annotApp.id===b){d&&a.Internal.Annotations.selectAnnotationCommentById(b,e,e);var q=k.annotApp.pageNo;return a.SelectPage(q,function(){var y=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(k.annotApp,
!0);null!=y&&(d&&y.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(y.id)),e&&a.EnsurePageRegionVisibility(q,y.bbox.Left,y.bbox.Top,y.bbox.Width,y.bbox.Height))})}}for(h=0;h<a.cache.Annots.length;h++){var n=a.cache.Annots[h];if(n.annotApp.id===b){if(n.annotApp.visible)return q=n.annotApp.pageNo,a.SelectPage(q,function(){e&&a.EnsurePageRegionVisibility(q,n.annotApp.bbox.Left,n.annotApp.bbox.Top,n.annotApp.bbox.Width,n.annotApp.bbox.Height);d&&a.Internal.Annotations.selectById(n.annotApp.id)});
break}}}return DocuViewareAPI.Status.GenericError},UnselectAnnot:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return a.Internal.Annotations.unselectById(e.annotApp.id)}return DocuViewareAPI.Status.GenericError},GetAnnotBBoxOnViewer:function(b){if(b&&null!=a.cache.Annots)for(var d=0;d<a.cache.Annots.length;d++){var e=a.cache.Annots[d];if(e.annotApp.id===b)return e.getBBoxOnViewer()}return DocuViewareAPI.Status.GenericError},
GetTwainAcquisitionServiceInfo:function(b,d){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"ServiceVersion/",success:function(e){e?b&&b(e):d&&d()},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}});return DocuViewareAPI.Status.OK},GetTwainAcquisitionSources:function(b,d){a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"GetTwainSources/",success:function(e){if(e){if(b){if(null!=
e.GetTwainSourcesResult&&null!=e.GetTwainSourcesResult.sources)for(var h=0;h<e.GetTwainSourcesResult.sources.length;h++)e.GetTwainSourcesResult.sources[h].is64bit&&(e.GetTwainSourcesResult.sources[h].sourceName+=" (64-bit)");b(e)}}else d&&d(e)},error:function(){d&&d({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}})},GetTwainSourceList:function(){var b=null;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+
"GetTwainSources/",async:!1,timeout:5E3,success:function(d){if(d&&d.GetTwainSourcesResult){if(null!=d.GetTwainSourcesResult&&null!=d.GetTwainSourcesResult.sources)for(var e=0;e<d.GetTwainSourcesResult.sources.length;e++)d.GetTwainSourcesResult.sources[e].is64bit&&(d.GetTwainSourcesResult.sources[e].sourceName+=" (64-bit)");b=d.GetTwainSourcesResult}}});return b},TwainGetClientInfo:function(){var b=null;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"GetTwainClientInfo/",async:!1,
timeout:5E3,success:function(d){d&&d.GetTwainClientInfoResult&&(b=d.GetTwainClientInfoResult)}});return b},TwainGetLocalServiceStatus:function(){var b=DocuViewareAPI.LocalServiceStatus.NotFound;a.ajax.PostAjaxRequestForCrossDomainApp({url:a.twainServiceUri32+"ServiceVersion/",async:!1,timeout:5E3,success:function(d){b=d&&d.ServiceVersionResult?parseInt(d.ServiceVersionResult)>=a.twainServiceSupportedVersion?DocuViewareAPI.LocalServiceStatus.Ready:DocuViewareAPI.LocalServiceStatus.WrongVersion:DocuViewareAPI.LocalServiceStatus.NotFound}});
return b},DownloadTwainServiceSetup:function(){window.location=a.appControllerPath+"/twainservicesetupdownload"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID;return DocuViewareAPI.Status.OK}};a.resetServerCtx();if(a.dom.thumbnailArea){c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);a.isIOS&&(c.style.overflow="auto");var C=null;dvJQuery(c).bind("scroll",function(b){null!=C&&clearTimeout(C);C=setTimeout(function(){a.showVisibleThumbnails()},a.fastMode?50:400)});a.dom.UIconfig.enableMultipleThumbnailSelection&&
(a.dom.thumbnailSelectBox=dvJQuery("<div/>").appendTo(c).css("position","absolute").css("border","1px solid "+a.dom.UIconfig.activeSelectedColorHover).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).css("display","none"),c.onmousedown=a.events.onThumbnailAreaMouseDownHandler,c.onmousemove=a.events.onThumbnailAreaMouseMoveHandler,c.onmouseup=a.events.onThumbnailAreaMouseUpHandler);a.dom.UIconfig.enableThumbnailDragDrop&&dvJQuery(a.dom.thumbnailArea).sortable({placeholder:"highlight",
forcePlaceholderSize:!0,tolerance:"pointer",helper:function(b,d){b=dvJQuery("<div>");var e=dvJQuery("<div>");e.css({position:"relative",width:"100%",height:"100%"});d=d.find("canvas");var h=d.get(0).toDataURL("image/png");h=dvJQuery('<img src="'+h+'"/>');h.css({position:"absolute",left:"0px",top:"0px",opacity:"0.5",width:d.width()/2+"px",height:d.height()/2+"px"});e.html(h);b.html(e);b.width(d.width()/2);b.height(d.height()/2);return b},start:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()&&
(a.dom.resetThumbStyle(d.placeholder,!0),d.placeholder.width(d.item.width()),d.item.attr("data-moving","true"),b=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),a.Internal.Thumbnails.isThumbnailSelected(b)||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.Internal.Thumbnails.selectThumbnail(b)),b=a.GetSelectedThumbnailItems(),0!=b.length)){for(var e=0;e<b.length;e++){var h=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);null!=h&&h.css("opacity","0.5")}b=dvJQuery("<span>"+b.length+"</span>");
b.css({padding:"6px",color:"white",border:"1px solid white",position:"absolute",opacity:"0.95","background-color":a.dom.UIconfig.activeSelectedColor,right:"10%",bottom:"10%","-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px"});dvJQuery(d.helper).children(0).append(b)}},update:function(b,d){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){var e=d.item.index()+1,h=a.GetSelectedThumbnailItems();if(1!=h.length||h[0]!==e)dvJQuery(a.dom.thumbnailArea).sortable("disable"),
a.ajax.PostBaseRequest("movepage",{data:{source:h,dest:e},success:function(k){dvJQuery(a.dom.thumbnailArea).sortable("enable");a.ajax.HandleServerContextResponse("string"===typeof k?eval("("+k+")"):k,!1,!0,!0);if(a.callbacks.onThumbnailsOrderChanged)a.callbacks.onThumbnailsOrderChanged({source:h,destination:e})},error:function(){dvJQuery(a.dom.thumbnailArea).sortable("enable")}},!1)}},stop:function(b,d){d.item.attr("data-moving","false");b=a.GetSelectedThumbnailItems();if(0!=b.length)for(var e=a.Internal.Thumbnails.getThumbnailPage(d.item.get(0)),
h=d.item,k=0;k<b.length;k++){var q=b[k],n=a.Internal.Thumbnails.getThumbnailFromPageNo(q);q!=e&&(q<e?d.item.before(n):h.after(n));h=n;h.css("opacity","1")}}})}a.events.pageRequestTimeout=null;a.events.onViewScroll=function(){a.events.pageRequestTimeout&&clearTimeout(a.events.pageRequestTimeout);if(!(0!=this.ignoreScrollAt&&this.scrollTop==this.ignoreScrollAt||null==a.serverCtx||a.serverCtx.singlePageView||!a.serverCtx.documentLoaded||a.Internal.Files.uploading||a.ajax.downloading||a.events.isZoomingPreview||
null!=a.selectNextPageActions&&0!=a.selectNextPageActions||null!=a.selectPreviousPageActions&&0!=a.selectPreviousPageActions)){var b=-1;if(null!=a.cache.canvas)for(var d=!1,e=a.Internal.Coordinates.getViewerScrollTop()+a.dom.viewerArea.offsetHeight/2,h=0;h<a.cache.canvas.length;h++){for(var k=0;k<a.cache.canvas[h].canvas.length;k++){var q=parseFloat(a.cache.canvas[h].canvas[k].tile.style.top),n=q+parseFloat(a.cache.canvas[h].canvas[k].tile.style.height);if(q<e&&n>e){b=a.cache.canvas[h].pageNo;a.dom.updateSelectedPageFader(0,
b);d=!0;break}}if(d)break}a.events.pageRequestTimeout=setTimeout(function(){0<b&&b<=a.serverCtx.pageCount&&b!=a.GetLastPageNoRequest()?a.SelectPageEx(b,!0,!1,!0,!0):a.showVisiblePages(b)},a.fastMode?50:500);a.previewVisiblePages();if(a.callbacks.onViewerScroll)a.callbacks.onViewerScroll()}};dvJQuery(a.dom.viewerArea).bind("scroll",a.events.onViewScroll);dvJQuery(a.dom.viewerArea).dvContextMenu({idMenu:"viewerContextMenu"+a.uniqueID,referrer:a.dom.viewerArea,dependsOnTextSelection:!0,beforeShow:function(){return null!=
a.Internal.Text.getSelectedText()},translateMouse:function(b){var d=a.dom.viewerArea.getBoundingClientRect(),e=dvJQuery(document.getElementById("viewerContextMenu"+a.uniqueID));b.x=b.x-d.left+a.dom.viewerArea.offsetLeft+5;b.y=b.y-d.top+a.dom.viewerArea.offsetTop+5;d=e.width();b.x+d>a.dom.viewerArea.clientWidth&&(b.x-=b.x+d-a.dom.viewerArea.clientWidth+5)}});sa(a);dvJQuery("#"+t).on("dragenter",function(b){b.stopPropagation();b.preventDefault()});dvJQuery("#"+t).on("dragover",function(b){b.stopPropagation();
b.preventDefault()});if(ja)dvJQuery("#"+t).on("drop",function(b){b.originalEvent&&b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files&&(b.preventDefault(),(b=b.originalEvent.dataTransfer.files)&&1<=b.length&&a.Internal.Files.uploadFile(b[0],0))});else dvJQuery("#"+t).on("drop",function(b){b.preventDefault()});dvJQuery(a.dom.viewerArea).on("keydown",function(b){(b.metaKey||b.ctrlKey)&&"c"===String.fromCharCode(b.which).toLowerCase()?(a.CopySelectedTextToClipboard(),b.preventDefault()):
(b.metaKey||b.ctrlKey)&&"a"===String.fromCharCode(b.which).toLowerCase()?(a.dom.SelectedTextRegions.clear(1),a.Internal.Text.captureAndHighlightSelectedText(-1,-1,-1,-1,!0,!1),b.preventDefault()):a.events.isDrawingPath&&(b.metaKey||b.ctrlKey)&&"z"===String.fromCharCode(b.which).toLowerCase()&&(a.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath(),b.preventDefault())});a.dom.pageNavBox&&a.dom.pageNavBox.id&&dvJQuery(a.dom.pageNavBox).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),
b=parseInt(a.dom.pageNavBox.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBox.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBox.value=b)});a.dom.pageNavBoxMobile&&a.dom.pageNavBoxMobile.id&&dvJQuery(a.dom.pageNavBoxMobile).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBoxMobile.value),a.serverCtx.documentLoaded&&
b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBoxMobile.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBoxMobile.value=b)});a.dom.searchValueInput&&dvJQuery(a.dom.searchValueInput).keypress(function(b){if(13==(b.keyCode||b.which)){b.preventDefault();b=a.dom.searchValueInput.value;var d=a.dom.searchWholeWordInput.checked,e=a.dom.searchCaseSensitiveInput.checked,h=a.dom.searchAnyWordInput.checked,
k=dvJQuery(a.dom.searchPageSelect).filter(":checked").val();a.SubmitSearch(b,d,e,h,k)}});a.dom.addressBar&&dvJQuery(a.dom.addressBar).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),a.LoadFromUri(a.dom.addressBar.value,"",null,null,null,!0))});"ontouchstart"in document.documentElement?(dvJQuery(a.dom.mainArea).find(".dv-button").on("touchstart",function(b){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()}),dvJQuery(a.dom.mainArea).find(".dv-button").on("touchend",function(b){dvJQuery(this).removeClass("button_hover");
a.dom.updateButtons()})):dvJQuery(a.dom.mainArea).find(".dv-button").hover(function(){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()},function(){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()});a.dom.leftSideArea&&(dvJQuery(a.dom.leftSideArea).resizable({containment:dvJQuery(a.dom.controlArea),handles:{e:dvJQuery(a.dom.leftSideResizeBar)},minWidth:null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0,start:function(b,d){a.hasPendingAction()?b.preventDefault():
a.events.isResizingUI=!0},resize:function(b,d){b=null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0;d.size.width<b+30&&(d.size.width=b);a.NewViewerSizePreview()},stop:function(b,d){a.events.isResizingUI=!1;d.size.width<(null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0)+30&&a.SetSnapinsPanelVisibility(!1,d.originalSize.width);a.events.onNewViewerSize();a.dom.sidePanelResized()}}),a.dom.searchArea&&dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(b){dvJQuery(this).css("background-color",
"transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(b){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image",
"-webkit-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+" 0%,"+a.dom.UIconfig.panelDarkerBackColor+" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+
")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)})}}),a.dom.UIconfig.collapsedSnapInPanel&&(dvJQuery(a.dom.leftSideArea).resizable("disable"),a.dom.leftSideArea.oldWidth=a.dom.UIconfig.snapInPanelDefaultWidth));c=document.getElementsByName("inputSelectedPages"+a.uniqueID);for(var J=0;J<c.length;J++)c[J].onchange=function(b){a.pageRangeSelection(this.value,document.getElementById("savePageRangeInput"+
a.uniqueID))};document.getElementById("savePageRangeInput"+a.uniqueID).onkeyup=function(b){a.inputPageRangeControl(b.target)};document.getElementById("save_extension_select"+a.uniqueID).onchange=Aa;document.getElementById("save_content_select"+a.uniqueID).onchange=Aa;document.getElementById("save_extension_select"+a.uniqueID).onchange();c=document.getElementsByName("inputPrintSelectedPages"+a.uniqueID);for(J=0;J<c.length;J++)c[J].onchange=function(b){a.pageRangeSelection(this.value,a.dom.printPageRangeInput)};
c=document.getElementsByName("inputTwainAcquisitionDestination"+a.uniqueID);for(J=0;J<c.length;J++)c[J].onchange=function(b){"1"===b.target.value&&b.target.checked?dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!1).removeClass("dvUi-state-disabled").addClass("dvUi-state-default").css("opacity",1):dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",
.3)};a.dom.printPageRangeInput.onkeyup=function(b){a.inputPageRangeControl(b.target)};a.dom.progressbar=new DocuViewareProgressbar({bg:"#acf",target:a.dom.controlArea,id:"progressbar"+a.uniqueID});"undefined"!=typeof a.dom.toolBarArea&&null!=a.dom.toolBarArea&&dvJQuery(a.dom.toolBarArea).bind("touchstart",function(b){var d=b.timeStamp,e=dvJQuery(this).data("lastTouch")||d;e=d-e;var h=b.originalEvent.touches.length;dvJQuery(this).data("lastTouch",d);!e||500<e||1<h||(b.preventDefault(),dvJQuery(this).trigger("click").trigger("click"))});
a.dom.viewerArea.cursorMgr=CreateDocuViewareCursorManager(a.dom.viewerArea,a.isIEorEdge);a.dom.updateSinglePageModeButton();null!=a.dom.zoomInButton&&(dvJQuery(a.dom.zoomInButton).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButton).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomInButtonMobile&&
(dvJQuery(a.dom.zoomInButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButtonMobile).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButton&&(dvJQuery(a.dom.zoomOutButton).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButton).bind("touchend",
function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButtonMobile&&(dvJQuery(a.dom.zoomOutButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButtonMobile).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));
a.dom.panDiv=document.createElement("div");a.dom.panDiv.style.display="block";a.dom.panDiv.style.position="absolute";a.dom.panDiv.style.height="100%";a.dom.panDiv.style.width="100%";a.dom.panDiv.style.left="0px";a.dom.panDiv.style.top="0px";a.dom.panDiv.style.padding="0px";a.dom.panDiv.style.margin="0px";a.isIE&&(a.dom.panDiv.style.backgroundColor="rgba(255,255,255,0.01)");a.dom.mainArea.addEventListener("touchstart",function(b){1<b.touches.length&&(a.events.disableSingleInputEvents=!0,a.Internal.Annotations.unselectAll());
2===b.touches.length&&(!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.isZoomingPreview=!0,a.events.isZoomingPreviewTouchMode=!0,a.events.enableZoomPreviewAutoSubmitter(),a.events.twoFingersDistStart=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),a.events.prevTwoFingersDist=null),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchend",function(b){a.events.disableSingleInputEvents&&(a.events.disableSingleInputEvents=!1);a.events.isZoomingPreview&&
a.events.isZoomingPreviewTouchMode&&(a.events.isZoomingPreview=!1,a.events.isZoomingPreviewTouchMode=null,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchmove",function(b){if(2===b.touches.length){if(a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode){var d=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),e=!0;null!=a.events.prevTwoFingersDist&&(e=5<Math.abs(d-a.events.prevTwoFingersDist));
e&&(a.ZoomPreview(d/a.events.twoFingersDistStart*a.serverCtx.zoom),a.events.prevTwoFingersDist=d)}b.cancelable&&b.preventDefault()}});a.dom.mainArea.addEventListener("wheel",function(b){if(b.ctrlKey){!a.events.isZoomingPreview&&a.CanChangeZoom()&&(a.events.enableZoomPreviewAutoSubmitter(),a.events.isZoomingPreview=!0,a.events.zoomPreviewWheelValue=0);if(a.events.isZoomingPreview&&null!=a.events.zoomPreviewWheelValue){0>b.deltaY?a.events.zoomPreviewWheelValue++:a.events.zoomPreviewWheelValue--;var d=
0<=a.events.zoomPreviewWheelValue?a.ComputeNextZoom(a.events.zoomPreviewWheelValue,!0):a.ComputeNextZoom(Math.abs(a.events.zoomPreviewWheelValue),!1);a.ZoomPreview(d)}b.preventDefault()}});window.addEventListener("keyup",function(b){"Control"==b.key&&a.events.zoomPreviewWheelValue&&a.events.isZoomingPreview&&(a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.preventDefault())});a.dom.snapinButtonStrip&&(a.dom.snapinButtonStrip.tabFocus=0,a.dom.snapinButtonStrip.addEventListener("keydown",
function(b){if(38===b.keyCode||40===b.keyCode){var d=a.dom.snapinButtonStrip.childNodes;d[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",-1);40===b.keyCode?(a.dom.snapinButtonStrip.tabFocus++,a.dom.snapinButtonStrip.tabFocus>=d.length&&(a.dom.snapinButtonStrip.tabFocus=0)):38===b.keyCode&&(a.dom.snapinButtonStrip.tabFocus--,0>a.dom.snapinButtonStrip.tabFocus&&(a.dom.snapinButtonStrip.tabFocus=d.length-1));d[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",0);d[a.dom.snapinButtonStrip.tabFocus].focus()}}));
a.dom.pageBoundsDiv=document.createElement("div");a.dom.pageBoundsDiv.style.display="block";a.dom.pageBoundsDiv.style.position="absolute";a.dom.pageBoundsDiv.style.padding="0px";a.dom.pageBoundsDiv.style.margin="0px";a.dom.pageBoundsDiv.style.display="none";a.dom.pageBoundsDiv.style.borderStyle="solid";a.dom.pageBoundsDiv.style.borderColor=a.dom.UIconfig.strokeColor;a.dom.pageBoundsDiv.style.borderWidth="2px";a.dom.panDiv.appendChild(a.dom.pageBoundsDiv);a.dom.rlink=document.createElement("canvas");
a.dom.rlink.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()-1;a.dom.rlink.style.position="absolute";a.dom.rlink.style.height="0px";a.dom.rlink.style.width="0px";a.dom.rlink.style.left="0px";a.dom.rlink.style.top="0px";a.dom.rlink.style.padding="0px";a.dom.rlink.style.margin="0px";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderColor="red";a.dom.rlink.style.borderWidth="1px";a.dom.rlink.style.display="none";a.dom.panDiv.appendChild(a.dom.rlink);a.Internal.Selection.selectionArea.init(a.dom.panDiv);
a.events.forwardMouseEventsToViewer(a.dom.panDiv);a.dom.viewerArea.appendChild(a.dom.panDiv);a.events.onLoad(R);DocuViewareUtilities.addEvent(window,"resize",a.events.onResize);setTimeout(a.events.UIStateVerifier,1E3);document.getElementById(t).control=a}};
